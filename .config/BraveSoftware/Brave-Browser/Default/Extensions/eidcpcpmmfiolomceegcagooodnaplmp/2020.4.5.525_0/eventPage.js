let e,t=0,n=[],r=null,o=null,a=!1,s=new Map,c=new Set;function i(){Z(t=>{t.url.match(/^chrome|^about/)?m(e.browserPage.message):t.url.match(/^https:\/\/(chrome.google.com\/webstore|addons.mozilla.org|addons.opera.com)/)?m(e.storePage.message):(chrome.tabs.detectLanguage(n=>{chrome.runtime.lastError||Q(n)?E({operation:"addToFeed",time:Date.now()/1e3|0,url:t.url,favIconUrl:t.favIconUrl,title:t.title,tabId:t.id,lang:"und"!==n?n:""}):m(e.languageNotSupported.message)}),chrome.tabs.insertCSS({file:"progress.css"}),chrome.tabs.insertCSS({file:"snackbar.css"}))})}function l(e){const t=e.target.result;if(0===e.oldVersion){const e=t.createObjectStore("voice-preview",{keyPath:"id"});e.createIndex("id","id",{unique:!0}),e.transaction.oncomplete=function(){u().then(e=>{for(const n of function*(e){for(const t of e.querySelectorAll("[data-lang]"))yield t.dataset.lang}(e))for(const r of d(e,n,"onupgradeneeded"))g((r.locale||n)+"-"+r,t)})},t.createObjectStore("articles")}else 1===e.oldVersion&&(t.deleteObjectStore("articles"),t.createObjectStore("articles"),chrome.storage.sync.get(e=>{for(const t in e)t.match(/\d/)&&ne(t,e[t])}))}async function u(){if(u.dom)return u.dom;const e=await fetch(chrome.runtime.getURL("popup.html")),t=await e.text(),n=(new DOMParser).parseFromString(t,"text/html");return u.dom=n,n}chrome.storage.sync.get("lang",t=>(function e(t,n){return fetch(chrome.runtime.getURL(`_locales/${t}/messages.json`)).then(e=>e.json()).then((function(e){return{messages:e,isFallback:n}})).catch(t=>e("en",!0))})(t.lang||function(){if("pt"===navigator.language)return"pt_PT";return navigator.language.slice(0,2)}()).then(t=>e=t.messages).then(y)),chrome.contextMenus.onClicked.addListener(e=>{i()}),chrome.runtime.onMessage.addListener(t=>{switch(t.fromPopup){case"_initArticles":p(t.id_token,t.history);break;case"_cacheVoicePreview":indexedDB.open("intelligent-speaker").onsuccess=e=>g(t.id,e.target.result);break;case"_cacheExisting":!function(e,t,n,r,o){j(e,n,r,o).then(n=>M(n,t,!1,{hashArticle:e,lenChunks:r}))}(t.hashArticle,+t.id,t.voice,+t.lenChunks,t.idToken);break;case"getStatus":chrome.runtime.sendMessage({toPopup:{isPaused:r?r.paused:null,index:r&&r.dataset.index,hasNextChunk:U()&&4===U().readyState,audioCurrentFeedEntityId:o,isPreparingPlaying:a,stillAddingToFeed:[...s]}});break;case"addToFeed":t.prefix||(s.set(t.time,{favIconUrl:t.favIconUrl,url:t.url,title:t.title}),E({operation:t.fromPopup,time:t.time,url:t.url,favIconUrl:t.favIconUrl,title:t.title,lang:t.lang}));break;case"playFromFeed":r&&R(),_(+t.id);break;case"downloadLocalOGGFromIndexedDB":!function(e){const t=e=>e.substring(0,90).replace(/[:|*?\\"]/g,"-")+".ogg",n=(e,r)=>{chrome.downloads.download({url:e,filename:t(r),saveAs:!0},t=>{t||"Invalid filename"!==chrome.runtime.lastError.message||n(e,"intelligent-speaker")})},r=t=>{ae(+e).then(async e=>{const t=1==e.cache.length?e.cache[0]:new Blob(await async function(e){return await Promise.all(e.map(ie))}(e.cache),{type:"audio/ogg"}),r=URL.createObjectURL(t);n(r,e.title)})},o={permissions:["downloads"]};chrome.permissions.contains(o,e=>{e?r():chrome.permissions.request(o,e=>e&&r())})}(t.id);break;case"togglePlayedStatus":I(+t.id,t.val);break;case"resume":r.play();break;case"pause":r.pause();break;case"stopPlaying":R();break;case"prevChunk":O();break;case"nextChunk":A();break;case"alterPlaybackRate":q(t.value);break;case"buildContextMenu":y()}if(!t.fromPopup||t.prefix)return Q(t.lang)||t.prefix?void function(t){chrome.storage.sync.get(n=>{const r=r=>(async function(t,n){const r=await async function(e,t){const n=await u();if(e){const t=e[(r=e.length,Math.random()*r|0)],o=n.querySelector(`[data-voice="${t}"]`);return new h(t,o.dataset.locale,"true"===o.dataset.free)}var r;return d(n,t,"_getVoice").next().value}((t.voices||{})[n.lang],n.lang);let a=z+"addtofeed/";const c={Authorization:t.id_token,"Content-Type":"application/json"},i=JSON.stringify({utc:n.time,title:n.title,urlOfPage:n.url,favIconUrl:n.favIconUrl,lang:n.lang,voice:r,locale:r?r.locale:await k(t.voices),breathing:t.breathing,stringForVoicing:n.stringForVoicing,prefix:n.prefix});fetch(a,{method:"POST",headers:c,body:i}).then(t=>{if(t.ok)return s.delete(n.time),t.json().then((function(t){if("PAYMENT_REQUIRED"===t.status_code&&(!function(){const t=chrome.runtime.getManifest().short_name.split("").join(" ")+"\n\n"+e.msg_exhausted_title.message+"\n\n"+e.msg_exhausted_body.message;chrome.storage.sync.get(e=>{const n="https://intelligent-speaker.com/pricing?id_token="+e.id_token+"&refresh_token="+e.refresh_token;chrome.tabs.executeScript({code:"if(confirm(`"+t+'`)) location.href = "'+n+'"'})})}(),F(n.time)),!t.presigned_urls)return R(),"TEXT_LENGTH_IS_ZERO"===t.status_code&&(m(e.snackbar_error_noTextHere.message),chrome.runtime.sendMessage({toPopup:{playingFinished:!0,removeStub:!0}}),F(n.time)),t.errorMessage&&f(),n.tabId&&S(n.tabId),void chrome.runtime.sendMessage({toPopup:{errorAddingToFeed:!0}});const{hashArticle:r,lenChunks:o}={hashArticle:(a=t.presigned_urls)[0].split("/")[4],lenChunks:a.length};var a;ne(n.time,{url:n.url,favIconUrl:n.favIconUrl,title:n.title,hashArticle:r,lenChunks:o,isNew:!0}),M(t.presigned_urls,n.time),chrome.runtime.sendMessage({toPopup:"addedToFeed",hashArticle:r,lenChunks:o}),n.tabId&&S(n.tabId,"snackbar_addedToFeed")}));f()}).catch(e=>{throw m("Server unavailable, please try again"),S(n.tabId),chrome.runtime.sendMessage({toPopup:{playingFinished:!0,errorAddingToFeed:!0}}),o=null,s.delete(n.time),F(n.time),e})})(Object.assign(n,r),t),a=e=>{throw m("Intelligent Speaker: error"),S(t.tabId),o=null,F(t.time),chrome.runtime.sendMessage({toPopup:{playingFinished:!0,removeStubFromFeed:!0}}),e},c=e=>{X(n).then(e=>{r(e).catch(e=>a(e))})};if(n.isCognitoWasOpenedFromAnon)Y(te("email",n)).then(e=>{e?r(e).catch(e=>a(e)):c()});else if(n.state)Y(n.state).then(e=>r(e)).catch(e=>a(e));else{if(!n.id_token){const e=String(crypto.getRandomValues(new Uint32Array(3))).replace(/,/g,"");return chrome.storage.sync.set({state:e}),void function(e){chrome.tabs.create({url:"https://auth.intelligent-speaker.com/signup?response_type=code&client_id="+J+"&redirect_uri="+G+"&state="+e})}(e)}c()}})}(t):(s.clear(),m(e.languageNotSupported.message),S(t.tabId),void chrome.runtime.sendMessage({toPopup:{errorAddingToFeed:!0,reason:e.languageNotSupported.message}}))}),chrome.runtime.onInstalled.addListener(e=>{"install"===e.reason?(fetch(`${z}createanonaccount`,{method:"POST"}).then(e=>e.json()).then(e=>{chrome.storage.sync.set(e)}),chrome.storage.sync.set({playbackRate:1,breathing:!0,chars_left:60*H},e=>{chrome.runtime.setUninstallURL(K)})):"update"===e.reason&&chrome.storage.sync.get(async e=>{const t={};Object.entries(e.voices).forEach(([e,n])=>{"string"==typeof n&&(t[e]=[n])}),chrome.storage.sync.set({voices:t}),fetch(`${W}settings`,{method:"PUT",headers:{Authorization:(await X()).id_token,"Content-Type":"application/json"},body:JSON.stringify({voices:t})})}),indexedDB.open("intelligent-speaker",2).onupgradeneeded=l});class h{constructor(e,t,n){this.voice=e,this.locale=t,this.free=n}toString(){return this.voice}toJSON(){return this.voice}match(e){return this.voice.match(e)}}function*d(e,t,n){if(!t)throw new Error(`_getVoicesFromDOM: no lang; callee: ${n}`);for(const n of e.querySelectorAll(`[data-lang=${t}] [data-voice]`))yield new h(n.dataset.voice,n.dataset.locale,"true"===n.dataset.free)}function g(e,t){fetch(`https://intelligent-speaker.com/voice-preview/${e}.ogg`).then(n=>(n.ok||setTimeout(g,999,e,t),n.blob())).then(n=>t.transaction("voice-preview","readwrite").objectStore("voice-preview").add({id:e,blob:n})).catch(n=>setTimeout(g,999,e,t))}function p(e,t=[]){t.forEach((t,n)=>{setTimeout(n=>j(t.hash_article,t.voice,t.len_chunks,e).then(e=>M(e,t.utc)),4e3*n),ne(t.utc,function(e){return{hashArticle:e.hash_article,lenChunks:e.len_chunks,title:e.title,voice:e.VO,url:e.url_article,favIconUrl:e.favIconUrl,isNew:e.isNew}}(t))}),chrome.runtime.sendMessage({toPopup:{_fillListAudio:!0}})}function m(e){chrome.tabs.executeScript({code:`alert(\`${e}\`)`},e=>chrome.runtime.lastError&&void 0)}function f(){m("                    Intelligent Speaker text-to-speech:\n\nServer Error. We have been notified about it. Sorry!\n\nPlease, try again later.\n\nWe appreciate you are with us\nand we want to make sure our product brings joy and satisfaction to users!")}function y(){chrome.contextMenus.create({title:e.addToFeed.message,id:"root",contexts:["all"]},e=>{chrome.runtime.lastError})}class b extends Audio{play(){return r=this,new Promise((e,t)=>{chrome.storage.sync.get(n=>{this.playbackRate=n.playbackRate,super.play().then(e).catch(t)})})}pause(){super.pause(),dispatchEvent(new Event("pauseOrStop"))}}async function k(e=[]){const t={};for(const n of Object.values(e))for await(const[e,r]of w(n))t[e]=r;return t}async function*w(e){for(const t of e)yield[t,await v(t)]}async function v(e){return(await u()).querySelector(`[data-voice="${e}"]`).dataset.locale}function S(t,n){t&&chrome.tabs.sendMessage(t,{"snackbar--text":n&&e[n].message})}function _(e){ae(e).then(t=>{if(!t)throw"playFromFeed: no feedEntity by id: "+e;const n=t.cache?t.cache.map(e=>URL.createObjectURL(e)):[];chrome.storage.sync.get(r=>{t.cache&&t.lenChunks===t.cache.length?x(e,t.hashArticle,t.lenChunks,n):x(e,t.hashArticle,t.lenChunks,n,c.has(e)?null:X(r).then(e=>j(t.hashArticle,t.voice,t.lenChunks,e.id_token)))}),t.isNew&&I(e,!1)}),o=e}function x(e,r,o,a,s){s&&s.then(t=>M(t,e,!0));for(let c=0;c<o;c++)n[c]=new b,n[c].dataset.index=c,t=Date.now(),setTimeout(t=>{if(a[c]){if(!n[c])return;n[c].src=a[c]}else N(e,c).then(e=>{n[c].src=e}).catch(e=>{s&&s.then(e=>{e.forEach((e,t)=>{e||a.set(t,e)})})});P(c,o,e,r)},c*(c<3||!s?99:9999))}function P(e,s,c,i,l){if(4===n[e].readyState||n[e].src.startsWith("blob")){const t=async(e,t)=>{const r=await j(i,s);n[t].src=r[t],addEventListener("pauseOrStop",e=>{$(r[t],c,t)})};0===e?n[0].play().then(e=>{a=!1,chrome.runtime.sendMessage({toPopup:{playingStarted:!0,audioCurrentFeedEntityId:o,hasNextChunk:n[1]&&4===n[1].readyState}}),function e(){r&&setTimeout(t=>{chrome.runtime.sendMessage({toPopup:{hasNextChunk:!(!U()||4!==U().readyState),index:r&&r.dataset.index}},e=>chrome.runtime.lastError),e()},999)}()}).catch(n=>{t(n,e).then(e=>P(...arguments,!0))}):r&&r.dataset.index,n[e].onended=r=>{n[e+1]&&(4===n[e+1].readyState||n[e+1].src.startsWith("blob")?n[e+1].play().catch(r=>{t(r,e+1),n[e+1].oncanplay=t=>{n[e+1].play()}}):n[e+1].oncanplay=t=>{n[e+1].play()}),e===s-1&&chrome.storage.sync.get(e=>{e.isContinuousPlaying?C():R()})}}else{if(3===n[e].networkState&&(n[e].src=n[e].src),!e&&Date.now()-t>3e4)throw R(),f(),"Timeout playing from feed, maybe authed with another account but with the same email";if(l){if(0===e)return void setTimeout(P,200,...arguments)}else{const t=t=>{setTimeout(t=>{!!n[e]&&P(...arguments)},e*(e<2?200:7e3)+10)};n[e].src.startsWith("blob")?t():N(c,e).then(t=>{n[e].src=t}).catch(e=>void 0).finally(t)}}}async function C(){const e=await function(){const e=o?IDBKeyRange.upperBound(o,!0):void 0;return new Promise(t=>{indexedDB.open("intelligent-speaker").onsuccess=n=>n.target.result.transaction("articles").objectStore("articles").openKeyCursor(e,"prev").onsuccess=e=>t(e.target.result?e.target.result.key:null)})}();e?_(e):R()}async function T(){const e=await function(){const e=o?IDBKeyRange.lowerBound(o,!0):void 0;return new Promise(t=>{indexedDB.open("intelligent-speaker").onsuccess=n=>n.target.result.transaction("articles").objectStore("articles").openKeyCursor(e,"next").onsuccess=e=>t(e.target.result?e.target.result.key:null)})}();e?_(e):R()}async function I(e,t){fetch(`${W}history/email/${e}`,{method:"PUT",headers:{Authorization:(await X()).id_token},body:String(t)}),re(e,"isNew",t)}async function j(e,t,n,r){if(this[e])return this[e];try{const o=await fetch(`${W}get-presigned-urls`,{method:"POST",headers:{Authorization:r||(await X()).id_token,"Content-Type":"application/json"},body:JSON.stringify({hashArticle:e,voice:t,lenChunks:n})}),a=await o.json();return this[e]=a,a}catch(e){throw f(),R(),e}}function O(){const e=r&&n[r.dataset.index-1];e&&(r.pause(),r.currentTime=0,e.play())}function A(){const e=U();e&&e.src&&(r.pause(),r.oncanplay=null,r.currentTime=0,e.play().catch(e=>setTimeout(A,99)))}function E(e){chrome.tabs.executeScript({code:`args = ${JSON.stringify(e)}`},e=>{chrome.runtime.lastError&&chrome.runtime.lastError.message.startsWith("Cannot access contents of the page")?Z(e=>{throw"My custom error - cannot access the content of the page"}):chrome.tabs.executeScript({file:"contentScript.js"})})}function R(){chrome.runtime.sendMessage({toPopup:{playingFinished:!0}}),o=null,r&&(r.pause(),r=null,n=[]),a=!1,function(){for(let e=setTimeout(e=>{});e>0;e--)clearTimeout(e)}(),dispatchEvent(new Event("pauseOrStop"))}function F(e){e&&se(e)}function U(){return r&&n[+r.dataset.index+1]}async function M(e,t,n,r){c.add(t);let o=[];if(n)o=await function(e,t){const n=[];return new Promise(r=>ae(e).then(e=>{for(let r=0;r<t;r++)e.cache&&e.cache[r]||n.push(r);r(n)}))}(t,e.length);else{const t=typeof e.map;if("function"!==t)throw new Error(`typeof urls.map: ${t}; typeof urls: ${typeof e}; debug: ${JSON.stringify(r)}`);o=e.map((e,t)=>t)}o.forEach(n=>{const r=[e[n],t,n,e.length,e.length-1===n];setTimeout($,3e3*n,...r)})}function $(e,t,n,r,o){!function a(s=0){ae(t).then(i=>{i&&(s>40?function(e){const t="howManyTimesWasNotAvailableToFetch_"+e,n=+localStorage.getItem(t);n>9&&se(e);localStorage.setItem(t,n+1)}(t):fetch(e).then(e=>{if(e.ok)return e.blob();throw""}).then(e=>{re(t,"cache",e,n).then(e=>{$[t]?$[t].count++:$[t]={count:1},chrome.runtime.sendMessage({toPopup:{cachedChunkId:t,count:$[t].count,lenChunks:r}}),o&&c.delete(t)})}).catch(e=>setTimeout(a,2e3,++s)))})}()}function N(e,t){return new Promise((n,r)=>{ae(e).then(e=>{e&&e.cache&&e.cache[t]?n(URL.createObjectURL(e.cache[t])):r()})})}chrome.commands.onCommand.addListener(e=>{({addToFeedStarter:i,listenToggle:e=>{r?r.paused?r.play():r.pause():C()},nextArticle:e=>{r&&(r.pause(),n=[]),C()},nextChunk:A,prevArticle:e=>{r&&(r.pause(),n=[]),T()},prevChunk:O,speedIncrease:L,speedDecrease:B})[e]()});const D=[.8,1,1.5,1.8,2];function L(){chrome.storage.sync.get(e=>{if("2"===e.playbackRate)return;const t=D.indexOf(+e.playbackRate)+1,n=D[t];chrome.storage.sync.set({playbackRate:n}),q(n)})}function B(){chrome.storage.sync.get(e=>{if("0.8"===e.playbackRate)return;const t=D.indexOf(+e.playbackRate)-1,n=D[t];chrome.storage.sync.set({playbackRate:n}),q(n)})}function q(e){r&&(r.playbackRate=e),n.forEach(t=>{t.playbackRate=t.defaultPlaybackRate=e})}const W="https://mjqj47yt17.execute-api.us-east-1.amazonaws.com/test/",z="https://api.intelligent-speaker.com/",J="k44r81bdug8tm4721kbfuqbm5",V="722jaa8aarrubh9lc1v3ff2ibd",G="https://api.intelligent-speaker.com/cognito-callback",K="https://docs.google.com/forms/d/e/1FAIpQLSdDNyd3COJzZEw9sHXE34Y2Ercrq0klL1hCn0Or2mZapG7UQw/viewform?usp=pp_url&entry.1897026270&entry.523383874=",H=1040;async function Q(e){return("/eventPage.html"===location.pathname?await u():document).querySelectorAll(`[data-lang=${e}]`)}function Z(e){chrome.tabs.query({active:!0,currentWindow:!0},t=>{e:for(const n of t)if(n.url){e(n);break e}})}async function X(e,t=J){if(e||(e=await new Promise(e=>chrome.storage.sync.get(t=>e(t)))),!(te("exp",e)<(Date.now()/1e3|0)))return e;try{const n=await fetch("https://intelligentspeaker.auth.us-east-1.amazoncognito.com/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&client_id="+t+"&refresh_token="+e.refresh_token}),r=await n.json();if("invalid_grant"===r.error)return X(e,V);const o={id_token:r.id_token};return chrome.storage.sync.set(o),{...e,...o}}catch(e){alert("Intelligent Speaker: error, try later"),R()}}async function Y(e){let t={};try{const n=await fetch(`${z}init`,{method:"POST",body:e});t=await n.json()}catch(e){throw alert("Intelligent Speaker: error, try later"),R(),e}if(chrome.storage.sync.remove(["isCognitoWasOpenedFromAnon","state"]),!t)return;chrome.storage.sync.set({id_token:t.id_token,refresh_token:t.refresh_token,chars_left:t.chars_left,isContinuousPlaying:!!t.isContinuousPlaying,playbackRate:t.playbackRate||1,voices:t.voices,updated:Date.now()/1e3|0});const n=te("email",t);return chrome.runtime.setUninstallURL(K+n),"/eventPage.html"===location.pathname?(p(t.id_token,ee(await oe(),t.history)),t):(chrome.runtime.sendMessage({fromPopup:"_initArticles",id_token:t.id_token,history:ee(await oe(),t.history)}),t)}function ee(e,t){return t.filter(t=>!e.get(t.utc))}function te(e,t){const n=t.id_token.split(".")[1].replace(/[_-]/g,"/");let r="";try{r=atob(n)}catch(e){throw`${e}, string for decoding: '${n}'`}return JSON.parse(r)[e]}function ne(e,t){return new Promise((n,r)=>{indexedDB.open("intelligent-speaker").onsuccess=o=>{const a=o.target.result.transaction("articles","readwrite").objectStore("articles").put(t,e);a.onsuccess=n,a.onerror=e=>{ce("Error put to IndexedDB:"+a.error),r()}}})}function re(e,t,n,r){return new Promise(o=>{indexedDB.open("intelligent-speaker").onsuccess=a=>{const s=a.target.result.transaction("articles","readwrite").objectStore("articles").get(e);s.onsuccess=a=>{a.target.result&&(void 0!==r?(a.target.result[t]||(a.target.result[t]=[]),a.target.result[t][r]=n):a.target.result[t]=n,a.target.source.put(a.target.result,e),o())},s.onerror=e=>void 0}})}function oe(e=0,t=9999999){let n=0;const r=new Map;return new Promise(o=>indexedDB.open("intelligent-speaker").onsuccess=a=>a.target.result.transaction("articles").objectStore("articles").openCursor(null,"prev").onsuccess=a=>{const s=a.target.result;s?(n++>=e&&r.size<t&&r.set(s.key,s.value),s.continue()):o(r)})}function ae(e,t="articles"){return new Promise(n=>{indexedDB.open("intelligent-speaker").onsuccess=r=>{const o=r.target.result;try{r.target.result.transaction(t).objectStore(t).get(e).onsuccess=e=>n(e.target.result)}catch(t){const n=Array.from(o.objectStoreNames);throw new Error(`getFromObjectStore(): ${t}, id:${e}, object stores:${n}`)}}})}function se(e){indexedDB.open("intelligent-speaker").onsuccess=t=>{const n=t.target.result;try{n.transaction("articles","readwrite").objectStore("articles").delete(e)}catch(t){const r=Array.from(n.objectStoreNames);throw`Removing article id:${e}, ex:${t}, object stores:${r}`}}}function ce(e){chrome.storage.sync.get(t=>Z(n=>{fetch(`${z}logextension`,{method:"POST",body:JSON.stringify({error:e,lang:String(window.lang),url:n.url,version:chrome.runtime.getManifest().version,storageCache:window.storageCache,storageSync:t}).replace(/["']/g,"'"),mode:"no-cors"})}))}async function ie(e,t){const n=new Uint8Array(await new Response(e).arrayBuffer());return new Blob(function(e){const t=[];let n=0;return e.forEach((r,o)=>{o&&79===r&&103===e[o+1]&&103===e[o+2]&&83===e[o+3]&&(t.push(e.slice(n,o)),n=o)}),t.push(e.slice(n)),t}(n).map(e=>(function(e,t){if(0===e[17]&&0===e[16]&&0===e[15]&&0===e[14]){const n=255;e[17]=1,e[15]=t<=n?0:t/n,e[14]=t<=n?t:n,function(e){e[22]=0,e[23]=0,e[24]=0,e[25]=0}(e);const r=window.CRCTable||(window.CRCTable=function(){const e=new Uint32Array(256);for(let t=256;t--;){let n=t<<24;for(let e=8;e--;)n=2147483648&n?79764919^n<<1:n<<1;e[t]=n}return e}()),o=(e.reduce((e,t)=>e<<8>>>0^r[e>>>24^t],0)>>>0).toString(16).padStart(8,"0");return e[25]=parseInt(o.substring(0,2),16),e[24]=parseInt(o.substring(2,4),16),e[23]=parseInt(o.substring(4,6),16),e[22]=parseInt(o.substring(6),16),e}return e})(e,t)))}window.onerror=(e,t,n,r,o)=>{let a="message:`"+e+"`";o&&o.stack&&(a+=", stacktrace:"+o.stack),ce(a)},window.onunhandledrejection=e=>{const t="Message of rejected Promise:";if(e.reason.message){let n=t+e.reason.message;e.reason.stack&&(n+="`, stacktrace:"+e.reason.stack),ce(n)}else ce(t+"(reported from e.reason)"+e.reason)};