!function(e){function webpackJsonpCallback(t){for(var a,n,o=t[0],l=t[1],d=t[2],c=0,h=[];c<o.length;c++)n=o[c],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&h.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(s&&s(t);h.length;)h.shift()();return i.push.apply(i,d||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var s=a[o];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=__webpack_require__(__webpack_require__.s=a[0]))}return e}var t={},r={4:0},i=[];function __webpack_require__(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(r,i,function(t){return e[t]}.bind(null,i));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="";var a=window.webpackJsonp=window.webpackJsonp||[],n=a.push.bind(a);a.push=webpackJsonpCallback,a=a.slice();for(var o=0;o<a.length;o++)webpackJsonpCallback(a[o]);var s=n;i.push([947,0,2,1,5,9]),checkDeferredModules()}({0:function(e,t,r){"use strict";r.d(t,"n",(function(){return f})),r.d(t,"p",(function(){return y})),r.d(t,"o",(function(){return v})),r.d(t,"L",(function(){return _})),r.d(t,"F",(function(){return g})),r.d(t,"P",(function(){return C})),r.d(t,"G",(function(){return k})),r.d(t,"J",(function(){return D})),r.d(t,"a",(function(){return E})),r.d(t,"sb",(function(){return b})),r.d(t,"I",(function(){return w})),r.d(t,"B",(function(){return S})),r.d(t,"E",(function(){return T})),r.d(t,"A",(function(){return A})),r.d(t,"z",(function(){return I})),r.d(t,"N",(function(){return R})),r.d(t,"M",(function(){return O})),r.d(t,"C",(function(){return P})),r.d(t,"O",(function(){return L})),r.d(t,"j",(function(){return M})),r.d(t,"ib",(function(){return N})),r.d(t,"D",(function(){return B})),r.d(t,"gb",(function(){return F})),r.d(t,"hb",(function(){return $})),r.d(t,"fb",(function(){return x})),r.d(t,"R",(function(){return G})),r.d(t,"Q",(function(){return z})),r.d(t,"g",(function(){return U})),r.d(t,"x",(function(){return W})),r.d(t,"y",(function(){return j})),r.d(t,"l",(function(){return H})),r.d(t,"v",(function(){return V})),r.d(t,"w",(function(){return Y})),r.d(t,"d",(function(){return K})),r.d(t,"q",(function(){return X})),r.d(t,"s",(function(){return q})),r.d(t,"r",(function(){return Q})),r.d(t,"rb",(function(){return J})),r.d(t,"mb",(function(){return Z})),r.d(t,"lb",(function(){return ee})),r.d(t,"kb",(function(){return te})),r.d(t,"jb",(function(){return re})),r.d(t,"nb",(function(){return ie})),r.d(t,"h",(function(){return ae})),r.d(t,"ob",(function(){return ne})),r.d(t,"t",(function(){return oe})),r.d(t,"u",(function(){return se})),r.d(t,"qb",(function(){return le})),r.d(t,"i",(function(){return de})),r.d(t,"pb",(function(){return ce})),r.d(t,"m",(function(){return he})),r.d(t,"b",(function(){return ue})),r.d(t,"c",(function(){return pe})),r.d(t,"f",(function(){return me})),r.d(t,"k",(function(){return fe})),r.d(t,"e",(function(){return ye})),r.d(t,"tb",(function(){return ve})),r.d(t,"H",(function(){return _e})),r.d(t,"K",(function(){return ge})),r.d(t,"S",(function(){return Ce})),r.d(t,"X",(function(){return ke})),r.d(t,"cb",(function(){return De})),r.d(t,"eb",(function(){return Ee})),r.d(t,"Z",(function(){return be})),r.d(t,"ab",(function(){return we})),r.d(t,"Y",(function(){return Se})),r.d(t,"T",(function(){return Te})),r.d(t,"W",(function(){return Ae})),r.d(t,"db",(function(){return Ie})),r.d(t,"U",(function(){return Re})),r.d(t,"V",(function(){return Oe})),r.d(t,"bb",(function(){return Pe}));var i=r(22),a=r.n(i),n=r(16),o=r.n(n),s=r(43),l=r.n(s),d=r(17),c=r.n(d),h=r(4),u=r.n(h),p=r(10),m=r(7);function wrapEnum(e){return u()(e,"hasValue",{value:t=>{var r;return c()(r=l()(e)).call(r,t)},enumerable:!1,writable:!1}),new Proxy(e,{get(e,t){if(!e[t])throw new Error(`Enum member ${t} not found`);return e[t]},set(e,t){throw new Error(`Enum member ${t} set not allowed`)}})}const f=wrapEnum({TrelloAuthorized:"planywayTrelloAuthorized",BoardInitialized:"planywayBoardInitialized",BoardChanged:"planywayBoardChanged",ResizerContentResized:"planywayResizerContentResized",ResizerInitialSizeUpdated:"planywayResizerInitialSizeUpdated",ResizeListenerWindowResized:"planywayResizeListenerWindowResized",ResizeListenerElementResized:"planywayResizeListenerElementResized",AutosizeTextareaResizeRequested:"planywayAutosizeTextareaResizeRequested",SwitchSchedulerShownRequested:"planywaySwitchSchedulerShownRequested",SchedulerShowing:"planywaySchedulerShowing",SchedulerShown:"planywaySchedulerShown",SchedulerOrientationChanged:"planywaySchedulerOrientationChanged",ScrollSchedulerViewRequested:"planywayScrollSchedulerViewRequested",ChangeSchedulerViewRequested:"planywayChangeSchedulerViewRequested",TaskListsToggled:"planywayTaskListsToggled",TrelloFiltersChanged:"planywayTrelloFiltersChanged",TrelloSyncSubscribeRequested:"planywayTrelloSyncSubscribeRequested",TrelloSyncUpdate:"planywayTrelloSyncUpdate",TrelloSyncDelete:"planywayTrelloSyncDelete",TrelloFireKeyRequested:"planywayTrelloFireKeyRequested",TrelloContextError:"planywayTrelloContextError",SettingsChanged:"planywaySettingsChanged",CardsLoaded:"planywayCardsLoaded",CardKeydown:"planywayCardKeydown",CardDragStarted:"planywayCardDragStarted",CardDragEnded:"planywayCardDragEnded",CardTypeChanged:"planywayCardTypeChanged",CardsFieldsSettingsChanged:"planywayCardsFieldsSettingsChanged",CloseDialogsRequested:"planywayCloseDialogsRequested",CardsReloadRequested:"planywayCardsReloadRequested",CardsReloaded:"planywayCardsReloaded",OpenMemberInviteDialogRequested:"planywayOpenMemberInviteDialogRequested",OpenBoardsMenuRequested:"planywayOpenBoardsMenuRequested",SelectTrelloBoardRequested:"planywaySelectTrelloBoardRequested",TrelloBoardSelectionChanged:"planywayTrelloBoardSelectionChanged",SelectGoogleCalendarRequested:"planywaySelectGoogleCalendarRequested",GoogleCalendarSelectionChanged:"planywayGoogleCalendarSelectionChanged",SelectICalCalendarRequested:"planywaySelectICalCalendarRequested",OpenNestedContextMenuRequested:"planywayOpenNestedContextMenuRequested",TaskListsOrientationChanged:"planywayTaskListsOrientationChanged",TimelineResourcesReloaded:"planywayTimelineResourcesReloaded",TimelineResourcesReordered:"planywayTimelineResourcesReordered",TimelineResourceRemoveRequested:"planywayTimelineResourceRemoveRequested",TimelineScrolled:"planywayTimelineScrolled",FilterByCurrentMemberRequested:"planywayFilterByCurrentMemberRequested",FiltersChanged:"planywayFiltersChanged",PrintRequested:"planywayPrintRequested"}),y=wrapEnum({ClearBackgroundStorage:"planywayClearBackgroundStorage",CloseTrelloTabs:"planywayCloseTrelloTabs",ReloadTrelloTabs:"planywayReloadTrelloTabs",GetTelemetryData:"planywayGetTelemetryData",SetTelemetryData:"planywaySetTelemetryData",GetAppStorageData:"planywayGetAppStorageData",SetAppStorageData:"planywaySetAppStorageData",GetTrelloToken:"planywayGetTrelloToken",SetTrelloToken:"planywaySetTrelloToken",SetMemberInfo:"planywaySetMemberInfo",GetGoogleCredentials:"planywayGetGoogleCredentials",SetGoogleCredentials:"planywaySetGoogleCredentials",Rest:"planywayRest",OnProgress:"planywayOnProgress",SwitchSchedulerShown:"planywaySwitchSchedulerShown"}),v=wrapEnum({LoadTelemetryData:"load_telemetry_data",SaveTelemetryData:"save_telemetry_data",LoadTrelloToken:"load_trello_token",SaveTrelloToken:"save_trello_token",GetGoogleAuthCode:"get_google_auth_code",SubscribeNotifications:"subscribe_notifications",LoadPushNotificationsSubscriptions:"load_push_notifications_subscriptions",SavePushNotificationsSubscriptions:"save_push_notifications_subscriptions"}),_=wrapEnum({Get:"get",Patch:"patch",Put:"put",PutForm:"putForm",Post:"post",PostForm:"post_form",PostFile:"post_file",Delete:"delete"}),g=[m.G,m.N,m.c,m.x,m.Q],C=wrapEnum({Trello:"Trello",ThirdParty:"ThirdParty"}),k=wrapEnum({Maximized:"maximized",Minimized:"minimized",Fullscreen:"fullscreen",ShareBoard:"shareBoard",ShareCard:"shareCard",PlanCardByTrelloPopup:"planCardByTrelloPopup",PlanCardByPowerupButton:"planCardByPowerupButton",ViewCardByTrelloPopup:"viewCardByTrelloPopup",ViewCardByPowerupButton:"viewCardByPowerupButton",PushNotificationRemindStart:"pushNotificationRemindStart",InviteEmail:"inviteEmail",InviteLink:"inviteLink"}),D=wrapEnum({Disabled:"disabled",Disabling:"disabling",Enabled:"enabled",Enabling:"enabling"}),E=wrapEnum({}),b=wrapEnum({Skipped:"skipped",MonthlySchedule:"monthlySchedule",TeamManagement:"teamManagement",TimeTracking:"timeTracking",NoLanes:"noLanes"}),w=(wrapEnum({Top:{arrowPosition:"bottom",attachment:"bottom center",targetAttachment:"top center"},Right:{arrowPosition:"left",attachment:"center left",targetAttachment:"center right"},Bottom:{arrowPosition:"top",attachment:"top center",targetAttachment:"bottom center"},Left:{arrowPosition:"right",attachment:"center right",targetAttachment:"center left"},Absolute:{arrowPosition:"absolute",attachment:"bottom right",targetAttachment:"top right"}}),wrapEnum({Small:"small",Large:"large"})),S=wrapEnum({MultiBoard:"multiBoard",RecurringCards:"recurringCards",Filters:"filters",GoogleSync:"googleSync",GoogleConnect:"googleConnect",Milestones:"milestones",PushNotifications:"pushNotifications",Dependencies:"dependencies",Timeline:"timeline",TimelineBoard:"timelineBoard",TimelineLabel:"timelineLabel",TimelineList:"timelineList",TimelineMember:"timelineMember",TimelineScales:"timelineScales",TimeRecords:"timeRecords",CustomFields:"customFields",CsvReport:"csvReport"}),T={[p.g.Trial]:new o.a(l()(S)),[p.g.Pro]:new o.a([S.MultiBoard,S.RecurringCards,S.Filters,S.GoogleSync,S.GoogleConnect,S.Milestones,S.PushNotifications,S.Dependencies,S.Timeline]),[p.g.Team]:new o.a([S.MultiBoard,S.RecurringCards,S.Filters,S.GoogleSync,S.GoogleConnect,S.Milestones,S.PushNotifications,S.Dependencies,S.Timeline,S.TimelineBoard,S.TimelineLabel,S.TimelineList,S.TimelineMember,S.TimelineScales,S.TimeRecords,S.CustomFields,S.CsvReport]),[p.g.Free]:new o.a},A=wrapEnum({Info:"info",Success:"success",Warning:"warning",Error:"error",Reload:"reload",Progress:"progress"}),I=wrapEnum({PushNotifications:"pushNotifications"}),R=wrapEnum({Top:"top",Left:"left",Right:"right",Bottom:"bottom"}),O=wrapEnum({Calendar:"calendar",Timeline:"timeline",TimeTracking:"timeTracking"}),P={[O.Timeline]:S.Timeline,[O.TimeTracking]:S.TimeRecords},L=wrapEnum({Week:"scrollWeek",OneDay:"oneDay",ThreeDay:"threeDay",Month:"month",Timeline:"timeline"}),M=wrapEnum({Completed:"completed",Incompleted:"incompleted",All:"all"}),N=wrapEnum({None:"none",Member:"member",Board:"board",List:"list",Label:"label"}),B={[N.Board]:S.TimelineBoard,[N.Label]:S.TimelineLabel,[N.List]:S.TimelineList,[N.Member]:S.TimelineMember},F=wrapEnum({Min:3e8,Max:29e10,Default:675e6,Week:1728e6}),$=wrapEnum({Day:"day",Week:"week",Month:"month",Quarter:"quarter",Year:"year"}),x=wrapEnum({NoResources:"noResources",Members:"members",Calendars:"calendars",Lists:"lists",Labels:"labels"}),G=wrapEnum({List:"list",Kanban:"kanban"}),z=wrapEnum({Bottom:"bottom",Left:"left",Right:"right"}),U=(new o.a([z.Right,z.Left]),wrapEnum({Light:"light",Colorful:"colorful"})),W=wrapEnum({Today:"today",DateSelect:"dateSelect",PreviousDay:"previousDay",NextDay:"nextDay",PreviousWeek:"previousWeek",NextWeek:"nextWeek",PreviousMonth:"previousMonth",NextMonth:"nextMonth",PreviousQuarter:"previousQuarter",NextQuarter:"nextQuarter",PreviousYear:"previousYear",NextYear:"nextYear"}),j=wrapEnum({Internal:"internal",ClosestVisible:"closestVisible",DayScroll:"day",WeekScroll:"week",MonthScroll:"month",QuarterScroll:"quarter",YearScroll:"year",DateSelect:"dateSelect",Today:"today"}),H=wrapEnum({RemoveFromCalendar:"removeFromCalendar"}),V=wrapEnum({Open:"open",Edit:"edit",Remove:"remove",Delete:"delete"}),Y=wrapEnum({OnlyOccurrence:"onlyOccurrence",ThisAndFollowing:"thisAndFollowing",AllSeries:"allSeries"}),K=wrapEnum({TrelloBoard:"trelloBoard",GoogleCalendar:"googleCalendar",ICalCalendar:"iCalCalendar"}),X=wrapEnum({Calendar:m.o,User:m.q}),q=wrapEnum({Google:"google",Outlook:"microsoft",Apple:"apple",Other:"other"}),Q=["red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","gray","hoki","default"],J=wrapEnum({Admin:"admin",Normal:"normal"}),Z=wrapEnum({Private:"private",Organization:"org",Public:"public"}),ee=wrapEnum({Admins:"admins",Members:"members"}),te=wrapEnum({Small:"small",Medium:"medium"}),re=wrapEnum({Blue:"blue",Orange:"orange",Green:"green",Red:"red",Purple:"purple",Pink:"pink",Lime:"lime",Sky:"sky",Grey:"grey"}),ie=wrapEnum({AdvancedChecklists:"advancedChecklists"}),ae=wrapEnum({TrelloCard:"trelloCard",TrelloCustomField:"trelloCustomFieldCard",TrelloCheckItem:"trelloCheckItemCard",TrelloTimeRecord:"trelloTimeRecordCard",GoogleEvent:"googleEvent",ICalEvent:"iCalEvent"}),ne=new o.a([ae.TrelloCard,ae.TrelloCustomField,ae.TrelloCheckItem,ae.TrelloTimeRecord]),oe=wrapEnum({Escape:27,Enter:13,Enter2:10,Left:37,Right:39,C:67,D:68,L:76,M:77,Q:81,S:83,T:84,Space:32,Delete:46,Backspace:8,Key0:48,Key9:57}),se=wrapEnum({48:"black",49:"green",50:"yellow",51:"orange",52:"red",53:"purple",54:"blue",55:"sky",56:"lime",57:"pink"}),le=new o.a([oe.C,oe.D,oe.L,...a()(new Array(oe.Key9-oe.Key0+1),((e,t)=>oe.Key0+t)),oe.M,oe.Space,oe.S,oe.Delete,oe.Backspace]),de={[ae.TrelloCard]:[oe.C,oe.D,oe.L,...a()(new Array(oe.Key9-oe.Key0+1),((e,t)=>oe.Key0+t)),oe.M,oe.Space,oe.S,oe.Delete,oe.Backspace],[ae.TrelloCustomField]:[oe.L,...a()(new Array(oe.Key9-oe.Key0+1),((e,t)=>oe.Key0+t)),oe.M,oe.Space,oe.S,oe.Delete,oe.Backspace],[ae.TrelloCheckItem]:[oe.L,...a()(new Array(oe.Key9-oe.Key0+1),((e,t)=>oe.Key0+t)),oe.M,oe.Space,oe.Delete,oe.Backspace],[ae.TrelloTimeRecord]:[oe.L,...a()(new Array(oe.Key9-oe.Key0+1),((e,t)=>oe.Key0+t)),oe.M,oe.Space,oe.Delete,oe.Backspace],[ae.GoogleEvent]:[oe.Delete,oe.Backspace]},ce=wrapEnum({Checkbox:"checkbox",Date:"date",List:"list",Number:"number",Text:"text"}),he=wrapEnum({CustomField:"customField"}),ue=wrapEnum({File:"file",Link:"link"}),pe=new o.a(["bmp","gif","ico","jpeg","jpg","png","svg","webp"]),me=wrapEnum({Blocks:"blocks",IsBlockedBy:"isBlockedBy"}),fe={[me.Blocks]:me.IsBlockedBy,[me.IsBlockedBy]:me.Blocks},ye=wrapEnum({NoCard:"noCard",NoLink:"noLink",LinksDisabled:"linksDisabled"}),ve={[b.MonthlySchedule]:{schedulerOrientation:R.Top,schedulerMode:O.Calendar,schedulerView:L.Month,isMilestonesShown:!0,taskListsView:G.List,taskListsOrientation:z.Right},[b.TeamManagement]:{schedulerOrientation:R.Top,schedulerMode:O.Timeline,timelineView:N.Member,timelineScale:F.Default,isMilestonesShown:!0,taskListsView:G.Kanban,taskListsOrientation:z.Right},[b.TimeTracking]:{schedulerOrientation:R.Top,schedulerMode:O.TimeTracking,timelineView:N.None,timelineScale:F.Default,isMilestonesShown:!0,taskListsView:G.Kanban,taskListsOrientation:z.Right},[b.NoLanes]:{schedulerOrientation:R.Top,schedulerMode:O.Timeline,timelineView:N.None,timelineScale:F.Default,isMilestonesShown:!0,taskListsView:G.Kanban,taskListsOrientation:z.Right}},_e=wrapEnum({Free:"free",Trial:"trial"}),ge=wrapEnum({TimeRecords:"timeRecords",AllCards:"allCards"}),Ce=wrapEnum({[p.a.Chrome]:"Chrome Extension",[p.a.Safari]:"Safari Extension",[p.a.PowerUp]:"PowerUp",[p.a.Standalone]:"Standalone",[p.a.Teams]:"MS Teams"}),ke=wrapEnum({GeneralEvents:wrapEnum({Installed:"Installed",FeedbackOpened:"Feedback Opened",FeedbackSent:"Feedback Sent",LiveChatOpened:"Live Chat Opened",ShortcutsOpened:"Shortcuts Opened",QuickStartClicked:"Quick Start Clicked",HelpClicked:"Help Clicked",UpgradeClicked:"Upgrade Clicked",BillingClicked:"Billing Clicked",UsersClicked:"Users Clicked",UpgradeOffered:"Upgrade Offered",UpgradeOfferLearnClicked:"Upgrade Offer Learn More Clicked",UpgradeOfferUpgradeClicked:"Upgrade Offer Upgrade Now Clicked",TrialStarted:"Trial Started",AuthRequested:"Auth Requested",AuthConfirmed:"Auth Confirmed",AuthRejected:"Auth Rejected",NewsShown:"News Shown",NewsHidden:"News Hidden",NewsLearnMoreClicked:"News Learn More Clicked",NewsBlogClicked:"News Blog Clicked",NewsHelpClicked:"News Help Clicked",NewsClicked:"What's New Clicked",TimeZoneChanged:"Time Zone Changed",LogInClicked:"Log In Clicked",LogOutClicked:"Log Out Clicked",GetTrelloTokenLinkClicked:"Get Trello Token Link Clicked",SignedInWithTrelloToken:"Signed In With Trello Token",HomeScreenShown:"Home Page Shown",NoBoardsScreenShown:"No Boards Page Shown",CreateBoardClicked:"Create Board Clicked",EditBoardClicked:"Edit Board Clicked",RemoveBoardClicked:"Remove Board Clicked",AccountClicked:"Account Clicked",AppsStoreIconClicked:"Apps Store Icon Clicked",TrialExpiredShown:"Trial Expired Dialog Shown",TrialExpiredClosed:"Trial Expired Dialog Closed",TrialExpiredStayFreeClicked:"Pricing Stay Free Clicked",TrialExpiredPaymentPeriodChanged:"Pricing Payment Period Changed",TrialExpiredQuantityChanged:"Pricing Quantity Changed",TrialExpiredPurchaseNowClicked:"Pricing Purchase Button Clicked",TrialExpiredContactUsClicked:"Pricing Enterprise Contact Us Clicked",ContactUsClosed:"Contact Us Dialog Closed",ContactUsSubmitClicked:"Contact Us Dialog Submit Clicked",ImportICalHowToLinkClicked:"Import iCal Help Link Clicked",ExportICalHowToLinkClicked:"Export iCal Help Link Clicked",WindowMaximized:"Window Maximized",WindowMinimized:"Window Minimized",OpenedByLink:"Opened By Link",StandaloneOpenedByLink:"Standalone Opened By Link",PushNotificationsEnabled:"Notifications Enabled",PushNotificationsDisabled:"Notifications Disabled",PushNotificationsBannerShown:"Notifications Banner Shown",PushNotificationsBannerClosed:"Notifications Banner Closed",ReportDialogOpened:"Report Dialog Opened",ReportParametersChanged:"Report Parameters Changed",ReportBuilt:"Report Built"}),PopupEvents:wrapEnum({Loaded:"Popup Loaded",SignInWithTrelloClicked:"Sign In With Trello Clicked",GoToTrelloClicked:"Go To Trello Clicked",RateUsClicked:"Rate Us Clicked"}),TrelloEvents:wrapEnum({BoardSwitched:"Trello Board Switched",PlanywayPowerUpClicked:"Planyway PowerUp Clicked"}),CalendarEvents:wrapEnum({Shown:"Calendar Shown",Hidden:"Calendar Hidden",Opened:"Opened",CalendarOpened:"Calendar Opened",TimelineOpened:"Timeline Opened",TimeTrackingOpened:"Time Tracking Opened",OrientationChanged:"Orientation Changed",ViewModeChanged:"View Mode Changed",CalendarNavigated:"Calendar Navigated",TimelineNavigated:"Timeline Navigated",TimelineScaleChanged:"Timeline Scale Changed",Refreshed:"Cards Refreshed",Multiselected:"Cards Multiselected",CurrentBoardChanged:"Current Board Changed",PublicBoardAdded:"Public Board Added",PublicBoardRemoved:"Public Board Removed",AddCalendarsDialogOpened:"Add Calendars Dialog Opened",GoogleConnectEnabled:"Google Connect Enabled",GoogleConnectDisabled:"Google Connect Disabled",MultiBoardChanged:"MultiBoard Changed",MultiBoardSelectedAll:"MultiBoard Selected All",MultiBoardSelectedOnlyCurrent:"MultiBoard Selected Only Current",AddBoardByUrlDialogOpened:"Add Board By URL Dialog Opened",GoogleCalendarsSelectionChanged:"Google Calendars Selection Changed",GoogleCalendarsSelectedAll:"Google Calendars Selected All",GoogleCalendarsSelectedNone:"Google Calendars Selected None",IntegrationsDialogOpened:"Integrations Opened",IntegrationsEnableGoogleSyncClicked:"Integrations Enable Google Sync Clicked",IntegrationsEnableGoogleConnectClicked:"Integrations Enable Google Connect Clicked",IntegrationsExportByURLClicked:"Integrations Export by URL Clicked",ImportByURLClicked:"Import by URL Clicked",ICalChanged:"iCal Changed",ICalsSelectedAll:"iCal Selected All",ICalsSelectedNone:"iCal Selected None",ICalEditOpened:"iCal Edit Opened",ICalAdded:"iCal Added",ICalColorChanged:"iCal Color Changed",ICalRemoved:"iCal Removed",TimelineMilestoneLaneChanged:"Timeline Milestone Lane Changed",TimelineMembersChanged:"Timeline Members Changed",TimelineMembersSelectedAll:"Timeline Members Selected All",TimelineMembersSelectedOnlyCurrent:"Timeline Members Selected Only Current",TimelineMembersReordered:"Timeline Members Reordered",TimelineInviteMembersClicked:"Timeline Invite Members Clicked",TimelineCalendarsChanged:"Timeline Boards Changed",TimelineCalendarsSelectedAll:"Timeline Boards Selected All",TimelineCalendarsSelectedOnlyCurrent:"Timeline Boards Selected Only Current",TimelineCalendarsReordered:"Timeline Boards Reordered",TimelineAddBoardsClicked:"Timeline Add Boards Clicked",TimelineListsChanged:"Timeline Lists Changed",TimelineListsSelectedAll:"Timeline Lists Selected All",TimelineListsSelectedOnlyDefault:"Timeline Lists Selected Only Default",TimelineListsReordered:"Timeline Lists Reordered",TimelineLabelsChanged:"Timeline Labels Changed",TimelineLabelsSelectedAll:"Timeline Labels Selected All",TimelineLabelsSelectedOnlyDefault:"Timeline Labels Selected Only None",TimelineLabelsReordered:"Timeline Labels Reordered",SyncStarted:"Sync Started",SyncStopped:"Sync Stopped",SidebarOpened:"Sidebar Opened",SidebarClosed:"Sidebar Closed",ShareBoardDialogOpened:"Share Board Dialog Opened",ShareBoardPermissionChanged:"Share Board Permission Changed",ShareBoardLinkCopied:"Share Board Link Copied",TaskListsOpened:"Task List Opened",TaskListsClosed:"Task List Closed",TaskListsBoardSwitched:"Task List Board Switched",TaskListsFiltersChanged:"Task List Filters Changed",TaskListsViewModeChanged:"Task List View Mode Changed",Print:"Print",BoardCreated:"Board Created",BoardEdited:"Board Edited",BoardRemoved:"Board Removed",MemberInviteDialogOpened:"Invite Members Dialog Opened",MemberManageDialogOpened:"Manage Member Dialog Opened",MemberAdded:"Member Added",MemberRemoved:"Member Removed"}),SettingsEvents:wrapEnum({SettingsDialogOpened:"Settings Dialog Opened",WorkHoursChanged:"Work Hours Changed",FirstWeekDayChanged:"First Week Day Changed",WorkDaysChanged:"Work Days Changed",LocaleChanged:"Locale Changed",DueLinkAllDayChanged:"Due Link Date Changed",DueLinkChanged:"Due Link Time Changed",DefaultDurationChanged:"Default Duration Changed",DefaultListChanged:"Default List Changed",DefaultCardPositionChanged:"Default Card Position Changed",EnableTrelloFiltersChanged:"Enable Trello Filters Changed",CardAppearanceDialogOpened:"Card Appearance Dialog Opened",CardThemeChanged:"Card Theme Changed",CardsVisibilityChanged:"Cards Visibility Changed",ShowTrelloBoardChanged:"Show Trello Board Changed",ShowTrelloCardNumberChanged:"Show Trello Card Number Changed",ShowDateTimeChanged:"Show Date Time Changed",CustomFieldsSettingsDialogOpened:"Custom Fields Settings Dialog Opened",CustomFieldsAsCardsChanged:"Show Custom Field Cards Changed",HighlightTodayChanged:"Highlight Today Changed",ShowWeekNumbersChanged:"Show Week Numbers Changed",ShowOnlyWorkDaysChanged:"Show Weekends Changed",ShowOnlyWorkHoursChanged:"Show Non-working Hours Changed",ShowArchivedCardsChanged:"Show Archived Cards Changed",ShowCheckItemCardsChanged:"Show Check Item Cards Changed",ShowMilestonesChanged:"Show Milestones Changed",ShowTimeRecordCardsChanged:"Show Time Entry Cards Changed"}),FiltersEvents:wrapEnum({AddCustomFilterClicked:"Filters Add Filter Clicked",CustomFilterAdded:"Filters Custom Filter Added",CustomFilterRemoved:"Filters Custom Filter Removed",FilterByCurrentMemberToggled:"Filter By Current Member Toggled",Cleared:"Filters Cleared",MembersChanged:"Filters Members Changed",LabelsChanged:"Filters Labels Changed",ListsChanged:"Filters Lists Changed",CustomFieldsChanged:"Filters Custom Fields Changed",CustomFiltersChanged:"Filters Custom Filters Changed"}),CardEvents:wrapEnum({OpenedByUrl:"Card Opened By URL",CreateDialogOpened:"Card Create Dialog Opened",CreateDialogClosed:"Card Create Dialog Closed",EditDialogOpened:"Card Edit Dialog Opened",EditDialogClosed:"Card Edit Dialog Closed",EditDialogModeChanged:"Card Edit Dialog Mode Changed",CreatedFromTaskLists:"Card Created From Task List",Scheduled:"Card Scheduled",Reordered:"Card Reordered",ContextMenuOpened:"Card Context Menu Opened",MarkedCompleted:"Card Marked Completed",MarkedIncompleted:"Card Marked Incompleted",Archived:"Card Archived",Unarchived:"Card Unarchived",Duplicated:"Card Duplicated",Subscribed:"Card Subscribed",Unsubscribed:"Card Unsubscribed",Deleted:"Card Deleted",UrlCopied:"Card URL Copied",TitleChanged:"Card Name Changed",TypeChanged:"Card Type Changed",DatesRemoved:"Card Dates Removed",IsAllDaySet:"Card Is All Day Set",IsAllDayUnset:"Card Is All Day Unset",StartChanged:"Card Start Changed",EndChanged:"Card End Changed",TimeAdded:"Card Time Added",TimeRemoved:"Card Time Removed",DurationChanged:"Card Duration Changed",DailyEstimateChanged:"Card Daily Estimate Changed",DailyEstimateFieldVisibilityChanged:"Card Daily Estimate Field Visibility Changed",Moved:"Card Moved",Resized:"Card Resized",RecurrenceRuleChanged:"Card Recurrence Rule Changed",PriorityChanged:"Card Priority Changed",BoardChanged:"Card Board Changed",GoogleCalendarChanged:"Card Google Calendar Changed",ListChanged:"Card List Changed",ParentCardChanged:"Card Parent Changed",ParentCardOpened:"Card Parent Opened",PositionChanged:"Card Position Changed",MemberAssigned:"Card Member Assigned",MemberAssignedSelf:"Card Assigned To Me",MemberUnassigned:"Card Member Unassigned",MemberUnassignedSelf:"Card Unassigned From Me",MemberChanged:"Card Member Changed",LabelAdded:"Card Label Added",LabelRemoved:"Card Label Removed",LabelChanged:"Card Label Changed",DescriptionChanged:"Card Description Changed",CustomFieldChanged:"Card Custom Field Changed",ReminderAdded:"Card Reminder Added",ReminderChanged:"Card Reminder Changed",ReminderDeleted:"Card Reminder Deleted",CardLinkAdded:"Card Dependency Added",CardLinkTypeChanged:"Card Dependency Type Changed",CardLinkLinkedCardOpened:"Card Dependency Dependent Card Opened",CardLinkRemoved:"Card Dependency Removed",ChecklistAdded:"Card Checklist Added",ChecklistNameChanged:"Card Checklist Name Changed",ChecklistOrderChanged:"Card Checklist Order Changed",ChecklistCollapsed:"Card Checklist Collapsed",ChecklistExpanded:"Card Checklist Expanded",ChecklistCompletedHidden:"Card Checklist Completed Items Hidden",ChecklistCompletedShown:"Card Checklist Completed Items Shown",ChecklistDeleted:"Card Checklist Deleted",CheckItemAdded:"Card Check Item Added",CheckItemNameChanged:"Card Check Item Name Changed",CheckItemOrderChanged:"Card Check Item Order Changed",CheckItemChecklistChanged:"Card Check Item Checklist Changed",CheckItemMarkedCompleted:"Card Check Item Marked Completed",CheckItemMarkedIncompleted:"Card Check Item Marked Incompleted",CheckItemDeleted:"Card Check Item Deleted",CheckItemDatesSet:"Card Check Item Dates Set",CheckItemDatesRemoved:"Card Check Item Dates Removed",CheckItemIsAllDaySet:"Card Check Item Is All Day Set",CheckItemIsAllDayUnset:"Card Check Item Is All Day Unset",CheckItemStartChanged:"Card Check Item Start Changed",CheckItemEndChanged:"Card Check Item End Changed",CheckItemMemberAssigned:"Card Check Item Member Assigned",CheckItemMemberUnassigned:"Card Check Item Member Unassigned",CheckItemContextMenuOpened:"Card Check Item Context Menu Opened",TimeRecordAdded:"Card Time Entry Added",TimeRecordCommentChanged:"Card Time Entry Comment Changed",TimeRecordDeleted:"Card Time Entry Deleted",TimeRecordFromChanged:"Card Time Entry Start Changed",TimeRecordToChanged:"Card Time Entry End Changed",TimeRecordDurationChanged:"Card Time Entry Duration Changed",TimeRecordTimeAdded:"Card Time Entry Time Added",TimeRecordTimeRemoved:"Card Time Entry Time Removed",TimeRecordMemberChanged:"Card Time Entry Member Changed",AttachmentAdded:"Card Attachment Added",AttachmentClicked:"Card Attachment Clicked",AttachmentLinkChanged:"Card Attachment Link Changed",AttachmentNameChanged:"Card Attachment Name Changed",AttachmentDeleted:"Card Attachment Deleted",CommentAdded:"Card Comment Added",CommentEdited:"Card Comment Edited",CommentDeleted:"Card Comment Deleted",CommentReplyClicked:"Card Comment Reply Clicked",CardOpenClicked:"Card Open Clicked",CardDoubleClicked:"Card Double Clicked",CardViewOnTimelineClicked:"Card View On Timeline Clicked"}),OnboardingEvents:wrapEnum({SignInStepShown:"Sign In Onboarding Step Shown",OpenBoardStepShown:"Open Board Onboarding Step Shown",ShowButtonShown:"Show Button Onboarding Shown",ShowButtonPassed:"Show Button Onboarding Passed",ShowButtonSkipped:"Show Button Onboarding Skipped",LoginDialogOpened:"Onboarding Login Dialog Opened",LoginDialogClosed:"Onboarding Login Dialog Closed",SurveyShown:"Onboarding Survey Shown",SurveyPassed:"Onboarding Survey Passed",ChooseModeShown:"Onboarding Choose View Shown",ChooseModePassed:"Onboarding Choose View Passed",TourClicked:"Onboarding Tour Clicked",TourStepShown:"Onboarding Tour Step Shown",TourMinimized:"Onboarding Tour Minimized",TourMaximized:"Onboarding Tour Maximized",TourClosed:"Onboarding Tour Closed",TourDone:"Onboarding Tour Done"}),TaskListEvents:wrapEnum({ContextMenuOpened:"List Context Menu Opened",Created:"List Created",NameChanged:"List Name Changed",PositionChanged:"List Position Changed",Deleted:"List Deleted"})}),De=wrapEnum({PaidFeatureOfferDialog:"Upgrade Offer Dialog",AddCalendarsDialog:"Add Calendars Dialog",OnboardingDialog:"Onboarding"}),Ee=wrapEnum({PaidFeatureOfferDialog:"Upgrade Offer Dialog",OnboardingDialog:"Onboarding"}),be=wrapEnum({Button:"Button",Link:"Link"}),we=wrapEnum({HomeSidebar:"Home Sidebar",SchedulerToolbar:"Scheduler Toolbar",TeamsConfigurationPage:"Teams Configuration Page"}),Se=wrapEnum({BrowserPopup:"Browser Popup",HomeSidebar:"Home Sidebar",LoginDialog:"Login Dialog",PaidFeatureOfferDialog:"Upgrade Offer Dialog",Scheduler:"Scheduler",Sidebar:"Sidebar",Toolbar:"Toolbar"}),Te=wrapEnum({HomePage:"Home Page",Integrations:"Integrations",Sidebar:"Sidebar",TeamsConfigurationPage:"Teams Configuration Page"}),Ae=wrapEnum({Scheduler:"Scheduler",TaskList:"Task List",Trello:"Trello"}),Ie=wrapEnum({Toolbar:"Toolbar",ToolbarMenu:"Toolbar Menu"}),Re=wrapEnum({Drop:"Drop",Click:"Click",Stretching:"Stretching",SetDates:"Set Dates",Dialog:"Dialog",DialogHotkey:"Dialog Hotkey",DialogToolbar:"Dialog Toolbar",DialogMenu:"Dialog Menu",Hotkey:"Hotkey",ContextMenu:"Context Menu",TrelloPopup:"Trello Popup",PowerUpButton:"Power-Up Button",Mouse:"Mouse",RightClick:"Right Click",MenuButton:"Menu Button",Paste:"Paste",TaskLists:"Task Lists"}),Oe=wrapEnum({AllDay:"All Day",NonAllDay:"Non-All Day",Milestone:"Milestone",NoLane:"No Lane",MemberLane:"Member Lane",MemberLaneSelf:"My Lane",BoardLane:"Board Lane",ListLane:"List Lane",LabelLane:"Label Lane"}),Pe=(wrapEnum({ContextMenu:"Context Menu",Mouse:"Mouse",MenuButton:"Menu Button"}),wrapEnum({Settings:"Settings",Banner:"Banner",Dialog:"Dialog"}))},1:function(e,t,r){"use strict";r.d(t,"Bb",(function(){return ngInject})),r.d(t,"Jb",(function(){return visibleToKendo})),r.d(t,"Q",(function(){return getHourStart})),r.d(t,"O",(function(){return getDayStart})),r.d(t,"N",(function(){return getDayEnd})),r.d(t,"W",(function(){return getMidday})),r.d(t,"eb",(function(){return getWeekStart})),r.d(t,"db",(function(){return getWeekEnd})),r.d(t,"ab",(function(){return getQuarterStart})),r.d(t,"Z",(function(){return getQuarterEnd})),r.d(t,"gb",(function(){return getYearStart})),r.d(t,"fb",(function(){return getYearEnd})),r.d(t,"pb",(function(){return isSameDay})),r.d(t,"qb",(function(){return isSameYear})),r.d(t,"jb",(function(){return isAfter})),r.d(t,"ob",(function(){return isInRange})),r.d(t,"sb",(function(){return isWorkDay})),r.d(t,"Y",(function(){return getNextWorkDay})),r.d(t,"c",(function(){return addMinutes})),r.d(t,"b",(function(){return addHours})),r.d(t,"a",(function(){return addDays})),r.d(t,"e",(function(){return addWeeks})),r.d(t,"d",(function(){return addMonths})),r.d(t,"g",(function(){return addYears})),r.d(t,"f",(function(){return addWorkMs})),r.d(t,"Eb",(function(){return setTime})),r.d(t,"Db",(function(){return roundTime})),r.d(t,"M",(function(){return getDateWithTime})),r.d(t,"T",(function(){return getIntervalMs})),r.d(t,"S",(function(){return getIntervalMinutes})),r.d(t,"R",(function(){return getIntervalDays})),r.d(t,"Ab",(function(){return minutesToIntervalUnits})),r.d(t,"hb",(function(){return intervalUnitsToMinutes})),r.d(t,"ib",(function(){return intervalsIntersect})),r.d(t,"v",(function(){return countWorkTime})),r.d(t,"kb",(function(){return isDateString})),r.d(t,"Fb",(function(){return toDateString})),r.d(t,"Ib",(function(){return toTimeString})),r.d(t,"H",(function(){return fromDateOrISOString})),r.d(t,"J",(function(){return fromLocalDateTimeString})),r.d(t,"Hb",(function(){return toLocalDateTimeString})),r.d(t,"lb",(function(){return isDayStart})),r.d(t,"rb",(function(){return isValidDate})),r.d(t,"w",(function(){return datesEqual})),r.d(t,"zb",(function(){return minDate})),r.d(t,"wb",(function(){return maxDate})),r.d(t,"h",(function(){return arraysEqual})),r.d(t,"vb",(function(){return mapsEqual})),r.d(t,"Cb",(function(){return objectsEqual})),r.d(t,"Gb",(function(){return toKendoExceptionDate})),r.d(t,"I",(function(){return fromKendoExceptionDate})),r.d(t,"xb",(function(){return mergeObjects})),r.d(t,"i",(function(){return capitalizeString})),r.d(t,"j",(function(){return compareStrings})),r.d(t,"r",(function(){return compareTrelloMembers})),r.d(t,"p",(function(){return compareTrelloLabels})),r.d(t,"q",(function(){return compareTrelloLists})),r.d(t,"o",(function(){return compareTrelloCustomFields})),r.d(t,"s",(function(){return compareTrelloReminders})),r.d(t,"m",(function(){return compareTrelloChecklists})),r.d(t,"l",(function(){return compareTrelloCheckItems})),r.d(t,"t",(function(){return compareTrelloTimeRecords})),r.d(t,"k",(function(){return compareTrelloAttachments})),r.d(t,"n",(function(){return compareTrelloComment})),r.d(t,"V",(function(){return getLabelHash})),r.d(t,"L",(function(){return getCustomFieldHash})),r.d(t,"X",(function(){return getNewTrelloPosition})),r.d(t,"mb",(function(){return isFile})),r.d(t,"nb",(function(){return isImage})),r.d(t,"ub",(function(){return loadFileAsDataUrlAsync})),r.d(t,"C",(function(){return formatCardTimes})),r.d(t,"D",(function(){return formatCardTimesShort})),r.d(t,"z",(function(){return formatCardDates})),r.d(t,"B",(function(){return formatCardDatesShort})),r.d(t,"A",(function(){return formatCardDatesLong})),r.d(t,"G",(function(){return formatRelativeDate})),r.d(t,"F",(function(){return formatFullDate})),r.d(t,"E",(function(){return formatDuration})),r.d(t,"K",(function(){return getCorrectedLocale})),r.d(t,"x",(function(){return delayAsync})),r.d(t,"tb",(function(){return keepScrollFocus})),r.d(t,"yb",(function(){return migrateLocalStorage})),r.d(t,"U",(function(){return getKendoSortOrder})),r.d(t,"bb",(function(){return getSearchParam})),r.d(t,"y",(function(){return deleteSearchParams})),r.d(t,"cb",(function(){return getUrlWithQuery})),r.d(t,"P",(function(){return getExtension})),r.d(t,"u",(function(){return copyToClipboardAsync}));var i=r(181),a=r.n(i),n=r(65),o=r.n(n),s=r(96),l=r.n(s),d=r(21),c=r.n(d),h=r(184),u=r.n(h),p=r(41),m=r.n(p),f=r(16),y=r.n(f),v=r(125),_=r.n(v),g=r(30),C=r.n(g),k=r(20),D=r.n(k),E=r(12),b=r.n(E),w=r(62),S=r.n(w),T=r(99),A=r.n(T),I=r(33),R=r.n(I),O=r(23),P=r.n(O),L=r(100),M=r.n(L),N=r(101),B=r.n(N),F=r(9),$=r.n(F),x=r(4),G=r.n(x),z=r(13),U=r.n(z),W=r(74),j=r.n(W),H=r(26),V=r.n(H),Y=r(760),K=r(145),X=r(761),q=r(762),Q=r(763),J=r(764),Z=r(765),ee=r(766),te=r(767),re=r(768),ie=r(267),ae=r(769),ne=r(268),oe=r(770),se=r(185),le=(r(771),r(772)),de=r(776),ce=r(773),he=r(774),ue=r(775),pe=r(7),me=r(0);function ngInject(e){return t=>{t.descriptor?t.descriptor.value.$inject=e:t.elements.push(G()({kind:"method",key:"$inject",placement:"static",descriptor:G()({enumerable:!1,configurable:!0,get:function(){return e}},$.a,{value:"Descriptor"})},$.a,{value:"Descriptor"}))}}function visibleToKendo(){return e=>{e.descriptor&&(e.descriptor.enumerable=!0)}}function getHourStart(e){if(e)return Y.a("string"==typeof e?new Date(e):e)}function getDayStart(e){if(e)return K.a("string"==typeof e?new Date(e):e)}function getDayEnd(e){if(e)return X.a("string"==typeof e?new Date(e):e)}function getMidday(e){if(e)return addHours(getDayStart(e),12)}function getWeekStart(e,t){if(!e)return;let r=getDayStart(e);for(let e=0;e<7;e++){if(r.getDay()===t)return r;r=addDays(r,-1)}return r}function getWeekEnd(e,t){if(!e)return;let r=getDayStart(e);for(let e=0;e<7;e++){if(r.getDay()===t)return r;r=addDays(r,1)}return r}function getQuarterStart(e){let t=3*(Math.ceil((e.getMonth()+1)/3)-1);return new Date(e.getFullYear(),t,1)}function getQuarterEnd(e){let t=3*(Math.ceil((e.getMonth()+1)/3)-1)+2,r=new Date(e.getFullYear(),t+1,0).getDate();return new Date(e.getFullYear(),t,r)}function getYearStart(e){return new Date(e.getFullYear(),0,1)}function getYearEnd(e){return new Date(e.getFullYear(),11,31)}function isSameDay(e,t){if(e&&t)return q.a("string"==typeof e?new Date(e):e,"string"==typeof t?new Date(t):t)}function isSameYear(e,t){if(e&&t)return J.a("string"==typeof e?new Date(e):e,"string"==typeof t?new Date(t):t)}function isAfter(e,t){if(e&&t)return Z.a("string"==typeof e?new Date(e):e,"string"==typeof t?new Date(t):t)}function isInRange(e,t,r,i="[]"){if(!e||!t||!r)return;return!!ee.a("string"==typeof e?new Date(e):e,{start:"string"==typeof t?new Date(t):t,end:"string"==typeof r?new Date(r):r})&&(("("!==i[0]||!datesEqual(e,t))&&(")"!==i[1]||!datesEqual(e,r)))}function isWorkDay(e,t){return!t||t.start<=t.end&&e>=t.start&&e<=t.end||t.start>t.end&&(e>=t.start||e<=t.end)}function getNextWorkDay(e,t){if(!e)return;let r=e;for(let e=0;e<7;e++)if(r=addDays(r,1),isWorkDay(r.getDay(),t))return r;return e}function addMinutes(e,t){if(e)return te.a("string"==typeof e?new Date(e):e,t)}function addHours(e,t){if(e)return re.a("string"==typeof e?new Date(e):e,t)}function addDays(e,t){if(e)return ie.a("string"==typeof e?new Date(e):e,t)}function addWeeks(e,t){if(e)return ae.a("string"==typeof e?new Date(e):e,t)}function addMonths(e,t){if(e)return ne.a("string"==typeof e?new Date(e):e,t)}function addYears(e,t){if(e)return oe.a("string"==typeof e?new Date(e):e,t)}function addWorkMs(e,t,r){if(!e)return;if(t=B()(t),!r)return new Date(e.valueOf()+t);let i=e,a=(e=getDayStart(e)).getDay(),n=isWorkDay(a,r),o=getIntervalMs(e,i),s=e.getTime();if(t>=0)for(n&&(t+=o);;){if(a===r.start&&(n=!0),n){let r=addDaysFast(e,1);if(t<r-s&&e.setTime(s+t),t-=r-s,s=r,t<=0)return e}else s=addDaysFast(e,1);a===r.end&&(n=!1),a++,a>6&&(a=0)}else{if(n&&(t+=o)>=0)return new Date(s+t);for(;;){if(a===r.end&&(n=!0),n){if(t>=0)return e;let r=addDaysFast(e,-1);t>r-s&&e.setTime(s+t),t+=s-r,s=r}else s=addDaysFast(e,-1);a===r.start&&(n=!1),a--,a<0&&(a=6)}}}function setTime(e,t){if(!e||!t)return;if("string"==typeof t&&(t=new Date(t)),datesEqual(e,t))return t;let r=new Date(e);return r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function roundTime(e,t){if(!e)return;let r=new Date(e);switch(t){case"quarterHour":r.setMilliseconds(0),r.setSeconds(0),r.setMinutes(15*Math.floor(r.getMinutes()/15))}return r}function getDateWithTime(e,t=0,r=0,i=0,a=0){if(!e)return;let n=new Date(e);return n.setHours(t,r,i,a),n}function getIntervalMs(e,t){if(e&&t)return se.a("string"==typeof t?new Date(t):t,"string"==typeof e?new Date(e):e)}function getIntervalMinutes(e,t){if(e&&t)return le.a("string"==typeof t?new Date(t):t,"string"==typeof e?new Date(e):e)}function getIntervalDays(e,t){if(e&&t)return de.a("string"==typeof t?new Date(t):t,"string"==typeof e?new Date(e):e)}function minutesToIntervalUnits(e){if(0===e)return{unit:"minutes",value:0};let t=V.a.duration(e,"minutes");if(t.minutes())return{unit:"minutes",value:t.asMinutes()};if(t.hours())return{unit:"hours",value:t.asHours()};let r=t.asDays();return r%7!=0?{unit:"days",value:r}:{unit:"weeks",value:t.asWeeks()}}function intervalUnitsToMinutes(e,t){switch(e){case"weeks":case"days":case"hours":case"minutes":return V.a.duration(t,e).asMinutes();default:return t}}function intervalsIntersect(e,t,r,i){return!!(e&&t&&r&&i)&&(r<=t&&i>=e)}function countWorkTime(e,t,r){if(!e||!t)return;if("string"==typeof e&&(e=new Date(e)),"string"==typeof t&&(t=new Date(t)),!r)return{days:getIntervalDays(e,t),minutes:getIntervalMinutes(e,t),ms:getIntervalMs(e,t)};let i=e>t;if(i){let r=e;e=t,t=r}let a=e.getDay(),n=isWorkDay(a,r),o=getDayStart(e),s=0,l=0,d=0,c=!1;n&&(s=-getIntervalMs(o,e),l=-getIntervalMinutes(o,e));let h=o.getTime(),u=t.getTime();for(;;){a===r.start&&(n=!0),n&&(c&&d++,c=!0);let e=addDaysFast(o,1);if(e>=u)return n&&(s+=u-h,l+=getIntervalMinutes(h,t)),c&&e===u&&isWorkDay((a+1)%7,r)&&d++,i&&(s=-s,l=-l,d=-d),{ms:s,minutes:l,days:d};n&&(s+=e-h,l+=(e-h)/6e4),h=e,a===r.end&&(n=!1),a++,a>6&&(a=0)}}function isDateString(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)}function toDateString(e){if(e)return V()(e).format("YYYY-MM-DD")}function toTimeString(e){if(e)return V()(e).format("HH:mm")}function fromDateOrISOString(e,t){if(e)return(null!=t?t:isDateString(e))?function fromDateString(e){if(e)return V()(e,"YYYY-MM-DD").toDate()}(e):new Date(e)}function fromLocalDateTimeString(e){if(e)return V()(e,"YYYY-MM-DDTHH:mm:ss").toDate()}function toLocalDateTimeString(e){if(e)return V()(e).format("YYYY-MM-DDTHH:mm:ss")}function isDayStart(e){if(e)return datesEqual(e,getDayStart(e))}function isValidDate(e){return!!e&&!M()(e.getTime())}function datesEqual(e,t){return e&&t?ce.a("string"==typeof e?new Date(e):e,"string"==typeof t?new Date(t):t):!e==!t}function minDate(e,t){if(e||t)return e&&!t?e:!e&&t?t:he.a([e,t])}function maxDate(e,t){if(e||t)return e&&!t?e:!e&&t?t:ue.a([e,t])}function arraysEqual(e,t,r=!0){if(e.length!==t.length)return!1;var i,a;r&&(e=P()(i=[...e]).call(i),t=P()(a=[...t]).call(a));return j()(e,t)}function mapsEqual(e,t){if(e.size!==t.size)return!1;for(let r of R()(e).call(e))if(!t.has(r))return!1;for(let[r,i]of A()(e).call(e))if(!j()(i,t.get(r)))return!1;return!0}function objectsEqual(e,t){return j()(e,t)}function toKendoExceptionDate(e){return V()(e).utc().format("YYYYMMDDTHHmmss[Z]")}function fromKendoExceptionDate(e){return V.a.utc(e,"YYYYMMDDTHHmmss[Z]").toDate()}function mergeObjects(e,t,r){for(let n in r){var i,a;if(!j()(r[n],t[n]))if(j()(e[n],t[n]))e[n]=r[n];else if(e[n]&&t[n])if(S()(e[n]))e[n]=[...b()(i=e[n]).call(i,(e=>{var i,a;return!D()(i=t[n]).call(i,(t=>j()(t,e)))||!!D()(a=r[n]).call(a,(t=>j()(t,e)))})),...b()(a=r[n]).call(a,(r=>{var i,a;return!D()(i=t[n]).call(i,(e=>j()(e,r)))&&!D()(a=e[n]).call(a,(e=>j()(e,r)))}))];else e[n].constructor===Object&&mergeObjects(e[n],t[n],r[n])}}function capitalizeString(e){if(e)return e.charAt(0).toUpperCase()+e.substr(1)}const fe=new Intl.Collator;function compareStrings(e,t){return fe.compare(e,t)}function compareTrelloMembers(e,t){return compareStrings(e.fullName,t.fullName)}const ye={green:1,yellow:2,orange:3,red:4,purple:5,blue:6,sky:7,lime:8,pink:9,black:10,null:11};function compareTrelloLabels(e,t){let r=(ye[e.color]||100)-(ye[t.color]||100);return 0===r&&(r=compareStrings(e.name,t.name)),r}function compareTrelloLists(e,t){let r=compareStrings(e.boardName,t.boardName);return 0===r&&(r=e.position-t.position),r}const ve={checkbox:1,date:2,list:3,number:4,text:5};function compareTrelloCustomFields(e,t){let r=e.position-t.position;return 0===r&&(r=(ve[e.type]||100)-(ve[t.type]||100),0===r&&(r=compareStrings(e.name,t.name))),r}function compareTrelloReminders(e,t){let r=t.remindBefore-e.remindBefore;return 0===r&&(r=compareStrings(t.id,e.id)),r}function compareTrelloChecklists(e,t){let r=e.position-t.position;return 0===r&&(r=compareStrings(e.name,t.name)),r}function compareTrelloCheckItems(e,t){let r=e.position-t.position;return 0===r&&(r=compareStrings(e.name,t.name)),r}function compareTrelloTimeRecords(e,t){if(e.id===pe.k)return 1;if(t.id===pe.k)return-1;let r=e.from-t.from;return 0===r&&(r=e.to-t.to,0===r&&(r=compareStrings(e.id,t.id))),r}function compareTrelloAttachments(e,t){let r=t.position-e.position;return 0===r&&(r=t.date-e.date,0===r&&(r=compareStrings(t.id,e.id))),r}function compareTrelloComment(e,t){var r,i;if(C()(r=e.id).call(r,pe.k)!==C()(i=t.id).call(i,pe.k)){var a,n;if(C()(a=t.id).call(a,pe.k))return 1;if(C()(n=e.id).call(n,pe.k))return-1}let o=t.creationDate-e.creationDate;return 0===o&&(o=compareStrings(t.id,e.id)),o}function getLabelHash(e){let t=e.color||"null";var r;e.name&&(t=`${t}-${_()(r=e.name).call(r," ","_")}`);return t}function getCustomFieldHash(e){var t;return`${e.type}-${_()(t=e.name).call(t," ","_")}`}function getNewTrelloPosition(e,t){if(0===e)return t.length<=1?pe.U:t[e+1].position/2;if(e<t.length-1){return(t[e-1].position+t[e+1].position)/2}return e>t.length&&(e=t.length),t[e-1].position+pe.U}function isFile(e){return e&&e.constructor===File}const _e=new y.a(["jpg","jpeg","png","bmp","gif"]);function isImage(e){let t;var r,i,a,n;e.type?t=m()(r=e.type).call(r,u()(i=e.type).call(i,"/")+1):t=m()(a=e.name).call(a,u()(n=e.name).call(n,".")+1);return _e.has(t)}function loadFileAsDataUrlAsync(e){return new c.a(((t,r)=>{let i=new FileReader;i.onload=()=>{0===e.size?t(`${i.result}${e.type};base64,`):t(i.result)},i.onerror=e=>r(e),i.readAsDataURL(e)}))}function formatCardTimes(e,t){if(!e||!t)return;if("string"==typeof e&&(e=new Date(e)),"string"==typeof t&&(t=new Date(t)),datesEqual(e,t))return formatCardTimesShort(e);let r=0===e.getMinutes()?"ts3":"ts2",i=0===t.getMinutes()?"ts1":"t";return kendo.format(`{0:${r}} – {1:${i}}`,e,t)}function formatCardTimesShort(e){if(!e)return;"string"==typeof e&&(e=new Date(e));let t=0===e.getMinutes()?"ts1":"t";return kendo.format(`{0:${t}}`,e)}function formatCardDates(e,t,r){if(!e||!t)return;"string"==typeof e&&(e=new Date(e)),"string"==typeof t&&(t=new Date(t));let i=!isSameYear(e,new Date)||!isSameYear(t,new Date)?"{0:D}":"{0:Dm}";r&&(i+=" {0:t}");let a=kendo.format(i,e);if(r){if(datesEqual(e,t))return a;isSameDay(e,t)&&(i="{0:t}")}else if(isSameDay(e,t))return a;return`${a} – ${kendo.format(i,t)}`}function formatCardDatesShort(e,t){if(e&&t)return"string"==typeof e&&(e=new Date(e)),"string"==typeof t&&(t=new Date(t)),isSameDay(e,t)?kendo.toString(e,"Dm"):function isSameMonth(e,t){if(e&&t)return Q.a("string"==typeof e?new Date(e):e,"string"==typeof t?new Date(t):t)}(e,t)?kendo.format("{0:Dd} – {1:Dm}",e,t):isSameYear(e,t)?kendo.format("{0:Dm} – {1:Dm}",e,t):kendo.format("{0:D} – {1:D}",e,t)}function formatCardDatesLong(e,t){if(e&&t)return"string"==typeof e&&(e=new Date(e)),"string"==typeof t&&(t=new Date(t)),isSameYear(e,t)?kendo.format("{0:dd MMMM} – {1:dd MMMM yyyy}",e,t):kendo.format("{0:dd MMMM yyyy} – {1:dd MMMM yyyy}",e,t)}function formatRelativeDate(e){if(e)return Math.abs(getIntervalDays(e,new Date))<7?V()(e).fromNow():formatFullDate(e)}function formatFullDate(e){if(e)return V()(e).format("LLL")}function formatDuration(e,t="days"){let r,i,a,n=V.a.duration(e);"minutes"===t?a=Math.floor(n.asMinutes()):(a=n.minutes(),"hours"===t?i=Math.floor(n.asHours()):(i=n.hours(),r="days"===t?Math.floor(n.asDays()):n.days()));let o=[];return r&&o.push(`${r}d`),i&&o.push(`${i}h`),a&&o.push(`${a}m`),o.join(" ")}function getCorrectedLocale(e){if(e)try{if(kendo.cultures.hasOwnProperty(e))return e;let t=e.toLowerCase();if(C()(t).call(t,"en"))t="en-US";else if(C()(t).call(t,"pt"))t="pt-BR";else if("zh-hant"===t)t="zh-Hant";else if(C()(t).call(t,"zh"))t="zh-Hans";else{let e=["cs","de","es","fi","fr","hu","it","ja","nb","nl","pl","ru","sv","th","tr","uk","vi"];for(let r of e)if(C()(t).call(t,r)){t=r;break}}if(kendo.cultures.hasOwnProperty(t))return t}catch(e){}return"en-US"}function delayAsync(e=0){return new c.a((t=>l()(t,e)))}function keepScrollFocus(e){if(e[0]){let t=e.parent(),r=t.scrollTop();e[0].focus({preventScroll:!0}),t.scrollTop(r)}}function migrateLocalStorage(){}function addDaysFast(e,t){return e.setDate(e.getDate()+t)}const ge={[me.h.TrelloCard]:10,[me.h.TrelloCustomField]:11,[me.h.TrelloCheckItem]:12,[me.h.TrelloTimeRecord]:13,[me.h.GoogleEvent]:20,[me.h.ICalEvent]:30};function getKendoSortOrder(e){let t=[{field:"realStart",dir:"asc"},{field:"realEnd",dir:"desc"},{field:"priority",dir:"desc"},{field:"cardType",dir:"asc",compare:(e,t)=>ge[e.cardType]-ge[t.cardType]},{field:"title",dir:"asc"},{field:"id",dir:"asc"},{field:"recurrenceId",dir:"asc"}];if(e)for(let r of t)r.field=`${e}.${r.field}`;return t}function getSearchParam(e,t){return new o.a(e.location.search).get(t)}function deleteSearchParams(e,t=[],r={}){const{saveInHistory:i=!0}=r;let n=function getSearchParams(e){return a()(new o.a(e.location.search))}(e);for(let e of t)delete n[e];!function setSearchParams(e,t={},r={}){const{saveInHistory:i=!0,isInsideTeams:a=!1}=r;let n=new o.a;for(let e in t)n.set(e,t[e]);a&&n.set([pe.O],!0);let s=getUrlWithQuery(e,n.toString());i?e.history.pushState(t,"",s):e.history.replaceState(t,"",s)}(e,n,{saveInHistory:r.saveInHistory})}function getUrlWithQuery(e,t=""){let{origin:r,pathname:i}=e.location;return t&&(t=`?${t}`),`${r}${i}${t}`}function getExtension(e){var t;return null===(t=/\.([a-z0-9]{1,6})$/i.exec(e))||void 0===t?void 0:t[1].toLowerCase()}function copyToClipboardAsync(e){const t=U()("<input />").css({position:"fixed",opacity:0}).val(e).appendTo("body");return t[0].select(),new c.a((e=>{l()((()=>{window.document.execCommand("copy"),t.remove(),e()}),0)}))}},112:function(e,t,r){"use strict";r.d(t,"a",(function(){return lt}));var i=r(5),a=r.n(i),n=r(9),o=r.n(n),s=r(11),l=r.n(s),d=r(8),c=r.n(d),h=r(4),u=r.n(h),p=r(2),m=r.n(p),f=r(14),y=r.n(f),v=r(261),_=r.n(v),g=r(262),C=r.n(g),k=r(39),D=r.n(k),E=(r(38),r(3)),b=r.n(E),w=r(30),S=r.n(w),T=r(78),A=r.n(T),I=r(27),R=r.n(I),O=r(113),P=r.n(O),L=r(45),M=r.n(L),N=r(17),B=r.n(N),F=r(20),$=r.n(F),x=r(12),G=r.n(x),z=r(99),U=r.n(z),W=r(6),j=r.n(W),H=r(19),V=r.n(H),Y=r(21),K=r.n(Y),X=r(15),q=r.n(X),Q=r(125),J=r.n(Q),Z=r(55),ee=r.n(Z),te=r(189),re=r(26),ie=r.n(re),ae=(r(583),r(89)),ne=r.n(ae),oe=r(124),se=r.n(oe),le=r(107),de=r.n(le),ce=r(10),he=r(82),ue=r.n(he),pe=r(7),me=r(0),fe=r(1);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;m()(r=["method","field"]).call(r,(function(r){m()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;m()(r=["method","field"]).call(r,(function(r){m()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}u()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(m()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),m()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==c()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];l()(o).call(o,c()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),d=this.toElementFinisherExtras((0,a[n])(s)||s);e=d.element,this.addElementPlacement(e,t),d.finisher&&i.push(d.finisher);var h=d.extras;if(h){for(var u=0;u<h.length;u++)this.addElementPlacement(h[u],t);r.push.apply(r,h)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return u()(t,o.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return b()(t=q()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:j()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:b()(e).call(e,this.fromElementDescriptor,this)};return u()(t,o.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[y.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const ye=ue.a.RRule,ve="https://dc.services.visualstudio.com/v2/track",_e=`Microsoft.ApplicationInsights.${J()(pe.b).call(pe.b,"-","")}`,ge=1799995,Ce="planywaySession",ke=(pe.w,{}),De={[me.G.Fullscreen]:"Fullscreen",[me.G.ShareBoard]:"Share Board",[me.G.ShareCard]:"Share Card",[me.G.PushNotificationRemindStart]:"Start Date Reminder"},Ee={[me.B.MultiBoard]:"MultiBoard",[me.B.RecurringCards]:"Recurring Cards",[me.B.Filters]:"Filters",[me.B.GoogleSync]:"Google Sync",[me.B.GoogleConnect]:"Google Connect",[me.B.Milestones]:"Milestones",[me.B.PushNotifications]:"Notifications",[me.B.Dependencies]:"Dependencies",[me.B.Timeline]:"Timeline",[me.B.TimelineBoard]:"Board Timeline",[me.B.TimelineLabel]:"Label Timeline",[me.B.TimelineList]:"List Timeline",[me.B.TimelineMember]:"Member Timeline",[me.B.TimelineScales]:"Timeline Scales",[me.B.TimeRecords]:"Time Entries",[me.B.CustomFields]:"Custom Fields",[me.B.CsvReport]:"Csv Report"},be={google:"Google Play",apple:"App Store",chrome:"Chrome Store"},we={trello:"Trello Button",browser:"Browser Button",close:"Close Button",powerup:"PowerUp Button",setDates:"Set Dates",onboarding:"Onboarding"},Se={[me.sb.Skipped]:"Skipped",[me.sb.MonthlySchedule]:"Monthly Schedule",[me.sb.TeamManagement]:"Team Management",[me.sb.TimeTracking]:"Time Tracking",[me.sb.NoLanes]:"No Lanes"},Te={[me.N.Top]:"Top",[me.N.Left]:"Left",[me.N.Right]:"Right",[me.N.Bottom]:"Bottom"},Ae={[me.M.Calendar]:"Calendar",[me.M.Timeline]:"Timeline",[me.M.TimeTracking]:"Time Tracking"},Ie={[me.O.OneDay]:"Day",[me.O.ThreeDay]:"3-day",[me.O.Week]:"Week",[me.O.Month]:"Month"},Re={[me.ib.None]:"No Lanes",[me.ib.Member]:"Member Lanes",[me.ib.Board]:"Board Lanes",[me.ib.List]:"List Lanes",[me.ib.Label]:"Label Lanes"},Oe={[me.x.Today]:"Today",[me.x.DateSelect]:"Select Date",[me.x.PreviousDay]:"Previous Day",[me.x.NextDay]:"Next Day",[me.x.PreviousWeek]:"Previous Week",[me.x.NextWeek]:"Next Week",[me.x.PreviousMonth]:"Previous Month",[me.x.NextMonth]:"Next Month",[me.x.PreviousQuarter]:"Previous Quarter",[me.x.NextQuarter]:"Next Quarter",[me.x.PreviousYear]:"Previous Year",[me.x.NextYear]:"Next Year",scrollByDrag:"Dragging",scrollByWheel:"Mouse Wheel"},Pe={[me.hb.Day]:"Day",[me.hb.Week]:"Week",[me.hb.Month]:"Month",[me.hb.Quarter]:"Quarter",[me.hb.Year]:"Year"},Le={selectPredefined:"Scale Menu",zoomByButtons:"Scale Button",zoomByWheel:"Mouse Wheel"},Me=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ne={[me.g.Light]:"Light",[me.g.Colorful]:"Colorful"},Be={[me.R.List]:"List",[me.R.Kanban]:"Kanban"},Fe={[me.mb.Private]:"Private",[me.mb.Organization]:"Team",[me.mb.Public]:"Public"},$e={[me.m.CustomField]:"Custom Field"},xe={[me.pb.Checkbox]:"Checkbox",[me.pb.Date]:"Date",[me.pb.List]:"Dropdown",[me.pb.Number]:"Number",[me.pb.Text]:"Text"},Ge={[me.s.Google]:"Google",[me.s.Outlook]:"Outlook",[me.s.Apple]:"iCloud",[me.s.Other]:"Other"},ze={[ce.c.Card]:"Card",[ce.c.Milestone]:"Milestone"},Ue={[me.h.TrelloCard]:"Card",[me.h.TrelloCustomField]:"Custom Field",[me.h.TrelloCheckItem]:"Check Item",[me.h.TrelloTimeRecord]:"Time Entry",[me.h.GoogleEvent]:"Google Event",[me.h.ICalEvent]:"ICal Event"},We={[me.h.TrelloCard]:"Connected Board",[me.h.TrelloCustomField]:"Connected Board",[me.h.TrelloCheckItem]:"Connected Board",[me.h.TrelloTimeRecord]:"Connected Board",[me.h.GoogleEvent]:"Google Calendar",[me.h.ICalEvent]:"ICal Calendar"},je={[ce.e.DueStart]:"Start",[ce.e.DueEnd]:"End",[ce.e.NotLinked]:"Not Linked"},He={[me.w.AllSeries]:"All Series",[me.w.ThisAndFollowing]:"This And Following",[me.w.OnlyOccurrence]:"Only Occurrence"},Ve={[ce.h.RemindStart]:"Start Date"},Ye={[me.b.File]:"File",[me.b.Link]:"Link"},Ke=["No priority","Low","Medium","High"],Xe={[ce.b.Top]:"Top",[ce.b.Bottom]:"Bottom"},qe={[me.f.Blocks]:"Blocking",[me.f.IsBlockedBy]:"Waiting On"},Qe={[me.j.All]:"All Cards",[me.j.Completed]:"Completed Cards",[me.j.Incompleted]:"Incompleted Cards"},Je={[me.K.TimeRecords]:"Time Entries",[me.K.AllCards]:"All Cards"},Ze="Chrome.google.com",et="Trello.com",tt="Teams.microsoft.com",rt="Invite To Board Email",it="Invite To Board Link",at="Direct",nt="Referral",ot="Invite",st="Direct";let lt=function _decorate(e,t,r,i){var n,o=_getDecoratorsApi();if(i)for(var s=0;s<i.length;s++)o=i[s](o);var l=t((function initialize(e){o.initializeInstanceElements(e,d.elements)}),r),d=o.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===n.key&&e.placement===n.placement},r=0;r<e.length;r++){var i,n=e[r];if("method"===n.kind&&(i=a()(t).call(t,isSameElement)))if(_isDataDescriptor(n.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(n)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");i.descriptor=n.descriptor}else{if(_hasDecorators(n)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");i.decorators=n.decorators}_coalesceGetterSetter(n,i)}else t.push(n)}return t}(b()(n=l.d).call(n,_createElementDescriptor)),e);return o.initializeClassElements(l.F,d.elements),o.runClassFinishers(l.F,d.finishers)}([Object(fe.Bb)(["$injector","$log","$interval","$timeout","$window","htmlHelperSrv","platformSrv"])],(function(e){return{F:class TelemetryService{constructor(t,r,i,a,n,o,s){e(this),this._$injector=t,this._$log=r,this._$interval=i,this._$timeout=a,this._$window=n,this._htmlHelperSrv=o,this._platformSrv=s;try{this._browser=se.a.getParser(this._$window.navigator.userAgent)}catch(e){}this._initTelemetryPromise=this._$timeout((()=>this._initTelemetryAsync()),0,!1),this._initMemberPromise=new K.a((e=>this._onMemberInitialized=e))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"telemetrySrv"}},{kind:"field",key:"_acquisitionDate",value:void 0},{kind:"field",key:"_baseUserProperties",value:void 0},{kind:"field",key:"_baseEventProperties",value:void 0},{kind:"field",key:"_debouncingEvents",value:()=>new V.a},{kind:"field",key:"_appInsightsOperationId",value:()=>Object(te.a)()},{kind:"field",key:"_amplitudeSequenceNumber",value:()=>0},{kind:"field",key:"_session",value:void 0},{kind:"field",key:"_userActivityDays",value:()=>[]},{kind:"field",key:"_requests",value:()=>new V.a},{kind:"get",key:"_appCommonSrv",value:function _appCommonSrv(){return this._appCommonSrvLazy||(this._appCommonSrvLazy=this._$injector.get("appCommonSrv")),this._appCommonSrvLazy}},{kind:"get",key:"_iCalIntegrationSrv",value:function _iCalIntegrationSrv(){return this._iCalIntegrationSrvLazy||(this._iCalIntegrationSrvLazy=this._$injector.get("iCalIntegrationSrv")),this._iCalIntegrationSrvLazy}},{kind:"get",key:"_googleIntegrationSrv",value:function _googleIntegrationSrv(){return this._googleIntegrationSrvLazy||(this._googleIntegrationSrvLazy=this._$injector.get("googleIntegrationSrv")),this._googleIntegrationSrvLazy}},{kind:"get",key:"_licenseSrv",value:function _licenseSrv(){return this._licenseSrvLazy||(this._licenseSrvLazy=this._$injector.get("licenseSrv")),this._licenseSrvLazy}},{kind:"get",key:"_settingsSrv",value:function _settingsSrv(){return this._settingsSrvLazy||(this._settingsSrvLazy=this._$injector.get("settingsSrv")),this._settingsSrvLazy}},{kind:"get",key:"_trelloIntegrationSrv",value:function _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=this._$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}},{kind:"get",key:"unauthorizedId",value:function unauthorizedId(){return this._unauthorizedId}},{kind:"method",key:"getAcquisitionDate",value:function getAcquisitionDate(){return this._acquisitionDate}},{kind:"method",key:"initMemberAsync",value:async function initMemberAsync(){try{if(this._initTelemetryPromise&&await this._initTelemetryPromise,this._isMemberIninitialized)return;this._isMemberIninitialized=!0,this._baseUserProperties={...this._baseUserProperties,"License Type":this._licenseSrv.isLicenseActive()?this._licenseSrv.getLicenseType():"FREE"},this._baseEventProperties={...this._baseEventProperties,"License Type":this._licenseSrv.isLicenseActive()?this._licenseSrv.getLicenseType():"FREE"},this._initSessionTelemetry(),this._updateUserActivity(),this._initMemberPromise=null,this._onMemberInitialized()}catch(e){this._$log.error("Planyway telemetry member initialization error:"),this._$log.error(e)}}},{kind:"method",key:"setABTestTests",value:function setABTestTests(e){(async()=>{try{this._initTelemetryPromise&&await this._initTelemetryPromise;let t=[];for(let r in e)e[r]&&t.push(ke[r]);this._baseUserProperties={...this._baseUserProperties,"AB Test":t},this._baseEventProperties={...this._baseEventProperties,"AB Test":t}}catch(e){this._$log.error("Planyway telemetry A/B tests initialization error:"),this._$log.error(e)}})()}},{kind:"method",key:"logSingleEvent",value:function logSingleEvent(e,t={}){(async()=>{try{switch(this._initTelemetryPromise&&await this._initTelemetryPromise,e){case me.X.CalendarEvents.Shown:case me.X.GeneralEvents.HomeScreenShown:case me.X.GeneralEvents.NoBoardsScreenShown:this._sessionAllowed=!0;break;case me.X.CalendarEvents.Hidden:this._sessionAllowed=!1}let r={},i={};switch(e){case me.X.GeneralEvents.FeedbackOpened:j()(i,{Where:t.where});break;case me.X.GeneralEvents.LogInClicked:j()(i,{By:t.by});break;case me.X.GeneralEvents.LogOutClicked:j()(i,{Where:t.where});break;case me.X.GeneralEvents.UpgradeOffered:case me.X.GeneralEvents.UpgradeOfferLearnClicked:case me.X.GeneralEvents.UpgradeOfferUpgradeClicked:j()(i,{Source:t.upgradeSource,Feature:Ee[t.featureName]});break;case me.X.GeneralEvents.TrialStarted:j()(r,{"Trial Source":t.trialSource,"Trial Feature":Ee[t.featureName]}),j()(i,{"Trial Source":t.trialSource,"Trial Feature":Ee[t.featureName]});break;case me.X.GeneralEvents.NewsClicked:case me.X.GeneralEvents.NewsShown:case me.X.GeneralEvents.NewsHidden:case me.X.GeneralEvents.NewsBlogClicked:case me.X.GeneralEvents.NewsHelpClicked:j()(i,{"News Release Date":t.newsDate});break;case me.X.GeneralEvents.NewsLearnMoreClicked:j()(i,{"News Release Date":t.newsDate,"News Link":t.newsLink});break;case me.X.GeneralEvents.TimeZoneChanged:j()(i,{"Time Zone":ie.a.tz.guess(),"Previous Time Zone":t.previousTimeZone});break;case me.X.GeneralEvents.AppsStoreIconClicked:j()(i,{Store:be[t.store]});break;case me.X.CalendarEvents.Shown:case me.X.CalendarEvents.Hidden:j()(i,{"Is By":we[t.isBy]});break;case me.X.CalendarEvents.CurrentBoardChanged:case me.X.CalendarEvents.BoardCreated:j()(i,{Where:t.where});break;case me.X.OnboardingEvents.LoginDialogOpened:this._initMouseflow(!0);break;case me.X.OnboardingEvents.SurveyPassed:j()(i,{"Team Size":t.teamSize,"Used For":t.usedFor,Role:t.role}),j()(r,{"Team Size":t.teamSize,"Used For":t.usedFor,Role:t.role})}this._$log.debug("SINGLE EVENT:",e,r,i),this._sendAmplitudeEvent(e,r,i),this._sendAppInsightsEvent(e,i),this._totalEventsCount++}catch(e){this._$log.error("Planyway log single event error:"),this._$log.error(e)}})()}},{kind:"method",key:"logSessionEvent",value:function logSessionEvent(e,t={}){(async()=>{try{this._initTelemetryPromise&&await this._initTelemetryPromise,this._initMemberPromise&&await this._initMemberPromise,this._initMouseflow();for(let[t,i]of U()(r=this._debouncingEvents).call(r)){var r;t!==e&&(i.resolve(),await Object(fe.x)())}switch(e){case me.X.CalendarEvents.Multiselected:if(this._debouncingEvents.has(e)){let r=this._debouncingEvents.get(e);return this._$timeout.cancel(r.timeout),r.timeout=this._$timeout((()=>r.resolve()),3e3,!1),void(r.eventData=t)}let r={timeout:this._$timeout((()=>r.resolve()),3e3,!1),eventData:t};this._debouncingEvents.set(e,r),await new K.a((e=>r.resolve=e)),t=this._debouncingEvents.get(e).eventData,this._debouncingEvents.delete(e)}switch(e){case me.X.CalendarEvents.Opened:switch(this._sessionAllowed=!0,this._globalBoardSettings.schedulerMode){case me.M.Calendar:e=me.X.CalendarEvents.CalendarOpened;break;case me.M.Timeline:e=me.X.CalendarEvents.TimelineOpened;break;case me.M.TimeTracking:e=me.X.CalendarEvents.TimeTrackingOpened}}switch(this._sessionAllowed&&this._globalBoardSettings.isViewTemplateSelected&&(this._session?this._session.lastActivityDate=new Date:(this._session={memberId:this._memberId,sessionId:ee()(),sessionStartDate:new Date,lastActivityDate:new Date},this._sendSessionStartedEvent(this._session)),this._renewSession()),e){case me.X.CardEvents.Scheduled:this._sendAmplitudeIdentity({add:{"Scheduled Card Count":1}})}let u={},p={};switch(j()(p,{Workspace:"Board"}),e){case me.X.GeneralEvents.FeedbackOpened:case me.X.GeneralEvents.LiveChatOpened:case me.X.GeneralEvents.UpgradeClicked:j()(p,{Where:t.where});break;case me.X.GeneralEvents.TrialExpiredStayFreeClicked:case me.X.GeneralEvents.TrialExpiredContactUsClicked:j()(p,{Where:"Trial Ended Dialog"});break;case me.X.GeneralEvents.TrialExpiredPaymentPeriodChanged:j()(p,{"Payment Period":t.paymentPeriod,Where:"Trial Ended Dialog"});break;case me.X.GeneralEvents.TrialExpiredQuantityChanged:j()(p,{Quantity:t.quantity,Where:"Trial Ended Dialog"});break;case me.X.GeneralEvents.TrialExpiredPurchaseNowClicked:j()(p,{"Payment Period":t.paymentPeriod,Plan:t.licenseType,Quantity:t.quantity,Where:"Trial Ended Dialog"});break;case me.X.GeneralEvents.ImportICalHowToLinkClicked:case me.X.GeneralEvents.ExportICalHowToLinkClicked:j()(p,{Calendar:t.calendarName});break;case me.X.GeneralEvents.OpenedByLink:j()(p,{"Link Type":De[t.linkType]});break;case me.X.GeneralEvents.StandaloneOpenedByLink:j()(p,{Where:me.S[t.where]});break;case me.X.GeneralEvents.PushNotificationsEnabled:case me.X.GeneralEvents.PushNotificationsDisabled:j()(p,{Where:t.where});break;case me.X.GeneralEvents.ReportDialogOpened:case me.X.GeneralEvents.ReportParametersChanged:case me.X.GeneralEvents.ReportBuilt:j()(p,{Report:Je[t.type]});break;case me.X.GeneralEvents.LogOutClicked:j()(p,{Where:t.where});break;case me.X.CalendarEvents.CalendarOpened:{var i,a,n;let e=this._trelloIntegrationSrv.getTrelloBoardById(this._trelloIntegrationSrv.getCurrentBoardId());j()(p,{"Board Member Count":e.members.length,"Board List Count":e.lists.length,"Board Label Count":e.labels.length,"Board Custom Field Count":e.customFields.length,"Cards Visibility":Qe[this._globalBoardSettings.filters.cardsVisibility],"Due Date Linked To":je[e.dueLinkTypeAllDay],"Due Time Linked To":je[e.dueLinkType],"Default Card Duration":Object(fe.E)(e.defaultCardDuration*(e.defaultCardIsAllDay?1440:1)*60*1e3),"Default Card Position":Xe[e.defaultCardPosition],Orientation:Te[this._appCommonSrv.getSchedulerOrientation()],"View Mode":getSchedulerViewMode(this._globalBoardSettings),Template:Se[this._globalBoardSettings.viewTemplate||me.sb.Skipped],"Card Theme":Ne[this._globalBoardSettings.cardTheme],"Trello Card Number":this._globalBoardSettings.showTrelloCardNumber?"Enabled":"Disabled","Show Custom Fields":this._globalBoardSettings.customFieldsAsCards.length>0?"Enabled":"Disabled","Highlight Today":this._globalBoardSettings.highlightToday?"Enabled":"Disabled","Show Week Numbers":this._globalBoardSettings.showWeekNumbers?"Enabled":"Disabled","Show Weekends":this._globalBoardSettings.showWorkDays?"Disabled":"Enabled","Show Non-working Hours":this._globalBoardSettings.showWorkHours?"Disabled":"Enabled","Show Archived":this._globalBoardSettings.isArchivedCardsShown?"Enabled":"Disabled","Show Check Items":this._globalBoardSettings.isCheckItemCardsShown?"Enabled":"Disabled","Show Date Time":this._globalBoardSettings.showDateTime?"Enabled":"Disabled","Show Milestones":this._globalBoardSettings.isMilestonesShown?"Enabled":"Disabled","Show Trello Board":this._globalBoardSettings.showTrelloBoard?"Enabled":"Disabled","Connected Board Count":G()(i=this._trelloIntegrationSrv.getCurrentBoardConnectedBoards()).call(i,(e=>e.isSelected)).length,"Connected Google Calendar Count":G()(a=this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars()).call(a,(e=>e.isSelected)).length,"Connected iCal Calendar Count":G()(n=this._iCalIntegrationSrv.getCurrentBoardConnectedICalCalendars()).call(n,(e=>e.isSelected)).length});break}case me.X.CalendarEvents.TimelineOpened:{var o,s,l;let e=this._trelloIntegrationSrv.getTrelloBoardById(this._trelloIntegrationSrv.getCurrentBoardId()),t=this._appCommonSrv.getTimelineResources();switch(j()(p,{"Board Member Count":e.members.length,"Board List Count":e.lists.length,"Board Label Count":e.labels.length,"Board Custom Field Count":e.customFields.length,"Cards Visibility":Qe[this._globalBoardSettings.filters.cardsVisibility],"Due Date Linked To":je[e.dueLinkTypeAllDay],"Due Time Linked To":je[e.dueLinkType],"Default Card Duration":Object(fe.E)(e.defaultCardDuration*(e.defaultCardIsAllDay?1440:1)*60*1e3),"Default Card Position":Xe[e.defaultCardPosition],Orientation:Te[this._appCommonSrv.getSchedulerOrientation()],"View Mode":getSchedulerViewMode(this._globalBoardSettings),Template:Se[this._globalBoardSettings.viewTemplate||me.sb.Skipped],"Card Theme":Ne[this._globalBoardSettings.cardTheme],"Trello Card Number":this._globalBoardSettings.showTrelloCardNumber?"Enabled":"Disabled","Show Custom Fields":this._globalBoardSettings.customFieldsAsCards.length>0?"Enabled":"Disabled","Highlight Today":this._globalBoardSettings.highlightToday?"Enabled":"Disabled","Show Week Numbers":this._globalBoardSettings.showWeekNumbers?"Enabled":"Disabled","Show Weekends":this._globalBoardSettings.showWorkDays?"Disabled":"Enabled","Show Non-working Hours":this._globalBoardSettings.showWorkHours?"Disabled":"Enabled","Show Archived":this._globalBoardSettings.isArchivedCardsShown?"Enabled":"Disabled","Show Check Items":this._globalBoardSettings.isCheckItemCardsShown?"Enabled":"Disabled","Show Date Time":this._globalBoardSettings.showDateTime?"Enabled":"Disabled","Show Milestones":this._globalBoardSettings.isMilestonesShown?"Enabled":"Disabled","Show Trello Board":this._globalBoardSettings.showTrelloBoard?"Enabled":"Disabled",Scale:Pe[toTimelineScaleUnit(this._globalBoardSettings.timelineScale)],"Milestone Lane":this._globalBoardSettings.isMilestonesShown?"Enabled":"Disabled","Lane Count":G()(t).call(t,(e=>e.id!==pe.k&&e.isSelected)).length,"Connected Board Count":G()(o=this._trelloIntegrationSrv.getCurrentBoardConnectedBoards()).call(o,(e=>e.isSelected)).length,"Connected Google Calendar Count":G()(s=this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars()).call(s,(e=>e.isSelected)).length,"Connected iCal Calendar Count":G()(l=this._iCalIntegrationSrv.getCurrentBoardConnectedICalCalendars()).call(l,(e=>e.isSelected)).length}),this._globalBoardSettings.timelineView){case me.ib.Member:j()(p,{"Unassigned Lane":$()(t).call(t,(e=>e.id===pe.k&&e.isSelected))?"Enabled":"Disabled"})}0;break}case me.X.CalendarEvents.TimeTrackingOpened:{var d,c,h;let e=this._trelloIntegrationSrv.getTrelloBoardById(this._trelloIntegrationSrv.getCurrentBoardId());j()(p,{"Board Member Count":e.members.length,"Board List Count":e.lists.length,"Board Label Count":e.labels.length,"Board Custom Field Count":e.customFields.length,"Cards Visibility":Qe[this._globalBoardSettings.filters.cardsVisibility],"Due Date Linked To":je[e.dueLinkTypeAllDay],"Due Time Linked To":je[e.dueLinkType],"Default Card Duration":Object(fe.E)(e.defaultCardDuration*(e.defaultCardIsAllDay?1440:1)*60*1e3),"Default Card Position":Xe[e.defaultCardPosition],Orientation:Te[this._appCommonSrv.getSchedulerOrientation()],"View Mode":getSchedulerViewMode(this._globalBoardSettings),Template:Se[this._globalBoardSettings.viewTemplate||me.sb.Skipped],"Card Theme":Ne[this._globalBoardSettings.cardTheme],"Trello Card Number":this._globalBoardSettings.showTrelloCardNumber?"Enabled":"Disabled","Show Custom Fields":this._globalBoardSettings.customFieldsAsCards.length>0?"Enabled":"Disabled","Highlight Today":this._globalBoardSettings.highlightToday?"Enabled":"Disabled","Show Week Numbers":this._globalBoardSettings.showWeekNumbers?"Enabled":"Disabled","Show Weekends":this._globalBoardSettings.showWorkDays?"Disabled":"Enabled","Show Non-working Hours":this._globalBoardSettings.showWorkHours?"Disabled":"Enabled","Show Archived":this._globalBoardSettings.isArchivedCardsShown?"Enabled":"Disabled","Show Check Items":this._globalBoardSettings.isCheckItemCardsShown?"Enabled":"Disabled","Show Date Time":this._globalBoardSettings.showDateTime?"Enabled":"Disabled","Show Milestones":this._globalBoardSettings.isMilestonesShown?"Enabled":"Disabled","Show Trello Board":this._globalBoardSettings.showTrelloBoard?"Enabled":"Disabled","Connected Board Count":G()(d=this._trelloIntegrationSrv.getCurrentBoardConnectedBoards()).call(d,(e=>e.isSelected)).length,"Connected Google Calendar Count":G()(c=this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars()).call(c,(e=>e.isSelected)).length,"Connected iCal Calendar Count":G()(h=this._iCalIntegrationSrv.getCurrentBoardConnectedICalCalendars()).call(h,(e=>e.isSelected)).length});break}case me.X.CalendarEvents.OrientationChanged:j()(p,{Orientation:Te[this._appCommonSrv.getSchedulerOrientation()]});break;case me.X.CalendarEvents.ViewModeChanged:switch(j()(p,{"View Mode":getSchedulerViewMode(this._globalBoardSettings)}),this._globalBoardSettings.schedulerMode){case me.M.Timeline:let e=this._appCommonSrv.getTimelineResources();switch(j()(p,{"Lane Count":G()(e).call(e,(e=>e.id!==pe.k&&e.isSelected)).length}),this._globalBoardSettings.timelineView){case me.ib.Member:j()(p,{"Unassigned Lane":$()(e).call(e,(e=>e.id===pe.k&&e.isSelected))?"Enabled":"Disabled"})}}break;case me.X.CalendarEvents.CalendarNavigated:case me.X.CalendarEvents.TimelineNavigated:j()(p,{"Navigate Action":Oe[t.navigateAction],"View Mode":getSchedulerViewMode(this._globalBoardSettings)});break;case me.X.CalendarEvents.TimelineScaleChanged:j()(p,{Scale:Pe[toTimelineScaleUnit(t.timelineScale)],"Scale Method":Le[t.scaleMethod]});break;case me.X.CalendarEvents.Multiselected:j()(p,{View:Ae[this._globalBoardSettings.schedulerMode],"View Mode":getSchedulerViewMode(this._globalBoardSettings),"Card Count":t.cardCount});break;case me.X.CalendarEvents.PublicBoardAdded:j()(p,{Source:t.source});break;case me.X.CalendarEvents.MultiBoardChanged:case me.X.CalendarEvents.MultiBoardSelectedAll:j()(p,{"MultiBoard Count":t.selectedMultiBoardCount});break;case me.X.CalendarEvents.GoogleCalendarsSelectionChanged:case me.X.CalendarEvents.GoogleCalendarsSelectedAll:j()(p,{"Google Calendars Count":t.selectedGoogleCalendarsCount});break;case me.X.CalendarEvents.ICalChanged:case me.X.CalendarEvents.ICalsSelectedAll:j()(p,{"iCal Count":t.selectedICalCount});break;case me.X.CalendarEvents.ICalAdded:j()(p,{"iCal Type":Ge[t.iCalType]});break;case me.X.CalendarEvents.ICalColorChanged:j()(p,{"Previous Color":t.previousColor,"New Color":t.newColor});break;case me.X.CalendarEvents.ImportByURLClicked:j()(p,{Where:t.where});break;case me.X.CalendarEvents.TimelineMilestoneLaneChanged:j()(p,{"Milestone Lane":t.isMilestonesShown?"Enabled":"Disabled"});break;case me.X.CalendarEvents.TimelineMembersChanged:case me.X.CalendarEvents.TimelineMembersSelectedAll:j()(p,{"Timeline Members Count":t.timelineMembersCount});break;case me.X.CalendarEvents.TimelineCalendarsChanged:case me.X.CalendarEvents.TimelineCalendarsSelectedAll:j()(p,{"Timeline Boards Count":t.timelineBoardsCount,"Timeline Google Calendars Count":t.timelineGoogleCalendarsCount,"Timeline iCals Count":t.timelineICalsCount});break;case me.X.CalendarEvents.TimelineListsChanged:case me.X.CalendarEvents.TimelineListsSelectedAll:case me.X.CalendarEvents.TimelineListsSelectedOnlyDefault:j()(p,{"Timeline Lists Count":t.timelineListsCount});break;case me.X.CalendarEvents.TimelineLabelsChanged:case me.X.CalendarEvents.TimelineLabelsSelectedAll:case me.X.CalendarEvents.TimelineLabelsSelectedOnlyDefault:j()(p,{"Timeline Labels Count":t.timelineLabelsCount});break;case me.X.CalendarEvents.SyncStarted:j()(p,{"Sync Only My Cards":t.syncOnlyMemberCards,"Set Event Color By Label":t.setEventColorByLabel,"Sync Completed Cards":t.syncCompletedCards,"Sync As Free":t.syncAsFree});break;case me.X.CalendarEvents.ShareBoardPermissionChanged:case me.X.CalendarEvents.ShareBoardLinkCopied:j()(p,{Permission:Fe[t.permissionLevel]});break;case me.X.CalendarEvents.TaskListsFiltersChanged:j()(p,{"Task List Only Unscheduled":t.taskListsOnlyUnscheduled});break;case me.X.CalendarEvents.TaskListsViewModeChanged:j()(p,{"Task List View Mode":Be[t.taskListsView]});break;case me.X.CalendarEvents.Print:j()(p,{"View Mode":getSchedulerViewMode(this._globalBoardSettings)});break;case me.X.CalendarEvents.CurrentBoardChanged:case me.X.CalendarEvents.BoardCreated:j()(p,{Where:t.where});break;case me.X.SettingsEvents.WorkHoursChanged:j()(p,{"Work Hours":`${ie()(this._globalSettings.workDayStart).format("HH:mm")}-${ie()(this._globalSettings.workDayEnd).format("HH:mm")}`});break;case me.X.SettingsEvents.FirstWeekDayChanged:j()(p,{"First Week Day":Me[this._globalSettings.firstWeekDay]});break;case me.X.SettingsEvents.WorkDaysChanged:j()(p,{"Work Days":`${Me[this._globalSettings.workWeekStart]}-${Me[this._globalSettings.workWeekEnd]}`});break;case me.X.SettingsEvents.LocaleChanged:j()(p,{Locale:this._appCommonSrv.getLocale()});break;case me.X.SettingsEvents.DueLinkAllDayChanged:{let e=this._trelloIntegrationSrv.getTrelloBoardById(this._trelloIntegrationSrv.getCurrentBoardId());j()(p,{"Due Date Linked To":je[e.dueLinkTypeAllDay]});break}case me.X.SettingsEvents.DueLinkChanged:{let e=this._trelloIntegrationSrv.getTrelloBoardById(this._trelloIntegrationSrv.getCurrentBoardId());j()(p,{"Due Time Linked To":je[e.dueLinkType]});break}case me.X.SettingsEvents.DefaultDurationChanged:{let e=this._trelloIntegrationSrv.getTrelloBoardById(this._trelloIntegrationSrv.getCurrentBoardId());j()(p,{"Default Card Duration":Object(fe.E)(e.defaultCardDuration*(e.defaultCardIsAllDay?1440:1)*60*1e3)});break}case me.X.SettingsEvents.DefaultCardPositionChanged:{let e=this._trelloIntegrationSrv.getTrelloBoardById(this._trelloIntegrationSrv.getCurrentBoardId());j()(p,{"Default Card Position":Xe[e.defaultCardPosition]});break}case me.X.SettingsEvents.EnableTrelloFiltersChanged:j()(p,{State:this._globalSettings.isTrelloFiltersEnabled?"Enabled":"Disabled"});break;case me.X.SettingsEvents.CardThemeChanged:j()(p,{"Card Theme":Ne[this._globalBoardSettings.cardTheme]});break;case me.X.SettingsEvents.ShowTrelloBoardChanged:j()(p,{State:this._globalBoardSettings.showTrelloBoard?"Enabled":"Disabled"});break;case me.X.SettingsEvents.ShowTrelloCardNumberChanged:j()(p,{State:this._globalBoardSettings.showTrelloCardNumber?"Enabled":"Disabled"});break;case me.X.SettingsEvents.ShowDateTimeChanged:j()(p,{State:this._globalBoardSettings.showDateTime?"Enabled":"Disabled"});break;case me.X.SettingsEvents.CustomFieldsAsCardsChanged:j()(p,{State:this._globalBoardSettings.customFieldsAsCards.length>0?"Enabled":"Disabled"});break;case me.X.SettingsEvents.HighlightTodayChanged:j()(p,{State:this._globalBoardSettings.highlightToday?"Enabled":"Disabled"});break;case me.X.SettingsEvents.ShowWeekNumbersChanged:j()(p,{State:this._globalBoardSettings.showWeekNumbers?"Enabled":"Disabled"});break;case me.X.SettingsEvents.ShowOnlyWorkDaysChanged:j()(p,{State:this._globalBoardSettings.showWorkDays?"Disabled":"Enabled"});break;case me.X.SettingsEvents.ShowOnlyWorkHoursChanged:j()(p,{State:this._globalBoardSettings.showWorkHours?"Disabled":"Enabled"});break;case me.X.SettingsEvents.ShowArchivedCardsChanged:j()(p,{State:this._globalBoardSettings.isArchivedCardsShown?"Enabled":"Disabled"});break;case me.X.SettingsEvents.ShowCheckItemCardsChanged:j()(p,{State:this._globalBoardSettings.isCheckItemCardsShown?"Enabled":"Disabled"});break;case me.X.SettingsEvents.ShowTimeRecordCardsChanged:j()(p,{State:this._globalBoardSettings.isTimeRecordCardsShown?"Enabled":"Disabled"});break;case me.X.SettingsEvents.ShowMilestonesChanged:j()(p,{State:this._globalBoardSettings.isMilestonesShown?"Enabled":"Disabled"});break;case me.X.SettingsEvents.CardsVisibilityChanged:j()(p,{State:Qe[this._globalBoardSettings.filters.cardsVisibility]});break;case me.X.FiltersEvents.CustomFilterAdded:case me.X.FiltersEvents.CustomFilterRemoved:j()(p,{"Custom Filter Type":$e[t.customFilterType],"Custom Field Type":xe[t.customFieldType]});break;case me.X.CardEvents.OpenedByUrl:case me.X.CardEvents.CreateDialogOpened:case me.X.CardEvents.CreateDialogClosed:case me.X.CardEvents.EditDialogOpened:case me.X.CardEvents.EditDialogClosed:case me.X.CardEvents.EditDialogModeChanged:case me.X.CardEvents.CreatedFromTaskLists:case me.X.CardEvents.Scheduled:case me.X.CardEvents.Reordered:case me.X.CardEvents.ContextMenuOpened:case me.X.CardEvents.MarkedCompleted:case me.X.CardEvents.MarkedIncompleted:case me.X.CardEvents.Archived:case me.X.CardEvents.Unarchived:case me.X.CardEvents.UrlCopied:case me.X.CardEvents.Duplicated:case me.X.CardEvents.Subscribed:case me.X.CardEvents.Unsubscribed:case me.X.CardEvents.Deleted:case me.X.CardEvents.TitleChanged:case me.X.CardEvents.TypeChanged:case me.X.CardEvents.DatesRemoved:case me.X.CardEvents.IsAllDaySet:case me.X.CardEvents.IsAllDayUnset:case me.X.CardEvents.StartChanged:case me.X.CardEvents.EndChanged:case me.X.CardEvents.TimeAdded:case me.X.CardEvents.TimeRemoved:case me.X.CardEvents.DurationChanged:case me.X.CardEvents.DailyEstimateChanged:case me.X.CardEvents.DailyEstimateFieldVisibilityChanged:case me.X.CardEvents.Moved:case me.X.CardEvents.Resized:case me.X.CardEvents.RecurrenceRuleChanged:case me.X.CardEvents.PriorityChanged:case me.X.CardEvents.BoardChanged:case me.X.CardEvents.GoogleCalendarChanged:case me.X.CardEvents.ListChanged:case me.X.CardEvents.ParentCardChanged:case me.X.CardEvents.ParentCardOpened:case me.X.CardEvents.PositionChanged:case me.X.CardEvents.MemberAssigned:case me.X.CardEvents.MemberAssignedSelf:case me.X.CardEvents.MemberUnassigned:case me.X.CardEvents.MemberUnassignedSelf:case me.X.CardEvents.MemberChanged:case me.X.CardEvents.LabelRemoved:case me.X.CardEvents.LabelAdded:case me.X.CardEvents.DescriptionChanged:case me.X.CardEvents.CustomFieldChanged:case me.X.CardEvents.ReminderAdded:case me.X.CardEvents.ReminderChanged:case me.X.CardEvents.ReminderDeleted:case me.X.CardEvents.CardLinkAdded:case me.X.CardEvents.CardLinkTypeChanged:case me.X.CardEvents.CardLinkLinkedCardOpened:case me.X.CardEvents.CardLinkRemoved:case me.X.CardEvents.ChecklistAdded:case me.X.CardEvents.ChecklistNameChanged:case me.X.CardEvents.ChecklistOrderChanged:case me.X.CardEvents.ChecklistCollapsed:case me.X.CardEvents.ChecklistExpanded:case me.X.CardEvents.ChecklistCompletedHidden:case me.X.CardEvents.ChecklistCompletedShown:case me.X.CardEvents.ChecklistDeleted:case me.X.CardEvents.CheckItemAdded:case me.X.CardEvents.CheckItemNameChanged:case me.X.CardEvents.CheckItemOrderChanged:case me.X.CardEvents.CheckItemChecklistChanged:case me.X.CardEvents.CheckItemMarkedCompleted:case me.X.CardEvents.CheckItemMarkedIncompleted:case me.X.CardEvents.CheckItemDeleted:case me.X.CardEvents.CheckItemDatesSet:case me.X.CardEvents.CheckItemDatesRemoved:case me.X.CardEvents.CheckItemIsAllDaySet:case me.X.CardEvents.CheckItemIsAllDayUnset:case me.X.CardEvents.CheckItemStartChanged:case me.X.CardEvents.CheckItemEndChanged:case me.X.CardEvents.CheckItemMemberAssigned:case me.X.CardEvents.CheckItemMemberUnassigned:case me.X.CardEvents.CheckItemContextMenuOpened:case me.X.CardEvents.TimeRecordAdded:case me.X.CardEvents.TimeRecordCommentChanged:case me.X.CardEvents.TimeRecordDeleted:case me.X.CardEvents.TimeRecordFromChanged:case me.X.CardEvents.TimeRecordToChanged:case me.X.CardEvents.TimeRecordDurationChanged:case me.X.CardEvents.TimeRecordTimeAdded:case me.X.CardEvents.TimeRecordTimeRemoved:case me.X.CardEvents.AttachmentAdded:case me.X.CardEvents.AttachmentClicked:case me.X.CardEvents.AttachmentLinkChanged:case me.X.CardEvents.AttachmentNameChanged:case me.X.CardEvents.AttachmentDeleted:case me.X.CardEvents.CommentAdded:case me.X.CardEvents.CommentEdited:case me.X.CardEvents.CommentDeleted:case me.X.CardEvents.CommentReplyClicked:case me.X.CardEvents.CardOpenClicked:case me.X.CardEvents.CardDoubleClicked:case me.X.CardEvents.CardViewOnTimelineClicked:let r;switch(t.where){case me.W.Scheduler:r=getSchedulerViewMode(this._globalBoardSettings);break;case me.W.TaskList:r=Be[this._globalBoardSettings.taskListsView]}switch(j()(p,{"All Day":t.isAllDay,"Card Type":t.cardRole===ce.c.Milestone?ze[t.cardRole]:Ue[t.cardType],"Card Source":t.isCurrentBoardCard?"Current Board":We[t.cardType],"Is New Card":t.isNewCard,"Recurrence Rule":toRecurrenceRuleText(t.recurrenceRule),Priority:Ke[t.priority||0],"Recurring Mode":He[t.modifyRecurringMode],View:t.where===me.W.Scheduler?Ae[this._globalBoardSettings.schedulerMode]:t.where,"View Mode":r,By:t.by,"Is Detailed":t.isDetailed}),t.cardType){case me.h.TrelloTimeRecord:j()(p,{"Card Duration":t.isAllDay?Object(fe.E)(60*t.durationMinutes*1e3):getCardDuration(t)});break;default:j()(p,{"Card Duration":getCardDuration(t)})}switch(e){case me.X.CardEvents.Scheduled:j()(p,{Destination:t.destination});break;case me.X.CardEvents.DailyEstimateChanged:j()(p,{"Daily Estimate":Object(fe.E)(60*t.dailyEstimateMinutes*1e3)});break;case me.X.CardEvents.DailyEstimateFieldVisibilityChanged:j()(p,{State:t.isDailyEstimateFieldShown?"Enabled":"Disabled"});break;case me.X.CardEvents.ReminderAdded:case me.X.CardEvents.ReminderChanged:case me.X.CardEvents.ReminderDeleted:j()(p,{"Reminder Type":Ve[t.reminderType],"Reminder Span":`${t.remindBeforeValue} ${t.remindBeforeUnit}`,"Reminder Time":t.remindTime&&ie()(t.remindTime).format("HH:mm")});break;case me.X.CardEvents.CardLinkAdded:case me.X.CardEvents.CardLinkTypeChanged:case me.X.CardEvents.CardLinkLinkedCardOpened:case me.X.CardEvents.CardLinkRemoved:j()(p,{"Dependency Type":qe[t.linkType]});break;case me.X.CardEvents.TimeRecordAdded:case me.X.CardEvents.TimeRecordCommentChanged:case me.X.CardEvents.TimeRecordDeleted:case me.X.CardEvents.TimeRecordFromChanged:case me.X.CardEvents.TimeRecordToChanged:case me.X.CardEvents.TimeRecordDurationChanged:case me.X.CardEvents.TimeRecordTimeAdded:case me.X.CardEvents.TimeRecordTimeRemoved:j()(p,{Duration:Object(fe.E)(60*t.durationMinutes*1e3),Time:t.isDuration?"No":"Yes"});break;case me.X.CardEvents.AttachmentAdded:case me.X.CardEvents.AttachmentClicked:case me.X.CardEvents.AttachmentNameChanged:case me.X.CardEvents.AttachmentLinkChanged:case me.X.CardEvents.AttachmentDeleted:j()(p,{"Attachment Type":Ye[t.attachmentType]})}break;case me.X.TaskListEvents.ContextMenuOpened:case me.X.TaskListEvents.Created:case me.X.TaskListEvents.NameChanged:case me.X.TaskListEvents.PositionChanged:case me.X.TaskListEvents.Deleted:j()(p,{"Task List View Mode":Be[this._globalBoardSettings.taskListsView],By:t.by});break;case me.X.OnboardingEvents.TourStepShown:j()(p,{Step:t.step});break;case me.X.OnboardingEvents.ChooseModePassed:j()(p,{View:t.mode})}if(this._$log.debug("SESSION EVENT:",e,u,p),this._sendAmplitudeEvent(e,u,p),this._sendAppInsightsEvent(e,p),this._totalEventsCount++,this._session&&this._sessionAllowed){let e=this._serializeSession(this._session);sessionStorage.setItem(Ce,e),localStorage.setItem(`planywaySession-${this._session.sessionId}`,e)}}catch(e){this._$log.error("Planyway log session event error:"),this._$log.error(e)}})()}},{kind:"method",key:"logError",value:function logError(e,t,r={}){(async()=>{try{if("string"==typeof t){if(B()(t).call(t,pe.t))return;t=new Error(t)}this._initTelemetryPromise&&await this._initTelemetryPromise,this._sendAppInsightsError(e,t,r)}catch(e){this._$log.error("Planyway log error error:"),this._$log.error(e)}})()}},{kind:"method",key:"logRequest",value:function logRequest(e,t,r,i){try{let a=Object(te.a)();return this._requests.set(a,{requestType:e,method:t,url:r,data:i,startTime:M()()}),a}catch(e){this._$log.error("Planyway log request error:"),this._$log.error(e)}}},{kind:"method",key:"logRequestEnd",value:function logRequestEnd(e,t,r){e&&this._requests.has(e)&&(async()=>{try{let i=M()();this._initTelemetryPromise&&await this._initTelemetryPromise;let a=this._requests.get(e);this._requests.delete(e);let n=i-a.startTime;(n<0||n>3e5)&&(n=0);let o,s,l=a.method.toUpperCase();a.method!==me.L.Get&&(o=a.data),r&&(s={...r,error:void 0}),this._$log.debug("REQUEST:",a.requestType,l,a.url,a.data,`duration: ${n}ms, status: ${t}, error:`,s),this._sendAppInsightsRequest(e,a.requestType,l,a.url,o,n,t,s)}catch(e){this._$log.error("Planyway log request error:"),this._$log.error(e)}})()}},{kind:"method",key:"countUserActivityDays",value:function countUserActivityDays(e){let t=this._userActivityDays;return e&&(e=Object(fe.O)(e),t=G()(t).call(t,(t=>t>=e))),t.length}},{kind:"get",key:"_memberId",value:function _memberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_localSettings",value:function _localSettings(){return this._settingsSrv.currentSettings.local}},{kind:"get",key:"_globalSettings",value:function _globalSettings(){return this._settingsSrv.currentSettings.global}},{kind:"get",key:"_localBoardSettings",value:function _localBoardSettings(){return this._settingsSrv.currentSettings.getLocalBoardSettings(this._trelloIntegrationSrv.getCurrentBoardId())}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._trelloIntegrationSrv.getCurrentBoardId())}},{kind:"get",key:"_totalEventsCount",value:function _totalEventsCount(){if(localStorage.planywayTotalEventsCount)try{return P()(localStorage.planywayTotalEventsCount,10)}catch(e){}return 0}},{kind:"set",key:"_totalEventsCount",value:function _totalEventsCount(e){localStorage.planywayTotalEventsCount=e}},{kind:"method",key:"_initTelemetryAsync",value:async function _initTelemetryAsync(){let e=M()(),t=this._$window.planywayLoadStartTime?e-this._$window.planywayLoadStartTime:0;(t<0||t>3e5)&&(t=0);let r=await this._platformSrv.getTelemetryDataAsync();switch(this._unauthorizedId=r.unauthorizedId,this._acquisitionDate=new Date(ee.a.getTimestamp(this.unauthorizedId.replace(/^un_/,""))),this._baseUserProperties={"App Type":me.S[this._platformSrv.getAppType()],"App Version":this._platformSrv.getAppVersion(),"Acquisition Date":this._acquisitionDate.toISOString(),"Acquisition Day":ie()(this._acquisitionDate).format("YYYY-MM-DD"),"Acquisition Week":ie()(this._acquisitionDate).format("YYYY/w"),"Acquisition Month":ie()(this._acquisitionDate).format("YYYY-MM"),"Acquisition Year":ie()(this._acquisitionDate).format("YYYY")},this._baseEventProperties={"App Type":me.S[this._platformSrv.getAppType()],"App Version":this._platformSrv.getAppVersion()},this._trafficSourceUserProperties={SourceUrl:"None"},this._platformSrv.getAppType()){case ce.a.Chrome:this._trafficSourceUserProperties={...this._trafficSourceUserProperties,Source:Ze,Channel:nt};break;case ce.a.PowerUp:this._trafficSourceUserProperties={...this._trafficSourceUserProperties,Source:et,Channel:nt};break;case ce.a.Standalone:switch(Object(fe.bb)(this._$window,pe.V)){case me.G.InviteEmail:this._trafficSourceUserProperties={...this._trafficSourceUserProperties,Source:rt,Channel:ot};break;case me.G.InviteLink:this._trafficSourceUserProperties={...this._trafficSourceUserProperties,Source:it,Channel:ot};break;default:this._trafficSourceUserProperties={...this._trafficSourceUserProperties,Source:at,Channel:st}}break;case ce.a.Teams:this._trafficSourceUserProperties={...this._trafficSourceUserProperties,Source:tt,Channel:nt}}const sendAmplitudeIdentity=()=>{let e=this._totalEventsCount;this._totalEventsCount=0,this._sendAmplitudeIdentity({add:{"Total Events Count":e},setOnce:this._trafficSourceUserProperties})};sendAmplitudeIdentity(),this._$interval(sendAmplitudeIdentity,36e5,0,!1);try{if(sessionStorage.planywayAppInsightsOperationId)this._appInsightsOperationId=sessionStorage.planywayAppInsightsOperationId;else{let e={name:`${_e}Request`,iKey:pe.b,time:(new Date).toISOString(),tags:{"ai.application.ver":this._platformSrv.getAppVersion(),"ai.cloud.role":me.S[this._platformSrv.getAppType()],"ai.cloud.roleVer":this._platformSrv.getAppVersion(),"ai.cloud.roleInstance":this._appInsightsOperationId,"ai.operation.id":this._appInsightsOperationId,"ai.operation.name":me.S[this._platformSrv.getAppType()],"ai.user.id":this.unauthorizedId||localStorage.planywayUnauthorizedId,"ai.user.authUserId":this._memberId||localStorage.planywayMemberId,"ai.internal.sdkVersion":`planyway:${this._platformSrv.getAppVersion()}`},data:{baseType:"RequestData",baseData:{ver:2,id:this._appInsightsOperationId,name:me.S[this._platformSrv.getAppType()],duration:ie.a.duration(t).format("HH:mm:ss.SSS",{trim:!1}),responseCode:200,properties:{...this._baseUserProperties,...this._baseEventProperties,Browser:this._browser&&R()(this._browser.getResult(),null,4)}}}};this._settingsSrv.currentFlags.telemetry&&await this._platformSrv.restAsync(me.L.Post,ve,{body:e}),sessionStorage.planywayAppInsightsOperationId=this._appInsightsOperationId}}catch(e){this._$log.error("Planyway initialize Application Insights telemetry error:"),this._$log.error(e)}let{isInstallSent:i}=await this._platformSrv.getTelemetryDataAsync();this._initTelemetryPromise=null,i||(this.logSingleEvent(me.X.GeneralEvents.Installed),this._platformSrv.setTelemetryDataAsync({isInstallSent:!0}))}},{kind:"method",key:"_initSessionTelemetry",value:function _initSessionTelemetry(){try{var e;let t=this._deserializeSession(sessionStorage.getItem(Ce));t&&!this._isSessionExpired(t)&&(this._session=t,this._renewSession());let r=G()(e=A()(localStorage)).call(e,(e=>S()(e).call(e,"planywaySession-")));for(let e of r){let t=this._deserializeSession(localStorage.getItem(e));t&&this._isSessionExpired(t)&&this._sendSessionClosedEvent(t)}}catch(e){this._$log.error("Planyway telemetry initialization error:"),this._$log.error(e)}}},{kind:"method",key:"_renewSession",value:function _renewSession(){this._sessionTimeout&&this._$timeout.cancel(this._sessionTimeout),this._sessionTimeout=this._$timeout((()=>{this._sessionTimeout&&(this._$timeout.cancel(this._sessionTimeout),this._sessionTimeout=null),this._session&&(this._sendSessionClosedEvent(this._session),sessionStorage.removeItem(Ce),this._session=null)}),ge,!1)}},{kind:"method",key:"_isSessionExpired",value:function _isSessionExpired(e){let t=Object(fe.T)(e.lastActivityDate,new Date);return t<0&&(t=0),t>ge||e.memberId!==this._memberId}},{kind:"method",key:"_deserializeSession",value:function _deserializeSession(e){if(e)try{let t=JSON.parse(e);return t.sessionStartDate=new Date(t.sessionStartDate),t.lastActivityDate=new Date(t.lastActivityDate),t}catch(e){}}},{kind:"method",key:"_serializeSession",value:function _serializeSession(e){return R()(e)}},{kind:"method",key:"_updateUserActivity",value:function _updateUserActivity(){this._userActivityDays=[];let e=new Date(Object(fe.Fb)(new Date));if(localStorage.planywayActivityDays)try{var t,r;this._userActivityDays=G()(t=b()(r=JSON.parse(localStorage.planywayActivityDays)).call(r,(e=>new Date(e)))).call(t,(t=>{let r=Object(fe.R)(t,e);return r>0&&r<=90}))}catch(e){}this._userActivityDays.push(e);try{var i;localStorage.planywayActivityDays=R()(b()(i=this._userActivityDays).call(i,(e=>Object(fe.Fb)(e))))}catch(e){}}},{kind:"method",key:"_initMouseflow",value:function _initMouseflow(e=!1){}},{kind:"method",key:"_sendSessionStartedEvent",value:function _sendSessionStartedEvent(e){let t={},r={"Work Hours":`${ie()(this._globalSettings.workDayStart).format("HH:mm")}-${ie()(this._globalSettings.workDayEnd).format("HH:mm")}`,"First Week Day":Me[this._globalSettings.firstWeekDay],"Work Days":`${Me[this._globalSettings.workWeekStart]}-${Me[this._globalSettings.workWeekEnd]}`,Locale:this._appCommonSrv.getLocale(),Sidebar:this._localSettings.schedulerSidebar.isShown?"Shown":"Hidden"};j()(r,{"Trello Filters":this._globalSettings.isTrelloFiltersEnabled?"Enabled":"Disabled"});let i={"Window Width":this._$window.innerWidth,"Window Height":this._$window.innerHeight,"Browser Locale":de.a,"Trello Version":localStorage.planywayTrelloVersion,"Time Zone":ie.a.tz.guess()};this._$log.debug("SESSION EVENT:","Session Started",t,r),this._sendAmplitudeEvent("Session Started",t,r,e,e.sessionStartDate),this._sendAppInsightsEvent("Session Started",{...r,...i},e,e.sessionStartDate),this._totalEventsCount++}},{kind:"method",key:"_sendSessionClosedEvent",value:function _sendSessionClosedEvent(e){let t={},r={};this._$log.debug("SESSION EVENT:","Session Closed",t,r),this._sendAmplitudeEvent("Session Closed",t,r,e,e.lastActivityDate),this._sendAppInsightsEvent("Session Closed",r,e,e.lastActivityDate),this._totalEventsCount++,localStorage.removeItem(`planywaySession-${e.sessionId}`)}},{kind:"method",key:"_sendAmplitudeIdentity",value:function _sendAmplitudeIdentity(e={}){var t;this._sendAmplitudeEvent("$identify",{$add:e.add,$append:e.append,$setOnce:e.setOnce,$unset:e.unset&&D()(t=e.unset).call(t,((e,t)=>(e[t]="-",e)),{})})}},{kind:"method",key:"_sendAmplitudeEvent",value:function _sendAmplitudeEvent(e,t,r,i=this._session,a=new Date){var n,o;let s;switch(e){case me.X.GeneralEvents.Installed:s="Amplitude Installed Event"}let l=Object(te.a)();this._amplitudeSequenceNumber+=1;let d=R()([{uuid:l,insert_id:l,platform:me.S[this._platformSrv.getAppType()],version_name:this._platformSrv.getAppVersionShort(),device_model:me.S[this._platformSrv.getAppType()],os_name:null===(n=this._browser)||void 0===n?void 0:n.getBrowserName(),os_version:null===(o=this._browser)||void 0===o?void 0:o.getBrowserVersion(),user_agent:navigator.userAgent,api_properties:{tracking_options:{ip_address:!1}},device_id:this.unauthorizedId,user_id:this._memberId,user_properties:"$identify"!==e?{...this._baseUserProperties,...t}:t,session_id:i?i.sessionStartDate.getTime():-1,event_id:this._amplitudeSequenceNumber,sequence_number:this._amplitudeSequenceNumber,event_type:e,event_properties:"$identify"!==e?{...this._baseEventProperties,...r}:void 0,timestamp:a.getTime()}]),c=new Date,h={client:pe.a,e:d,v:2,upload_time:c.getTime(),checksum:ne()(2+pe.a+d+c.getTime())};this._settingsSrv.currentFlags.telemetry&&(async()=>{try{await this._platformSrv.restAsync(me.L.PostForm,"https://api.amplitude.com",{body:h,deduplicationTag:s})}catch(e){this._$log.debug("Planyway send Amplitude telemetry error:"),this._$log.debug(e)}})()}},{kind:"method",key:"_sendAppInsightsEvent",value:function _sendAppInsightsEvent(e,t,r=this._session,i=new Date){let a;switch(e){case me.X.GeneralEvents.Installed:a="App Insights Installed Event"}let n={name:`${_e}Event`,iKey:pe.b,time:i.toISOString(),tags:{"ai.application.ver":this._platformSrv.getAppVersion(),"ai.cloud.role":me.S[this._platformSrv.getAppType()],"ai.cloud.roleVer":this._platformSrv.getAppVersion(),"ai.cloud.roleInstance":this._appInsightsOperationId,"ai.operation.id":this._appInsightsOperationId,"ai.operation.name":me.S[this._platformSrv.getAppType()],"ai.session.id":null==r?void 0:r.sessionId,"ai.user.id":this.unauthorizedId,"ai.user.authUserId":this._memberId||localStorage.planywayMemberId,"ai.internal.sdkVersion":`planyway:${this._platformSrv.getAppVersion()}`},data:{baseType:"EventData",baseData:{ver:2,name:e,properties:{...this._baseUserProperties,...this._baseEventProperties,...t}}}};this._settingsSrv.currentFlags.telemetry&&(async()=>{try{await this._platformSrv.restAsync(me.L.Post,ve,{body:n,deduplicationTag:a})}catch(e){this._$log.debug("Planyway send AppInsights telemetry error:"),this._$log.debug(e)}})()}},{kind:"method",key:"_sendAppInsightsError",value:function _sendAppInsightsError(e,t,r={}){let i={};if(t)for(let e of C()(t))switch(e){case"constructor":case"name":case"message":break;default:i[e]="object"==typeof t[e]?R()(t[e],null,4):t[e]}let a={name:`${_e}Exception`,iKey:pe.b,time:(new Date).toISOString(),tags:{"ai.application.ver":this._platformSrv.getAppVersion(),"ai.cloud.role":me.S[this._platformSrv.getAppType()],"ai.cloud.roleVer":this._platformSrv.getAppVersion(),"ai.cloud.roleInstance":this._appInsightsOperationId,"ai.operation.id":this._appInsightsOperationId,"ai.operation.name":me.S[this._platformSrv.getAppType()],"ai.session.id":this._session&&this._session.sessionId,"ai.user.id":this.unauthorizedId||localStorage.planywayUnauthorizedId,"ai.user.authUserId":this._memberId||localStorage.planywayMemberId,"ai.internal.sdkVersion":`planyway:${this._platformSrv.getAppVersion()}`},data:{baseType:"ExceptionData",baseData:{ver:2,exceptions:[{message:t&&t.name?`${t.name}: ${t.message}`:"Unknown error",typeName:e,hasFullStack:!1}],properties:{...this._baseUserProperties,...this._baseEventProperties,...i,"In Class":r.class,"In Property":r.property,"In Method":r.method,Browser:this._browser&&R()(this._browser.getResult(),null,4)}}}};this._settingsSrv.currentFlags.telemetry&&(async()=>{try{await this._platformSrv.restAsync(me.L.Post,ve,{body:a})}catch(e){this._$log.debug("Planyway send AppInsights telemetry error:"),this._$log.debug(e)}})()}},{kind:"method",key:"_sendAppInsightsRequest",value:function _sendAppInsightsRequest(e,t,r,i,a,n,o,s){let l=new _.a(i),d=l.host,c=l.pathname.replace(/tokens\/[0-9a-z]{64}/,"tokens/{token}").replace(/boards\/[0-9a-zA-Z]{8}(\/|$)/,"boards/{sid}").replace(/cards\/[0-9a-zA-Z]{8}(\/|$)/,"cards/{sid}").replace(/calendar\/v3\/calendars\/[\w%-._~]+\/events/,"calendar/v3/calendars/{calendar_id}/events").replace(/[0-9a-f]{24}/g,"{id}").replace(/[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}/g,"{guid}"),h={name:`${_e}RemoteDependency`,iKey:pe.b,time:(new Date).toISOString(),tags:{"ai.application.ver":this._platformSrv.getAppVersion(),"ai.cloud.role":me.S[this._platformSrv.getAppType()],"ai.cloud.roleVer":this._platformSrv.getAppVersion(),"ai.cloud.roleInstance":this._appInsightsOperationId,"ai.operation.id":this._appInsightsOperationId,"ai.operation.name":me.S[this._platformSrv.getAppType()],"ai.session.id":this._session&&this._session.sessionId,"ai.user.id":this.unauthorizedId||localStorage.planywayUnauthorizedId,"ai.user.authUserId":this._memberId||localStorage.planywayMemberId,"ai.internal.sdkVersion":`planyway:${this._platformSrv.getAppVersion()}`},data:{baseType:"RemoteDependencyData",baseData:{ver:2,id:`|${this._appInsightsOperationId}.${e}`,name:`${r} ${c}`,duration:ie.a.duration(n).format("HH:mm:ss.SSS",{trim:!1}),resultCode:o,success:o>=200&&o<400,data:t,target:d,type:"Ajax",properties:{Data:a&&R()(a,((e,t)=>{switch(e){case"memberName":case"memberEmail":case"message":case"attachments":case"serialized":case"name":case"desc":case"due":case"value":case"file":case"url":case"summary":case"description":if("string"==typeof t)return`{${e}}`;break;case"idLabels":case"idMembers":return b()(t).call(t,(e=>"{id}"))}return"string"==typeof t?t.replace(pe.R,"{key}").replace(/[0-9a-z]{64}/g,"{token}").replace(/[0-9a-f]{24}/g,"{id}").replace(/[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}/g,"{guid}"):t})),Response:s&&R()(s,null,4)}}}};this._settingsSrv.currentFlags.telemetry&&(async()=>{try{await this._platformSrv.restAsync(me.L.Post,ve,{body:h})}catch(e){this._$log.debug("Planyway send AppInsights telemetry error:"),this._$log.debug(e)}})()}}]}}));function getSchedulerViewMode(e){switch(e.schedulerMode){case me.M.Calendar:return Ie[e.schedulerView];case me.M.Timeline:return Re[e.timelineView];case me.M.TimeTracking:return"Week"}}function toTimelineScaleUnit(e){if("string"==typeof e)return e;let t=1728e6;if(e<t)return me.hb.Day;let r=6912e6;if(e<r)return me.hb.Week;let i=20736e6;if(e<i)return me.hb.Month;return e<82944e6?me.hb.Quarter:me.hb.Year}function getCardDuration(e){if(Object(fe.rb)(e.start)&&Object(fe.rb)(e.end))return e.cardRole===ce.c.Milestone?"0":e.isAllDay?Object(fe.E)(24*(Object(fe.R)(e.start,e.end)+1)*60*60*1e3)||"0":Object(fe.E)(Object(fe.T)(e.start,e.end))||"0"}function toRecurrenceRuleText(e){return e?Object(fe.i)(ye.fromString(e).toText()):"Does not repeat"}},143:function(e,t,r){"use strict";r.d(t,"a",(function(){return ngBootstrap}));var i=r(79),a=r.n(i),n=r(126),o=r.n(n),s=r(4),l=r.n(s),d=r(78),c=r.n(d),h=r(100),u=r.n(h),p=r(113),m=r.n(p),f=r(2),y=r.n(f),v=r(16),_=r.n(v),g=r(3),C=r.n(g),k=r(21),D=r.n(k),E=r(114),b=r.n(E),w=r(33),S=r.n(w),T=r(5),A=r.n(T),I=r(17),R=r.n(I),O=r(13),P=r.n(O),L=r(66),M=r.n(L),N=(r(429),r(565),r(566),r(567),r(568),r(569),r(570),r(571),r(572),r(258)),B=r.n(N),F=r(259),$=r.n(F),x=r(260),G=r.n(x),z=r(186),U=r.n(z),W=r(7),j=r(0),H=r(112),V=r(52),Y=r.n(V);const K=r(435);function ngBootstrap(e,{modules:t=[],services:r=[],controllers:i=[],directives:n=[],values:s={}}=injections){let d=M.a.module(e,["ngAnimate","ngMessages","ngMaterial","pascalprecht.translate","angular.bind.notifier","ngSanitize","ng-showdown",...t]);!function configAngularJs(e){e.config(["$interpolateProvider",e=>{e.startSymbol("{pw{"),e.endSymbol("}pw}")}]),e.config(["$logProvider",e=>{e.debugEnabled(!1)}]),e.config(["$windowProvider",e=>{const t=e.$get;e.$get=function(...e){let r=t.apply(this,e);const i=window.open;return r.open=function(...e){let t=i(...e);return t&&"_blank"===e[1]&&(t.opener=null),t},r}}]),e.config(["$provide",e=>{e.decorator("$rootScope",["$delegate",e=>(e.__proto__.$once=function(e,t){const r=this.$on(e,(()=>{r(),t()}))},e)])}]),e.config(["$compileProvider",e=>{e.imgSrcSanitizationWhitelist(/^\s*(https|chrome-extension|safari-extension):/),e.debugInfoEnabled(!1),e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1);const t=e.$get[e.$get.length-1];e.$get[e.$get.length-1]=function(...e){let r=t.apply(this,e);return r.$$addScopeInfo=function $$addScopeInfo(e,t,r,i){let a=r?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(a,t)},r}}]),e.config(["$sceDelegateProvider",e=>{let t=["self","chrome-extension://**","safari-extension://**"];e.resourceUrlWhitelist(t)}]),e.config(["$ariaProvider",e=>{e.config({bindRoleForClick:!1,tabindex:!1,bindKeydown:!1})}]),e.config(["$animateProvider",e=>{e.classNameFilter(/pw-animated/)}]),e.decorator("$exceptionHandler",["$delegate","$injector","$log",(e,t,r)=>function(e){if("string"==typeof e&&R()(e).call(e,W.t))return;t.get(H.a.serviceName).logError("Planyway unhandled error",e),r.error("Planyway unhandled error:"),r.error(e)}])}(d),function configAngularJsTranslate(e){M.a.module("pascalprecht.translate").factory("planyway.localeLoaderFty",(()=>e=>{var t;let r=A()(t=S()(K).call(K)).call(t,(t=>b()(t).call(t,`locale-${e.key}.json`)));return D.a.resolve(r&&K(r))})),e.config(["$translateProvider",e=>{var t;e.useLoader("planyway.localeLoaderFty");let r=C()(t=S()(K).call(K)).call(t,(e=>e.match(/^\.\/locale-([a-z]{2}(-[a-zA-Z]{2,4})?)\.json$/)[1].replace("-","_")));e.registerAvailableLanguageKeys(r),e.fallbackLanguage("en"),e.preferredLanguage("en"),e.useSanitizeValueStrategy(null)}])}(d),function configAngularJsMaterial(e){e.config(["$mdAriaProvider",e=>{e.disableWarnings()}]),e.config(["$mdCompilerProvider",e=>{e.respectPreAssignBindingsEnabled(!0)}]),e.config(["$mdThemingProvider",e=>{let t=e.extendPalette("blue",{50:Y.a.color50,100:Y.a.color100,200:Y.a.color200,300:Y.a.color300,400:Y.a.color400,500:Y.a.color500,600:Y.a.color600,700:Y.a.color700,800:Y.a.color800,900:Y.a.color900,A100:Y.a.colorA100,A200:Y.a.colorA200,A400:Y.a.colorA400,A700:Y.a.colorA700});e.definePalette("pwBlue",t),e.theme("default").primaryPalette("pwBlue").accentPalette("pwBlue")}]),e.config(["$provide","$mdIconProvider",(e,t)=>e.value("$mdIconProvider",t)]);const t=new _.a;e.decorator("$animateCss",["$delegate",e=>function(...r){return y()(t).call(t,(e=>e(...r))),e(...r)}]),e.config(["$mdMenuProvider",e=>{const r=e.$get;e.$get=function(...e){let i,a=r.apply(this,e),n={searchBoard:"",searchMember:"",searchResource:"",searchString:""};const s=a.show;a.show=function show(e){var r;let a=P()(e.target).closest("md-menu"),d=e.element,h={};if(a.hasClass("pw-js-menu-autosize")){let t=e.target.offsetWidth;h.width=t,A()(d).call(d,"> md-menu-content").css({minWidth:t,maxWidth:t,width:t})}let p=m()(a.closest(".md-dialog-container, .md-panel-outer-wrapper, .md-open-menu-container").css("z-index"),10);if(u()(p)||(h["z-index"]=p+1e3),d.css(h),A()(r=e.element).call(r,"input").on("keydown",(e=>{e.which!==j.t.Escape&&e.stopPropagation()})),e.scope){if(!e.scope.pwPatched){e.scope.pwPatched=!0;for(let t of c()(n))l()(e.scope,t,{get:()=>n[t],set:e=>{n[t]=e}})}e.onComplete=()=>e.scope.$emit("$mdMenuOpened");const scrollParentOnOverflow=t=>{if(a.hasClass("pw-js-menu-scroll-parent-on-overflow")){let r=e.target.getBoundingClientRect().bottom;B()(e.target).scrollTop+=r-t}},onMenuAnimate=(r,i)=>{if(r===e.element){var a;let e=null===(a=i.from)||void 0===a?void 0:a.top;e&&(t.delete(onMenuAnimate),scrollParentOnOverflow(o()(e)))}};t.add(onMenuAnimate);const r=d[0];r&&(i=e.scope.$watchGroup([()=>r.scrollWidth,()=>r.scrollHeight],(()=>{let e=r.getBoundingClientRect();if(0!==e.width){let t=e.right-window.innerWidth+8;if(t>0){let i=e.left-t;r.style.left=`${i}px`}}if(0!==e.height){let t=e.bottom-window.innerHeight+8;if(t>0){let i=e.top-t;r.style.top=`${i}px`,scrollParentOnOverflow(i)}}})))}if(e.hasBackdrop=!1,e.disableParentScroll=!1,!e.mdMenuCtrl.close.pwPatched){const t=e.mdMenuCtrl.close;e.mdMenuCtrl.close=function close(e,r){t(!0,r)},e.mdMenuCtrl.close.pwPatched=!0}return s(e)};const d=a.hide;return a.hide=function hide(e,t){var r;return null===(r=i)||void 0===r||r(),d(e,{...t,closeAll:!t||!t.closeTo,$destroy:!0})},a.destroy=function(){},a},e.$get.$inject=r.$inject}]),e.config(["$mdInkRippleProvider",e=>{const t=e.$get[1];e.$get[1]=function(e){let r=t.call(this,e),i=r.attach;return r.attach=function(e,t,r){t.one("mouseover",(()=>{let n=i(e,t,r);null!=n&&n.bindEvents&&(t.on("pwMouseDown",a()(M.a).call(M.a,n,n.handleMousedown)),t.on("pwMouseUp",a()(M.a).call(M.a,n,n.handleMouseup)))}))},r}}]),e.decorator("$mdUtil",["$delegate",e=>(e.getParentWithPointerEvents=function(e){return e.parent()},e)])}(d),function configAngularJsShowdown(e){e.config(["$showdownProvider","$provide",(e,t)=>{e.loadExtension($.a).loadExtension(G.a).loadExtension("youtube").loadExtension((()=>[{type:"output",filter:e=>U()(e,{whiteList:{...U.a.whiteList,br:["class"],code:["class"],iframe:["src","width","height","frameborder","allowfullscreen"],img:["class","src","alt","title","width","height"],li:["class","style"],p:["class"],pre:["class"],span:["class","title"],table:["style","width","border","align","valign"],td:["style","width","rowspan","colspan","align","valign"],th:["style","width","rowspan","colspan","align","valign"]}})}])).loadExtension((()=>[{type:"lang",filter:e=>e.replace(/^( {0,3}([*+-]|\d+[.])[ \t]*)(?![^\n]+?)/gm,"$&&nbsp;")}])),e.setOption("noHeaderId",!0).setOption("simplifiedAutoLink",!0).setOption("strikethrough",!0).setOption("tables",!0).setOption("simpleLineBreaks",!0).setOption("emoji",!0).setOption("youtubeWidth",532).setOption("youtubeHeight",300),t.value("$showdownProvider",e)}])}(d),function patchControllers(e){e.decorator("$controller",["$delegate","$timeout","$injector",(e,t,r)=>function(i,a,n,o){let s=e(i,a,n,o);switch(typeof i){case"string":switch(i){case"MenuBarController":s.instance.enableOpenOnHover=()=>{};break;case"mdMenuCtrl":let e;const handleMenuItemHover=function(i){const a=s.instance,n=r.get("$mdUtil");if(a.isAlreadyOpening)return;let o=i.target.querySelector("md-menu")||n.getClosest(i.target,"MD-MENU");e=t((function(){if(o&&(o=M.a.element(o).controller("mdMenu")),a.currentlyOpenMenu&&a.currentlyOpenMenu!==o){var e;let t=a.nestLevel+1;a.currentlyOpenMenu.close(!0,{closeTo:t}),a.isAlreadyOpening=!!o,null===(e=o)||void 0===e||e.open()}else if(o&&!o.isOpen&&o.open){var t;a.isAlreadyOpening=!!o,null===(t=o)||void 0===t||t.open()}}),o?100:250)},handleMenuItemMouseLeave=function(){e&&(t.cancel(e),e=void 0)};l()(s.instance,"handleMenuItemHover",{get:()=>handleMenuItemHover,set:()=>{}}),l()(s.instance,"handleMenuItemMouseLeave",{get:()=>handleMenuItemMouseLeave,set:()=>{}})}break;case"function":switch(i.name){case"MdNavItemController":s.instance.setFocused=()=>{},l()(s.instance,"_focused",{get:()=>!1,set:()=>{}})}}return s}])}(d);for(let e of r)d.service(e.serviceName,e);for(let e of i)d.controller(e.controllerName,e);for(let e of n)d.directive(e.directiveName,e.create);s&&d.value(s),d.controller("IntegrationsCtrl",class DummyIntegrationsController{}),M.a.bootstrap(P()("body"),[e],{strictDi:!0})}},1490:function(e,t,r){"use strict";r.r(t);var i=r(13),a=r.n(i),n=(r(66),r(952),r(420),r(422),r(425),r(955),r(956),r(957),r(553),r(552),r(554),r(555),r(970),r(971),r(972),r(1)),o=r(143),s=r(216),l=r(217),d=r(5),c=r.n(d),h=r(6),u=r.n(h),p=r(9),m=r.n(p),f=r(11),y=r.n(f),v=r(8),_=r.n(v),g=r(4),C=r.n(g),k=r(14),D=r.n(k),E=r(95),b=r.n(E),w=r(12),S=r.n(w),T=r(58),A=r.n(T),I=r(3),R=r.n(I),O=r(21),P=r.n(O),L=r(16),M=r.n(L),N=r(2),B=r.n(N),F=r(15),$=r.n(F),x=r(0),G=r(28);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let z=function _decorate(e,t,r,i){var a,n=_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(_isDataDescriptor(a.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(a)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(_hasDecorators(a)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$log","$interval","$translate","iCalCardsSrv","googleCardsSrv","notificationSrv","settingsSrv","telemetrySrv","trelloCardsSrv"])],(function(e){return{F:class CalendarCardsService{constructor(t,r,i,a,n,o,s,l,d){e(this),this._$log=t,this._$interval=r,this._$translate=i,this._iCalCardsSrv=a,this._googleCardsSrv=n,this._notificationSrv=o,this._settingsSrv=s,this._telemetrySrv=l,this._trelloCardsSrv=d,this._cardsServices=[this._trelloCardsSrv,this._iCalCardsSrv,this._googleCardsSrv],this._cardsServicesByCardType={[x.h.TrelloCard]:this._trelloCardsSrv,[x.h.TrelloCustomField]:this._trelloCardsSrv,[x.h.TrelloCheckItem]:this._trelloCardsSrv,[x.h.TrelloTimeRecord]:this._trelloCardsSrv,[x.h.GoogleEvent]:this._googleCardsSrv,[x.h.ICalEvent]:this._iCalCardsSrv};for(const e in this._calendarCardsListeners)for(let t of this._cardsServices)t.addCalendarCardEventListener(e,((...t)=>{var r;return B()(r=this._calendarCardsListeners[e]).call(r,(e=>e(...t)))}))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"calendarCardsSrv"}},{kind:"field",key:"_cardsServices",value:void 0},{kind:"field",key:"_cardsServicesByCardType",value:void 0},{kind:"field",key:"_calendarCardsListeners",value:()=>({added:new M.a,updated:new M.a,deleted:new M.a,cleared:new M.a})},{kind:"method",key:"needReloadCalendarCards",value:function needReloadCalendarCards(e={}){for(let t of this._cardsServices)t.needReloadCalendarCards(e)}},{kind:"method",key:"getCalendarCardsAsync",value:async function getCalendarCardsAsync(){try{var e,t;let r=await P.a.all(R()(e=this._cardsServices).call(e,(e=>e.getCalendarCardsAsync())));if(A()(r).call(r,(e=>void 0===e)))return;return S()(t=b()(r).call(r)).call(t,(e=>e))}catch(e){throw this._telemetrySrv.logError("Planyway get calendar cards error",e,{class:this.constructor.name,method:this.getCalendarCardsAsync.name}),e}}},{kind:"method",key:"getCalendarCardByIdAsync",value:function getCalendarCardByIdAsync(e,t){let r=this._cardsServicesByCardType[e];if(null==r||!r.getCalendarCardByIdAsync)throw new Error(`Unsupported method for card type: ${e}`);return r.getCalendarCardByIdAsync(t,{cardType:e})}},{kind:"method",key:"getCalendarCardById",value:function getCalendarCardById(e,t){let r=this._cardsServicesByCardType[e];if(null==r||!r.getCalendarCardById)throw new Error(`Unsupported method for card type: ${e}`);return r.getCalendarCardById(t,{cardType:e})}},{kind:"method",key:"createCalendarCardAsync",value:function createCalendarCardAsync(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.createCalendarCardAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return t.createCalendarCardAsync(e)}},{kind:"method",key:"createTempCalendarCardByScheduler",value:function createTempCalendarCardByScheduler(e,t,r={}){void 0===r.addToCache&&(r.addToCache=!0);let i=this._cardsServicesByCardType[e];if(null==i||!i.createTempCalendarCardByScheduler)throw new Error(`Unsupported method for card type: ${e}`);return i.createTempCalendarCardByScheduler(t,{...r,cardType:e})}},{kind:"method",key:"createTempCalendarCardByTaskList",value:function createTempCalendarCardByTaskList(e,t,r={}){void 0===r.addToCache&&(r.addToCache=!0);let i=this._cardsServicesByCardType[e];if(null==i||!i.createTempCalendarCardByTaskList)throw new Error(`Unsupported method for card type: ${e}`);return i.createTempCalendarCardByTaskList(t,{...r,cardType:e})}},{kind:"method",key:"createTempCalendarCardByTimeTrackingAsync",value:function createTempCalendarCardByTimeTrackingAsync(e,t){let r=this._cardsServicesByCardType[e];if(null==r||!r.createTempCalendarCardByTimeTrackingAsync)throw new Error(`Unsupported method for card type: ${e}`);return r.createTempCalendarCardByTimeTrackingAsync(t,{cardType:e})}},{kind:"method",key:"changeCalendarCardType",value:function changeCalendarCardType(e,t){let r=e.cardType;if(r!==t)for(let a of this._cardsServices){var i;null===(i=a.changeCalendarCardType)||void 0===i||i.call(a,e,r,t)}}},{kind:"method",key:"updateCalendarCardAsync",value:function updateCalendarCardAsync(e,t={}){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.updateCalendarCardAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.updateCalendarCardAsync(e,t)}},{kind:"method",key:"updateCalendarCardPropertiesAsync",value:function updateCalendarCardPropertiesAsync(e,t){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.updateCalendarCardPropertiesAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.updateCalendarCardPropertiesAsync(e,t)}},{kind:"method",key:"updateCalendarCardBySchedulerAsync",value:function updateCalendarCardBySchedulerAsync(e,t,r={}){let i=this._cardsServicesByCardType[e];if(null==i||!i.updateCalendarCardBySchedulerAsync)throw new Error(`Unsupported method for card type: ${e}`);return i.updateCalendarCardBySchedulerAsync(t,{...r,cardType:e})}},{kind:"method",key:"removeCalendarCardAsync",value:function removeCalendarCardAsync(e,t={}){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.removeCalendarCardAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.removeCalendarCardAsync(e,t)}},{kind:"method",key:"deleteCalendarCardAsync",value:function deleteCalendarCardAsync(e,t={}){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.deleteCalendarCardAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.deleteCalendarCardAsync(e,t)}},{kind:"method",key:"createRecurrenceExceptionAsync",value:function createRecurrenceExceptionAsync(e,t){let r=this.createTempCalendarCardByScheduler(e,t,{addToCache:!1});return this.createCalendarCardAsync(r)}},{kind:"method",key:"createRecurrenceGapAsync",value:function createRecurrenceGapAsync(e,t){let r=this._cardsServicesByCardType[e];if(null==r||!r.createRecurrenceGapAsync)throw new Error(`Unsupported method for card type: ${e}`);return r.createRecurrenceGapAsync(t,{cardType:e})}},{kind:"method",key:"addExceptionToRecurrentAsync",value:function addExceptionToRecurrentAsync(e,t,r={}){let i=this._cardsServicesByCardType[e];if(null==i||!i.addExceptionToRecurrentAsync)throw new Error(`Unsupported method for card type: ${e}`);return i.addExceptionToRecurrentAsync(t,{...r,cardType:e})}},{kind:"method",key:"removeExceptionsFromRecurrentAsync",value:function removeExceptionsFromRecurrentAsync(e,t,r={}){let i=this._cardsServicesByCardType[e];if(null==i||!i.removeExceptionsFromRecurrentAsync)throw new Error(`Unsupported method for card type: ${e}`);return i.removeExceptionsFromRecurrentAsync(t,{...r,cardType:e})}},{kind:"method",key:"deleteRecurrenceExceptionsAsync",value:function deleteRecurrenceExceptionsAsync(e,t,r={}){let i=this._cardsServicesByCardType[e];if(null==i||!i.deleteRecurrenceExceptionsAsync)throw new Error(`Unsupported method for card type: ${e}`);return i.deleteRecurrenceExceptionsAsync(t,{...r,cardType:e})}},{kind:"method",key:"getCalendarCardCustomFieldValues",value:function getCalendarCardCustomFieldValues(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.getCalendarCardCustomFieldValues)throw new Error(`Unsupported method for card type: ${e.cardType}`);return t.getCalendarCardCustomFieldValues(e)}},{kind:"method",key:"getCalendarCardChecklists",value:function getCalendarCardChecklists(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.getCalendarCardChecklists)throw new Error(`Unsupported method for card type: ${e.cardType}`);return t.getCalendarCardChecklists(e)}},{kind:"method",key:"createCalendarCardChecklistAsync",value:function createCalendarCardChecklistAsync(e,t={}){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.createCalendarCardChecklistAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.createCalendarCardChecklistAsync(e,t)}},{kind:"method",key:"updateCalendarCardChecklistAsync",value:function updateCalendarCardChecklistAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.updateCalendarCardChecklistAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return i.updateCalendarCardChecklistAsync(e,t,r)}},{kind:"method",key:"deleteCalendarCardChecklistAsync",value:function deleteCalendarCardChecklistAsync(e,t){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.deleteCalendarCardChecklistAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.deleteCalendarCardChecklistAsync(e,t)}},{kind:"method",key:"createCalendarCardCheckItemAsync",value:function createCalendarCardCheckItemAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.createCalendarCardCheckItemAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return i.createCalendarCardCheckItemAsync(e,t,r)}},{kind:"method",key:"updateCalendarCardCheckItemAsync",value:function updateCalendarCardCheckItemAsync(e,t,r,i){let a=this._cardsServicesByCardType[e.cardType];if(null==a||!a.updateCalendarCardCheckItemAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return a.updateCalendarCardCheckItemAsync(e,t,r,i)}},{kind:"method",key:"deleteCalendarCardCheckItemAsync",value:function deleteCalendarCardCheckItemAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.deleteCalendarCardCheckItemAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return i.deleteCalendarCardCheckItemAsync(e,t,r)}},{kind:"method",key:"getCalendarCardTimeRecords",value:function getCalendarCardTimeRecords(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.getCalendarCardTimeRecords)throw new Error(`Unsupported method for card type: ${e.cardType}`);return t.getCalendarCardTimeRecords(e)}},{kind:"method",key:"createCalendarCardTimeRecordAsync",value:function createCalendarCardTimeRecordAsync(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.createCalendarCardTimeRecordAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return t.createCalendarCardTimeRecordAsync(e)}},{kind:"method",key:"updateCalendarCardTimeRecordAsync",value:function updateCalendarCardTimeRecordAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.updateCalendarCardTimeRecordAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return i.updateCalendarCardTimeRecordAsync(e,t,r)}},{kind:"method",key:"deleteCalendarCardTimeRecordAsync",value:function deleteCalendarCardTimeRecordAsync(e,t){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.deleteCalendarCardTimeRecordAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.deleteCalendarCardTimeRecordAsync(e,t)}},{kind:"method",key:"getCalendarCardAttachments",value:function getCalendarCardAttachments(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.getCalendarCardAttachments)throw new Error(`Unsupported method for card type: ${e.cardType}`);return t.getCalendarCardAttachments(e)}},{kind:"method",key:"createCalendarCardAttachmentAsync",value:function createCalendarCardAttachmentAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.createCalendarCardAttachmentAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return i.createCalendarCardAttachmentAsync(e,t,r)}},{kind:"method",key:"updateCalendarCardAttachmentAsync",value:function updateCalendarCardAttachmentAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.updateCalendarCardAttachmentAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return i.updateCalendarCardAttachmentAsync(e,t,r)}},{kind:"method",key:"deleteCalendarCardAttachmentAsync",value:function deleteCalendarCardAttachmentAsync(e,t){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.deleteCalendarCardAttachmentAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.deleteCalendarCardAttachmentAsync(e,t)}},{kind:"method",key:"getCalendarCardComments",value:function getCalendarCardComments(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.getCalendarCardComments)throw new Error(`Unsupported method for card type: ${e.cardType}`);return t.getCalendarCardComments(e)}},{kind:"method",key:"reloadCalendarCardCommentsAsync",value:function reloadCalendarCardCommentsAsync(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.reloadCalendarCardCommentsAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return t.reloadCalendarCardCommentsAsync(e)}},{kind:"method",key:"createCalendarCardCommentAsync",value:function createCalendarCardCommentAsync(e,t){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.createCalendarCardCommentAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.createCalendarCardCommentAsync(e,t)}},{kind:"method",key:"updateCalendarCardCommentAsync",value:function updateCalendarCardCommentAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.updateCalendarCardCommentAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return i.updateCalendarCardCommentAsync(e,t,r)}},{kind:"method",key:"deleteCalendarCardCommentAsync",value:function deleteCalendarCardCommentAsync(e,t){let r=this._cardsServicesByCardType[e.cardType];if(null==r||!r.deleteCalendarCardCommentAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return r.deleteCalendarCardCommentAsync(e,t)}},{kind:"method",key:"getCalendarCardLinks",value:function getCalendarCardLinks(e){let t=this._cardsServicesByCardType[e.cardType];if(null==t||!t.getCalendarCardLinks)throw new Error(`Unsupported method for card type: ${e.cardType}`);return this._trelloCardsSrv.getCalendarCardLinks(e)}},{kind:"method",key:"createCalendarCardLinkAsync",value:function createCalendarCardLinkAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.createCalendarCardLinkAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return this._trelloCardsSrv.createCalendarCardLinkAsync(e,t,r)}},{kind:"method",key:"updateCalendarCardLinkAsync",value:function updateCalendarCardLinkAsync(e,t,r,i){let a=this._cardsServicesByCardType[e.cardType];if(null==a||!a.removeCalendarCardLinkAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return this._trelloCardsSrv.updateCalendarCardLinkAsync(e,t,r,i)}},{kind:"method",key:"removeCalendarCardLinkAsync",value:function removeCalendarCardLinkAsync(e,t,r){let i=this._cardsServicesByCardType[e.cardType];if(null==i||!i.removeCalendarCardLinkAsync)throw new Error(`Unsupported method for card type: ${e.cardType}`);return this._trelloCardsSrv.removeCalendarCardLinkAsync(e,t,r)}},{kind:"method",key:"addCalendarCardEventListener",value:function addCalendarCardEventListener(e,t){let r=this._calendarCardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.add(t)}},{kind:"method",key:"removeCalendarCardEventListener",value:function removeCalendarCardEventListener(e,t){let r=this._calendarCardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.delete(t)}},{kind:"method",key:"isCalendarCardVisible",value:function isCalendarCardVisible(e){let t=this._cardsServicesByCardType[e.cardType];return null==t||!t.isCalendarCardVisible||t.isCalendarCardVisible(e)}}]}}));var U=r(7);function ChatService_getDecoratorsApi(){ChatService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ChatService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ChatService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ChatService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ChatService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ChatService_createElementDescriptor(e){var t,r=ChatService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ChatService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ChatService_hasDecorators(e){return e.decorators&&e.decorators.length}function ChatService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ChatService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ChatService_toPropertyKey(e){var t=function ChatService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const W="planywayChatClosedByFreshchat",j="planywayChatClosedByPlanyway",H="planywayChatInitialized",V="planywayChatOpenedByPlanyway",Y="planywayChatUnreadMessagesCountChanged",K="planywayChatError";let X=function ChatService_decorate(e,t,r,i){var a,n=ChatService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ChatService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ChatService_isDataDescriptor(a.descriptor)||ChatService_isDataDescriptor(i.descriptor)){if(ChatService_hasDecorators(a)||ChatService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ChatService_hasDecorators(a)){if(ChatService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ChatService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ChatService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$log","htmlHelperSrv","licenseSrv","platformSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class ChatService{constructor(t,r,i,a,n,o,s,l){e(this),this._$rootScope=t,this._$log=r,this._htmlHelperSrv=i,this._licenseSrv=a,this._platformSrv=n,this._settingsSrv=o,this._telemetrySrv=s,this._trelloIntegrationSrv=l,this._unreadMessagesCount=0,this._isChatInitialized=!1,document.addEventListener(W,(()=>this.chatWindowShown=!1)),document.addEventListener(Y,(e=>{var t;const r=(null===(t=e.detail)||void 0===t?void 0:t.count)||0;this._$rootScope.$evalAsync((()=>{this._unreadMessagesCount=r,r>0&&(this.chatWindowShown=!0)}))}))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"chatSrv"}},{kind:"field",key:"_isInitialized",value:()=>!1},{kind:"method",key:"initializeChatAsync",value:async function initializeChatAsync(){if(this._isInitialized)return;if(this._isInitialized=!0,!this._settingsSrv.currentFlags.telemetry)return;let e=new P.a(((e,t)=>{this._htmlHelperSrv.injectScript(((e,t,r,i,a,n,o,s,l,d,c,h,u,p,m)=>{let f=document.createElement("script");f.type="text/javascript",f.async=!0,f.src=`${s}/js/widget.js`,f.onload=function(){try{if(!window.fcWidget)return;window.fcWidget.init({token:o,host:s,externalId:e,config:{disableNotifications:!0,headerProperty:{hideChatButton:!0}}}),window.fcWidget.user.get((e=>{e&&200===e.status&&e.data?window.fcWidget.user.update({meta:{"App Type":a,"App Version":n,"License Type":i}}):window.fcWidget.user.setProperties({firstName:t,email:r,"App Type":a,"App Version":n,"License Type":i})})),window.fcWidget.on("widget:opened",(()=>{document.dispatchEvent(new CustomEvent(l))})),window.fcWidget.on("widget:closed",(()=>{document.dispatchEvent(new CustomEvent(d))})),window.fcWidget.on("unreadCount:notify",(e=>{document.dispatchEvent(new CustomEvent(c,{detail:e}))})),document.addEventListener(h,(()=>{window.fcWidget.open()})),document.addEventListener(u,(()=>{window.fcWidget.close()})),document.dispatchEvent(new CustomEvent(p))}catch(e){document.dispatchEvent(new CustomEvent(m,{detail:e}))}},(document.head||document.documentElement).appendChild(f)}),this._trelloIntegrationSrv.getMemberId(),this._trelloIntegrationSrv.getMemberName(),this._trelloIntegrationSrv.getMemberEmail(),this._licenseSrv.getLicenseType(),x.S[this._platformSrv.getAppType()],this._platformSrv.getAppVersion(),U.m,U.n,"planywayChatOpenedByFreshchat",W,Y,V,j,H,K),document.addEventListener(H,(()=>{this._isChatInitialized=!0,e()})),document.addEventListener(K,(({detail:e})=>{t(e)}))}));try{await P.a.race([Object(n.x)(5e3),e])}catch(e){this._$log.error("Freshchat initialization error:"),this._$log.error(e),this._telemetrySrv.logError("Freshchat initialization error",e,{class:this.constructor.name,method:this.initializeChatAsync.name})}}},{kind:"get",key:"isChatInitialized",value:function isChatInitialized(){return this._isChatInitialized}},{kind:"get",key:"unreadMessagesCount",value:function unreadMessagesCount(){return this._unreadMessagesCount}},{kind:"get",key:"chatWindowShown",value:function chatWindowShown(){return this._chatWindowShown}},{kind:"set",key:"chatWindowShown",value:function chatWindowShown(e){this._chatWindowShown!==e&&(this._chatWindowShown=e,e?(a()(".pw-product-tour").addClass("pw-product-tour--shifted"),document.dispatchEvent(new CustomEvent(V))):(a()(".pw-product-tour").removeClass("pw-product-tour--shifted"),document.dispatchEvent(new CustomEvent(j))))}}]}}));var q=r(162),Q=r(43),J=r.n(Q),Z=r(657),ee=r.n(Z),te=r(22),re=r.n(te);function AddAttachmentDialogController_getDecoratorsApi(){AddAttachmentDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AddAttachmentDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AddAttachmentDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AddAttachmentDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AddAttachmentDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AddAttachmentDialogController_createElementDescriptor(e){var t,r=AddAttachmentDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AddAttachmentDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AddAttachmentDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function AddAttachmentDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AddAttachmentDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AddAttachmentDialogController_toPropertyKey(e){var t=function AddAttachmentDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ie=function AddAttachmentDialogController_decorate(e,t,r,i){var a,n=AddAttachmentDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AddAttachmentDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AddAttachmentDialogController_isDataDescriptor(a.descriptor)||AddAttachmentDialogController_isDataDescriptor(i.descriptor)){if(AddAttachmentDialogController_hasDecorators(a)||AddAttachmentDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AddAttachmentDialogController_hasDecorators(a)){if(AddAttachmentDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AddAttachmentDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AddAttachmentDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","mdPanelRef"])],(function(e){return{F:class AddAttachmentDialogController{constructor(t,r){e(this),this._$element=t,this._mdPanelRef=r,this._url=null,this._files=null,this._name=null,this._$element.on("change",".pw-js-files-input",(e=>this.files=re()(e.currentTarget.files)))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"addAttachmentDialogCtrl"}},{kind:"get",key:"files",value:function files(){return this._files}},{kind:"set",key:"files",value:function files(e){this._files=e,this._mdPanelRef.close("files")}},{kind:"get",key:"url",value:function url(){return this._url}},{kind:"set",key:"url",value:function url(e){this._url=e}},{kind:"get",key:"name",value:function name(){return this._name}},{kind:"set",key:"name",value:function name(e){this._name=e}},{kind:"method",key:"attachLink",value:function attachLink(){this._mdPanelRef.close("link")}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._mdPanelRef.close()}}]}}));var ae=r(265),ne=r.n(ae);function AddCalendarsDialogController_getDecoratorsApi(){AddCalendarsDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AddCalendarsDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AddCalendarsDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AddCalendarsDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AddCalendarsDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AddCalendarsDialogController_createElementDescriptor(e){var t,r=AddCalendarsDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AddCalendarsDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AddCalendarsDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function AddCalendarsDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AddCalendarsDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AddCalendarsDialogController_toPropertyKey(e){var t=function AddCalendarsDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let oe=function AddCalendarsDialogController_decorate(e,t,r,i){var a,n=AddCalendarsDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AddCalendarsDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AddCalendarsDialogController_isDataDescriptor(a.descriptor)||AddCalendarsDialogController_isDataDescriptor(i.descriptor)){if(AddCalendarsDialogController_hasDecorators(a)||AddCalendarsDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AddCalendarsDialogController_hasDecorators(a)){if(AddCalendarsDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AddCalendarsDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AddCalendarsDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$sce","$translate","dialogSrv","googleIntegrationSrv","licenseSrv","mdPanelRef","platformSrv","telemetrySrv"])],(function(e){return{F:class AddCalendarsDialogController{constructor(t,r,i,a,n,o,s,l,d){e(this),this._$scope=t,this._$sce=r,this._$translate=i,this._dialogSrv=a,this._googleIntegrationSrv=n,this._licenseSrv=o,this._mdPanelRef=s,this._platformSrv=l,this._telemetrySrv=d}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"addCalendarsDialogCtrl"}},{kind:"get",key:"googleCalendarIconUrl",value:function googleCalendarIconUrl(){return this._platformSrv.getPlatformUrl(ne.a)}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._mdPanelRef.close()}},{kind:"get",key:"isGoogleConnectBusy",value:function isGoogleConnectBusy(){return this._googleIntegrationSrv.isGoogleConnectBusy()||this._isGoogleConnectBusy}},{kind:"set",key:"isGoogleConnectBusy",value:function isGoogleConnectBusy(e){this._$scope.$evalAsync((()=>this._isGoogleConnectBusy=e))}},{kind:"get",key:"googleConnectDescription",value:function googleConnectDescription(){return this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.INTEGRATIONS_GOOGLE_CONNECT"))}},{kind:"get",key:"isGoogleConnectEnabled",value:function isGoogleConnectEnabled(){return this._googleIntegrationSrv.isGoogleConnectEnabled()}},{kind:"set",key:"isGoogleConnectEnabled",value:function isGoogleConnectEnabled(e){}},{kind:"method",key:"toggleGoogleConnectAsync",value:async function toggleGoogleConnectAsync(e){try{if(this.isGoogleConnectBusy=!0,this.isGoogleConnectEnabled)await this._disableGoogleConnectAsync();else{if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.GoogleConnect,!0))return;this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.IntegrationsEnableGoogleConnectClicked),await this._dialogSrv.showGoogleConnectDialogAsync(e)}}finally{this.isGoogleConnectBusy=!1}}},{kind:"get",key:"isImportICalBusy",value:function isImportICalBusy(){return this._isImportICalBusy}},{kind:"set",key:"isImportICalBusy",value:function isImportICalBusy(e){this._$scope.$evalAsync((()=>this._isImportICalBusy=e))}},{kind:"get",key:"importICalDescription",value:function importICalDescription(){return this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.INTEGRATIONS_IMPORT_ICAL"))}},{kind:"method",key:"showImportICalDialog",value:async function showImportICalDialog(e){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ImportByURLClicked,{where:x.T.Sidebar});try{this.isImportICalBusy=!0,await this._dialogSrv.showICalImportDialogAsync(e)}finally{this.isImportICalBusy=!1}}},{kind:"method",key:"_disableGoogleConnectAsync",value:async function _disableGoogleConnectAsync(){try{this.isGoogleConnectBusy=!0,await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.DISABLE_GOOGLE_CONNECT_TITLE"),this._$translate.instant("DIALOGS.DISABLE_GOOGLE_CONNECT_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]})&&(this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.GoogleConnectDisabled),await this._googleIntegrationSrv.disableGoogleConnectAsync())}finally{this.isGoogleConnectBusy=!1}}}]}}));var se=r(65),le=r.n(se),de=r(30),ce=r.n(de);function AddBoardByUrlDialogController_getDecoratorsApi(){AddBoardByUrlDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AddBoardByUrlDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AddBoardByUrlDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AddBoardByUrlDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AddBoardByUrlDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AddBoardByUrlDialogController_createElementDescriptor(e){var t,r=AddBoardByUrlDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AddBoardByUrlDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AddBoardByUrlDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function AddBoardByUrlDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AddBoardByUrlDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AddBoardByUrlDialogController_toPropertyKey(e){var t=function AddBoardByUrlDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let he=function AddBoardByUrlDialogController_decorate(e,t,r,i){var a,n=AddBoardByUrlDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AddBoardByUrlDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AddBoardByUrlDialogController_isDataDescriptor(a.descriptor)||AddBoardByUrlDialogController_isDataDescriptor(i.descriptor)){if(AddBoardByUrlDialogController_hasDecorators(a)||AddBoardByUrlDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AddBoardByUrlDialogController_hasDecorators(a)){if(AddBoardByUrlDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AddBoardByUrlDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AddBoardByUrlDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$translate","$mdDialog","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class AddBoardByUrlDialogController{constructor(t,r,i,a,n){e(this),this._$scope=t,this._$translate=r,this._$mdDialog=i,this._telemetrySrv=a,this._trelloIntegrationSrv=n}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"addBoardByUrlDialogCtrl"}},{kind:"get",key:"boardUrlForm",value:function boardUrlForm(){return this._boardUrlForm}},{kind:"set",key:"boardUrlForm",value:function boardUrlForm(e){this._boardUrlForm=e}},{kind:"get",key:"boardUrl",value:function boardUrl(){return this._boardUrl}},{kind:"set",key:"boardUrl",value:function boardUrl(e){this._boardUrl!==e&&(this._boardUrl=e,this._validateBoardUrlAsync())}},{kind:"get",key:"isValid",value:function isValid(){return!!this._boardId}},{kind:"get",key:"validationMessage",value:function validationMessage(){return this._validationMessage}},{kind:"set",key:"validationMessage",value:function validationMessage(e){this._validationMessage!==e&&(this._validationMessage=e,this.boardUrlForm.boardUrlInput.$setValidity("custom",!e))}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"method",key:"addBoardByUrlAsync",value:async function addBoardByUrlAsync(){if(this.isValid&&!this.isBusy)try{this.isBusy=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.PublicBoardAdded,{source:"Dialog"});let e=await this._trelloIntegrationSrv.addPublicBoardAsync(this._boardId);this.hideDialog(null==e?void 0:e.id)}finally{this.isBusy=!1}}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(e){this._$mdDialog.hide(e)}},{kind:"method",key:"_validateBoardUrlAsync",value:async function _validateBoardUrlAsync(){if(this._boardId=null,this.boardUrl)try{var e,t;let r;if(ce()(e=this.boardUrl).call(e,"https://trello.com/b/")){let e=this.boardUrl.match(/^https:\/\/trello.com\/b\/(\w+)/);(null==e?void 0:e.length)>=2&&(r=e[1])}else if(ce()(t=this.boardUrl).call(t,U.L)){let e=this.boardUrl.split("?")[1];e&&(r=new le.a(e).get(U.e))}if(!r)return void(this.validationMessage=this._$translate.instant("DIALOGS.ADD_BOARD_BY_URL_INVALID_URL"));this.isBusy=!0;let i=this.boardUrl,a=await this._trelloIntegrationSrv.checkPublicBoardAsync(r);if(this.boardUrl!==i)return;a?(this._boardId=a.id,this.validationMessage=""):this.validationMessage=this._$translate.instant("DIALOGS.ADD_BOARD_BY_URL_NOT_FOUND")}finally{this.isBusy=!1}else this.validationMessage=""}}]}}));var ue=r(49),pe=r.n(ue),me=r(10);const fe=120,ye=cleanKendoTemplate('\n<div\n    data-uid="#= data.uid #"\n    data-card-tooltip-id="#= data.uid #"\n    data-card-tooltip-type="#= data.cardType #"\n    class="k-event pw-card #= data.$ctrl.getCardExtraClasses(data) #"\n>\n    {0}\n\n    # if (data.tail || data.middle) { #\n    <span class="k-icon k-i-arrow-n"></span>\n    # } #\n\n    # if (data.head || data.middle) { #\n    <span class="k-icon k-i-arrow-s"></span>\n    # } #\n\n    # if (data.$ctrl.isCardResizeAvailable(data)) { #\n    # if (!data.tail && !data.middle) { #\n    <span class="k-resize-handle k-resize-n"></span>\n    # } #\n\n    # if (!data.head && !data.middle) { #\n    <span class="k-resize-handle k-resize-s"></span>\n    # } #\n    # } #\n\n    # if (data.$ctrl.isCardContextMenuAvailable(data)) { #\n    <div class="pw-card__edit-button mdi mdi-dots-horizontal pw-js-card-edit-button"></div>\n    # } #\n</div>\n'),ve=cleanKendoTemplate('\n<div\n    data-uid="#= data.uid #"\n    data-card-tooltip-id="#= data.uid #"\n    data-card-tooltip-type="#= data.cardType #"\n    class="k-event pw-card #= data.$ctrl.getCardExtraClasses(data) #"\n>\n    {0}\n\n    # if (data.tail || data.middle) { #\n    <span class="k-icon k-i-arrow-w"></span>\n    # } #\n\n    # if (data.head || data.middle) { #\n    <span class="k-icon k-i-arrow-e"></span>\n    # } #\n\n    # if (data.$ctrl.isCardResizeAvailable(data)) { #\n    # if (!data.singleDay && !data.tail && !data.middle) { #\n    <span class="k-resize-handle k-resize-w"></span>\n    # } #\n\n    # if (!data.singleDay && !data.head && !data.middle) { #\n    <span class="k-resize-handle k-resize-e"></span>\n    # } #\n    # } #\n\n    # if (data.$ctrl.isCardContextMenuAvailable(data)) { #\n    <div class="pw-card__edit-button mdi mdi-dots-horizontal pw-js-card-edit-button"></div>\n    # } #\n</div>\n'),MEMBER_AVATAR_TEMPLATE=e=>{var t;return pe()(t=`\n# var cardMembers = data.$ctrl.getCardMembers(data); #\n# if (cardMembers.length > 0 && !hiddenElements.membersIcon) { #\n<div class="${e}__icons">\n    # if (cardMembers.length === 1) { #\n    <div class="${e}__members pw-member-avatar">\n        # var cardMember = cardMembers[0]; #\n        # if (cardMember.avatarUrlSmall) { #\n        <img\n            class="pw-member-avatar__image"\n            src="#= cardMember.avatarUrlSmall #"\n        >\n        # } else { #\n        <svg\n            class="pw-member-avatar__initials"\n            viewBox="0 0 26 26"\n        >\n            <text\n                x="13"\n                y="18"\n                text-anchor="middle"\n            >\n                #= cardMember.initials #\n            </text>\n        </svg>\n        # } #\n    </div>\n    # } else if (cardMembers.length > 1) { #\n    <div class="${e}__members mdi mdi-account-multiple"></div>\n    # } #\n</div>\n# } #\n`).call(t)},_e='<path fill="none" stroke-width="1.5" d="M.7 5.8h12.6v5.5H.7zM0 1.5h9"/>',ge=pe()("\n# if (data.$ctrl.showTrelloCardNumber && data.trelloCardNumber) { #\n    #: '\\#' + data.trelloCardNumber + ' ' #\n# } #\n").call("\n# if (data.$ctrl.showTrelloCardNumber && data.trelloCardNumber) { #\n    #: '\\#' + data.trelloCardNumber + ' ' #\n# } #\n"),BOARD_TEMPLATE=e=>{var t;return pe()(t=`\n# if (!hiddenElements.calendar) { #\n    <div class="${e}__board">\n        # if ((data.cardType === '${x.h.TrelloCard}' || data.cardType === '${x.h.TrelloCustomField}' || data.cardType === '${x.h.TrelloCheckItem}' || data.cardType === '${x.h.TrelloTimeRecord}')) { #\n        <span class="${e}__calendar-icon mdi mdi-trello"></span>\n        # } else if (data.cardType === '${x.h.ICalEvent}') { #\n        <span class="${e}__calendar-icon mdi mdi-calendar"></span>\n        # } else if (data.cardType === '${x.h.GoogleEvent}') { #\n        <span class="${e}__calendar-icon mdi mdi-google"></span>\n        # } #\n        #: data.$ctrl.getCardCalendarName(data) #\n    </div>\n# } #\n`).call(t)},Ce=`pw-card-${x.g.Colorful}`,ke=cleanKendoTemplate(`\n# var hiddenElements = data.$ctrl.hiddenCardElements; #\n\n# if (data.cardType === '${x.h.TrelloTimeRecord}') { #\n<div class="${Ce}__title pw-js-card-title">\n    <span class="mdi mdi-clock-time-three-outline ${Ce}__type-icon"></span>\n    ${ge}\n    <span class="${Ce}__title-text">\n        #: data.$ctrl.getCardParentTitle(data) #\n    </span>\n    <span class="${Ce}__time pw-card__time--small">#= data.timeText #</span>\n    ${MEMBER_AVATAR_TEMPLATE(Ce)}\n</div>\n\n<div class="${Ce}__details">\n    ${BOARD_TEMPLATE(Ce)}\n    <span class="${Ce}__time #= data.timeText ? '' : 'pw-card__time--hidden' #">#= data.timeText #</span>\n</div>\n# } else { #\n<div class="${Ce}__title pw-js-card-title">\n    # if (data.cardType === '${x.h.TrelloCard}' || data.cardType === '${x.h.TrelloCustomField}' || data.cardType === '${x.h.TrelloCheckItem}') { #\n    <div class="mdi #= data.isCompleted ? 'mdi-check-circle' : 'mdi-check-circle-outline' # ${Ce}__complete-icon pw-js-card-complete-button"></div>\n    # } #\n\n    ${ge}\n\n    <span class="${Ce}__title-text">#: data.title #</span>\n\n    # if (data.cardType === '${x.h.TrelloCheckItem}') { #\n        <span class="${Ce}__sub-title">\n            <div class="mdi mdi-chevron-left ${Ce}__check-item-icon"></div>\n            #: data.$ctrl.getCardParentTitle(data) #\n        </span>\n    # } #\n\n    # if (data.cardType === '${x.h.TrelloCustomField}') { #\n        <span class="${Ce}__sub-title">\n            <svg class="${Ce}__custom-field-icon" viewBox="0 0 14 12">${_e}</svg>\n            #: data.$ctrl.getCardCustomFieldName(data) #\n        </span>\n    # } #\n</div>\n\n# if (!hiddenElements.calendar || !hiddenElements.dateTime) { #\n<div class="${Ce}__details">\n    # if (!hiddenElements.dateTime) { #\n        <span class="${Ce}__time #= data.timeText ? '' : 'pw-card__time--hidden' #">#= data.timeText #</span>\n    # } #\n\n    ${BOARD_TEMPLATE(Ce)}\n</div>\n# } #\n\n${MEMBER_AVATAR_TEMPLATE(Ce)}\n# } #\n\n# if (data.cardType === '${x.h.TrelloTimeRecord}' || data.cardRole === '${me.c.Milestone}') { #\n<div class="${Ce}__border"></div>\n# } #\n`),getGoogleEventColorfulStyle=({shortId:e,color:{light:t,dark:r,highlight:i}})=>`\n    .${Ce}--google_${e} {\n        background-color: ${t};\n        color: ${r} !important;\n    }\n\n    .${Ce}--google_${e}.k-state-selected,\n    .timeline-selected .${Ce}--google_${e},\n    .${Ce}--google_${e}.pw-card--temp {\n        background-color: ${i} !important;\n    }\n`,De=`pw-card-${x.g.Light}`,Ee=cleanKendoTemplate(`\n# var hiddenElements = data.$ctrl.hiddenCardElements; #\n\n# if (data.cardRole !== '${me.c.Milestone}' && data.labelIds && data.labelIds.size) { #\n<div class="${De}__labels">\n    # var labels = data.$ctrl.getCardLabelsColors(data); #\n\n    # if (labels) for (var i = 0; i < labels.length; i++) { #\n    <div class="${De}__label #= '${De}__label-' + labels[i] #"></div>\n    # } #\n</div>\n# } #\n\n# if (data.cardType === '${x.h.TrelloTimeRecord}') { #\n<div class="${De}__title pw-js-card-title">\n    <span class="mdi mdi-clock-time-three-outline ${De}__type-icon"></span>\n    ${ge}\n    <span class="${De}__title-text">\n        #: data.$ctrl.getCardParentTitle(data) #\n    </span>\n    <span class="${De}__time pw-card__time--small">#= data.timeText #</span>\n    ${MEMBER_AVATAR_TEMPLATE(De)}\n</div>\n\n<div class="${De}__details">\n    ${BOARD_TEMPLATE(De)}\n    <span class="${De}__time #= data.timeText ? '' : 'pw-card__time--hidden' #">#= data.timeText #</span>\n</div>\n# } else { #\n<div class="${De}__title pw-js-card-title">\n    # if (data.cardType === '${x.h.TrelloCard}' || data.cardType === '${x.h.TrelloCustomField}' || data.cardType === '${x.h.TrelloCheckItem}') { #\n    <div class="mdi #= data.isCompleted ? 'mdi-check-circle' : 'mdi-check-circle-outline' # ${De}__complete-icon pw-js-card-complete-button"></div>\n    # } #\n\n    ${ge}\n\n    <span class="${De}__title-text">#: data.title #</span>\n\n    # if (data.cardType === '${x.h.TrelloCheckItem}') { #\n        <span class="${De}__sub-title">\n            <div class="mdi mdi-chevron-left ${De}__check-item-icon"></div>\n            #: data.$ctrl.getCardParentTitle(data) #\n        </span>\n    # } #\n\n    # if (data.cardType === '${x.h.TrelloCustomField}') { #\n        <span class="${De}__sub-title">\n            <svg class="${De}__custom-field-icon" viewBox="0 0 14 12">${_e}</svg>\n            #: data.$ctrl.getCardCustomFieldName(data) #\n        </span>\n    # } #\n</div>\n\n# if (!hiddenElements.calendar || !hiddenElements.dateTime) { #\n<div class="${De}__details">\n    # if (!hiddenElements.dateTime) { #\n        <span class="${De}__time #= data.timeText ? '' : 'pw-card__time--hidden' #">#= data.timeText #</span>\n    # } #\n\n    ${BOARD_TEMPLATE(De)}\n</div>\n# } #\n\n${MEMBER_AVATAR_TEMPLATE(De)}\n# } #\n\n<div class="${De}__border"></div>\n\n# var boardImage = data.$ctrl.getCardCalendarImage(data); #\n# if (data.priority || boardImage && data.cardRole !== '${me.c.Milestone}') { #\n<div class="${De}__border-left">\n    # if (data.priority === 0) { #\n    <img class="${De}__border-image" src="#= boardImage #">\n    # } #\n</div>\n# } #\n`),getGoogleEventLightStyle=({shortId:e,color:{base:t,dark:r}})=>`\n    .${De}--google_${e} {\n        border-color: ${t};\n    }\n\n    .${De}--google_${e}.k-state-selected,\n    .timeline-selected .${De}--google_${e},\n    .${De}--google_${e}.pw-card--temp {\n        border-color: ${r};\n    }\n\n    .${De}--google_${e} .${De}__calendar-icon {\n        color: ${r};\n    }\n`,getGoogleEventPreviewStyle=({shortId:e,color:{light:t}})=>`\n    .timeline-content--scrolling .timeline-range:not(.k-event-drag-hint).timeline-item--google_${e} {\n        background-color: ${t};\n    }\n`;function cleanKendoTemplate(e){return pe()(e).call(e).replace(/(\n\s*#)|(#\n\s*)/g,"#")}function AppearanceDialogController_getDecoratorsApi(){AppearanceDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AppearanceDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AppearanceDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AppearanceDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AppearanceDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AppearanceDialogController_createElementDescriptor(e){var t,r=AppearanceDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AppearanceDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AppearanceDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function AppearanceDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AppearanceDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AppearanceDialogController_toPropertyKey(e){var t=function AppearanceDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const be={[x.g.Colorful]:"DIALOGS.COLORFUL_THEME",[x.g.Light]:"DIALOGS.LIGHT_THEME"};let we=function AppearanceDialogController_decorate(e,t,r,i){var a,n=AppearanceDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AppearanceDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AppearanceDialogController_isDataDescriptor(a.descriptor)||AppearanceDialogController_isDataDescriptor(i.descriptor)){if(AppearanceDialogController_hasDecorators(a)||AppearanceDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AppearanceDialogController_hasDecorators(a)){if(AppearanceDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AppearanceDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AppearanceDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$sce","$rootScope","$log","$translate","$mdDialog","appCommonSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class AppearanceDialogController{constructor(t,r,i,a,o,s,l,d,c){e(this),this._$sce=t,this._$rootScope=r,this._$log=i,this._$translate=a,this._$mdDialog=o,this._appCommonSrv=s,this._settingsSrv=l,this._telemetrySrv=d,this._trelloIntegrationSrv=c,this._cardTheme=this._globalBoardSettings.cardTheme,this._cardTemplates={[`${x.g.Colorful}`]:kendo.template(kendo.format(ye,ke),{useWithBlock:!1}),[`${x.g.Light}`]:kendo.template(kendo.format(ye,Ee),{useWithBlock:!1})};let h=Object(n.W)(new Date),u=Object(n.b)(h,1),p=Object(n.C)(h,u);this._themeCardData=G.a.getPreviewCard("COLORFUL_CARD_ID",{title:this._$translate.instant(be[this._cardTheme]),isAllDay:!1,start:h,end:u,label:"green"}),this._themeCardData.timeText=p,this._themeCardData.$ctrl={isCardResizeAvailable:()=>!1,isCardContextMenuAvailable:()=>!1,getCardMembers:()=>[],getCardCalendarImage:()=>{},getCardCalendarName:()=>this._$translate.instant("DIALOGS.VIEW_BOARD_NAME"),getCardLabelsColors:()=>["green"],hiddenCardElements:{},getCardExtraClasses:()=>[`pw-card-${this._cardTheme}`,"pw-card--readonly","pw-card--label_green"].join(" ")}}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"appearanceSettingsCtrl"}},{kind:"get",key:"themeCardHtml",value:function themeCardHtml(){return this._themeCardHtml||(this._themeCardHtml=this._$sce.trustAsHtml(this._cardTemplates[this._cardTheme](this._themeCardData))),this._themeCardHtml}},{kind:"get",key:"cardThemes",value:function cardThemes(){return this._cardThemes||(this._cardThemes=[{value:x.g.Colorful,title:this._$translate.instant("DIALOGS.COLORFUL_THEME")},{value:x.g.Light,title:this._$translate.instant("DIALOGS.LIGHT_THEME")}]),this._cardThemes}},{kind:"get",key:"cardTheme",value:function cardTheme(){return this._cardTheme}},{kind:"set",key:"cardTheme",value:function cardTheme(e){this._cardTheme=e,this._themeCardData.title=this._$translate.instant(this._$translate.instant(be[e])),this._themeCardHtml=null}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._$mdDialog.hide()}},{kind:"method",key:"saveSettingsAsync",value:async function saveSettingsAsync(){try{this.hideDialog(),this._appCommonSrv.setSchedulerButtonBusy(!0),this._appCommonSrv.setSchedulerBusy(!0);let e=!1;if(this._globalBoardSettings.cardTheme!==this._cardTheme&&(this._globalBoardSettings.cardTheme=this._cardTheme,this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.CardThemeChanged),e=!0),!e)return;await this._settingsSrv.saveGlobalAsync(),this._$rootScope.$broadcast(x.n.SettingsChanged)}catch(e){this._$log.error("Planyway appearance dialog save error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway appearance dialog save error",e,{class:this.constructor.name,method:this.saveSettingsAsync.name})}finally{this._appCommonSrv.setSchedulerButtonBusy(!1),this._appCommonSrv.setSchedulerBusy(!1)}}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){let e=this._trelloIntegrationSrv.getCurrentBoardId();return this._settingsSrv.currentSettings.getGlobalBoardSettings(e)}}]}}));function AttachmentPopupController_getDecoratorsApi(){AttachmentPopupController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AttachmentPopupController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AttachmentPopupController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AttachmentPopupController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AttachmentPopupController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AttachmentPopupController_createElementDescriptor(e){var t,r=AttachmentPopupController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AttachmentPopupController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AttachmentPopupController_hasDecorators(e){return e.decorators&&e.decorators.length}function AttachmentPopupController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AttachmentPopupController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AttachmentPopupController_toPropertyKey(e){var t=function AttachmentPopupController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Se=function AttachmentPopupController_decorate(e,t,r,i){var a,n=AttachmentPopupController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AttachmentPopupController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AttachmentPopupController_isDataDescriptor(a.descriptor)||AttachmentPopupController_isDataDescriptor(i.descriptor)){if(AttachmentPopupController_hasDecorators(a)||AttachmentPopupController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AttachmentPopupController_hasDecorators(a)){if(AttachmentPopupController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AttachmentPopupController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AttachmentPopupController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["attachmentUrl"])],(function(e){return{F:class AttachmentPopupController{constructor(t){e(this),this._attachmentUrl=t}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"attachmentPopupCtrl"}},{kind:"get",key:"attachmentUrl",value:function attachmentUrl(){return this._attachmentUrl}}]}}));function BoardDialogController_getDecoratorsApi(){BoardDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!BoardDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=BoardDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:BoardDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=BoardDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function BoardDialogController_createElementDescriptor(e){var t,r=BoardDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function BoardDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function BoardDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function BoardDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function BoardDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function BoardDialogController_toPropertyKey(e){var t=function BoardDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Te=function BoardDialogController_decorate(e,t,r,i){var a,n=BoardDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function BoardDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(BoardDialogController_isDataDescriptor(a.descriptor)||BoardDialogController_isDataDescriptor(i.descriptor)){if(BoardDialogController_hasDecorators(a)||BoardDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(BoardDialogController_hasDecorators(a)){if(BoardDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}BoardDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,BoardDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$log","$translate","$window","$mdDialog","notificationSrv","telemetrySrv","trelloIntegrationSrv","board","organization"])],(function(e){return{F:class BoardDialogController{constructor(t,r,i,a,n,o,s,l,d,h){var u;e(this),this._$scope=t,this._$log=r,this._$translate=i,this._$window=a,this._$mdDialog=n,this._notificationSrv=o,this._telemetrySrv=s,this._trelloIntegrationSrv=l,this._board=d,this._organization=h,this.name=null==d?void 0:d.name;const p=d?d.permissionLevel:h?x.mb.Organization:x.mb.Private;this.permissionLevel=this._getPermissionLevelByName(p)||this.permissionLevels[0],this.background=!this._hasBackgroundImage()&&null!=d&&d.color?c()(u=this.backgrounds).call(u,(e=>e.value===d.color)):this.backgrounds[0]}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"boardDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"isNewBoard",value:function isNewBoard(){return!this._board}},{kind:"get",key:"permissionLevels",value:function permissionLevels(){var e;this._permissionLevels||(this._permissionLevels=[],this.organization&&!this.organization.canCreatePrivateBoards||this._permissionLevels.push({name:x.mb.Private,title:this._$translate.instant("DIALOGS.BOARD_PRIVATE_TITLE"),subtitle:this._$translate.instant("DIALOGS.BOARD_PRIVATE_SUBTITLE")}),null!==(e=this.organization)&&void 0!==e&&e.canCreateOrganizationBoards&&this._permissionLevels.push({name:x.mb.Organization,title:this._$translate.instant("DIALOGS.BOARD_ORGANIZATION_TITLE"),subtitle:this._$translate.instant("DIALOGS.BOARD_ORGANIZATION_SUBTITLE",{organizationName:this.organization.name})}),this.organization&&!this.organization.canCreatePublicBoards||this._permissionLevels.push({name:x.mb.Public,title:this._$translate.instant("DIALOGS.BOARD_PUBLIC_TITLE"),subtitle:this._$translate.instant("DIALOGS.BOARD_PUBLIC_SUBTITLE")}));return this._permissionLevels}},{kind:"get",key:"organization",value:function organization(){return this._organization}},{kind:"get",key:"name",value:function name(){return this._name}},{kind:"set",key:"name",value:function name(e){this._name!==e&&(this._name=e)}},{kind:"get",key:"permissionLevel",value:function permissionLevel(){return this._permissionLevel}},{kind:"set",key:"permissionLevel",value:function permissionLevel(e){this._permissionLevel!==e&&(this._permissionLevel=e)}},{kind:"get",key:"backgrounds",value:function backgrounds(){var e;this._backgrounds||(this._backgrounds=[],this._hasBackgroundImage()&&this._backgrounds.push({type:"url",value:this._board.imageUrls.small}),this._backgrounds=[...this._backgrounds,...R()(e=J()(x.jb)).call(e,(e=>({type:"solid",value:e})))]);return this._backgrounds}},{kind:"get",key:"background",value:function background(){return this._background}},{kind:"set",key:"background",value:function background(e){this._background!==e&&(this._background=e)}},{kind:"get",key:"canCreateOrEditBoard",value:function canCreateOrEditBoard(){var e;return!this.isBusy&&(null===(e=this.name)||void 0===e?void 0:pe()(e).call(e))&&this.permissionLevel&&this.background}},{kind:"method",key:"createBoardAsync",value:async function createBoardAsync(){if(!this.isBusy)try{this.isBusy=!0;let e={name:this.name,permissionLevel:this.permissionLevel.name,color:this.background.value};this.permissionLevel.name===x.mb.Public&&(e.isCommentsPublic=!0),this.organization&&(e.organizationId=this.organization.id);let t=await this._trelloIntegrationSrv.createTrelloBoardAsync(e);this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.BoardCreated,{where:x.T.HomePage}),this.hideDialog(t)}catch(e){this._$log.error("Trello create board error:"),this._$log.error(e),this._telemetrySrv.logError("Trello create board error",e,{class:this.constructor.name,method:this.createBoardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.CREATE_BOARD_ERROR"),x.A.Error)}finally{this.isBusy=!1}}},{kind:"method",key:"editBoardAsync",value:async function editBoardAsync(){if(!this.isBusy)try{this.isBusy=!0;let e={name:this.name,permissionLevel:this.permissionLevel.name};this._hasBackgroundImage()&&"url"===this.background.type||(e.color=this.background.value),this.permissionLevel.name!==x.mb.Public||this._board.isCommentsPublic||(e.isCommentsPublic=!0);let t=await this._trelloIntegrationSrv.updateTrelloBoardAsync(this._board.id,e);this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.BoardEdited),this.hideDialog(t.id)}catch(e){this._$log.error("Trello update board error:"),this._$log.error(e),this._telemetrySrv.logError("Trello update board error",e,{class:this.constructor.name,method:this.editBoardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_BOARD_ERROR"),x.A.Error)}finally{this.isBusy=!1}}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(e){this._$mdDialog.hide(e)}},{kind:"method",key:"_hasBackgroundImage",value:function _hasBackgroundImage(){var e,t;return"default"===(null===(e=this._board)||void 0===e?void 0:e.color)&&!(null===(t=this._board.imageUrls)||void 0===t||!t.small)}},{kind:"method",key:"_getPermissionLevelByName",value:function _getPermissionLevelByName(e){var t;return c()(t=this.permissionLevels).call(t,(t=>t.name===e))}}]}}));function BoardFilterDialogController_getDecoratorsApi(){BoardFilterDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!BoardFilterDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=BoardFilterDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:BoardFilterDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=BoardFilterDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function BoardFilterDialogController_createElementDescriptor(e){var t,r=BoardFilterDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function BoardFilterDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function BoardFilterDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function BoardFilterDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function BoardFilterDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function BoardFilterDialogController_toPropertyKey(e){var t=function BoardFilterDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ae=function BoardFilterDialogController_decorate(e,t,r,i){var a,n=BoardFilterDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function BoardFilterDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(BoardFilterDialogController_isDataDescriptor(a.descriptor)||BoardFilterDialogController_isDataDescriptor(i.descriptor)){if(BoardFilterDialogController_hasDecorators(a)||BoardFilterDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(BoardFilterDialogController_hasDecorators(a)){if(BoardFilterDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}BoardFilterDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,BoardFilterDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","settingsSrv","trelloIntegrationSrv","mdPanelRef","board"])],(function(e){return{F:class BoardFilterDialogController{constructor(t,r,i,a,n){e(this),this._$rootScope=t,this._settingsSrv=r,this._trelloIntegrationSrv=i,this._mdPanelRef=a,this._board=n}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"multiBoardFilterDialogCtrl"}},{kind:"get",key:"showOnlyMemberCards",value:function showOnlyMemberCards(){return this._board.showOnlyMemberCards}},{kind:"method",key:"toggleOnlyMemberCards",value:function toggleOnlyMemberCards(){this._board.showOnlyMemberCards=!this._board.showOnlyMemberCards;let e=this._trelloIntegrationSrv.getCurrentBoardId(),t=this._settingsSrv.currentSettings.getGlobalBoardSettings(e).multiBoard;t[this._board.id]={...t[this._board.id],showOnlyMemberCards:this._board.showOnlyMemberCards},this._settingsSrv.saveGlobalAsync(),this._board.isSelected&&this._$rootScope.$broadcast(x.n.FiltersChanged)}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._mdPanelRef.close()}}]}}));var Ie=r(658),Re=r.n(Ie),Oe=r(659),Pe=r.n(Oe),Le=r(660),Me=r.n(Le);function ChooseModeDialogController_getDecoratorsApi(){ChooseModeDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ChooseModeDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ChooseModeDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ChooseModeDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ChooseModeDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ChooseModeDialogController_createElementDescriptor(e){var t,r=ChooseModeDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ChooseModeDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ChooseModeDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ChooseModeDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ChooseModeDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ChooseModeDialogController_toPropertyKey(e){var t=function ChooseModeDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ne=function ChooseModeDialogController_decorate(e,t,r,i){var a,n=ChooseModeDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ChooseModeDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ChooseModeDialogController_isDataDescriptor(a.descriptor)||ChooseModeDialogController_isDataDescriptor(i.descriptor)){if(ChooseModeDialogController_hasDecorators(a)||ChooseModeDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ChooseModeDialogController_hasDecorators(a)){if(ChooseModeDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ChooseModeDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ChooseModeDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$sce","$window","$translate","licenseSrv","platformSrv","telemetrySrv","mdPanelRef"])],(function(e){return{F:class ChooseModeDialogController{constructor(t,r,i,a,n,o,s){e(this),this._$sce=t,this._$window=r,this._$translate=i,this._licenseSrv=a,this._platformSrv=n,this._telemetrySrv=o,this._mdPanelRef=s}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"chooseModeDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){var e;return null!==(e=this._isBusy)&&void 0!==e&&e}},{kind:"set",key:"isBusy",value:function isBusy(e){this._isBusy=e}},{kind:"get",key:"availableModes",value:function availableModes(){return this._availableModes||(this._availableModes=[{name:this._$translate.instant("DIALOGS.CHOOSE_MODE_TIMELINE_NAME"),icon:"icons-56:timeline",imageUrl:this._platformSrv.getPlatformUrl(Pe.a),colorCode:"pink",color:"#ffb1d2",description:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.CHOOSE_MODE_TIMELINE_DESCRIPTION")),mode:x.M.Timeline},{name:this._$translate.instant("DIALOGS.CHOOSE_MODE_CALENDAR_NAME"),icon:"icons-56:calendar",imageUrl:this._platformSrv.getPlatformUrl(Re.a),colorCode:"violet",color:"#c1b1ff",description:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.CHOOSE_MODE_CALENDAR_DESCRIPTION")),mode:x.M.Calendar},{name:this._$translate.instant("DIALOGS.CHOOSE_MODE_TIME_TRACKING_NAME"),icon:"icons-56:clock-three",imageUrl:this._platformSrv.getPlatformUrl(Me.a),colorCode:"yellow",color:"#ffdb95",description:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.CHOOSE_MODE_TIME_TRACKING_DESCRIPTION")),mode:x.M.TimeTracking}],this._selectedMode=this._licenseSrv.isLicenseActive()?this._availableModes[0]:this._availableModes[1]),this._availableModes}},{kind:"get",key:"selectedMode",value:function selectedMode(){return this._selectedMode}},{kind:"set",key:"selectedMode",value:function selectedMode(e){this._selectedMode=e}},{kind:"get",key:"submitButtonText",value:function submitButtonText(){switch(this._submitButtonText||(this._startWorkingText=this._$translate.instant("BUTTONS.START_WORKING"),this._upgradeText=this._$translate.instant("BUTTONS.UPGRADE")),this.selectedMode.mode){case x.M.Calendar:return this._startWorkingText;case x.M.Timeline:return this._licenseSrv.isLicenseActive()?this._startWorkingText:this._upgradeText;case x.M.TimeTracking:if(!this._licenseSrv.isLicenseActive())return this._upgradeText;switch(this._licenseSrv.getLicenseType()){case me.g.Free:case me.g.Pro:return this._upgradeText;case me.g.Team:case me.g.Trial:return this._startWorkingText}}}},{kind:"method",key:"submitAsync",value:async function submitAsync(){if(this._licenseSrv.isLicenseActive())switch(this._licenseSrv.getLicenseType()){case me.g.Pro:switch(this.selectedMode.mode){case x.M.TimeTracking:return this._openSite(this.selectedMode.mode)}}else switch(this.selectedMode.mode){case x.M.Timeline:case x.M.TimeTracking:if(!this._licenseSrv.isTrialAvailable())return this._openSite(this.selectedMode.mode);await this._activateTrialLicenseAsync(this.selectedMode.mode)}this._telemetrySrv.logSessionEvent(x.X.OnboardingEvents.ChooseModePassed,{mode:this.selectedMode.mode}),this._mdPanelRef.close(this.selectedMode.mode)}},{kind:"method",key:"_activateTrialLicenseAsync",value:async function _activateTrialLicenseAsync(e){try{this.isBusy=!0,this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.TrialStarted,{trialSource:x.cb.OnboardingDialog,featureName:e===x.M.Timeline?x.B.Timeline:x.B.TimeRecords}),await this._licenseSrv.activateTrialLicenseAsync()}finally{this.isBusy=!1}}},{kind:"method",key:"_openSite",value:function _openSite(e){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.UpgradeOfferUpgradeClicked,{upgradeSource:x.eb.OnboardingDialog,featureName:e===x.M.Timeline?x.B.Timeline:x.B.TimeRecords});let t=!this._licenseSrv.isLicenseLoaded()||!this._licenseSrv.isLicenseActive()||this._licenseSrv.getLicenseType()===me.g.Trial;this._$window.open(t?U.C:U.E,"_blank")}}]}}));function ConfirmDialogController_getDecoratorsApi(){ConfirmDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ConfirmDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ConfirmDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ConfirmDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ConfirmDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ConfirmDialogController_createElementDescriptor(e){var t,r=ConfirmDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ConfirmDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ConfirmDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ConfirmDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ConfirmDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ConfirmDialogController_toPropertyKey(e){var t=function ConfirmDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Be=function ConfirmDialogController_decorate(e,t,r,i){var a,n=ConfirmDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ConfirmDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ConfirmDialogController_isDataDescriptor(a.descriptor)||ConfirmDialogController_isDataDescriptor(i.descriptor)){if(ConfirmDialogController_hasDecorators(a)||ConfirmDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ConfirmDialogController_hasDecorators(a)){if(ConfirmDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ConfirmDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ConfirmDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$mdDialog"])],(function(e){return{F:class ConfirmDialogController{constructor(t){e(this),this._$mdDialog=t,this._showDontAskCheckbox=!1,this._isDontAskCheckboxChecked=!1}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"confirmDialogCtrl"}},{kind:"get",key:"showDontAskCheckbox",value:function showDontAskCheckbox(){return this._showDontAskCheckbox}},{kind:"set",key:"showDontAskCheckbox",value:function showDontAskCheckbox(e){this._showDontAskCheckbox=e}},{kind:"get",key:"isDontAskCheckboxChecked",value:function isDontAskCheckboxChecked(){return this._isDontAskCheckboxChecked}},{kind:"set",key:"isDontAskCheckboxChecked",value:function isDontAskCheckboxChecked(e){this._isDontAskCheckboxChecked=e}},{kind:"get",key:"buttons",value:function buttons(){return this._buttons}},{kind:"set",key:"buttons",value:function buttons(e){this._buttons=e}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.hide()}},{kind:"method",key:"hideDialog",value:function hideDialog(e){this._$mdDialog.hide({dialogResult:e,dontAskChecked:this.isDontAskCheckboxChecked})}}]}}));function ContactUsDialogController_getDecoratorsApi(){ContactUsDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ContactUsDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ContactUsDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ContactUsDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ContactUsDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ContactUsDialogController_createElementDescriptor(e){var t,r=ContactUsDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ContactUsDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ContactUsDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ContactUsDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ContactUsDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ContactUsDialogController_toPropertyKey(e){var t=function ContactUsDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Fe=function ContactUsDialogController_decorate(e,t,r,i){var a,n=ContactUsDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ContactUsDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ContactUsDialogController_isDataDescriptor(a.descriptor)||ContactUsDialogController_isDataDescriptor(i.descriptor)){if(ContactUsDialogController_hasDecorators(a)||ContactUsDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ContactUsDialogController_hasDecorators(a)){if(ContactUsDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ContactUsDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ContactUsDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$log","$translate","backendSrv","notificationSrv","telemetrySrv","trelloIntegrationSrv","mdPanelRef"])],(function(e){return{F:class ContactUsDialogController{constructor(t,r,i,a,n,o,s,l){e(this),this._$scope=t,this._$log=r,this._$translate=i,this._backendSrv=a,this._notificationSrv=n,this._telemetrySrv=o,this._trelloIntegrationSrv=s,this._mdPanelRef=l}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"ContactUsDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"message",value:function message(){return this._message}},{kind:"set",key:"message",value:function message(e){this._message=e}},{kind:"method",key:"submitAsync",value:async function submitAsync(){if(!this.isBusy)try{this.isBusy=!0,this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.ContactUsSubmitClicked),await this._backendSrv.sendFeedbackAsync({memberId:this._memberId,memberName:this._trelloIntegrationSrv.getMemberName(),memberEmail:this._trelloIntegrationSrv.getMemberEmail(),isEnterpriseContactUs:!0,message:this.message}),this._mdPanelRef.close("success")}catch(e){this._$log.error("Planyway send contact us message error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.CONTACT_US_ERROR"),x.A.Error),this._telemetrySrv.logError("Planyway send contact us message error",e,{class:this.constructor.name,method:this.submitAsync.name})}finally{this.isBusy=!1}}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._mdPanelRef.close()}}]}}));var $e=r(20),xe=r.n($e),Ge=r(17),ze=r.n(Ge),Ue=r(23),We=r.n(Ue);function CustomFieldsSettingsDialogController_getDecoratorsApi(){CustomFieldsSettingsDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CustomFieldsSettingsDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CustomFieldsSettingsDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CustomFieldsSettingsDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CustomFieldsSettingsDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CustomFieldsSettingsDialogController_createElementDescriptor(e){var t,r=CustomFieldsSettingsDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CustomFieldsSettingsDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CustomFieldsSettingsDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function CustomFieldsSettingsDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CustomFieldsSettingsDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CustomFieldsSettingsDialogController_toPropertyKey(e){var t=function CustomFieldsSettingsDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let je=function CustomFieldsSettingsDialogController_decorate(e,t,r,i){var a,n=CustomFieldsSettingsDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CustomFieldsSettingsDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CustomFieldsSettingsDialogController_isDataDescriptor(a.descriptor)||CustomFieldsSettingsDialogController_isDataDescriptor(i.descriptor)){if(CustomFieldsSettingsDialogController_hasDecorators(a)||CustomFieldsSettingsDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CustomFieldsSettingsDialogController_hasDecorators(a)){if(CustomFieldsSettingsDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CustomFieldsSettingsDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CustomFieldsSettingsDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$log","$mdDialog","appCommonSrv","licenseSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class CustomFieldsSettingsDialogController{constructor(t,r,i,a,o,s,l,d){var c,h,u;e(this),this._$rootScope=t,this._$log=r,this._$mdDialog=i,this._appCommonSrv=a,this._licenseSrv=o,this._settingsSrv=s,this._telemetrySrv=l,this._trelloIntegrationSrv=d;let p=this._trelloIntegrationSrv.getCurrentBoardId(),m=this._trelloIntegrationSrv.getTrelloBoardById(p),f=this._settingsSrv.currentSettings.getGlobalBoardSettings(p);this._customFieldsAsCards=R()(c=We()(h=S()(u=m.customFields).call(u,(e=>e.type===x.pb.Date))).call(h,n.o)).call(c,(e=>{var t;return{...e,isSelected:ze()(t=f.customFieldsAsCards).call(t,e.id)}}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"customFieldsCtrl"}},{kind:"get",key:"customFieldsAsCards",value:function customFieldsAsCards(){return this._customFieldsAsCards}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._$mdDialog.hide()}},{kind:"method",key:"saveSettingsAsync",value:async function saveSettingsAsync(){try{var e,t;this.hideDialog(),this._appCommonSrv.setSchedulerButtonBusy(!0),this._appCommonSrv.setSchedulerBusy(!0);let r=this._trelloIntegrationSrv.getCurrentBoardId(),i=this._settingsSrv.currentSettings.getGlobalBoardSettings(r),a=R()(e=S()(t=this._customFieldsAsCards).call(t,(e=>e.isSelected))).call(e,(e=>e.id));if(Object(n.h)(a,i.customFieldsAsCards))return;if(xe()(a).call(a,(e=>{var t;return!ze()(t=i.customFieldsAsCards).call(t,e)}))&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.CustomFields,!0))return;i.customFieldsAsCards=a,this._$rootScope.$broadcast(x.n.SettingsChanged),await this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.CustomFieldsAsCardsChanged)}catch(e){this._$log.error("Planyway custom fields settings dialog save error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway custom fields settings dialog save error",e,{class:this.constructor.name,method:this.saveSettingsAsync.name})}finally{this._appCommonSrv.setSchedulerButtonBusy(!1),this._appCommonSrv.setSchedulerBusy(!1)}}}]}}));var He=r(55),Ve=r.n(He);function CustomFiltersDialogController_getDecoratorsApi(){CustomFiltersDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CustomFiltersDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CustomFiltersDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CustomFiltersDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CustomFiltersDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CustomFiltersDialogController_createElementDescriptor(e){var t,r=CustomFiltersDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CustomFiltersDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CustomFiltersDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function CustomFiltersDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CustomFiltersDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CustomFiltersDialogController_toPropertyKey(e){var t=function CustomFiltersDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ye=function CustomFiltersDialogController_decorate(e,t,r,i){var a,n=CustomFiltersDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CustomFiltersDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CustomFiltersDialogController_isDataDescriptor(a.descriptor)||CustomFiltersDialogController_isDataDescriptor(i.descriptor)){if(CustomFiltersDialogController_hasDecorators(a)||CustomFiltersDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CustomFiltersDialogController_hasDecorators(a)){if(CustomFiltersDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CustomFiltersDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CustomFiltersDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$log","$mdDialog","$translate","telemetrySrv","trelloIntegrationSrv","notificationSrv","settingsSrv"])],(function(e){return{F:class CustomFiltersDialogController{constructor(t,r,i,a,n,o,s,l){var d,c;e(this),this._$rootScope=t,this._$log=r,this._$mdDialog=i,this._$translate=a,this._telemetrySrv=n,this._trelloIntegrationSrv=o,this._notificationSrv=s,this._settingsSrv=l;let h=this._trelloIntegrationSrv.getCurrentBoardId(),u=this._trelloIntegrationSrv.getTrelloBoardById(h);this._customFields=R()(d=S()(c=u.customFields).call(c,(e=>{switch(e.type){case x.pb.Checkbox:return!0;case x.pb.List:return e.options.length>0;default:return!1}}))).call(d,(e=>{var t;return{id:e.id,name:e.name,type:e.type,options:null===(t=e.options)||void 0===t?void 0:R()(t).call(t,(e=>({text:e.name,value:e.id,color:e.color})))}}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"customFiltersDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"get",key:"customFields",value:function customFields(){return this._customFields}},{kind:"get",key:"customField",value:function customField(){return this._customField}},{kind:"set",key:"customField",value:function customField(e){switch(this._customField=e,e.type){case x.pb.Checkbox:this._customFieldsValues=[{text:this._$translate.instant("DIALOGS.CUSTOM_FILTERS_CHECKED"),value:!0},{text:this._$translate.instant("DIALOGS.CUSTOM_FILTERS_NOT_CHECKED"),value:!1}];break;case x.pb.List:this._customFieldsValues=this._customField.options}this.customFieldValue=this._customFieldsValues[0]}},{kind:"get",key:"customFieldsValues",value:function customFieldsValues(){return this._customFieldsValues}},{kind:"get",key:"customFieldValue",value:function customFieldValue(){return this._customFieldValue}},{kind:"set",key:"customFieldValue",value:function customFieldValue(e){this._customFieldValue=e}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.hide()}},{kind:"method",key:"addCustomFilterAsync",value:async function addCustomFilterAsync(){this._isBusy=!0;try{let e={id:Ve()(),targetType:x.m.CustomField,targetId:this.customField.id,condition:"is",value:this.customFieldValue.value},t=this._trelloIntegrationSrv.getCurrentBoardId(),r=this._trelloIntegrationSrv.getTrelloBoardById(t),i=[...r.customFilters,e];r.customFilters=i,this._settingsSrv.currentSettings.getGlobalBoardSettings(t).filters.customFilters.push(e.id),await P.a.all([this._settingsSrv.saveGlobalAsync(),this._settingsSrv.saveBoardSettingsAsync(t,{customFilters:i})]),this._$rootScope.$broadcast(x.n.SettingsChanged),this._$rootScope.$broadcast(x.n.FiltersChanged);let a={customFilterType:e.targetType};switch(e.targetType){case x.m.CustomField:a.customFieldType=this._customField.type}this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.CustomFilterAdded,a)}catch(e){this._$log.error("Planyway failed to add custom filter:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.ADD_CUSTOM_FILTER_ERROR"),x.A.Error)}finally{this._$mdDialog.hide()}}}]}}));function EditAttachmentDialogController_getDecoratorsApi(){EditAttachmentDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!EditAttachmentDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=EditAttachmentDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:EditAttachmentDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=EditAttachmentDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function EditAttachmentDialogController_createElementDescriptor(e){var t,r=EditAttachmentDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function EditAttachmentDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function EditAttachmentDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function EditAttachmentDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function EditAttachmentDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function EditAttachmentDialogController_toPropertyKey(e){var t=function EditAttachmentDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ke=function EditAttachmentDialogController_decorate(e,t,r,i){var a,n=EditAttachmentDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function EditAttachmentDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(EditAttachmentDialogController_isDataDescriptor(a.descriptor)||EditAttachmentDialogController_isDataDescriptor(i.descriptor)){if(EditAttachmentDialogController_hasDecorators(a)||EditAttachmentDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(EditAttachmentDialogController_hasDecorators(a)){if(EditAttachmentDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}EditAttachmentDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,EditAttachmentDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["mdPanelRef","attachment"])],(function(e){return{F:class EditAttachmentDialogController{constructor(t,r){e(this),this._mdPanelRef=t,this._type=r.type,this._url=r.url,this._name=r.name}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"editAttachmentDialogCtrl"}},{kind:"get",key:"type",value:function type(){return this._type}},{kind:"get",key:"url",value:function url(){return this._url}},{kind:"set",key:"url",value:function url(e){this._url=e}},{kind:"get",key:"name",value:function name(){return this._name}},{kind:"set",key:"name",value:function name(e){this._name=e}},{kind:"get",key:"isSaveAvailable",value:function isSaveAvailable(){switch(this.type){case"file":return!!this.name;case"link":return!!this.url}}},{kind:"method",key:"save",value:function save(){if(!this.name)switch(this.type){case"file":return;case"link":this.name=this.url}this._mdPanelRef&&this._mdPanelRef.close("success")}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._mdPanelRef.close()}}]}}));var Xe=r(113),qe=r.n(Xe),Qe=r(114),Je=r.n(Qe),Ze=r(41),et=r.n(Ze),tt=r(39),rt=r.n(tt),it=r(56),at=r.n(it),nt=r(661),ot=r.n(nt),st=r(19),lt=r.n(st),dt=r(115),ct=r.n(dt),ht=r(266);function EditCardDialogController_getDecoratorsApi(){EditCardDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!EditCardDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=EditCardDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:EditCardDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=EditCardDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function EditCardDialogController_createElementDescriptor(e){var t,r=EditCardDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function EditCardDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function EditCardDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function EditCardDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function EditCardDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function EditCardDialogController_toPropertyKey(e){var t=function EditCardDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const ut={[x.h.TrelloCard]:["addLink","addReminder","toggleSubscribed","addTimeRecord","toggleEstimationField","addChecklist","copyUrl","duplicate","archive","remove","delete"],[x.h.TrelloCustomField]:["addTimeRecord","addChecklist","copyUrl","remove"],[x.h.TrelloCheckItem]:["addTimeRecord","copyUrl","remove","delete"],[x.h.TrelloTimeRecord]:["addChecklist","copyUrl","delete"],[x.h.GoogleEvent]:["delete"]},pt={[x.h.TrelloCard]:["addLink","addReminder","toggleSubscribed","addTimeRecord","toggleEstimationField"],[x.h.TrelloCustomField]:["addTimeRecord"],[x.h.TrelloCheckItem]:["addTimeRecord"]},mt={toolbar:x.U.DialogToolbar,menu:x.U.DialogMenu,dialog:x.U.Dialog},ft={[x.pb.Checkbox]:"mdi-checkbox-marked-circle-outline",[x.pb.Date]:"mdi-calendar-blank",[x.pb.List]:"mdi-format-list-checks",[x.pb.Number]:"mdi-pound",[x.pb.Text]:"mdi-format-text"},yt={[x.h.TrelloCard]:{createCardError:"NOTIFICATIONS.CREATE_TRELLO_CARD_ERROR"},[x.h.TrelloCheckItem]:{createCardError:"NOTIFICATIONS.CREATE_TRELLO_CHECK_ITEM_CARD_ERROR"},[x.h.TrelloTimeRecord]:{createCardError:"NOTIFICATIONS.CREATE_TRELLO_TIME_RECORD_CARD_ERROR"},[x.h.GoogleEvent]:{createCardError:"NOTIFICATIONS.CREATE_GOOGLE_EVENT_ERROR"}},vt=[x.h.TrelloCard,x.h.TrelloCheckItem,x.h.TrelloCustomField],_t={[x.h.TrelloCard]:{title:"DIALOGS.REMOVE_TRELLO_CARD_DATES_TITLE",confirm:"DIALOGS.REMOVE_TRELLO_CARD_DATES_CONFIRM",error:"NOTIFICATIONS.REMOVE_TRELLO_CARD_ERROR"},[x.h.TrelloCustomField]:{title:"DIALOGS.REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_TITLE",confirm:"DIALOGS.REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_CONFIRM",error:"NOTIFICATIONS.REMOVE_TRELLO_CUSTOM_FIELD_CARD_ERROR"},[x.h.TrelloCheckItem]:{title:"DIALOGS.REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_TITLE",confirm:"DIALOGS.REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_CONFIRM",error:"NOTIFICATIONS.REMOVE_TRELLO_CHECK_ITEM_CARD_ERROR"}},gt=[x.h.TrelloCard,x.h.TrelloCheckItem,x.h.TrelloTimeRecord,x.h.GoogleEvent],Ct={[x.h.TrelloCard]:{title:"DIALOGS.DELETE_TRELLO_CARD_TITLE",confirm:"DIALOGS.DELETE_TRELLO_CARD_CONFIRM",error:"NOTIFICATIONS.DELETE_TRELLO_CARD_ERROR"},[x.h.TrelloCheckItem]:{title:"DIALOGS.DELETE_TRELLO_CHECK_ITEM_CARD_TITLE",confirm:"DIALOGS.DELETE_TRELLO_CHECK_ITEM_CARD_CONFIRM",error:"NOTIFICATIONS.DELETE_TRELLO_CHECK_ITEM_CARD_ERROR"},[x.h.TrelloTimeRecord]:{title:"DIALOGS.DELETE_TRELLO_TIME_RECORD_CARD_TITLE",confirm:"DIALOGS.DELETE_TRELLO_TIME_RECORD_CARD_CONFIRM",error:"NOTIFICATIONS.DELETE_TRELLO_TIME_RECORD_CARD_ERROR"},[x.h.GoogleEvent]:{title:"DIALOGS.DELETE_GOOGLE_EVENT_TITLE",confirm:"DIALOGS.DELETE_GOOGLE_EVENT_CONFIRM",error:"NOTIFICATIONS.DELETE_GOOGLE_EVENT_ERROR"}},kt=Object(n.O)(new Date("2020-09-03")),Dt=1440,Et=new lt.a;let bt,wt=function EditCardDialogController_decorate(e,t,r,i){var a,n=EditCardDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function EditCardDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(EditCardDialogController_isDataDescriptor(a.descriptor)||EditCardDialogController_isDataDescriptor(i.descriptor)){if(EditCardDialogController_hasDecorators(a)||EditCardDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(EditCardDialogController_hasDecorators(a)){if(EditCardDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}EditCardDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,EditCardDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$rootScope","$scope","$log","$window","$timeout","$translate","$mdMenu","$mdPanel","$showdownProvider","appCommonSrv","calendarCardsSrv","dialogSrv","googleIntegrationSrv","htmlHelperSrv","iCalIntegrationSrv","licenseSrv","notificationSrv","pushNotificationsSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv","mdPanelRef","calendarCard","cardElement","allowedPositions","schedulerWidget","taskListsContainer","allowedCardTypes"])],(function(e){return{F:class EditCardDialogController{constructor(t,r,i,o,s,l,d,h,u,p,m,f,y,v,_,g,C,k,D,E,b,w,S,T,A,I,R,O,P){var L,M,N;switch(e(this),this._$element=t,this._$rootScope=r,this._$scope=i,this._$log=o,this._$window=s,this._$timeout=l,this._$translate=d,this._$mdMenu=h,this._$mdPanel=u,this._appCommonSrv=m,this._calendarCardsSrv=f,this._dialogSrv=y,this._googleIntegrationSrv=v,this._htmlHelperSrv=_,this._iCalIntegrationSrv=g,this._licenseSrv=C,this._notificationSrv=k,this._pushNotificationsSrv=D,this._settingsSrv=E,this._telemetrySrv=b,this._trelloIntegrationSrv=w,this._mdPanelRef=S,this._cardElement=A,this._allowedPositions=I,this._schedulerWidget=R,this._taskListsContainer=O,this._allowedCardTypes=P,this._isDetailed=this._settingsSrv.currentSettings.local.editCardDialog.isDetailed,this._calendarCard=T.isTempCard?T:T.clone(),this._hasChanges=!1,this._connectedBoards=null,this._connectedGoogleCalendars=null,this._isArchived=this._calendarCard.isArchived,this._isCompleted=this._calendarCard.isCompleted,this._isSubscribed=this._calendarCard.isSubscribed,this._title=this._calendarCard.title,this._isAllDay=this._calendarCard.isAllDay,this._startDate=this._calendarCard.start,this._endDate=this._calendarCard.end,this._durationMinutes=this._calendarCard.durationMinutes,this._recurrenceRule=this._calendarCard.recurrenceRule,this._priority=this._calendarCard.priority,this._isDescriptionEditing=!1,this._description=null===(L=this._calendarCard.description)||void 0===L?void 0:pe()(L).call(L),this._dragState={isDragging:!1},this._isNewCardValid=!0,this._cardCommentsLimit=50,this._mdPanelRef.config.position=this._dialogPosition,this._addServiceListeners(),this._$scope.$on(x.n.TrelloBoardSelectionChanged,(()=>this._connectedBoards=null)),this._$scope.$on(x.n.GoogleCalendarSelectionChanged,(()=>this._connectedGoogleCalendars=null)),this._calendarCard.cardType){case x.h.TrelloCustomField:this._trelloCustomField=this._trelloIntegrationSrv.getTrelloCustomFieldById(this._calendarCard.trelloCustomFieldId);break;case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:this._parentCard=this._calendarCard.parentId&&this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,this._calendarCard.parentId)}this.isDetailed&&this._loadCommentsAsync(),this._$timeout((()=>{this._renderDelayed=!0,this._$scope.$broadcast("md-resize-textarea")}),150),this._$scope.$watch((()=>this.isBusy||this.isReadOnly||this.isTrelloCheckItemCard||this.isTrelloTimeRecordCard),(e=>{var t;c()(t=this._$element).call(t,".pw-dialog-edit-card").toggleClass("pw-dialog-edit-card--readonly",!!e)})),this._$scope.$watch((()=>this.isArchived),(e=>{var t;e&&(this.isLinkAdding()&&this.rejectLinkAdding(),this.isCheckItemAdding()&&this.rejectCheckItemAdding(),this.isTimeRecordAdding()&&this.rejectTimeRecordAdding(),this.isCommentAdding()&&this.rejectCommentAdding()),c()(t=this._$element).call(t,".pw-dialog-edit-card").toggleClass("pw-dialog-edit-card--archived",!!e)})),this._$scope.$watch((()=>this.isDetailed),(e=>{var t;c()(t=this._$element).call(t,".pw-dialog-edit-card").toggleClass("pw-dialog-edit-card--detailed",e).toggleClass("pw-dialog-edit-card--compact",!e)})),this._$element.on("keydown","input, textarea",(e=>{e.stopPropagation();let t=a()(e.target);if(this.isLinkAdding()&&t.closest(".pw-js-dialog-edit-card-link-add-panel")[0])switch(e.which){case x.t.Escape:this.rejectLinkAdding()}if(this.isCheckItemAdding()&&t.closest(".pw-js-dialog-edit-card-check-item-add-panel")[0])switch(e.which){case x.t.Enter:case x.t.Enter2:this._$timeout((()=>this.submitCheckItemAddingAsync()),0,!1);break;case x.t.Escape:this.rejectCheckItemAdding()}if(this.isTimeRecordAdding()&&t.closest(".pw-js-dialog-edit-card-time-record-add-panel")[0])switch(e.which){case x.t.Enter:case x.t.Enter2:this._$timeout((()=>this.submitTimeRecordAddingAsync()),0,!1);break;case x.t.Escape:this.rejectTimeRecordAdding()}if(this.isCommentAdding()&&t.closest(".pw-js-dialog-edit-card-comment-add-panel")[0])switch(e.which){case x.t.Enter:case x.t.Enter2:(e.ctrlKey||e.shiftKey)&&this._$timeout((()=>this.submitCommentAddingAsync()),0,!1);break;case x.t.Escape:this.rejectCommentAdding()}})),this._$element.on("keydown",(e=>{var t;let r=e.which;if(x.qb.has(r)&&(r!==x.t.C||!e.ctrlKey&&!e.metaKey)&&(e.preventDefault(),e.stopPropagation(),null===(t=x.i[this._calendarCard.cardType])||void 0===t?void 0:ze()(t).call(t,r))){switch(this._calendarCard.cardType){case x.h.TrelloCard:if(this.isCardReadOnly)return;if(!this.isArchived)break;if((r===x.t.Delete||r===x.t.Backspace)&&(e.shiftKey||e.metaKey))break;if(r===x.t.C)break;return;case x.h.TrelloCustomField:if(this.isCardReadOnly)return;if(!this.isArchived){if(!(r!==x.t.Delete&&r!==x.t.Backspace||e.shiftKey||e.metaKey))break;if(r>=x.t.Key0&&r<=x.t.Key9||r===x.t.L)break;if(r===x.t.Space||r===x.t.M)break;if(r===x.t.S)break}return;case x.h.TrelloCheckItem:if(this.isCardReadOnly)return;if(!this.isArchived){if(!(r!==x.t.Delete&&r!==x.t.Backspace||e.shiftKey||e.metaKey))break;if(r>=x.t.Key0&&r<=x.t.Key9||r===x.t.L)break;if(r===x.t.Space||r===x.t.M)break;if((r===x.t.Delete||r===x.t.Backspace)&&(e.shiftKey||e.metaKey))break}return;case x.h.TrelloTimeRecord:if(this.isCardReadOnly)return;if(!this.isArchived){if(r===x.t.Space&&!this._calendarCard.memberIds.has(this._trelloIntegrationSrv.getMemberId()))break;if(r>=x.t.Key0&&r<=x.t.Key9||r===x.t.L)break;if(r===x.t.M)break;if((r===x.t.Delete||r===x.t.Backspace)&&(e.shiftKey||e.metaKey)){if(this.isCardReadOnly)return;break}}return;case x.h.GoogleEvent:if(this.isCardReadOnly)return;if((r===x.t.Delete||r===x.t.Backspace)&&(e.shiftKey||e.metaKey))break;return;default:return}this._updateCardByHotkey(e.keyCode,{altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey})}})),this._$element.on("wheel",".pw-dialog",(e=>e.stopPropagation()));const B=a()("body");let F;this._$element.on("mousedown",(e=>{F=!(!a()(e.target).is("input, textarea")&&!c()(B).call(B,"> .md-open-menu-container.md-active, > .k-animation-container > .k-list-container.k-state-border-up")[0])})),this._$element.on("click",(e=>{var t;if(F)return;let r=a()(e.target);!r.hasClass("pw-js-dialog-primary-btn")&&r.closest(".pw-dialog-edit-card")[0]&&(this.isLinkAdding()&&(r.closest(".pw-js-dialog-edit-card-link-add-panel")[0]||this.rejectLinkAdding()),this.isCheckItemAdding()&&(r.closest(".pw-js-dialog-edit-card-check-item-add-panel")[0]||this.rejectCheckItemAdding()),this.isTimeRecordAdding()&&(r.closest(".pw-js-dialog-edit-card-time-record-add-panel")[0]||this.rejectTimeRecordAdding())),null===(t=this.clickRequester)||void 0===t||t.click(),this.clickRequester=null})),this._$element.on("mousedown",".pw-js-drag-icon",(()=>{Object(n.tb)(this._mdPanelRef.panelEl)})),this._$element.on("click",".pw-js-dialog-edit-card-description-render",(e=>{this.isBusy||this.isReadOnly||(this.isTrelloCheckItemCard||this.isTrelloTimeRecordCard)&&!this.parentCard||a()(e.target).closest("a")[0]||this._$window.getSelection().toString()||(this.isDescriptionEditing=!0)})),this._$element.on("focus",".pw-js-dialog-edit-card-description-input",(()=>{this.isDescriptionEditing=!0})),this._$element.on("blur",".pw-js-dialog-edit-card-description-input",(()=>{this.isDescriptionEditing=!1})),bt=()=>this._$scope.$evalAsync((()=>this._cardAttachments=null)),c()(M=this._$element).call(M,".pw-dialog-content").on("drop",(e=>{this._onDropAttachmentsAsync(e.originalEvent)}));const onBodyDragAll=e=>{e.preventDefault()},onBodyDragStart=()=>{this._toggleHighlightAttachmentsDropArea(!0)},onBodyDragEnd=e=>{e.relatedTarget||this._toggleHighlightAttachmentsDropArea(!1)};B.on("drag dragstart dragend dragenter dragover dragleave drop",onBodyDragAll).on("dragenter dragover",onBodyDragStart).on("dragleave dragend drop",onBodyDragEnd);const onDocumentPaste=e=>{this._onPasteAttachmentsAsync(e)};if(this._$window.document.addEventListener("paste",onDocumentPaste),this._$element.on("blur",".pw-js-dialog-edit-card-comment-input",(()=>{this._commentEditingId=null})),!xe()(N=p.getOption("extensions")).call(N,(e=>"function"==typeof e&&"mentionedMemberAvatar"===e.name))){const e=kendo.template(pe()('\n                <span class="pw-markdown-mentioned-member">\n                    <span class="pw-markdown-mentioned-member__avatar">\n                        # if (data.avatarUrlSmall) { #\n                        <img\n                            class="pw-markdown-mentioned-member__image"\n                            src="#= data.avatarUrlSmall #"\n                        >\n                        # } else { #\n                        <svg\n                            class="pw-markdown-mentioned-member__initials"\n                            viewBox="0 0 26 26"\n                        >\n                            <text\n                                x="13"\n                                y="18"\n                                text-anchor="middle"\n                            >\n                                #= data.initials #\n                            </text>\n                        </svg>\n                        # } #\n                    </span>\n                    #= data.fullName #\n                </span>\n                ').call('\n                <span class="pw-markdown-mentioned-member">\n                    <span class="pw-markdown-mentioned-member__avatar">\n                        # if (data.avatarUrlSmall) { #\n                        <img\n                            class="pw-markdown-mentioned-member__image"\n                            src="#= data.avatarUrlSmall #"\n                        >\n                        # } else { #\n                        <svg\n                            class="pw-markdown-mentioned-member__initials"\n                            viewBox="0 0 26 26"\n                        >\n                            <text\n                                x="13"\n                                y="18"\n                                text-anchor="middle"\n                            >\n                                #= data.initials #\n                            </text>\n                        </svg>\n                        # } #\n                    </span>\n                    #= data.fullName #\n                </span>\n                '),{useWithBlock:!1});p.loadExtension((function mentionedMemberAvatar(){return[{type:"output",filter:t=>t.replace(/@(\w+)/g,((t,r)=>{let i=w.getMemberByUserName(r);return i?e(i):t}))}]}))}this._$scope.$on("$destroy",(()=>{this._removeServiceListeners(),B.off("drag dragstart dragend dragenter dragover dragleave drop",onBodyDragAll).off("dragenter dragover",onBodyDragStart).off("dragleave dragend drop",onBodyDragEnd),this._$window.document.removeEventListener("paste",onDocumentPaste),Object(n.tb)(this._mdPanelRef.panelEl)}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"editCardDialogCtrl"}},{kind:"field",key:"clickRequester",value:void 0},{kind:"field",key:"_calendarCard",value:void 0},{kind:"field",key:"_cardLinksForceLoadedCardsCache",value:()=>new lt.a},{kind:"get",key:"isHighlightAttachmentsDropArea",value:function isHighlightAttachmentsDropArea(){return!(this.isBusy||this.isReadOnly||!this.isAttachmentsAvailable)&&this._isHighlightAttachmentsDropArea}},{kind:"get",key:"isMacOS",value:function isMacOS(){return this._appCommonSrv.isMacOS()}},{kind:"get",key:"preventEscape",value:function preventEscape(){return this._dragState.isDragging}},{kind:"get",key:"delayRender",value:function delayRender(){return!this._renderDelayed}},{kind:"get",key:"isDetailed",value:function isDetailed(){return this._isDetailed}},{kind:"get",key:"showWeekNumbers",value:function showWeekNumbers(){return this._globalBoardSettings.showWeekNumbers}},{kind:"method",key:"isSectionCollapsed",value:function isSectionCollapsed(e){var t,r;return null!==(t=null===(r=this._settingsSrv.currentSettings.local.editCardDialog.groups[e])||void 0===r?void 0:r.isCollapsed)&&void 0!==t&&t}},{kind:"method",key:"toggleSectionCollapse",value:function toggleSectionCollapse(e){let t=this._settingsSrv.currentSettings.local.editCardDialog.groups,r=t[e];r||(r={isCollapsed:!1},t[e]=r),r.isCollapsed=!r.isCollapsed,this._settingsSrv.saveLocal()}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"isNewCard",value:function isNewCard(){return this._calendarCard.isTempCard}},{kind:"get",key:"isNewCardValid",value:function isNewCardValid(){return this._isNewCardValid}},{kind:"method",key:"isCardFieldValid",value:function isCardFieldValid(e){switch(e){case"parentCard":switch(this._calendarCard.cardType){case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return!!this.parentCard;default:return!0}case"startDate":case"endDate":switch(this._calendarCard.cardType){case x.h.GoogleEvent:return this.hasDates;default:return!0}default:return!1}}},{kind:"get",key:"isCardReadOnly",value:function isCardReadOnly(){var e,t;if(this._calendarCard.isReadOnly)return!0;switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this._calendarCard.boardId&&this._calendarCard.boardId!==this._currentBoardId&&!xe()(e=this.connectedBoards).call(e,(e=>e.id===this._calendarCard.boardId));case x.h.GoogleEvent:return this._calendarCard.googleCalendarId&&!xe()(t=this.connectedGoogleCalendars).call(t,(e=>e.id===this._calendarCard.googleCalendarId))}return!0}},{kind:"get",key:"isReadOnly",value:function isReadOnly(){return this.isCardReadOnly||this.isArchived}},{kind:"get",key:"isToggleDatesDisabled",value:function isToggleDatesDisabled(){return this._isToggleDatesDisabled}},{kind:"set",key:"isToggleDatesDisabled",value:function isToggleDatesDisabled(e){this._$scope.$evalAsync((()=>this._isToggleDatesDisabled=e))}},{kind:"get",key:"isTrelloCard",value:function isTrelloCard(){return this._calendarCard.cardType===x.h.TrelloCard}},{kind:"get",key:"isTrelloCustomFieldCard",value:function isTrelloCustomFieldCard(){return this._calendarCard.cardType===x.h.TrelloCustomField}},{kind:"get",key:"isTrelloCheckItemCard",value:function isTrelloCheckItemCard(){return this._calendarCard.cardType===x.h.TrelloCheckItem}},{kind:"get",key:"isTrelloTimeRecordCard",value:function isTrelloTimeRecordCard(){return this._calendarCard.cardType===x.h.TrelloTimeRecord}},{kind:"get",key:"isGoogleEvent",value:function isGoogleEvent(){return this._calendarCard.cardType===x.h.GoogleEvent}},{kind:"get",key:"isICalEvent",value:function isICalEvent(){return this._calendarCard.cardType===x.h.ICalEvent}},{kind:"method",key:"isCardMenuItemAvailable",value:function isCardMenuItemAvailable(...e){return xe()(e).call(e,(e=>{var t;if(!(null===(t=ut[this._calendarCard.cardType])||void 0===t?void 0:ze()(t).call(t,e)))return!1;switch(e){case"addLink":return!this.isReadOnly&&this._calendarCard.canHaveLinks;case"addReminder":return!this.isReadOnly&&this.isRemindersAvailable&&this.canAddReminder;case"toggleSubscribed":return!this.isReadOnly;case"addTimeRecord":return!this.isReadOnly&&(!this.isTrelloCheckItemCard||this.parentCard);case"toggleEstimationField":return!this.isReadOnly&&this.hasDates&&!this.isMilestone;case"addChecklist":return!this.isReadOnly&&(!this.isTrelloTimeRecordCard||this.parentCard);case"copyUrl":return!this.isNewCard;case"duplicate":return!this.isNewCard&&!this.isReadOnly;case"archive":return!this.isNewCard&&!this.isCardReadOnly;case"remove":return!this.isReadOnly&&this.hasDates;case"delete":return!this.isNewCard&&!this.isCardReadOnly&&(!this.isArchived||this.isTrelloCard);default:return!1}}))}},{kind:"method",key:"isCardToolbarButtonAvailable",value:function isCardToolbarButtonAvailable(e){var t;if(!(null===(t=pt[this._calendarCard.cardType])||void 0===t?void 0:ze()(t).call(t,e)))return!1;switch(e){case"addLink":return!this.isReadOnly&&this._calendarCard.canHaveLinks;case"addReminder":return!this.isReadOnly&&this.isRemindersAvailable&&this.canAddReminder;case"toggleSubscribed":return!this.isReadOnly;case"addTimeRecord":return!this.isReadOnly&&(!this.isTrelloCheckItemCard||this.parentCard);case"toggleEstimationField":return!this.isReadOnly&&this.hasDates&&!this.isMilestone;default:return!1}}},{kind:"get",key:"isSubscribed",value:function isSubscribed(){return this._isSubscribed}},{kind:"method",key:"toggleCardIsSubscribed",value:function toggleCardIsSubscribed(e){this._checkEditAvailable()&&(this._isSubscribed=!this.isSubscribed,this._logCardEvent({event:this.isSubscribed?x.X.CardEvents.Subscribed:x.X.CardEvents.Unsubscribed,data:{by:mt[e]}}),this._setCardPropertiesAsync({isSubscribed:this.isSubscribed}),Object(n.tb)(this._mdPanelRef.panelEl))}},{kind:"get",key:"isDailyEstimateFieldShown",value:function isDailyEstimateFieldShown(){var e;return null!==(e=this._dirtyIsDailyEstimateFieldShown)&&void 0!==e?e:this._calendarCard.isDailyEstimateFieldShown}},{kind:"method",key:"toggleDailyEstimateFieldShown",value:function toggleDailyEstimateFieldShown(e){this.isDetailed||this.switchDetailedModeAsync(),this._previousIsDailyEstimateFieldShown=this.isDailyEstimateFieldShown,this._dirtyIsDailyEstimateFieldShown=!this.isDailyEstimateFieldShown,this.dailyEstimateMinutes=this.isDailyEstimateFieldShown?this._previousDailyEstimateMinutes||480:null,this._logCardEvent({event:x.X.CardEvents.DailyEstimateFieldVisibilityChanged,data:{by:mt[e],isDailyEstimateFieldShown:this.isDailyEstimateFieldShown}}),(async()=>{await this._setCardPropertiesAsync({isDailyEstimateFieldShown:this.isDailyEstimateFieldShown}),this._dirtyIsDailyEstimateFieldShown=null})()}},{kind:"method",key:"copyCardUrlAsync",value:function copyCardUrlAsync(){return this._copyCardUrlAsync({event:x.X.CardEvents.UrlCopied,data:{by:x.U.DialogMenu}})}},{kind:"method",key:"duplicateCardAsync",value:function duplicateCardAsync(){return this._duplicateCardAsync({event:x.X.CardEvents.Duplicated,data:{by:x.U.DialogMenu}})}},{kind:"get",key:"isArchived",value:function isArchived(){return this._isArchived}},{kind:"method",key:"toggleCardIsArchived",value:function toggleCardIsArchived(){this._checkEditAvailable()&&(this._isArchived=!this.isArchived,this._logCardEvent({event:this.isArchived?x.X.CardEvents.Archived:x.X.CardEvents.Unarchived,data:{by:x.U.DialogMenu}}),this._setCardPropertiesAsync({isArchived:this.isArchived}),Object(n.tb)(this._mdPanelRef.panelEl))}},{kind:"method",key:"removeDatesAsync",value:function removeDatesAsync(){return this._removeCardDatesAsync({event:x.X.CardEvents.DatesRemoved,data:{by:x.U.DialogMenu}})}},{kind:"method",key:"deleteCardAsync",value:function deleteCardAsync(){return this._deleteCardAsync({event:x.X.CardEvents.Deleted,data:{by:x.U.DialogMenu}})}},{kind:"get",key:"isCompleted",value:function isCompleted(){switch(this._calendarCard.cardType){case x.h.TrelloCard:return this.hasDates&&this._isCompleted;case x.h.TrelloCustomField:case x.h.TrelloCheckItem:return this._isCompleted;default:return!1}}},{kind:"set",key:"isCompleted",value:function isCompleted(e){this._checkEditAvailable()&&this.isCompleted!==e&&(this._isCompleted=e,this._logCardEvent({event:e?x.X.CardEvents.MarkedCompleted:x.X.CardEvents.MarkedIncompleted,data:{by:x.U.DialogToolbar}}),this._setCardPropertiesAsync({isCompleted:e}))}},{kind:"get",key:"cardTooltipOptions",value:function cardTooltipOptions(){return this._cardTooltipOptions||(this._cardTooltipOptions={getCardForTooltip:(e,t)=>this._cardLinksForceLoadedCardsCache.has(e)?this._cardLinksForceLoadedCardsCache.get(e):this._calendarCardsSrv.getCalendarCardById(t,e)}),this._cardTooltipOptions}},{kind:"get",key:"trelloCardNumber",value:function trelloCardNumber(){if(x.ob.has(this._calendarCard.cardType))return this._globalBoardSettings.showTrelloCardNumber?this._calendarCard.trelloCardNumber:void 0}},{kind:"get",key:"title",value:function title(){return this._title}},{kind:"set",key:"title",value:function title(e){this._checkEditAvailable()&&this.title!==e&&(this.isNewCard||e)&&(this._title=e,this._logCardEvent({event:x.X.CardEvents.TitleChanged}),this._setCardPropertiesAsync({title:this.title}))}},{kind:"get",key:"titlePlaceholder",value:function titlePlaceholder(){switch(this._calendarCard.cardType){case x.h.TrelloTimeRecord:return`${this._$translate.instant("MISC.ADD_COMMENT")} (${this._$translate.instant("MISC.OPTIONAL")})`;default:return this._$translate.instant("MISC.ADD_TITLE")}}},{kind:"get",key:"cardRoles",value:function cardRoles(){if(!this._cardRoles){this._cardRoles=[];let t=this._trelloIntegrationSrv.getTrelloBoardById(this._calendarCard.boardId||this._currentBoardId);var e;if(this._isCardTypeAllowed(x.h.TrelloCard)&&(this.isTrelloCard||this.isNewCard&&t&&!t.isReadOnly)&&this._cardRoles.push({cardType:x.h.TrelloCard,role:me.c.Card,title:this._$translate.instant("DIALOGS.CARD_ROLE_CARD")}),this._isCardTypeAllowed(x.h.GoogleEvent)&&(this.isGoogleEvent||this.isNewCard&&this._googleIntegrationSrv.isGoogleConnectEnabled()&&!this._taskListsContainer)&&this._cardRoles.push({cardType:x.h.GoogleEvent,role:me.c.Card,title:this._$translate.instant("DIALOGS.CARD_ROLE_GOOGLE_EVENT")}),this._isCardTypeAllowed(x.h.TrelloCheckItem)&&(this.isTrelloCheckItemCard||this.isNewCard&&t&&!t.isReadOnly&&!this._taskListsContainer)&&this._cardRoles.push({cardType:x.h.TrelloCheckItem,role:me.c.Card,title:this._$translate.instant("DIALOGS.CARD_ROLE_CHECK_ITEM")}),this._isCardTypeAllowed(x.h.TrelloCard)&&(this.isTrelloCard||this.isNewCard&&t&&!t.isReadOnly)&&(this.isRecurrentCard||this._cardRoles.push({cardType:x.h.TrelloCard,role:me.c.Milestone,title:this._$translate.instant("DIALOGS.CARD_ROLE_MILESTONE")})),this._isCardTypeAllowed(x.h.TrelloCustomField)&&this.isTrelloCustomFieldCard)this._cardRoles.push({cardType:x.h.TrelloCustomField,role:me.c.Card,title:(null===(e=this._trelloCustomField)||void 0===e?void 0:e.name)||this._$translate.instant("DIALOGS.CARD_ROLE_CUSTOM_FIELD")});this._isCardTypeAllowed(x.h.ICalEvent)&&this.isICalEvent&&this._cardRoles.push({cardType:x.h.ICalEvent,role:me.c.Card,title:this._$translate.instant("DIALOGS.CARD_ROLE_ICAL_EVENT")});for(let e of this._cardRoles)e.id=`${e.cardType}_${e.role}`;this._cardRole=null}return this._cardRoles}},{kind:"get",key:"cardRole",value:function cardRole(){var e,t;this._cardRole||(this._cardRole=this.isTrelloCard?c()(e=this.cardRoles).call(e,(e=>e.role===this._calendarCard.cardRole)):c()(t=this.cardRoles).call(t,(e=>e.cardType===this._calendarCard.cardType)));return this._cardRole}},{kind:"method",key:"setCardRoleAsync",value:async function setCardRoleAsync(e){if(!e||this.cardRole===e)return;this._updateCardPromise&&await this._updateCardPromise;let t={...this._cardRole};await this._$timeout((()=>this._cardRole=e));let r=this.isAllDay,i=this.startDate,o=this.endDate;if(r&&(i=Object(n.O)(i),o=Object(n.O)(o)),this.isTrelloCard&&e.cardType!==x.h.TrelloCard){if(this.cardChecklists.length>0){let e=[...this.cardChecklists];for(let t of e)this._calendarCardsSrv.deleteCalendarCardChecklistAsync(this._calendarCard,t.id)}if(this.cardTimeRecords.length>0){let e=[...this.cardTimeRecords];for(let t of e)this._calendarCardsSrv.deleteCalendarCardTimeRecordAsync(this._calendarCard,t.id)}if(this.cardAttachments.length>0){let e=[...this.cardAttachments];for(let t of e)this._calendarCardsSrv.deleteCalendarCardAttachmentAsync(this._calendarCard,t.id)}if(this.cardComments.length>0){let e=[...this.cardComments];for(let t of e)this._calendarCardsSrv.deleteCalendarCardCommentAsync(this._calendarCard,t.id)}}switch(e.cardType){case x.h.TrelloCard:if(!this.isTrelloCard){if(!this._calendarCard.boardId){let e=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId);await this.moveToBoardAsync(e)}this._calendarCardsSrv.changeCalendarCardType(this._calendarCard,x.h.TrelloCard),this.parentCard=null}if(this._calendarCard.cardRole===e.role)break;let a=r?this.cardBoard.dueLinkTypeAllDay:this.cardBoard.dueLinkType;switch(e.role){case me.c.Card:if(r){let e=this.cardBoard.defaultCardIsAllDay?this.cardBoard.defaultCardDuration:1;switch(a){case me.e.DueStart:o=Object(n.a)(i,e-1),this._endDate=o;break;case me.e.DueEnd:case me.e.NotLinked:i=Object(n.a)(o,1-e),this._startDate=i}}else{let e=this.cardBoard.defaultCardIsAllDay?G.b:this.cardBoard.defaultCardDuration;switch(a){case me.e.DueStart:o=Object(n.c)(i,e),this._endDate=o;break;case me.e.DueEnd:case me.e.NotLinked:i=Object(n.c)(o,-e),this._startDate=i}}break;case me.c.Milestone:if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0))return void(this._cardRole=t);switch(a){case me.e.DueStart:o=i,this._endDate=o;break;case me.e.DueEnd:case me.e.NotLinked:i=o,this._startDate=i}break;default:return void(this._cardRole=t)}break;case x.h.TrelloCheckItem:if(!this.isTrelloCheckItemCard){if(!this._calendarCard.boardId){let e=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId);await this.moveToBoardAsync(e)}const e=this.isTrelloCard&&!this.isMilestone;if(this._calendarCardsSrv.changeCalendarCardType(this._calendarCard,x.h.TrelloCheckItem),this.parentCard=this._calendarCard.parentId&&this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,this._calendarCard.parentId),this._calendarCard.priority=0,this._calendarCard.recurrenceRule=void 0,this._calendarCard.exceptionDates=void 0,!e){let e=r?this.cardBoard.dueLinkTypeAllDay:this.cardBoard.dueLinkType;if(r){let t=this.cardBoard.defaultCardIsAllDay?this.cardBoard.defaultCardDuration:1;switch(e){case me.e.DueStart:o=Object(n.a)(i,t-1),this._endDate=o;break;case me.e.DueEnd:case me.e.NotLinked:i=Object(n.a)(o,1-t),this._startDate=i}}else{let t=this.cardBoard.defaultCardIsAllDay?G.b:this.cardBoard.defaultCardDuration;switch(e){case me.e.DueStart:o=Object(n.c)(i,t),this._endDate=o;break;case me.e.DueEnd:case me.e.NotLinked:i=Object(n.c)(o,-t),this._startDate=i}}}}break;case x.h.TrelloTimeRecord:if(!this.isTrelloTimeRecordCard){if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return void(this._cardRole=t);if(!this._calendarCard.boardId){let e=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId);await this.moveToBoardAsync(e)}this._calendarCardsSrv.changeCalendarCardType(this._calendarCard,x.h.TrelloTimeRecord),this.parentCard=this._calendarCard.parentId&&this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,this._calendarCard.parentId),this._calendarCard.isCompleted=!1,this._calendarCard.memberIds=new M.a([this._currentMemberId]),this._cardMembers=null,this._calendarCard.priority=0,this._calendarCard.recurrenceRule=void 0,this._calendarCard.exceptionDates=void 0;let e=this.cardBoard.defaultCardIsAllDay?G.b:this.cardBoard.defaultCardDuration,a=r?this.cardBoard.dueLinkTypeAllDay:this.cardBoard.dueLinkType;if(this._calendarCard.hasDates)if(r)if(Object(n.pb)(this.startDate,this.endDate))i=this.startDate,o=this.endDate;else switch(a){case me.e.DueStart:i=this.startDate,o=i;break;case me.e.DueEnd:case me.e.NotLinked:o=this.endDate,i=o}else if(Object(n.pb)(this.startDate,this.endDate))i=this.startDate,o=this.endDate,e=Object(n.S)(this.startDate,this.endDate);else switch(a){case me.e.DueStart:i=this.startDate,o=Object(n.c)(i,e);break;case me.e.DueEnd:case me.e.NotLinked:o=this.endDate,i=Object(n.c)(o,-e)}else r=!0,i=Object(n.O)(new Date),o=i;this._startDate=i,this._endDate=o,this._calendarCard.durationMinutes=e}break;case x.h.GoogleEvent:if(!this.isGoogleEvent){if(!this._calendarCard.googleCalendarId){var s,l;let e,t=null===(s=c()(l=this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars()).call(l,(e=>e.isSelected)))||void 0===s?void 0:s.id;var d,h;if(t)e=c()(d=this._googleIntegrationSrv.getGoogleCalendars()).call(d,(e=>e.id===t));else e=c()(h=this._googleIntegrationSrv.getGoogleCalendars()).call(h,(e=>e.isPrimary));await this.moveToGoogleCalendarAsync(e)}this._calendarCardsSrv.changeCalendarCardType(this._calendarCard,x.h.GoogleEvent),this.parentCard=null,this._calendarCard.isCompleted=!1,this._calendarCard.memberIds=new M.a,this._cardMembers=null,this._calendarCard.priority=0,this._calendarCard.recurrenceRule=void 0,this._calendarCard.exceptionDates=void 0}if(this._calendarCard.cardRole===e.role)break;r?(o=i,this._endDate=o):(o=Object(n.c)(i,G.b),this._endDate=o);break;default:return void(this._cardRole=t)}return this._isNewCardValid=!0,this._logCardEvent({event:x.X.CardEvents.TypeChanged,data:{cardType:e.cardType,cardRole:e.role}}),this._$scope.$broadcast(x.n.CardTypeChanged),this.isNewCard&&a()(".pw-js-edit-card-dialog-title").trigger("focus"),this._totalEstimation=null,this._setCardPropertiesAsync({cardRole:e.role,isAllDay:r,start:i,end:o})}},{kind:"get",key:"isMilestone",value:function isMilestone(){var e;return(null===(e=this.cardRole)||void 0===e?void 0:e.role)===me.c.Milestone}},{kind:"get",key:"isTimeRecord",value:function isTimeRecord(){return this._calendarCard.cardType===x.h.TrelloTimeRecord}},{kind:"get",key:"isAllDay",value:function isAllDay(){return this._isAllDay}},{kind:"set",key:"isAllDay",value:function isAllDay(e){if(this._checkEditAvailable()&&this.isAllDay!==e){switch(this._isAllDay=e,this._calendarCard.cardType){case x.h.TrelloTimeRecord:this.isAllDay?(this._startDate=Object(n.O)(this.startDate),this._endDate=this.startDate):Object(n.pb)(this.startDate,new Date)?(this._endDate=Object(n.Db)(new Date,"quarterHour"),this._startDate=Object(n.c)(this.endDate,-this.durationMinutes)):(this._startDate=Object(n.W)(this.startDate),this._endDate=Object(n.c)(this.startDate,this.durationMinutes)),this._logCardEvent({event:e?x.X.CardEvents.TimeRemoved:x.X.CardEvents.TimeAdded}),this._setCardPropertiesAsync({isAllDay:e,start:this.startDate,end:this.endDate,durationMinutes:this.durationMinutes});break;default:if(this.isAllDay)this._startDate=Object(n.O)(this.startDate),this._endDate=this.startDate;else{let e=this.cardBoard.defaultCardIsAllDay?G.b:this.cardBoard.defaultCardDuration;this._startDate=Object(n.W)(this.startDate),this._endDate=Object(n.c)(this.startDate,e)}this._logCardEvent({event:e?x.X.CardEvents.IsAllDaySet:x.X.CardEvents.IsAllDayUnset}),this._setCardPropertiesAsync({isAllDay:e,start:this.startDate,end:this.endDate})}this._durationText=null,this._cardReminders=null}}},{kind:"get",key:"startDate",value:function startDate(){return this._startDate}},{kind:"set",key:"startDate",value:function startDate(e){if(this._checkEditAvailable()&&e&&!Object(n.w)(this.startDate,e)){if(this.hasDates){if(this.isAllDay){let t=Object(n.R)(this.startDate,this.endDate);this._startDate=e,this._endDate=Object(n.a)(this.startDate,t)}else{let t=Object(n.S)(this.startDate,this.endDate);this._startDate=e,this._endDate=Object(n.c)(this.startDate,t)}this._logCardEvent({event:x.X.CardEvents.StartChanged}),this._setCardPropertiesAsync({start:e,end:this.endDate}),this._durationText=null}else this._isAllDay=!0,this._startDate=e,this._endDate=e,this._isNewCardValid=!0,this._logCardEvent({event:x.X.CardEvents.Scheduled,data:{by:x.U.SetDates}}),this._setCardPropertiesAsync({isAllDay:this.isAllDay,start:e,end:e});this._totalEstimation=null}}},{kind:"get",key:"endDate",value:function endDate(){return this._endDate}},{kind:"set",key:"endDate",value:function endDate(e){this._checkEditAvailable()&&e&&!Object(n.w)(this.endDate,e)&&(this.hasDates?(this._endDate=e,this._logCardEvent({event:x.X.CardEvents.EndChanged}),this._setCardPropertiesAsync({end:e}),this._durationText=null):(this._isAllDay=!0,this._startDate=e,this._endDate=e,this._isNewCardValid=!0,this._logCardEvent({event:x.X.CardEvents.Scheduled,data:{by:x.U.SetDates}}),this._setCardPropertiesAsync({isAllDay:this.isAllDay,start:e,end:e})),this._totalEstimation=null)}},{kind:"get",key:"durationMinutes",value:function durationMinutes(){return this._durationMinutes}},{kind:"set",key:"durationMinutes",value:function durationMinutes(e){this._checkEditAvailable()&&this.durationMinutes!==e&&(this._durationMinutes=e,this._logCardEvent({event:x.X.CardEvents.DurationChanged,data:{durationMinutes:e}}),this._setCardPropertiesAsync({durationMinutes:e}))}},{kind:"get",key:"dailyEstimateMinutes",value:function dailyEstimateMinutes(){var e;return null!==(e=this._dirtyCardDailyEstimateMinutes)&&void 0!==e?e:this._calendarCard.dailyEstimateMinutes}},{kind:"set",key:"dailyEstimateMinutes",value:function dailyEstimateMinutes(e){this._checkEditAvailable()&&this.dailyEstimateMinutes!==e&&(this.dailyEstimateMinutes&&e&&this._logCardEvent({event:x.X.CardEvents.DailyEstimateChanged,data:{dailyEstimateMinutes:e}}),this._previousDailyEstimateMinutes=this.dailyEstimateMinutes||480,this._dirtyCardDailyEstimateMinutes=e,this._totalEstimation=null,(async()=>{await this._setCardPropertiesAsync({dailyEstimateMinutes:e}),this._dirtyCardDailyEstimateMinutes=null})())}},{kind:"get",key:"minDailyEstimateMinutes",value:function minDailyEstimateMinutes(){return 15}},{kind:"get",key:"maxDailyEstimateMinutes",value:function maxDailyEstimateMinutes(){return 1425}},{kind:"get",key:"totalEstimation",value:function totalEstimation(){if(!this._totalEstimation){let e=this._calendarCard.getTotalEstimationMs(this.dailyEstimateMinutes);if(null===e)return null;this._totalEstimation=Object(n.E)(e,"hours")}return this._totalEstimation||"0m"}},{kind:"get",key:"minEndDate",value:function minEndDate(){return this.startDate}},{kind:"get",key:"maxEndDate",value:function maxEndDate(){switch(this._calendarCard.cardType){case x.h.TrelloTimeRecord:return this._maxEndDate&&Object(n.pb)(this.startDate,this._maxEndDate)||(this._maxEndDate=Object(n.N)(this.startDate)),this._maxEndDate}}},{kind:"get",key:"hasDates",value:function hasDates(){return this._calendarCard.hasDates}},{kind:"get",key:"isSingleDate",value:function isSingleDate(){return this._calendarCard.isSingleDate}},{kind:"get",key:"isCardDatesYearShown",value:function isCardDatesYearShown(){return!Object(n.qb)(this.startDate,new Date)||!Object(n.qb)(this.endDate,new Date)}},{kind:"get",key:"durationText",value:function durationText(){if(!this._durationText){let e=this.endDate;this.isAllDay&&(e=Object(n.a)(e,1));let t=Object(n.v)(this.startDate,e).minutes;this._durationText=Object(n.E)(6e4*t)}return this._durationText}},{kind:"get",key:"recurrenceRule",value:function recurrenceRule(){return this._recurrenceRule}},{kind:"set",key:"recurrenceRule",value:function recurrenceRule(e){e&&!this._checkEditAvailable()||this.recurrenceRule!==e&&(this._recurrenceRule=e,this._cardRoles=null,this._logCardEvent({event:x.X.CardEvents.RecurrenceRuleChanged,data:{recurrenceRule:e}}),this._setCardPropertiesAsync({recurrenceRule:e}))}},{kind:"get",key:"isRecurrentCard",value:function isRecurrentCard(){return!(!this.recurrenceRule&&!this._calendarCard.recurrenceId)}},{kind:"get",key:"isRecurringAvailable",value:function isRecurringAvailable(){return this.hasDates&&!this.isTrelloCustomFieldCard&&!this.isTrelloCheckItemCard&&!this.isTrelloTimeRecordCard&&!this.isMilestone&&!this._calendarCard.recurrenceId}},{kind:"get",key:"priority",value:function priority(){return this._priority}},{kind:"set",key:"priority",value:function priority(e){e&&!this._checkEditAvailable()||this.priority!==e&&(this._priority=e,this._logCardEvent({event:x.X.CardEvents.PriorityChanged,data:{priority:e}}),this._setCardPropertiesAsync({priority:e}))}},{kind:"get",key:"isLabelsAvailable",value:function isLabelsAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return this.cardBoard;case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.parentCard&&this.cardBoard}return!1}},{kind:"get",key:"cardLabels",value:function cardLabels(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];var e,t,r;this._cardLabels||(this._cardLabels=We()(e=S()(t=R()(r=re()(this._calendarCard.labelIds)).call(r,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(t,(e=>e&&this._calendarCard.boardId===e.boardId))).call(e,n.p));return this._cardLabels}},{kind:"get",key:"cardBoardLabels",value:function cardBoardLabels(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];var e,t,r;this._cardBoardLabels||(this._cardBoardLabels=R()(e=We()(t=S()(r=this.cardBoard.labels).call(r,(e=>e.id!==U.k))).call(t,n.p)).call(e,(e=>({...e,name:e.name||Object(n.i)(e.color),isSelected:this._calendarCard.labelIds.has(e.id)}))),this._cardLabels=null);return this._cardBoardLabels}},{kind:"method",key:"toggleLabel",value:function toggleLabel(e){if(!this._checkEditAvailable())return;this._cardBoardLabels=null;let t=!this._calendarCard.labelIds.has(e.id);this._logCardEvent({event:t?x.X.CardEvents.LabelAdded:x.X.CardEvents.LabelRemoved}),this._setCardPropertiesAsync({labelIds:Object(G.i)(this._calendarCard,e.id)})}},{kind:"get",key:"isMembersAvailable",value:function isMembersAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.cardBoard}return!1}},{kind:"get",key:"isMultipleMembersSupported",value:function isMultipleMembersSupported(){return Object(G.f)(this._calendarCard)}},{kind:"get",key:"isMemberRequired",value:function isMemberRequired(){return Object(G.e)(this._calendarCard)}},{kind:"get",key:"cardMembers",value:function cardMembers(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];var e,t,r;this._cardMembers||(this._cardMembers=We()(e=S()(t=R()(r=re()(this._calendarCard.memberIds)).call(r,(e=>this._trelloIntegrationSrv.getTrelloMemberById(e)))).call(t,(e=>e))).call(e,n.r));return this._cardMembers}},{kind:"get",key:"cardBoardMembers",value:function cardBoardMembers(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];var e,t,r;this._cardBoardMembers||(this._cardBoardMembers=R()(e=We()(t=S()(r=this.cardBoard.members).call(r,(e=>e.id!==U.k))).call(t,n.r)).call(e,(e=>({...e,isSelected:this._calendarCard.memberIds.has(e.id)}))),this._cardMembers=null);return this._cardBoardMembers}},{kind:"method",key:"toggleMember",value:function toggleMember(e){if(!this._checkEditAvailable())return;this._cardBoardMembers=null;let t=!this._calendarCard.memberIds.has(e.id),r=e.id===this._currentMemberId;this._logCardEvent({event:t?r?x.X.CardEvents.MemberAssignedSelf:x.X.CardEvents.MemberAssigned:r?x.X.CardEvents.MemberUnassignedSelf:x.X.CardEvents.MemberUnassigned}),this._setCardPropertiesAsync({memberIds:Object(G.j)(this._calendarCard,e.id)})}},{kind:"get",key:"parentCard",value:function parentCard(){return this._parentCard}},{kind:"set",key:"parentCard",value:function parentCard(e){this._checkEditAvailable()&&(e&&this.parentCard===e||(e&&this.parentCard&&this._logCardEvent({event:x.X.CardEvents.ParentCardChanged}),this._parentCard=e,e?(this._calendarCard.parentId=e.id,this._calendarCard.boardId=e.boardId,this._calendarCard.listId=e.listId,this._calendarCard.labelIds=e.labelIds,this._calendarCard.description=e.description,this._isNewCardValid=!0):(this._calendarCard.parentId=null,this._calendarCard.labelIds=new M.a,this._calendarCard.description=null),this._cardBoard=null,this._calendarCardsSrv.updateCalendarCardAsync(this._calendarCard)))}},{kind:"method",key:"parentCardFilter",value:function parentCardFilter(e){switch(this._calendarCard.cardType){case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return e.cardType===x.h.TrelloCard&&!e.isReadOnly&&!e.isArchived;default:return!1}}},{kind:"method",key:"openParentCard",value:function openParentCard(){if(!this.parentCard)return;let e;var t;if(this._logCardEvent({event:x.X.CardEvents.ParentCardOpened}),this._schedulerWidget)e=c()(t=this._schedulerWidget.element).call(t,`.k-event[data-uid="${this.parentCard.id}"]`),e[0]&&this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{cardElement:e}),this._schedulerWidget.select(null),this._schedulerWidget.select([this.parentCard.id]);else if(this._taskListsContainer){var r;e=c()(r=this._taskListsContainer).call(r,`.pw-tasks-list-item__card[data-id="${this.parentCard.id}"]`)}this._$timeout((()=>{this._dialogSrv.showEditCardDialogAsync(this.parentCard,{cardElement:e,schedulerWidget:this._schedulerWidget,noAnimation:this.isDetailed})}),0,!1)}},{kind:"get",key:"isBoardAvailable",value:function isBoardAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return this.cardBoard;case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.parentCard&&this.cardBoard}return!1}},{kind:"get",key:"connectedBoards",value:function connectedBoards(){var e;null===this._connectedBoards&&(this._connectedBoards=S()(e=this._trelloIntegrationSrv.getCurrentBoardConnectedBoards()).call(e,(e=>e.isSelected)));return this._connectedBoards}},{kind:"get",key:"cardBoard",value:function cardBoard(){if(!this._cardBoard){if(this._cardBoard=this._trelloIntegrationSrv.getTrelloBoardById(this._calendarCard.boardId||this._currentBoardId),!x.ob.has(this._calendarCard.cardType))return this._cardBoard;if(!this._cardBoard||this._cardBoard.closed){let e=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId);this.moveToBoardAsync(e),this._cardBoard=e}this._cardBoardLabels=null,this._cardBoardMembers=null,this._cardBoardLists=null,this._cardCustomFields=null}return this._cardBoard}},{kind:"get",key:"organizations",value:function organizations(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];if(!this._organizations){var e;let t=this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId).organizations;this._organizations=R()(e=this._trelloIntegrationSrv.getTrelloOrganizations()).call(e,(e=>{var r,i;return{...e,isCollapsed:null!==(r=null===(i=t[e.id])||void 0===i?void 0:i.isCollapsed)&&void 0!==r&&r}})),this._cardBoard=null}return this._organizations}},{kind:"method",key:"switchOrganizationCollapsed",value:function switchOrganizationCollapsed(e){e.isCollapsed=!e.isCollapsed;let t=this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId).organizations,r=t[e.id];r||(r={isCollapsed:!1},t[e.id]=r),r.isCollapsed=!r.isCollapsed,this._settingsSrv.saveLocal()}},{kind:"method",key:"onSearchMenuKeydown",value:function onSearchMenuKeydown(e,t){e.keyCode!==x.t.Escape&&a()(t).trigger("focus")}},{kind:"method",key:"moveToBoardAsync",value:async function moveToBoardAsync(e){if(this._checkEditAvailable()&&(!this._cardBoard||this._cardBoard.id!==e.id)){if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.MultiBoard,!0))return;this._$rootScope.$broadcast(x.n.SelectTrelloBoardRequested,{boardId:e.id,isSelected:!0}),this._connectedBoards=null,this._logCardEvent({event:x.X.CardEvents.BoardChanged});try{var t;this.isBusy=!0,await this._trelloIntegrationSrv.loadBoardDataAsync(e.id);let r=this._trelloIntegrationSrv.getTrelloBoardById(e.id);if(!r||r.closed)return;this._cardBoard=null,await this._setCardPropertiesAsync({boardId:r.id,listId:r.defaultListId||(null===(t=r.lists[0])||void 0===t?void 0:t.id)})}finally{this.isBusy=!1}}}},{kind:"get",key:"isListAvailable",value:function isListAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return this.cardBoard;case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.parentCard&&this.cardBoard}return!1}},{kind:"get",key:"cardList",value:function cardList(){if(x.ob.has(this._calendarCard.cardType)){if(!this._cardList&&(this._cardList=this._trelloIntegrationSrv.getTrelloListById(this._calendarCard.listId),!this._cardList||this._cardList.boardId!==this.cardBoard.id)){var e;let t=this.cardBoard.defaultListId&&c()(e=this.cardBoardLists).call(e,(e=>e.id===this.cardBoard.defaultListId));t||(t=this.cardBoardLists[0]||{name:this._$translate.instant("DIALOGS.NEW_LIST")}),this.moveToList(t),this._cardList=t}return this._cardList}}},{kind:"get",key:"cardBoardLists",value:function cardBoardLists(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];if(!this._cardBoardLists){var e,t;if(this.cardBoard.lists.length>0)this._cardBoardLists=R()(e=We()(t=this.cardBoard.lists).call(t,n.q)).call(e,(e=>({...e})));else this._cardBoardLists=[{name:this._$translate.instant("DIALOGS.NEW_LIST")}];this._cardList=null}return this._cardBoardLists}},{kind:"method",key:"moveToList",value:function moveToList(e){e.id&&this._checkEditAvailable()&&(this._cardList&&this._cardList.id===e.id||(this._logCardEvent({event:x.X.CardEvents.ListChanged}),this._setCardPropertiesAsync({boardId:e.boardId,listId:e.id})))}},{kind:"get",key:"connectedGoogleCalendars",value:function connectedGoogleCalendars(){var e;null===this._connectedGoogleCalendars&&(this._connectedGoogleCalendars=S()(e=this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars()).call(e,(e=>e.isSelected)));return this._connectedGoogleCalendars}},{kind:"get",key:"cardGoogleCalendar",value:function cardGoogleCalendar(){if(this.isGoogleEvent)return this._cardGoogleCalendar||(this._cardGoogleCalendar=this._googleIntegrationSrv.getGoogleCalendarById(this._calendarCard.googleCalendarId)),this._cardGoogleCalendar}},{kind:"get",key:"googleCalendars",value:function googleCalendars(){return this.delayRender?[]:this.isGoogleEvent?(this._googleCalendars||(this._googleCalendars=this._googleIntegrationSrv.getGoogleCalendars(),this._cardGoogleCalendar=null),this._googleCalendars):[]}},{kind:"method",key:"moveToGoogleCalendarAsync",value:async function moveToGoogleCalendarAsync(e){if(!this._cardGoogleCalendar||this._cardGoogleCalendar.id!==e.id){this._cardGoogleCalendar=e,this._$rootScope.$broadcast(x.n.SelectGoogleCalendarRequested,{googleCalendarId:e.id,isSelected:!0}),this._connectedGoogleCalendars=null,this._logCardEvent({event:x.X.CardEvents.GoogleCalendarChanged});try{this.isBusy=!0,this._cardGoogleCalendar=null,await this._setCardPropertiesAsync({googleCalendarId:e.id})}finally{this.isBusy=!1}}}},{kind:"get",key:"cardICalCalendar",value:function cardICalCalendar(){if(this.isICalEvent)return this._cardICalCalendar||(this._cardICalCalendar=this._iCalIntegrationSrv.getICalCalendarById(this._calendarCard.iCalCalendarId)),this._cardICalCalendar}},{kind:"get",key:"isLinksAvailable",value:function isLinksAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:return this._calendarCard.canHaveLinks&&(!this.isReadOnly||this.cardLinks.length>0)}return!1}},{kind:"get",key:"tempLink",value:function tempLink(){return this._tempLink}},{kind:"method",key:"isLinkAdding",value:function isLinkAdding(){return this._isLinkAdding}},{kind:"method",key:"beginLinkAddingAsync",value:async function beginLinkAddingAsync(e){if(this._licenseSrv.checkPaidFeatureAvailable(x.B.Dependencies,!0))if(this.isLinkAdding())this.rejectLinkAdding();else{var t;if(this.isDetailed||await this.switchDetailedModeAsync(),!this._tempLink)this._tempLink={isBusy:!0,linkType:c()(t=this.availableCardLinkTypes).call(t,(e=>e.value===x.f.IsBlockedBy))};this._linkAddingBy=e,this._$scope.$evalAsync((()=>{this._isLinkAdding=!0,this._scrollToSection("links")}))}}},{kind:"method",key:"rejectLinkAdding",value:function rejectLinkAdding(){this._$scope.$evalAsync((()=>{this._tempLink=null,this._isLinkAdding=!1}))}},{kind:"method",key:"submitLinkAddingAsync",value:async function submitLinkAddingAsync(){var e;if(this.isLinkAdding()&&null!==(e=this._tempLink)&&void 0!==e&&e.linkedCard)try{this._logCardEvent({event:x.X.CardEvents.CardLinkAdded,data:{by:mt[this._linkAddingBy],linkType:this.tempLink.linkType.value}}),this._hasChanges=!0,this._isLinkAdding=!1,this._cardLinks=null,this.cardLinks.push({...this.tempLink,toCardId:this.tempLink.linkedCard.id}),await this._calendarCardsSrv.createCalendarCardLinkAsync(this._calendarCard,this.tempLink.linkedCard.id,this.tempLink.linkType.value),this._tempLink=null}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardLinks=null))}}},{kind:"get",key:"availableCardLinkTypes",value:function availableCardLinkTypes(){return this._availableCardLinkTypes||(this._availableCardLinkTypes=[{value:x.f.IsBlockedBy,title:this._$translate.instant("MENU.CARD_LINK_IS_BLOCKED_BY"),color:"#ff9800"},{value:x.f.Blocks,title:this._$translate.instant("MENU.CARD_LINK_BLOCKS"),color:"#ef6a6e"}]),this._availableCardLinkTypes}},{kind:"method",key:"linkedCardFilter",value:function linkedCardFilter(e){var t;if(!this.isLinkAdding()||!this.tempLink)return!1;switch(this._calendarCard.cardType){case x.h.TrelloCard:return e.canHaveLinks&&e.id!==this._calendarCard.id&&!e.isReadOnly&&!e.isArchived&&!xe()(t=this.cardLinks).call(t,(t=>t.toCardId===e.id));default:return!1}}},{kind:"get",key:"cardLinks",value:function cardLinks(){if(this.delayRender)return[];if(!this.isTrelloCard)return[];if(!this._cardLinks){let e=this._calendarCardsSrv.getCalendarCardLinks(this._calendarCard)||[];this._cardLinks=R()(e).call(e,(e=>{let t=e.linkError===x.e.NoCard&&!this._cardLinksForceLoadedCardsCache.has(e.toCardId),r={...e,isBusy:t,openLinkedCard:()=>{if(!r.linkedCard)return;let e;var t;if(this._logCardEvent({event:x.X.CardEvents.CardLinkLinkedCardOpened,data:{linkType:r.linkType.value}}),this._schedulerWidget)e=c()(t=this._schedulerWidget.element).call(t,`.k-event[data-uid="${r.linkedCard.id}"]`),e[0]&&this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{cardElement:e}),this._schedulerWidget.select(null),this._schedulerWidget.select([r.linkedCard.id]);else if(this._taskListsContainer){var i;e=c()(i=this._taskListsContainer).call(i,`.pw-tasks-list-item__card[data-id="${r.linkedCard.id}"]`)}this._$timeout((()=>{this._dialogSrv.showEditCardDialogAsync(r.linkedCard,{cardElement:e,schedulerWidget:this._schedulerWidget,noAnimation:this.isDetailed})}),0,!1)},removeAsync:async()=>{if(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.REMOVE_CARD_LINK_TITLE"),this._$translate.instant("DIALOGS.REMOVE_CARD_LINK_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.REMOVE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))try{this._logCardEvent({event:x.X.CardEvents.CardLinkRemoved,data:{linkType:r.linkType.value}}),this._hasChanges=!0,this._$scope.$evalAsync((()=>r.isBusy=!0)),await this._calendarCardsSrv.removeCalendarCardLinkAsync(this._calendarCard,r.toCardId,r.linkType.value)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardLinks=null))}}};return C()(r,"isReadonly",{get:()=>{var e;return!(r.linkedCard&&!r.linkedCard.isReadOnly&&!r.linkedCard.isArchived)||r.linkedCard.boardId!==this._currentBoardId&&!xe()(e=this.connectedBoards).call(e,(e=>e.id===r.linkedCard.boardId))}}),C()(r,"linkType",{get:()=>{var t;return c()(t=this.availableCardLinkTypes).call(t,(t=>t.value===e.linkType))},set:async e=>{if(r.linkType!==e)try{if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.Dependencies,!0))return;this._logCardEvent({event:x.X.CardEvents.CardLinkTypeChanged,data:{linkType:e.value}}),this._hasChanges=!0,this._$scope.$evalAsync((()=>r.isBusy=!0)),await this._calendarCardsSrv.updateCalendarCardLinkAsync(this._calendarCard,r.toCardId,r.linkType.value,e.value)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardLinks=null))}}}),C()(r,"linkErrorMessage",{get:()=>{if(!r._linkErrorMessage)switch(r.linkError){case x.e.NoCard:r._linkErrorMessage=this._$translate.instant("TOOLTIPS.CARD_LINK_ERROR_NO_CARD");break;case x.e.NoLink:r._linkErrorMessage=this._$translate.instant("TOOLTIPS.CARD_LINK_ERROR_NO_LINK");break;case x.e.LinksDisabled:r._linkErrorMessage=this._$translate.instant("TOOLTIPS.CARD_LINK_ERROR_LINKS_DISABLED")}return r._linkErrorMessage}}),t?(async()=>{let e=null;try{e=await this._calendarCardsSrv.getCalendarCardByIdAsync(x.h.TrelloCard,r.toCardId)}catch(e){this._$log.error("Planyway linked card loading error:"),this._$log.error(e)}this._cardLinksForceLoadedCardsCache.set(r.toCardId,e),this._$scope.$evalAsync((()=>{e&&(r.linkedCard=e),r.isBusy=!1}))})():e.linkedCard?this._cardLinksForceLoadedCardsCache.delete(e.toCardId):r.linkedCard=this._cardLinksForceLoadedCardsCache.get(e.toCardId),r}))}return this._cardLinks}},{kind:"get",key:"isDescriptionAvailable",value:function isDescriptionAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return!this.isReadOnly||this.description;case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.parentCard&&(!this.isReadOnly||this.description);case x.h.GoogleEvent:case x.h.ICalEvent:return!this.isReadOnly||this.description}return!1}},{kind:"get",key:"isDescriptionEditing",value:function isDescriptionEditing(){return this._isDescriptionEditing}},{kind:"set",key:"isDescriptionEditing",value:function isDescriptionEditing(e){this.isDescriptionEditing!==e&&(this._$scope.$evalAsync((()=>this._isDescriptionEditing=e)),e&&this._$timeout((()=>{a()(".pw-js-dialog-edit-card-description-input").trigger("focus"),this._$scope.$broadcast(x.n.AutosizeTextareaResizeRequested)}),0,!1))}},{kind:"get",key:"description",value:function description(){return this._description}},{kind:"set",key:"description",value:function description(e){this._checkEditAvailable()&&this.description!==e&&(this._description=null==e?void 0:pe()(e).call(e),this._logCardEvent({event:x.X.CardEvents.DescriptionChanged}),this._setCardPropertiesAsync({description:this.description}))}},{kind:"get",key:"isCustomFieldsAvailable",value:function isCustomFieldsAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return this.cardBoard&&this.cardCustomFields.length>0;case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.parentCard&&this.cardBoard&&this.cardCustomFields.length>0}return!1}},{kind:"get",key:"cardCustomFields",value:function cardCustomFields(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];if(!this._cardCustomFields){var e,t;this._dirtyCardCustomFieldValues||(this._dirtyCardCustomFieldValues=new lt.a);const r=this._calendarCardsSrv.getCalendarCardCustomFieldValues(this._calendarCard)||{};this._cardCustomFields=R()(e=S()(t=this.cardBoard.customFields).call(t,(e=>e.id!==this.cardBoard.cardDataCustomFieldId))).call(e,(e=>{var t;let i={id:e.id,type:e.type,icon:ft[e.type],name:e.name,options:null===(t=e.options)||void 0===t?void 0:R()(t).call(t,(e=>({id:e.id,name:e.name,color:e.color})))};return C()(i,"value",{get:()=>{var e;let t=this._dirtyCardCustomFieldValues.has(i.id)?this._dirtyCardCustomFieldValues.get(i.id):r[i.id];switch(i.type){case x.pb.Checkbox:return!!t;case x.pb.List:return c()(e=i.options).call(e,(e=>e.id===t));default:return null!=t?t:""}},set:async e=>{var t;switch(i.type){case x.pb.Date:"now"===e&&(e=new Date);break;case x.pb.List:e=(null===(t=e)||void 0===t?void 0:t.id)||null}if(r[i.id]!==e){r[i.id]=e;try{this._logCardEvent({event:x.X.CardEvents.CustomFieldChanged}),this._dirtyCardCustomFieldValues.set(i.id,e),await this._setCardPropertiesAsync({[`${U.h}${i.id}`]:e})}finally{this._dirtyCardCustomFieldValues.delete(i.id)}}}}),i}))}return this._cardCustomFields}},{kind:"get",key:"isRemindersAvailable",value:function isRemindersAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:return this._pushNotificationsSrv.isNotificationsSupported&&this.hasDates&&(!this.isReadOnly||this.cardReminders.length>0)}return!1}},{kind:"get",key:"isNotificationsDisabled",value:function isNotificationsDisabled(){return this._pushNotificationsSrv.notificationStatus===x.J.Disabled}},{kind:"get",key:"canAddReminder",value:function canAddReminder(){switch(this._calendarCard.cardType){case x.h.TrelloCard:return this.cardReminders.length<5}return!1}},{kind:"get",key:"cardReminders",value:function cardReminders(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];var e,t;this._cardReminders||(this._cardRemindersLastIntervalUnits||(this._cardRemindersLastIntervalUnits=new lt.a),this._cardRemindersLastIntervalUnitsAllDay||(this._cardRemindersLastIntervalUnitsAllDay=new lt.a),this._cardReminders=We()(e=R()(t=this._calendarCard.notifications).call(t,(e=>{let t={...e,delete:()=>{var e,r;this._logCardEvent({event:x.X.CardEvents.ReminderDeleted,data:{reminderType:t.type,remindBeforeValue:t.remindValue,remindBeforeUnit:t.selectedRemindUnit.unit,remindTime:t.remindTime}}),this._hasChanges=!0;let i=R()(e=S()(r=this.cardReminders).call(r,(e=>e.id!==t.id))).call(e,(e=>({id:e.id,type:e.type,remindBefore:e.remindBefore})));this._setCardPropertiesAsync({notifications:i})}};if(this.isAllDay){let e,r,i=t.remindBefore%Dt,a=t.remindBefore+Dt-i,o=this._cardRemindersLastIntervalUnitsAllDay.get(t.id);o&&o.remindBefore===a?({unit:e,value:r}=o):(({unit:e,value:r}=Object(n.Ab)(a)),this._cardRemindersLastIntervalUnitsAllDay.set(t.id,{remindBefore:a,unit:e,value:r})),t._remindUnit=e,t._remindValue=r,t._remindTime=Object(n.c)(kt,Dt-i)}else{let e,r,i=t.remindBefore,a=this._cardRemindersLastIntervalUnits.get(t.id);a&&a.remindBefore===i?({unit:e,value:r}=a):(({unit:e,value:r}=Object(n.Ab)(i)),this._cardRemindersLastIntervalUnits.set(t.id,{remindBefore:i,unit:e,value:r})),t._remindUnit=e,t._remindValue=r}return C()(t,"remindValue",{get:()=>t._remindValue,set:e=>{var r;if(!ot()(e))return;if(e<t.minRemindValue?e=t.minRemindValue:e>t.maxRemindValue&&(e=t.maxRemindValue),t._remindValue===e)return;if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.PushNotifications,!0))return;if(this._hasChanges=!0,t._remindValue=e,this.isAllDay){let r=Dt-Object(n.S)(kt,t._remindTime),i=Object(n.hb)(t._remindUnit,e);t.remindBefore=i-Dt+r,this._localSettings.editCardDialog.defaultRemindBeforeAllDay=t.remindBefore,this._cardRemindersLastIntervalUnitsAllDay.set(t.id,{remindBefore:i,unit:t._remindUnit,value:e})}else{let r=Object(n.hb)(t._remindUnit,e);t.remindBefore=r,this._localSettings.editCardDialog.defaultRemindBefore=t.remindBefore,this._cardRemindersLastIntervalUnits.set(t.id,{remindBefore:r,unit:t._remindUnit,value:e})}this._settingsSrv.saveLocal(),this._logCardEvent({event:x.X.CardEvents.ReminderChanged,data:{reminderType:t.type,remindBeforeValue:t.remindValue,remindBeforeUnit:t.selectedRemindUnit.unit,remindTime:t.remindTime}});let i=R()(r=this.cardReminders).call(r,(e=>({id:e.id,type:e.type,remindBefore:e.remindBefore})));this._setCardPropertiesAsync({notifications:i})}}),C()(t,"minRemindValue",{get:()=>this.isAllDay?1:0}),C()(t,"maxRemindValue",{get:()=>{switch(t._remindUnit){case"weeks":return 4;case"days":return 28;case"hours":return 672;case"minutes":return 40320}}}),C()(t,"availableRemindUnits",{get:()=>(t._availableUnits||(this.isAllDay?t._availableUnits=[{title:this._$translate.instant("MENU.REMINDER_UNIT_DAYS"),unit:"days"},{title:this._$translate.instant("MENU.REMINDER_UNIT_WEEKS"),unit:"weeks"}]:t._availableUnits=[{title:this._$translate.instant("MENU.REMINDER_UNIT_MINUTES"),unit:"minutes"},{title:this._$translate.instant("MENU.REMINDER_UNIT_HOURS"),unit:"hours"},{title:this._$translate.instant("MENU.REMINDER_UNIT_DAYS"),unit:"days"},{title:this._$translate.instant("MENU.REMINDER_UNIT_WEEKS"),unit:"weeks"}]),t._availableUnits)}),C()(t,"selectedRemindUnit",{get:()=>{var e;return c()(e=t.availableRemindUnits).call(e,(e=>e.unit===t._remindUnit))},set:e=>{var r;if(t._remindUnit===e.unit)return;if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.PushNotifications,!0))return;if(this._hasChanges=!0,t._remindUnit=e.unit,t._remindValue<t.minRemindValue?t._remindValue=t.minRemindValue:t._remindValue>t.maxRemindValue&&(t._remindValue=t.maxRemindValue),this.isAllDay){let r=Dt-Object(n.S)(kt,t._remindTime),i=Object(n.hb)(e.unit,t._remindValue);t.remindBefore=i-Dt+r,this._localSettings.editCardDialog.defaultRemindBeforeAllDay=t.remindBefore,this._cardRemindersLastIntervalUnitsAllDay.set(t.id,{remindBefore:i,unit:e.unit,value:t._remindValue})}else{let r=Object(n.hb)(e.unit,t._remindValue);t.remindBefore=r,this._localSettings.editCardDialog.defaultRemindBefore=t.remindBefore,this._cardRemindersLastIntervalUnits.set(t.id,{remindBefore:r,unit:e.unit,value:t._remindValue})}this._settingsSrv.saveLocal(),this._logCardEvent({event:x.X.CardEvents.ReminderChanged,data:{reminderType:t.type,remindBeforeValue:t.remindValue,remindBeforeUnit:t.selectedRemindUnit.unit,remindTime:t.remindTime}});let i=R()(r=this.cardReminders).call(r,(e=>({id:e.id,type:e.type,remindBefore:e.remindBefore})));this._setCardPropertiesAsync({notifications:i})}}),C()(t,"remindTime",{get:()=>{if(this.isAllDay)return t._remindTime},set:e=>{var r;if(!e||Object(n.w)(t._remindTime,e))return;if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.PushNotifications,!0))return;if(this._hasChanges=!0,t._remindTime=e,!this.isAllDay)return;{let e=Dt-Object(n.S)(kt,t._remindTime),r=Object(n.hb)(t._remindUnit,t._remindValue);t.remindBefore=r-Dt+e,this._localSettings.editCardDialog.defaultRemindBeforeAllDay=t.remindBefore,this._cardRemindersLastIntervalUnitsAllDay.set(t.id,{remindBefore:r,unit:t._remindUnit,value:t._remindValue})}this._settingsSrv.saveLocal(),Object(n.tb)(this._mdPanelRef.panelEl),this._logCardEvent({event:x.X.CardEvents.ReminderChanged,data:{reminderType:t.type,remindBeforeValue:t.remindValue,remindBeforeUnit:t.selectedRemindUnit.unit,remindTime:t.remindTime}});let i=R()(r=this.cardReminders).call(r,(e=>({id:e.id,type:e.type,remindBefore:e.remindBefore})));this._setCardPropertiesAsync({notifications:i})}}),C()(t,"minRemindTime",{get:()=>kt}),C()(t,"maxRemindTime",{get:()=>(t._maxRemindTime||(t._maxRemindTime=Object(n.c)(t.minRemindTime,Dt)),t._maxRemindTime)}),t}))).call(e,n.s),this._cardReminderPresets=null);return this._cardReminders}},{kind:"get",key:"cardReminderPresets",value:function cardReminderPresets(){return this._cardReminderPresets||(this.isAllDay?this._cardReminderPresets=[{remindBefore:30,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_AT_DAY_BEFORE_23_30",{time:kendo.toString(Object(n.M)(kt,23,30),"t")})},{remindBefore:900,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_AT_DAY_BEFORE_9_00",{time:kendo.toString(Object(n.M)(kt,9),"t")})},{remindBefore:2340,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_AT_2_DAYS_BEFORE_9_00",{time:kendo.toString(Object(n.M)(kt,9),"t")})},{remindBefore:9540,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_AT_1_WEEK_BEFORE_9_00",{time:kendo.toString(Object(n.M)(kt,9),"t")})},{remindBefore:null,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_CUSTOM")}]:this._cardReminderPresets=[{remindBefore:5,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_5_MINUTES")},{remindBefore:10,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_10_MINUTES")},{remindBefore:15,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_15_MINUTES")},{remindBefore:30,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_30_MINUTES")},{remindBefore:60,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_1_HOUR")},{remindBefore:1440,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_1_DAY")},{remindBefore:null,text:this._$translate.instant("DIALOGS.REMIND_BEFORE_CUSTOM")}]),this._cardReminderPresets}},{kind:"method",key:"enableNotificationsAsync",value:async function enableNotificationsAsync(){await this._pushNotificationsSrv.enableNotificationsAsync()&&this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.PushNotificationsEnabled,{where:x.bb.Dialog})}},{kind:"method",key:"addReminderAsync",value:async function addReminderAsync(e,t){var r,i;if(!this.canAddReminder)return;if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.PushNotifications,!0))return;this.isDetailed||await this.switchDetailedModeAsync(),this.isNotificationsDisabled&&0===this.cardReminders.length&&this.enableNotificationsAsync();const a=Ve()();this._calendarCard.notifications.push({id:a,type:me.h.RemindStart,remindBefore:null!=t?t:this.isAllDay?this._localSettings.editCardDialog.defaultRemindBeforeAllDay:this._localSettings.editCardDialog.defaultRemindBefore}),this._cardReminders=null;let n=c()(r=this.cardReminders).call(r,(e=>e.id===a));this._logCardEvent({event:x.X.CardEvents.ReminderAdded,data:{by:mt[e],reminderType:n.type,remindBeforeValue:n.remindValue,remindBeforeUnit:n.selectedRemindUnit.unit,remindTime:n.remindTime}}),this._hasChanges=!0;let o=R()(i=this.cardReminders).call(i,(e=>({id:e.id,type:e.type,remindBefore:e.remindBefore})));this._setCardPropertiesAsync({isSubscribed:!0,notifications:o}),this._$scope.$evalAsync((()=>{this._scrollToSection("reminders")}))}},{kind:"get",key:"isChecklistsAvailable",value:function isChecklistsAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return!this.isReadOnly||this.cardChecklists.length>0;case x.h.TrelloTimeRecord:return this.parentCard&&(!this.isReadOnly||this.cardChecklists.length>0)}return!1}},{kind:"get",key:"isAddChecklistBusy",value:function isAddChecklistBusy(){return this._isAddChecklistBusy}},{kind:"method",key:"addChecklistAsync",value:async function addChecklistAsync(e){try{this.isDetailed||await this.switchDetailedModeAsync(),this._logCardEvent({event:x.X.CardEvents.ChecklistAdded,data:{by:mt[e]}}),this._hasChanges=!0,this._$scope.$evalAsync((()=>{this._isAddChecklistBusy=!0,this._cardChecklists=null}));let{id:t}=await this._calendarCardsSrv.createCalendarCardChecklistAsync(this._calendarCard);this._$scope.$evalAsync((()=>{this._cardChecklists=null,this._isAddChecklistBusy=!1,this.beginCheckItemAdding(t),this._scrollToSection("checklists")}))}catch(e){this._$scope.$evalAsync((()=>{this._cardChecklists=null,this._isAddChecklistBusy=!1})),this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}}},{kind:"get",key:"cardChecklists",value:function cardChecklists(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];if(!this._cardChecklists){var e;this._dirtyCardChecklistNames||(this._dirtyCardChecklistNames=new lt.a),this._dirtyCardCheckItemNames||(this._dirtyCardCheckItemNames=new lt.a),this._dirtyCardCheckItemCompleted||(this._dirtyCardCheckItemCompleted=new lt.a),this._dirtyCardCheckItemIsAllDay||(this._dirtyCardCheckItemIsAllDay=new lt.a),this._dirtyCardCheckItemStart||(this._dirtyCardCheckItemStart=new lt.a),this._dirtyCardCheckItemEnd||(this._dirtyCardCheckItemEnd=new lt.a),this._dirtyCardCheckItemMembers||(this._dirtyCardCheckItemMembers=new lt.a),this._busyCheckItemIds||(this._busyCheckItemIds=new M.a);let t=this._calendarCardsSrv.getCalendarCardChecklists(this._calendarCard)||[];this._cardChecklists=We()(e=R()(t).call(t,(e=>{var t;let r=e.checkItems;this.isCheckItemAdding(e.id)&&(r=[...r,this._tempCheckItem]);let i={...e,deleteAsync:async()=>{if(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.DELETE_CHECKLIST_TITLE"),this._$translate.instant("DIALOGS.DELETE_CHECKLIST_CONFIRM",{name:ct()(e.name,36)}),{buttons:[{text:this._$translate.instant("BUTTONS.DELETE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))try{this._logCardEvent({event:x.X.CardEvents.ChecklistDeleted}),this._hasChanges=!0,this._$scope.$evalAsync((()=>this._cardChecklists=null)),await this._calendarCardsSrv.deleteCalendarCardChecklistAsync(this._calendarCard,i.id)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardChecklists=null))}},getCheckItemNewPosition:e=>Object(n.X)(e,i.checkItems),checkItems:We()(t=R()(r).call(r,(t=>{let r={...t,checklistId:e.id,deleteAsync:async()=>{if(r.isTempCheckItem)return void this.rejectCheckItemAdding();if(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.DELETE_CHECK_ITEM_TITLE"),this._$translate.instant("DIALOGS.DELETE_CHECK_ITEM_CONFIRM",{name:ct()(t.name,36)}),{buttons:[{text:this._$translate.instant("BUTTONS.DELETE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))try{this._logCardEvent({event:x.X.CardEvents.CheckItemDeleted}),this._hasChanges=!0,this._$scope.$evalAsync((()=>this._cardChecklists=null)),await this._calendarCardsSrv.deleteCalendarCardCheckItemAsync(this._calendarCard,r.checklistId,r.id)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardChecklists=null))}},removeDatesAsync:async()=>{if(r.hasDates)try{r.isTempCheckItem?(t.start=null,t.end=null,t.isAllDay=null):(this._logCardEvent({event:x.X.CardEvents.CheckItemDatesRemoved}),this._hasChanges=!0,this._dirtyCardCheckItemStart.set(r.id,null),this._dirtyCardCheckItemEnd.set(r.id,null),await this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this._calendarCard,r.checklistId,r.id,{isAllDay:null,start:null,end:null}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardCheckItemStart.delete(r.id),this._dirtyCardCheckItemEnd.delete(r.id),this._$scope.$evalAsync((()=>this._cardChecklists=null))}},isMemberSelected:e=>{let i=this._dirtyCardCheckItemMembers.has(r.id)?this._dirtyCardCheckItemMembers.get(r.id):t.memberIds;return ze()(i).call(i,e.id)},toggleMemberAsync:async e=>{try{if(r.isTempCheckItem){var i;t.memberIds=ze()(i=t.memberIds).call(i,e.id)?[]:[e.id]}else{let i=this._dirtyCardCheckItemMembers.has(r.id)?this._dirtyCardCheckItemMembers.get(r.id):t.memberIds;ze()(i).call(i,e.id)?(i=[],this._logCardEvent({event:x.X.CardEvents.CheckItemMemberUnassigned})):(i=[e.id],this._logCardEvent({event:x.X.CardEvents.CheckItemMemberAssigned})),this._hasChanges=!0,this._dirtyCardCheckItemMembers.set(r.id,i),await this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this._calendarCard,r.checklistId,r.id,{memberIds:i})}}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardCheckItemMembers.delete(r.id),this._$scope.$evalAsync((()=>this._cardChecklists=null))}}};return C()(r,"isTempCheckItem",{get:()=>t===this._tempCheckItem}),C()(r,"isBusy",{get:()=>!this.isNewCard&&this._busyCheckItemIds.has(r.id)}),C()(r,"name",{get:()=>this._dirtyCardCheckItemNames.has(r.id)?this._dirtyCardCheckItemNames.get(r.id):t.name,set:async e=>{if((e||r.isTempCheckItem)&&r.name!==e)try{r.isTempCheckItem?t.name=e:(this._logCardEvent({event:x.X.CardEvents.CheckItemNameChanged}),this._hasChanges=!0,this._dirtyCardCheckItemNames.set(r.id,e),await this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this._calendarCard,r.checklistId,r.id,{name:e}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardCheckItemNames.delete(r.id),this._$scope.$evalAsync((()=>this._cardChecklists=null))}}}),C()(r,"isCompleted",{get:()=>this._dirtyCardCheckItemCompleted.has(r.id)?this._dirtyCardCheckItemCompleted.get(r.id):t.isCompleted,set:async e=>{if(r.isCompleted!==e)try{this._logCardEvent({event:e?x.X.CardEvents.CheckItemMarkedCompleted:x.X.CardEvents.CheckItemMarkedIncompleted}),this._hasChanges=!0,this._dirtyCardCheckItemCompleted.set(r.id,e),await this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this._calendarCard,r.checklistId,r.id,{isCompleted:e})}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardCheckItemCompleted.delete(r.id),this._$scope.$evalAsync((()=>this._cardChecklists=null))}}}),C()(r,"hasDates",{get:()=>Object(n.rb)(r.start)&&Object(n.rb)(r.end)}),C()(r,"isAllDay",{get:()=>{var e;return this._dirtyCardCheckItemIsAllDay.has(r.id)?this._dirtyCardCheckItemIsAllDay.get(r.id):null===(e=t.isAllDay)||void 0===e||e},set:e=>{r.isAllDay!==e&&this._dirtyCardCheckItemIsAllDay.set(r.id,e)}}),C()(r,"start",{get:()=>this._dirtyCardCheckItemStart.has(r.id)?this._dirtyCardCheckItemStart.get(r.id):t.start,set:e=>{e&&!Object(n.w)(r.start,e)&&this._dirtyCardCheckItemStart.set(r.id,e)}}),C()(r,"end",{get:()=>this._dirtyCardCheckItemEnd.has(r.id)?this._dirtyCardCheckItemEnd.get(r.id):t.end,set:async e=>{if(e)try{r.isTempCheckItem?(t.isAllDay=r.isAllDay,t.start=r.start,t.end=e):(r.hasDates?this._dirtyCardCheckItemIsAllDay.has(r.id)?this._logCardEvent({event:r.isAllDay?x.X.CardEvents.CheckItemIsAllDaySet:x.X.CardEvents.CheckItemIsAllDayUnset}):this._dirtyCardCheckItemStart.has(r.id)?this._logCardEvent({event:x.X.CardEvents.CheckItemStartChanged}):this._logCardEvent({event:x.X.CardEvents.CheckItemEndChanged}):this._logCardEvent({event:x.X.CardEvents.CheckItemDatesSet}),this._hasChanges=!0,this._dirtyCardCheckItemEnd.set(r.id,e),await this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this._calendarCard,r.checklistId,r.id,{isAllDay:r.isAllDay,start:r.start,end:e}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardCheckItemIsAllDay.delete(r.id),this._dirtyCardCheckItemStart.delete(r.id),this._dirtyCardCheckItemEnd.delete(r.id),this._$scope.$evalAsync((()=>this._cardChecklists=null))}}}),C()(r,"shortDate",{get:()=>{if(r.hasDates)return Object(n.B)(r.start,r.end)}}),C()(r,"membersCount",{get:()=>(this._dirtyCardCheckItemMembers.has(r.id)?this._dirtyCardCheckItemMembers.get(r.id):t.memberIds).length}),C()(r,"members",{get:()=>{var e,i,a;let o=this._dirtyCardCheckItemMembers.has(r.id)?this._dirtyCardCheckItemMembers.get(r.id):t.memberIds;return R()(e=We()(i=S()(a=R()(o).call(o,(e=>{var t;return c()(t=this.cardBoard.members).call(t,(t=>t.id===e))}))).call(a,(e=>e))).call(i,n.r)).call(e,(e=>({...e})))}}),r}))).call(t,n.l)};return C()(i,"isBusy",{get:()=>{var e;return!this.isNewCard&&ce()(e=i.id).call(e,U.k)}}),C()(i,"isNameEditing",{get:()=>this._checklistNameEditingId===i.id,set:e=>{e?this._checklistNameEditingId=i.id:this._checklistNameEditingId===i.id&&(this._checklistNameEditingId=null)}}),C()(i,"name",{get:()=>this._dirtyCardChecklistNames.has(i.id)?this._dirtyCardChecklistNames.get(i.id):e.name,set:async e=>{if(e&&i.name!==e)try{this._logCardEvent({event:x.X.CardEvents.ChecklistNameChanged}),this._hasChanges=!0,this._dirtyCardChecklistNames.set(i.id,e),await this._calendarCardsSrv.updateCalendarCardChecklistAsync(this._calendarCard,i.id,{name:e})}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardChecklistNames.delete(i.id),this._$scope.$evalAsync((()=>this._cardChecklists=null))}}}),C()(i,"isCollapsed",{get:()=>{var e,t;return null!==(e=null===(t=this._settingsSrv.currentSettings.local.editCardDialog.checklists[i.id])||void 0===t?void 0:t.isCollapsed)&&void 0!==e&&e},set:e=>{if(i.isCollapsed===e)return;this._logCardEvent({event:e?x.X.CardEvents.ChecklistCollapsed:x.X.CardEvents.ChecklistExpanded});let t=this._settingsSrv.currentSettings.local.editCardDialog.checklists,r=t[i.id];delete t[i.id],t[i.id]={...r,isCollapsed:e},this._settingsSrv.saveLocal()}}),C()(i,"isCompletedCheckItemsHidden",{get:()=>{var e,t;return null!==(e=null===(t=this._settingsSrv.currentSettings.local.editCardDialog.checklists[i.id])||void 0===t?void 0:t.hideCompleted)&&void 0!==e&&e},set:e=>{if(i.isCompletedCheckItemsHidden===e)return;i.isCollapsed=!1,this._logCardEvent({event:e?x.X.CardEvents.ChecklistCompletedHidden:x.X.CardEvents.ChecklistCompletedShown});let t=this._settingsSrv.currentSettings.local.editCardDialog.checklists,r=t[i.id];delete t[i.id],t[i.id]={...r,hideCompleted:e},this._settingsSrv.saveLocal()}}),C()(i,"hasVisibleCheckItems",{get:()=>{var e;return i.isCompletedCheckItemsHidden?xe()(e=i.checkItems).call(e,(e=>!e.isCompleted)):i.checkItems.length>0}}),i}))).call(e,n.m)}return this._cardChecklists}},{kind:"get",key:"sortableChecklistOptions",value:function sortableChecklistOptions(){return this._dragState.sortableChecklistOptions||(this._dragState.sortableChecklistOptions={handler:".pw-dialog-edit-card-checklist__header, .pw-dialog-edit-card-checklist__header *",ignore:"input, :not(.pw-dialog-edit-card-checklist__header):not(.pw-dialog-edit-card-checklist__header *)",autoScroll:!0,placeholder:e=>{let t=e.clone().addClass("pw-dialog-edit-card-checklist--placeholder");return e.next()[0]||(this._dragState.lastElement=t,t.css({marginBottom:0})),c()(t).call(t,"input").removeAttr("id"),t},hint:e=>{let t=a()('<div class="pw-dialog-edit-card-checklist pw-dialog-edit-card-checklist--hint"></div>').css({width:e.width()}),r=c()(e).call(e,".pw-dialog-edit-card-checklist__header").clone();return c()(r).call(r,".pw-js-remove-from-drag-hint").remove(),t.append(r),c()(t).call(t,"input").removeAttr("id"),t}}),this._dragState.sortableChecklistOptions}},{kind:"method",key:"onChecklistDragStart",value:function onChecklistDragStart(e){this.isBusy||this.isReadOnly?e.preventDefault():(this._dragState.isDragging=!0,this.clickRequester=null)}},{kind:"method",key:"onChecklistDrag",value:function onChecklistDrag(e){if(this._dragState.lastElement){let t=e.item.prev();t[0]!==this._dragState.lastElement[0]&&(this._dragState.lastElement.css({marginBottom:""}),t.css({marginBottom:0}),this._dragState.lastElement=t)}}},{kind:"method",key:"onChecklistDragEnd",value:function onChecklistDragEnd(e){var t,r;if(this.onChecklistDragCancel(e),e.newIndex===e.oldIndex)return;if(e.preventDefault(),"sort"!==e.action)return void this._$log.warn(`Unexpected checklist drag and drop event: ${e.action}`);let i=this.cardChecklists[e.oldIndex];y()(t=this.cardChecklists).call(t,e.newIndex,0,y()(r=this.cardChecklists).call(r,e.oldIndex,1)[0]),i.position=(e=>{if(0===e)return this.cardChecklists[e+1].position/2;if(e>=this.cardChecklists.length-1)return this.cardChecklists[e-1].position+U.U;return(this.cardChecklists[e-1].position+this.cardChecklists[e+1].position)/2})(e.newIndex),this._logCardEvent({event:x.X.CardEvents.ChecklistOrderChanged}),this._calendarCardsSrv.updateCalendarCardChecklistAsync(this._calendarCard,i.id,{position:i.position})}},{kind:"method",key:"onChecklistDragCancel",value:function onChecklistDragCancel(e){var t;e.sender.draggable.dropped=!0,this._dragState.isDragging=!1,null===(t=this._dragState.lastElement)||void 0===t||t.css({marginBottom:""}),this._dragState.lastElement=null}},{kind:"get",key:"sortableCheckItemOptions",value:function sortableCheckItemOptions(){return this._dragState.sortableCheckItemOptions||(this._dragState.sortableCheckItemOptions={connectWith:".pw-dialog-edit-card-checklist",filter:"> .pw-dialog-edit-card-check-item--draggable",ignore:"input",autoScroll:!0,placeholder:e=>{let t=e.clone().addClass("pw-dialog-edit-card-check-item--placeholder");return c()(t).call(t,"input").removeAttr("id"),t},hint:e=>{let t=e.clone().addClass("pw-dialog-edit-card-check-item--hint").css({width:e.width()});return c()(t).call(t,".pw-js-remove-from-drag-hint").remove(),c()(t).call(t,"input").removeAttr("id"),t}}),this._dragState.sortableCheckItemOptions}},{kind:"method",key:"onCheckItemDragStart",value:function onCheckItemDragStart(e){var t,r;if(this.isBusy||this.isReadOnly)return void e.preventDefault();let i=e.item.data("checklist-id"),a=at()(t=this.cardChecklists).call(t,(e=>e.id===i)),n=this.cardChecklists[a],o=e.item.data("check-item-id"),s=null==n?void 0:c()(r=n.checkItems).call(r,(e=>e.id===o));s&&!s.isBusy?(this._dragState.lastChecklistIndex=a,this._dragState.isDragging=!0,this.clickRequester=null):e.preventDefault()}},{kind:"method",key:"beforeCheckItemDrag",value:function beforeCheckItemDrag(e){var t;if(e.sender.element.hasClass("pw-dialog-edit-card-checklist--collapsed"))return void e.preventDefault();let r=e.target.data("checklist-id"),i=at()(t=this.cardChecklists).call(t,(e=>e.id===r));i===this._dragState.lastChecklistIndex?this._dragState.isDragDown="next"===e.direction:(this._dragState.isDragDown=i>this._dragState.lastChecklistIndex,this._dragState.lastChecklistIndex=i)}},{kind:"method",key:"onCheckItemDragEndAsync",value:async function onCheckItemDragEndAsync(e,t){var r,i,a,n,o,s,l;if(this.onCheckItemDragCancel(e),e.newIndex===e.oldIndex)return;let d=c()(r=this.cardChecklists).call(r,(e=>e.id===t));if(!d)return;let h,u,p=e.item.data("check-item-id");const getNewIndex=()=>{let t=d.hasVisibleCheckItems?e.newIndex:0;if(!d.isCompletedCheckItemsHidden)return t;let r=0,i=0;for(;i<t;){var a;null!==(a=d.checkItems[r])&&void 0!==a&&a.isCompleted||i++,r++}if(!this._dragState.isDragDown)for(;null!==(n=d.checkItems[r])&&void 0!==n&&n.isCompleted;){var n;r++}return r};let m;switch(e.action){case"remove":u=at()(i=d.checkItems).call(i,(e=>e.id===p)),this._dragState.movedCheckItem=y()(a=d.checkItems).call(a,u,1)[0];break;case"receive":e.preventDefault();let r=e.item.data("checklist-id");h=this._dragState.movedCheckItem,m=getNewIndex(),y()(n=d.checkItems).call(n,m,0,h);try{this._busyCheckItemIds.add(h.id);let e=d.getCheckItemNewPosition(m);this._logCardEvent({event:x.X.CardEvents.CheckItemChecklistChanged}),await this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this._calendarCard,r,p,{checklistId:t,position:e}),h.checklistId=t,h.position=e}finally{this._$scope.$evalAsync((()=>{this._cardChecklists=null,this._busyCheckItemIds.delete(h.id)}))}break;case"sort":e.preventDefault(),u=at()(o=d.checkItems).call(o,(e=>e.id===p)),h=y()(s=d.checkItems).call(s,u,1)[0],m=getNewIndex(),y()(l=d.checkItems).call(l,m,0,h),h.position=d.getCheckItemNewPosition(m),this._logCardEvent({event:x.X.CardEvents.CheckItemOrderChanged}),this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this._calendarCard,t,h.id,{position:h.position})}}},{kind:"method",key:"onCheckItemDragCancel",value:function onCheckItemDragCancel(e){var t;e.sender.draggable.dropped=!0,this._dragState.isDragging=!1,null===(t=this._dragState.lastElement)||void 0===t||t.css({marginBottom:""}),this._dragState.lastElement=null}},{kind:"get",key:"tempCheckItem",value:function tempCheckItem(){return this._tempCheckItem}},{kind:"method",key:"isCheckItemAdding",value:function isCheckItemAdding(e){return!!this._tempCheckItem&&(!e||this._tempCheckItem.checklistId===e)}},{kind:"method",key:"beginCheckItemAdding",value:function beginCheckItemAdding(e){if(this.isCheckItemAdding())this.rejectCheckItemAdding();else{var t,r,i,a,n;if(!this._tempCheckItem)this._tempCheckItem={id:U.k,name:(null===(t=this._lastRejectedCheckItemProperties)||void 0===t?void 0:t.name)||"",start:null===(r=this._lastRejectedCheckItemProperties)||void 0===r?void 0:r.start,end:null===(i=this._lastRejectedCheckItemProperties)||void 0===i?void 0:i.end,isAllDay:null===(a=this._lastRejectedCheckItemProperties)||void 0===a?void 0:a.isAllDay,memberIds:(null===(n=this._lastRejectedCheckItemProperties)||void 0===n?void 0:n.memberIds)||[],checklistId:e},C()(this._tempCheckItem,"isValid",{get:()=>{var e;return!!pe()(e=this._tempCheckItem.name).call(e)}});this._$scope.$evalAsync((()=>this._cardChecklists=null))}}},{kind:"method",key:"rejectCheckItemAdding",value:function rejectCheckItemAdding(){this._lastRejectedCheckItemProperties={name:this._tempCheckItem.name,isAllDay:this._tempCheckItem.isAllDay,start:this._tempCheckItem.start,end:this._tempCheckItem.end,memberIds:this._tempCheckItem.memberIds},this._$scope.$evalAsync((()=>{this._tempCheckItem=null,this._cardChecklists=null}))}},{kind:"method",key:"submitCheckItemAddingAsync",value:async function submitCheckItemAddingAsync(e={}){if(this._isAddCheckItemBusy)return;if(!this.isCheckItemAdding()||!this._tempCheckItem)return;if(!this._tempCheckItem.isValid)return;let t=this._tempCheckItem.id,r=this._tempCheckItem;try{var i,n,o,s;this._logCardEvent({event:x.X.CardEvents.CheckItemAdded}),this._hasChanges=!0,this._tempCheckItem=null,this._isAddCheckItemBusy=!0,this._busyCheckItemIds.add(t);let l=r.checklistId,d=await this._calendarCardsSrv.createCalendarCardCheckItemAsync(this._calendarCard,l,{name:r.name,position:r.position}),c={isAllDay:null!==(i=r.isAllDay)&&void 0!==i?i:null,start:null!==(n=r.start)&&void 0!==n?n:null,end:null!==(o=r.end)&&void 0!==o?o:null,memberIds:null!==(s=r.memberIds)&&void 0!==s?s:null};this._lastRejectedCheckItemProperties=null,this._busyCheckItemIds.delete(t),e.skipAddNext||(this.beginCheckItemAdding(l),this._$timeout((()=>a()(".pw-js-dialog-edit-card-check-item-add-panel-input").trigger("focus")),0,!1)),await this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this._calendarCard,l,d.id,c)}catch(e){this._tempCheckItem=r,this._busyCheckItemIds.delete(t),this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>{this._cardChecklists=null,this._isAddCheckItemBusy=!1}))}}},{kind:"get",key:"isTimeRecordsAvailable",value:function isTimeRecordsAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return!this.isReadOnly||this.cardTimeRecords.length>0;case x.h.TrelloCheckItem:return this.parentCard&&(!this.isReadOnly||this.cardTimeRecords.length>0)}return!1}},{kind:"get",key:"isAddTimeRecordBusy",value:function isAddTimeRecordBusy(){return!!this._creatingTimeRecordId}},{kind:"method",key:"isTimeRecordAdding",value:function isTimeRecordAdding(){return this._isTimeRecordAdding}},{kind:"method",key:"beginTimeRecordAddingAsync",value:async function beginTimeRecordAddingAsync(e){this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0)&&(this.isTimeRecordAdding()?this.rejectTimeRecordAdding():(this.isDetailed||await this.switchDetailedModeAsync(),this._timeRecordAddingBy=e,this._tempTimeRecord||(this._tempTimeRecord={id:U.k,memberId:this._currentMemberId,canBeUpdated:!0,canBeDeleted:!0,isDuration:!0,from:Object(n.O)(new Date),to:Object(n.O)(new Date),durationMinutes:this.cardBoard.defaultCardIsAllDay?G.b:this.cardBoard.defaultCardDuration}),this._$scope.$evalAsync((()=>{this._isTimeRecordAdding=!0,this._cardTimeRecords=null,this._scrollToSection("timeRecords")}))))}},{kind:"method",key:"rejectTimeRecordAdding",value:function rejectTimeRecordAdding(){this._isTimeRecordAdding=!1,this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}},{kind:"method",key:"submitTimeRecordAddingAsync",value:async function submitTimeRecordAddingAsync(){if(!this.isTimeRecordAdding()||!this._tempTimeRecord)return;let e=this._tempTimeRecord;try{this._logCardEvent({event:x.X.CardEvents.TimeRecordAdded,data:{by:mt[this._timeRecordAddingBy],isDuration:e.isDuration,durationMinutes:e.durationMinutes}}),this._hasChanges=!0,this._tempTimeRecord=null;let t=await this._calendarCardsSrv.createCalendarCardTimeRecordAsync(this._calendarCard);this._creatingTimeRecordId=t.id,await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this._calendarCard,t.id,{isDuration:e.isDuration,from:e.from,to:e.to,durationMinutes:e.durationMinutes,memberId:e.memberId}),this._isTimeRecordAdding=!1}catch(t){this._tempTimeRecord=e,this._$log.error("Planyway card updating error:"),this._$log.error(t),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>{this._creatingTimeRecordId=null,this._cardTimeRecords=null}))}}},{kind:"get",key:"cardTimeRecords",value:function cardTimeRecords(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];if(!this._cardTimeRecords){var e;this._dirtyCardTimeRecordIsDuration||(this._dirtyCardTimeRecordIsDuration=new lt.a),this._dirtyCardTimeRecordFrom||(this._dirtyCardTimeRecordFrom=new lt.a),this._dirtyCardTimeRecordTo||(this._dirtyCardTimeRecordTo=new lt.a),this._dirtyCardTimeRecordDurationMinutes||(this._dirtyCardTimeRecordDurationMinutes=new lt.a),this._dirtyCardTimeRecordMembers||(this._dirtyCardTimeRecordMembers=new lt.a);let t=this._calendarCardsSrv.getCalendarCardTimeRecords(this._calendarCard)||[];this._tempTimeRecord&&this.isTimeRecordAdding()&&(t=[...t,this._tempTimeRecord]),this._cardTimeRecords=We()(e=R()(t).call(t,(e=>{let t={...e,deleteAsync:async()=>{if(t.isTempRecord)return this.rejectTimeRecordAdding(),void(this._tempTimeRecord=null);if(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.DELETE_TIME_RECORD_TITLE"),this._$translate.instant("DIALOGS.DELETE_TIME_RECORD_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.DELETE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))try{this._logCardEvent({event:x.X.CardEvents.TimeRecordDeleted,data:{isDuration:t.isDuration,durationMinutes:t.durationMinutes}}),this._hasChanges=!0,this._$scope.$evalAsync((()=>this._cardTimeRecords=null)),await this._calendarCardsSrv.deleteCalendarCardTimeRecordAsync(this._calendarCard,t.id)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}};return C()(t,"isTempRecord",{get:()=>e===this._tempTimeRecord}),C()(t,"isBusy",{get:()=>!this.isNewCard&&this.isAddTimeRecordBusy&&t.id===this._creatingTimeRecordId}),C()(t,"isDuration",{get:()=>this._dirtyCardTimeRecordIsDuration.has(t.id)?this._dirtyCardTimeRecordIsDuration.get(t.id):e.isDuration,set:async r=>{if(t.isDuration!==r)try{if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return;let i,a,o=t.durationMinutes;r?(i=Object(n.O)(t.from),a=i):Object(n.pb)(t.from,new Date)?(a=Object(n.Db)(new Date,"quarterHour"),i=Object(n.c)(a,-o)):(i=Object(n.W)(t.from),a=Object(n.c)(i,o)),t.isTempRecord?(e.isDuration=r,e.from=i,e.to=a,e.durationMinutes=o):(this._logCardEvent({event:r?x.X.CardEvents.TimeRecordTimeRemoved:x.X.CardEvents.TimeRecordTimeAdded,data:{isDuration:r,durationMinutes:t.durationMinutes}}),this._hasChanges=!0,this._dirtyCardTimeRecordIsDuration.set(t.id,r),this._dirtyCardTimeRecordFrom.set(t.id,i),this._dirtyCardTimeRecordTo.set(t.id,a),this._dirtyCardTimeRecordDurationMinutes.set(t.id,o),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this._calendarCard,t.id,{isDuration:r,from:i,to:a,durationMinutes:o}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardTimeRecordIsDuration.delete(t.id),this._dirtyCardTimeRecordFrom.delete(t.id),this._dirtyCardTimeRecordTo.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}}),C()(t,"from",{get:()=>this._dirtyCardTimeRecordFrom.has(t.id)?this._dirtyCardTimeRecordFrom.get(t.id):e.from,set:async r=>{if(r&&!Object(n.w)(t.from,r))try{if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return;let i;if(t.isDuration){let e=Object(n.R)(t.from,t.to);i=Object(n.a)(r,e)}else{let e=Object(n.S)(t.from,t.to);i=Object(n.c)(r,e)}t.isTempRecord?(e.from=r,e.to=i):(this._logCardEvent({event:x.X.CardEvents.TimeRecordFromChanged,data:{isDuration:t.isDuration,durationMinutes:t.durationMinutes}}),this._hasChanges=!0,this._dirtyCardTimeRecordFrom.set(t.id,r),this._dirtyCardTimeRecordTo.set(t.id,i),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this._calendarCard,t.id,{from:r,to:i}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardTimeRecordFrom.delete(t.id),this._dirtyCardTimeRecordTo.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}}),C()(t,"to",{get:()=>this._dirtyCardTimeRecordTo.has(t.id)?this._dirtyCardTimeRecordTo.get(t.id):e.to,set:async r=>{try{if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return;if(!r||Object(n.w)(t.to,r))return;t.isTempRecord?e.to=r:(this._logCardEvent({event:x.X.CardEvents.TimeRecordToChanged,data:{isDuration:t.isDuration,durationMinutes:Object(n.S)(t.from,r)}}),this._hasChanges=!0,this._dirtyCardTimeRecordTo.set(t.id,r),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this._calendarCard,t.id,{to:r}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardTimeRecordTo.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}}),C()(t,"minTo",{get:()=>t.from}),C()(t,"maxTo",{get:()=>(t._maxTo&&Object(n.pb)(t.from,t._maxTo)||(t._maxTo=Object(n.N)(t.from)),t._maxTo)}),C()(t,"isDateYearShown",{get:()=>!Object(n.qb)(t.from,new Date)||!Object(n.qb)(t.to,new Date)}),C()(t,"durationMinutes",{get:()=>t.isDuration?this._dirtyCardTimeRecordDurationMinutes.has(t.id)?this._dirtyCardTimeRecordDurationMinutes.get(t.id):e.durationMinutes:Object(n.S)(t.from,t.to),set:async r=>{if(t.durationMinutes!==r)try{if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return;t.isTempRecord?e.durationMinutes=r:(this._logCardEvent({event:x.X.CardEvents.TimeRecordDurationChanged,data:{isDuration:t.isDuration,durationMinutes:r}}),this._hasChanges=!0,this._dirtyCardTimeRecordDurationMinutes.set(t.id,r),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this._calendarCard,t.id,{durationMinutes:r}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardTimeRecordDurationMinutes.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}}),C()(t,"member",{get:()=>this._dirtyCardTimeRecordMembers.has(t.id)?this._dirtyCardTimeRecordMembers.get(t.id):{...this._trelloIntegrationSrv.getTrelloMemberById(e.memberId)},set:async r=>{if(t.memberId!==r.id)try{if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return;t.isTempRecord?e.memberId=r.id:(this._logCardEvent({event:x.X.CardEvents.TimeRecordMemberChanged}),this._hasChanges=!0,this._dirtyCardTimeRecordMembers.set(t.id,r),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this._calendarCard,t.id,{memberId:r.id}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardTimeRecordMembers.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}}),t}))).call(e,n.t)}return this._cardTimeRecords}},{kind:"get",key:"totalTimeRecordDuration",value:function totalTimeRecordDuration(){var e;let t=rt()(e=this.cardTimeRecords).call(e,((e,t)=>e+t.durationMinutes),0);return Object(n.E)(60*t*1e3,"hours")||"0m"}},{kind:"get",key:"isAttachmentsAvailable",value:function isAttachmentsAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return!this.isReadOnly||this.cardAttachments.length>0;case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.parentCard&&(!this.isReadOnly||this.cardAttachments.length>0)}return!1}},{kind:"get",key:"cardAttachments",value:function cardAttachments(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];if(!this._cardAttachments){var e;let t=this._calendarCardsSrv.getCalendarCardAttachments(this._calendarCard)||[];this._cardAttachments=We()(e=R()(t).call(t,(e=>{let t={...e,tryOpen:t=>{var r;t.isDefaultPrevented()||(this._logCardEvent({event:x.X.CardEvents.AttachmentClicked,data:{attachmentType:e.type}}),(null!==(r=e.mimeType)&&void 0!==r&&ce()(r).call(r,"image/")||x.c.has(Object(n.P)(e.url)))&&(t.preventDefault(),this._dialogSrv.showAttachmentPopupAsync(e.url,t)))},showEditDialogAsync:async r=>{try{let i=await this._dialogSrv.showEditAttachmentDialogAsync(e,r);if(!i)return;let a=!1;if(i.name!==e.name&&(this._logCardEvent({event:x.X.CardEvents.AttachmentNameChanged,data:{attachmentType:e.type}}),a=!0),i.url!==e.url&&(this._logCardEvent({event:x.X.CardEvents.AttachmentLinkChanged,data:{attachmentType:e.type}}),a=!0),!a)return;this._hasChanges=!0,this._$scope.$evalAsync((()=>this._cardAttachments=null)),await this._calendarCardsSrv.updateCalendarCardAttachmentAsync(this._calendarCard,t.id,i)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardAttachments=null))}},deleteAsync:async()=>{if(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.REMOVE_ATTACHMENT_TITLE"),this._$translate.instant("DIALOGS.REMOVE_ATTACHMENT_CONFIRM",{name:ct()(e.name,36)}),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))try{this._logCardEvent({event:x.X.CardEvents.AttachmentDeleted,data:{attachmentType:e.type}}),this._hasChanges=!0,this._$scope.$evalAsync((()=>this._cardAttachments=null)),await this._calendarCardsSrv.deleteCalendarCardAttachmentAsync(this._calendarCard,t.id)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardAttachments=null))}}};return C()(t,"isBusy",{get:()=>{var e;return!this.isNewCard&&ce()(e=t.id).call(e,U.k)}}),C()(t,"progressPercent",{get:()=>{if(t.isBusy){let e=Et.get(t.id);if(e)return Math.round(e)}}}),C()(t,"previewUrl",{get:()=>{var t;return null===(t=e.previews[1])||void 0===t?void 0:t.url}}),C()(t,"extension",{get:()=>{switch(e.type){case x.b.File:return Object(n.P)(e.url)||Object(n.P)(e.name)||"file";case x.b.Link:return"link"}}}),C()(t,"shortDate",{get:()=>Object(n.G)(e.date)}),C()(t,"fullDate",{get:()=>Object(n.F)(e.date)}),t}))).call(e,n.k)}return this._cardAttachments}},{kind:"method",key:"showAddAttachmentDialogAsync",value:async function showAddAttachmentDialogAsync(e){let t=await this._dialogSrv.showAddAttachmentDialogAsync(e);if(t)return this._createAttachmentsAsync(t,{event:x.X.CardEvents.AttachmentAdded,data:{by:x.U.Dialog}})}},{kind:"get",key:"isCommentsAvailable",value:function isCommentsAvailable(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:return this.canComment||this.cardComments.length>0;case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.parentCard&&(this.canComment||this.cardComments.length>0)}return!1}},{kind:"get",key:"isCommentsBusy",value:function isCommentsBusy(){return this._isCommentsBusy}},{kind:"get",key:"canComment",value:function canComment(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return(!this.isReadOnly||this.cardBoard.isCommentsPublic)&&!this.isArchived}return!1}},{kind:"get",key:"newComment",value:function newComment(){return this._tempComment}},{kind:"method",key:"isCommentAdding",value:function isCommentAdding(){return this._isCommentAdding}},{kind:"method",key:"beginCommentAdding",value:function beginCommentAdding(){this.isCommentAdding()?this.rejectCommentAdding():(this._isCommentAdding=!0,this._tempComment={comment:""},this._$timeout((()=>{a()(".pw-js-dialog-edit-card-comment-add-panel-input").trigger("focus"),this._$scope.$broadcast(x.n.AutosizeTextareaResizeRequested)}),0,!1))}},{kind:"method",key:"rejectCommentAdding",value:function rejectCommentAdding(){this._isCommentAdding=!1,this._tempComment=null,Object(n.tb)(this._mdPanelRef.panelEl)}},{kind:"method",key:"submitCommentAddingAsync",value:async function submitCommentAddingAsync(){var e;if(this.isCommentAdding()&&null!==(e=this._tempComment)&&void 0!==e&&e.comment)try{await this._loadCommentsAsync(),this._logCardEvent({event:x.X.CardEvents.CommentAdded}),this._hasChanges=!0;let e=this._tempComment.comment;this._isCommentAdding=!1,this._tempComment=null,this._cardComments=null,await this._calendarCardsSrv.createCalendarCardCommentAsync(this._calendarCard,{comment:e})}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardComments=null))}}},{kind:"get",key:"cardComments",value:function cardComments(){if(this.delayRender)return[];if(!x.ob.has(this._calendarCard.cardType))return[];if(!this._cardComments){var e,t;this._dirtyCardComments||(this._dirtyCardComments=new lt.a);let r=this._calendarCardsSrv.getCalendarCardComments(this._calendarCard)||[];this._cardComments=et()(e=We()(t=R()(r).call(r,(e=>{let t={...e,member:this._trelloIntegrationSrv.getTrelloMemberById(e.memberId),shortCreationDate:Object(n.G)(e.creationDate),fullCreationDate:Object(n.F)(e.creationDate),shortLastEditDate:Object(n.G)(e.lastEditDate),fullLastEditDate:Object(n.F)(e.lastEditDate),reply:()=>{var e,r;this.beginCommentAdding();let i=c()(e=this._$element).call(e,".pw-js-dialog-edit-card-comment-add-panel-input");i.trigger("focus"),this._logCardEvent({event:x.X.CardEvents.CommentReplyClicked});let a=this._trelloIntegrationSrv.getTrelloMemberById(t.memberId);if(!a)return;let n=`@${a.userName}`;ze()(r=this.newComment.comment).call(r,n)||(this.newComment.comment?this.newComment.comment+=(/\s$/.test(this.newComment.comment)?"":" ")+n+" ":this.newComment.comment=n+" ",this._$timeout((()=>{var e;return null===(e=i[0])||void 0===e?void 0:e.setSelectionRange(this.newComment.comment.length,this.newComment.comment.length)}),0,!1))},deleteAsync:async()=>{if(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.DELETE_COMMENT_TITLE"),this._$translate.instant("DIALOGS.DELETE_COMMENT_CONFIRM",{comment:ct()(e.comment,36)}),{buttons:[{text:this._$translate.instant("BUTTONS.DELETE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))try{this._logCardEvent({event:x.X.CardEvents.CommentDeleted}),this._hasChanges=!0,this._$scope.$evalAsync((()=>this._cardComments=null)),await this._calendarCardsSrv.deleteCalendarCardCommentAsync(this._calendarCard,t.id)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._$scope.$evalAsync((()=>this._cardComments=null))}}};return C()(t,"isBusy",{get:()=>{var e;return!this.isNewCard&&ce()(e=t.id).call(e,U.k)}}),C()(t,"isCommentEditing",{get:()=>this._commentEditingId===t.id,set:e=>{e?(this._commentEditingId=t.id,this._$timeout((()=>{a()(".pw-js-dialog-edit-card-comment-input").trigger("focus"),this._$scope.$broadcast(x.n.AutosizeTextareaResizeRequested)}),0,!1)):this._commentEditingId===t.id&&(this._commentEditingId=null)}}),C()(t,"comment",{get:()=>this._dirtyCardComments.has(t.id)?this._dirtyCardComments.get(t.id):e.comment,set:async e=>{if(e&&t.comment!==e)try{this._logCardEvent({event:x.X.CardEvents.CommentEdited}),this._hasChanges=!0,this._dirtyCardComments.set(t.id,e),await this._calendarCardsSrv.updateCalendarCardCommentAsync(this._calendarCard,t.id,{comment:e})}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._dirtyCardComments.delete(t.id),this._$scope.$evalAsync((()=>this._cardComments=null))}}}),t}))).call(t,n.n)).call(e,0,this._cardCommentsLimit)}return this._cardComments}},{kind:"get",key:"cardUrl",value:function cardUrl(){return this._calendarCard.cardUrl}},{kind:"get",key:"cardUrlTarget",value:function cardUrlTarget(){if(!this._calendarCard.isCurrentBoardCard)return"_blank"}},{kind:"method",key:"onOpenCardClicked",value:function onOpenCardClicked(e){this._logCardEvent({event:x.X.CardEvents.CardOpenClicked}),1===e.which&&this.hideDialog()}},{kind:"method",key:"saveCalendarCardAsync",value:async function saveCalendarCardAsync(){var e,t;if(!this._isSaveCardCalled){if(this._isSaveCardCalled=!0,this.isCheckItemAdding()&&await this.submitCheckItemAddingAsync({skipAddNext:!0}),this.isTimeRecordAdding()&&await this.submitTimeRecordAddingAsync(),this.isCommentAdding()&&await this.submitCommentAddingAsync(),!this.isNewCard)return this._isSaveCardCalled=!1,this.hideDialog(),!0;try{switch(this._calendarCard.cardType){case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:this._isNewCardValid=this.isCardFieldValid("parentCard");break;case x.h.GoogleEvent:this._isNewCardValid=this.isCardFieldValid("startDate")&&this.isCardFieldValid("endDate");break;default:this._isNewCardValid=!0}if(!this.isNewCardValid)return!1;switch(this._appCommonSrv.setSchedulerBusy(!0),this._updateCardPromise&&await this._updateCardPromise,this._hasChanges=!1,this._dialogResult="cardCreated",this.hideDialog(),this._calendarCard.cardType){case x.h.TrelloCard:await this._calendarCardsSrv.createCalendarCardAsync(this._calendarCard);break;case x.h.TrelloCheckItem:let r=We()(e=this._calendarCardsSrv.getCalendarCardChecklists(this.parentCard)||[]).call(e,n.m)[0];r||(r=await this._calendarCardsSrv.createCalendarCardChecklistAsync(this.parentCard,{name:this._$translate.instant("DIALOGS.CHECKLIST")}));let{id:i}=await this._calendarCardsSrv.createCalendarCardCheckItemAsync(this.parentCard,r.id,{name:this.title||this._$translate.instant("MISC.NO_TITLE"),position:"bottom",isCompleted:this.isCompleted});await this._calendarCardsSrv.updateCalendarCardCheckItemAsync(this.parentCard,r.id,i,{start:this.startDate,end:this.endDate,isAllDay:this.isAllDay,memberIds:R()(t=this.cardMembers).call(t,(e=>e.id))});break;case x.h.TrelloTimeRecord:await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this.parentCard,Ve()(),{isDuration:this.isAllDay,from:this.startDate,to:this.endDate,durationMinutes:this.durationMinutes,memberId:this._calendarCard.members[0]});break;case x.h.GoogleEvent:await this._calendarCardsSrv.createCalendarCardAsync(this._calendarCard)}return!0}catch(e){return this._$log.error("Planyway card creating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant(yt[this._calendarCard.cardType].createCardError),x.A.Error),this._calendarCardsSrv.deleteCalendarCardAsync(this._calendarCard),!1}finally{this._appCommonSrv.setSchedulerBusy(!1),this._isSaveCardCalled=!1}}}},{kind:"method",key:"switchDetailedModeAsync",value:function switchDetailedModeAsync(){return this._isDetailed=!this.isDetailed,this._logCardEvent({event:x.X.CardEvents.EditDialogModeChanged,data:{isDetailed:this.isDetailed}}),this._settingsSrv.currentSettings.local.editCardDialog.isDetailed=this.isDetailed,this._settingsSrv.saveLocal(),this.isDetailed?this._loadCommentsAsync():(this.isLinkAdding()&&this.rejectLinkAdding(),this.isCheckItemAdding()&&this.rejectCheckItemAdding(),this.isTimeRecordAdding()&&this.rejectTimeRecordAdding(),this.isCommentAdding()&&this.rejectCommentAdding()),this._$timeout((()=>{var e;if(this._cardElement&&!this._htmlHelperSrv.isElementOnScreen(this._cardElement,!1))if(this._schedulerWidget)this._cardElement=c()(e=this._schedulerWidget.element).call(e,`.k-event[data-uid="${this._cardElement.data("uid")}"]`);else if(this._taskListsContainer){var t;this._cardElement=c()(t=this._taskListsContainer).call(t,`.pw-tasks-list-item__card[data-id="${this._calendarCard.id}"]`)}return this._mdPanelRef.updatePosition(this._dialogPosition),this.isDetailed?(this._mdPanelRef.panelContainer.addClass("pw-panel-backdrop"),this._mdPanelRef.panelContainer.css("pointer-events",""),this._mdPanelRef.panelEl.css("pointer-events","")):(this._mdPanelRef.panelContainer.removeClass("pw-panel-backdrop"),this._mdPanelRef.panelContainer.css("pointer-events","none"),this._mdPanelRef.panelEl.css("pointer-events","all")),Object(n.x)(300)}),0,!1)}},{kind:"get",key:"dialogResult",value:function dialogResult(){return this._dialogResult}},{kind:"method",key:"confirmCloseAsync",value:async function confirmCloseAsync(){if(Object(n.tb)(this._mdPanelRef.panelEl),"cancelled"===this.dialogResult)return!0;let e=!1;if(this.isLinkAdding()&&(this.rejectLinkAdding(),e=!0),this.isCheckItemAdding()&&(this.rejectCheckItemAdding(),e=!0),this.isTimeRecordAdding()&&(this.rejectTimeRecordAdding(),e=!0),this.isCommentAdding()&&(this.rejectCommentAdding(),e=!0),e)return!1;if(this.isNewCard&&this._hasChanges){if(this._isSaveCardCalled)return!0;switch(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.SAVE_NEW_CARD_CHANGES_TITLE"),this._$translate.instant("DIALOGS.SAVE_NEW_CARD_CHANGES_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.DISCARD"),dialogResult:"discard"},{text:this._$translate.instant("BUTTONS.SAVE"),isPrimary:!0,dialogResult:"save"}]})){case"discard":return!0;case"save":return this.saveCalendarCardAsync();default:return!1}}return!0}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this.isNewCard&&this._hasChanges&&(this._hasChanges=!1),this._dialogResult="cancelled",this.hideDialog()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._mdPanelRef.close()}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_localSettings",value:function _localSettings(){return this._settingsSrv.currentSettings.local}},{kind:"get",key:"_globalSettings",value:function _globalSettings(){return this._settingsSrv.currentSettings.global}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}},{kind:"get",key:"_hasChanges",value:function _hasChanges(){return this._dialogHasChanges}},{kind:"set",key:"_hasChanges",value:function _hasChanges(e){this._dialogHasChanges=e,e&&!this.isNewCard&&(this._dialogResult="cardEdited")}},{kind:"get",key:"_dialogPosition",value:function _dialogPosition(){if(this.isDetailed)return this._$mdPanel.newPanelPosition().absolute().centerHorizontally().top("0");if(this._cardElement&&this._htmlHelperSrv.isElementOnScreen(this._cardElement,!1)){let e=this._$mdPanel.newPanelPosition().relativeTo(this._cardElement),t=this._allowedPositions||["top","left","right","bottom"];ze()(t).call(t,"right")&&e.addPanelPosition(this._$mdPanel.xPosition.OFFSET_END,this._$mdPanel.yPosition.CENTER),ze()(t).call(t,"left")&&e.addPanelPosition(this._$mdPanel.xPosition.OFFSET_START,this._$mdPanel.yPosition.CENTER),ze()(t).call(t,"top")&&e.addPanelPosition(this._$mdPanel.xPosition.CENTER,this._$mdPanel.yPosition.ABOVE),ze()(t).call(t,"bottom")&&e.addPanelPosition(this._$mdPanel.xPosition.CENTER,this._$mdPanel.yPosition.BELOW),ze()(t).call(t,"right")&&ze()(t).call(t,"top")&&e.addPanelPosition(this._$mdPanel.xPosition.OFFSET_END,this._$mdPanel.yPosition.ALIGN_TOPS),ze()(t).call(t,"left")&&ze()(t).call(t,"bottom")&&e.addPanelPosition(this._$mdPanel.xPosition.OFFSET_START,this._$mdPanel.yPosition.ALIGN_BOTTOMS);const r=e._calculatePanelPosition;return e._calculatePanelPosition=function(...e){var t,i;r.apply(this,e),null!==(t=this._top)&&void 0!==t&&Je()(t).call(t,"px")&&(this._top=`${qe()(this._top,10)}px`),null!==(i=this._left)&&void 0!==i&&Je()(i).call(i,"px")&&(this._left=`${qe()(this._left,10)}px`)},e}return this._$mdPanel.newPanelPosition().relativeTo(a()("body")).addPanelPosition(this._$mdPanel.xPosition.CENTER,this._$mdPanel.yPosition.CENTER)}},{kind:"method",key:"_scrollToSection",value:function _scrollToSection(e){let t;switch(e){case"links":t=".pw-js-dialog-edit-card-link-add-panel";break;case"reminders":t=".pw-js-dialog-edit-card-reminders-section";break;case"checklists":t=".pw-js-dialog-edit-card-checklists-section";break;case"timeRecords":t=".pw-js-dialog-edit-card-time-records-section";break;case"attachments":t=".pw-js-dialog-edit-card-attachments-section";break;default:return}this._$timeout((()=>{this._htmlHelperSrv.elementAdded(this._$element,t,(e=>{Object(ht.a)(e[0],{scrollMode:"if-needed",block:"nearest",inline:"nearest",behavior:"smooth"})}),!0)}),0,!1)}},{kind:"method",key:"_addServiceListeners",value:function _addServiceListeners(){this._serviceEventsListenersAdded||(this._serviceEventsListenersAdded=!0,this._onAddOrUpdateCard=(e,t)=>{var r;e.id===this._calendarCard.id?this._addOrUpdateCard(e,t):e.id===this._calendarCard.parentId?(e=this._calendarCardsSrv.getCalendarCardById(this._calendarCard.cardType,this._calendarCard.id))?this._addOrUpdateCard(e,t):this._deleteCard():xe()(r=this.cardLinks).call(r,(t=>t.toCardId===e.id))&&(this._cardLinks=null)},this._onDeleteCard=(e,t)=>{var r;e.id===this._calendarCard.id?t.replacedWith?this._addOrUpdateCard(t.replacedWith,t):this._deleteCard():xe()(r=this.cardLinks).call(r,(t=>t.toCardId===e.id))&&(this._cardLinks=null)},this._calendarCardsSrv.addCalendarCardEventListener("added",this._onAddOrUpdateCard),this._calendarCardsSrv.addCalendarCardEventListener("updated",this._onAddOrUpdateCard),this._calendarCardsSrv.addCalendarCardEventListener("deleted",this._onDeleteCard),this._onTrelloBoardChanged=()=>{this._connectedBoards=null,this._organizations=null},this._trelloIntegrationSrv.addTrelloBoardEventListener("added",this._onTrelloBoardChanged),this._trelloIntegrationSrv.addTrelloBoardEventListener("updated",this._onTrelloBoardChanged),this._trelloIntegrationSrv.addTrelloBoardEventListener("deleted",this._onTrelloBoardChanged),this._onGoogleCalendarChanged=()=>{this._connectedGoogleCalendars=null,this._googleCalendars=null},this._googleIntegrationSrv.addGoogleCalendarEventListener("added",this._onGoogleCalendarChanged),this._googleIntegrationSrv.addGoogleCalendarEventListener("updated",this._onGoogleCalendarChanged),this._googleIntegrationSrv.addGoogleCalendarEventListener("deleted",this._onGoogleCalendarChanged))}},{kind:"method",key:"_removeServiceListeners",value:function _removeServiceListeners(){this._serviceEventsListenersAdded&&(this._serviceEventsListenersAdded=!1,this._calendarCardsSrv.removeCalendarCardEventListener("added",this._onAddOrUpdateCard),this._calendarCardsSrv.removeCalendarCardEventListener("updated",this._onAddOrUpdateCard),this._calendarCardsSrv.removeCalendarCardEventListener("deleted",this._onDeleteCard),this._trelloIntegrationSrv.removeTrelloBoardEventListener("added",this._onTrelloBoardChanged),this._trelloIntegrationSrv.removeTrelloBoardEventListener("updated",this._onTrelloBoardChanged),this._trelloIntegrationSrv.removeTrelloBoardEventListener("deleted",this._onTrelloBoardChanged),this._googleIntegrationSrv.removeGoogleCalendarEventListener("added",this._onGoogleCalendarChanged),this._googleIntegrationSrv.removeGoogleCalendarEventListener("updated",this._onGoogleCalendarChanged),this._googleIntegrationSrv.removeGoogleCalendarEventListener("deleted",this._onGoogleCalendarChanged))}},{kind:"method",key:"_addOrUpdateCard",value:function _addOrUpdateCard(e,t){e.isArchived&&this._$mdMenu.hide(),this._calendarCard=e.isTempCard?e:e.clone(),this._$scope.$evalAsync((()=>{var r;(this._isArchived=e.isArchived,this._isCompleted=e.isCompleted,this._isSubscribed=e.isSubscribed,this._cardRoles=null,this._isAllDay=e.isAllDay,this._startDate=e.start,this._endDate=e.end,this._durationMinutes=e.durationMinutes,this._totalEstimation=null,this._recurrenceRule=e.recurrenceRule,this._priority=e.priority,e.isTempCard||t.hasExternalChanges)&&(this._title=e.title,this._description=null===(r=e.description)||void 0===r?void 0:pe()(r).call(r));this._cardBoard=null,this._cardGoogleCalendar=null,this._cardLinks=null,this._cardReminders=null,this._cardChecklists=null,this._cardTimeRecords=null,this._cardAttachments=null,this._cardComments=null,e.isTempCard&&(this._hasChanges=!0),this._updateCardPromise&&(this._updateCardPromise.resolve(),this._updateCardPromise=null)}))}},{kind:"method",key:"_deleteCard",value:function _deleteCard(){this._hasChanges=!1,this._dialogResult="cancelled",this.hideDialog()}},{kind:"method",key:"_checkEditAvailable",value:function _checkEditAvailable(){if(this.isMilestone&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0))return!1;if(this.recurrenceRule&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.RecurringCards,!0))return!1;switch(this._calendarCard.cardType){case x.h.TrelloTimeRecord:if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return!1}return!0}},{kind:"method",key:"_isCardTypeAllowed",value:function _isCardTypeAllowed(e){var t;return ze()(t=this._allowedCardTypes).call(t,e)}},{kind:"method",key:"_setCardPropertiesAsync",value:async function _setCardPropertiesAsync(e){this._$timeout((()=>{a()(this._$window.document.activeElement).parents(".pw-dialog-edit-card")[0]||Object(n.tb)(this._mdPanelRef.panelEl)}),0,!1),this._hasChanges=!0;try{if(this.isNewCard){let e=null;this._updateCardPromise=new P.a((t=>e=t)),this._updateCardPromise.resolve=e}else this._calendarCard.recurrenceRule&&(void 0!==e.isAllDay&&e.isAllDay!==this._calendarCard.isAllDay||e.start&&!Object(n.w)(e.start,this._calendarCard.start)||void 0!==e.recurrenceRule&&e.isAllDay!==this._calendarCard.recurrenceRule)&&(e.exceptionDates=[],this._calendarCard.deleteExceptionDates(),(async()=>{try{await this._calendarCardsSrv.deleteRecurrenceExceptionsAsync(this._calendarCard.cardType,this._calendarCard)}catch(e){this._$log.error("Planyway delete card exceptions error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete card exceptions error",e,{class:this.constructor.name,method:this._setCardPropertiesAsync.name})}})());await this._calendarCardsSrv.updateCalendarCardPropertiesAsync(this._calendarCard,e)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}}},{kind:"method",key:"_updateCardByHotkey",value:function _updateCardByHotkey(e,t){switch(e){case x.t.C:if(this.isNewCard||!this._checkEditAvailable())break;this._isArchived=!this.isArchived,this._logCardEvent({event:this.isArchived?x.X.CardEvents.Archived:x.X.CardEvents.Unarchived,data:{by:x.U.DialogHotkey}}),this._setCardPropertiesAsync({isArchived:this.isArchived});break;case x.t.D:if(this.isNewCard||!this._checkEditAvailable())break;(t.ctrlKey||t.metaKey)&&this._duplicateCardAsync({event:x.X.CardEvents.Duplicated,data:{by:x.U.DialogHotkey}});break;case x.t.L:if(!this.isLabelsAvailable)break;a()(".pw-js-dialog-edit-card-labels-menu-btn").trigger("click");break;case x.t.M:if(!this.isMembersAvailable)break;a()(".pw-js-dialog-edit-card-members-menu-btn").trigger("click");break;case x.t.S:if(!this._checkEditAvailable())break;this._isSubscribed=!this.isSubscribed,this._logCardEvent({event:this.isSubscribed?x.X.CardEvents.Subscribed:x.X.CardEvents.Unsubscribed,data:{by:x.U.DialogHotkey}}),this._setCardPropertiesAsync({isSubscribed:this.isSubscribed});break;case x.t.Space:if(!this.isMembersAvailable)break;if(!this._checkEditAvailable())break;this._cardBoardMembers=null;let i=!this._calendarCard.memberIds.has(this._currentMemberId);this._logCardEvent({event:i?x.X.CardEvents.MemberAssignedSelf:x.X.CardEvents.MemberUnassignedSelf,data:{by:x.U.DialogHotkey}}),this._setCardPropertiesAsync({memberIds:Object(G.j)(this._calendarCard,this._currentMemberId)});break;case x.t.Delete:case x.t.Backspace:if(t.shiftKey||t.metaKey){if(this.isNewCard)break;this._deleteCardAsync({event:x.X.CardEvents.Deleted,data:{by:x.U.DialogHotkey}})}else this._removeCardDatesAsync({event:x.X.CardEvents.DatesRemoved,data:{by:x.U.DialogHotkey}});break;default:if(e>=x.t.Key0&&e<=x.t.Key9){var r;if(!this.isLabelsAvailable)break;if(!this._checkEditAvailable())break;let t=x.u[e],i=c()(r=this.cardBoardLabels).call(r,(e=>e.color===t));if(!i)break;this._cardBoardLabels=null;let a=!this._calendarCard.labelIds.has(i.id);this._logCardEvent({event:a?x.X.CardEvents.LabelAdded:x.X.CardEvents.LabelRemoved,data:{by:x.U.DialogHotkey}}),this._setCardPropertiesAsync({labelIds:Object(G.i)(this._calendarCard,i.id)})}}}},{kind:"method",key:"_copyCardUrlAsync",value:async function _copyCardUrlAsync(e){this._logCardEvent(e);try{await Object(n.u)(this._calendarCard.shareUrl),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.URL_COPIED_TO_CLIPBOARD"),x.A.Success)}catch(e){this._$log.error("Planyway copy card URL error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.COPY_CARD_URL_ERROR"),x.A.Error),this._telemetrySrv.logError("Planyway copy card URL error",e,{class:this.constructor.name,method:this._copyCardUrlAsync.name})}}},{kind:"method",key:"_duplicateCardAsync",value:async function _duplicateCardAsync(e){this.hideDialog(),this._logCardEvent(e);try{this._appCommonSrv.setSchedulerBusy(!0);let e=await this._calendarCardsSrv.createCalendarCardAsync(this._calendarCard.duplicate());this._schedulerWidget&&await this._scrollCardIntoViewAsync(this._schedulerWidget,e)}catch(e){this._$log.error("Planyway duplicate card error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.DUPLICATE_CARD_ERROR"),x.A.Error),this._telemetrySrv.logError("Planyway duplicate card error",e,{class:this.constructor.name,method:this._duplicateCardAsync.name})}finally{this._appCommonSrv.setSchedulerBusy(!1)}}},{kind:"method",key:"_scrollCardIntoViewAsync",value:async function _scrollCardIntoViewAsync(e,t){var r,i,a,o,s,l;if(!t.hasDates)return;let d,c,h,u=this._appCommonSrv.getSchedulerView(),p=!1;if(t.isMilestone&&!this._globalBoardSettings.isMilestonesShown&&(this._globalBoardSettings.isMilestonesShown=!0,p=!0),u===x.O.Timeline)if(c=this._appCommonSrv.getTimelineResourcesType(),t.isMilestone)d=U.v;else{let e=this._globalBoardSettings.timelineHiddenResources[c];switch(c){case x.fb.Members:let c=We()(r=S()(i=R()(a=re()(t.memberIds)).call(a,(e=>this._trelloIntegrationSrv.getTrelloMemberById(e)))).call(i,(e=>e))).call(r,n.r);for(let t of c)ze()(e).call(e,t.id)&&(e=S()(e).call(e,(e=>e!==t.id)),p=!0);0===c.length&&ze()(e).call(e,U.k)&&(e=S()(e).call(e,(e=>e!==U.k)),p=!0),d=0!==c.length?c[0].id:U.k;break;case x.fb.Calendars:ze()(e).call(e,t.boardId)&&(e=S()(e).call(e,(e=>e!==t.boardId)),p=!0),d=t.boardId;break;case x.fb.Lists:ze()(e).call(e,t.listId)&&(e=S()(e).call(e,(e=>e!==t.listId)),p=!0),d=t.listId;break;case x.fb.Labels:let h=We()(o=S()(s=R()(l=re()(t.labelIds)).call(l,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(s,(e=>e))).call(o,n.p);for(let t of h){let r=Object(n.V)(t);ze()(e).call(e,r)&&(e=S()(e).call(e,(e=>e!==r)),p=!0)}0===h.length&&ze()(e).call(e,U.k)&&(e=S()(e).call(e,(e=>e!==U.k)),p=!0),d=0!==h.length?Object(n.V)(h[0]):U.k;break;case x.fb.NoResources:d=U.j}d!==U.j&&(this._globalBoardSettings.timelineHiddenResources[c]=e)}p&&(this._settingsSrv.saveGlobalAsync(),c&&this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:c})),e.view().isVisibleDate(t.start)||(h=t.start),this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{scrollToDate:h,restoreOffset:!1,navigationMode:x.y.DateSelect,resourceId:d}),t.ignoreFilters=!0,this._calendarCardsSrv.updateCalendarCardAsync(t);let m=null;try{this._appCommonSrv.setSchedulerBusy(!0),m=await this._htmlHelperSrv.elementAddedOnceAsync(e.element,`.k-event[data-uid="${t.id}"]`,3e3),m&&(this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{cardElement:m}),e.select(null),e.select([m.data("uid")]))}finally{this._appCommonSrv.setSchedulerBusy(!1)}return m}},{kind:"method",key:"_removeCardDatesAsync",value:async function _removeCardDatesAsync(e){if(!this.hasDates||this.isToggleDatesDisabled)return;if(!ze()(vt).call(vt,this._calendarCard.cardType))return;if(await this._dialogSrv.showConfirmAsync(this._$translate.instant(_t[this._calendarCard.cardType].title),this._$translate.instant(_t[this._calendarCard.cardType].confirm),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}],dontAskType:x.l.RemoveFromCalendar})){this._logCardEvent(e);try{this.isToggleDatesDisabled=!0,!this.isNewCard&&this._calendarCard.recurrenceRule&&(async()=>{try{await this._calendarCardsSrv.deleteRecurrenceExceptionsAsync(this._calendarCard.cardType,this._calendarCard)}catch(e){this._$log.error("Planyway delete card exceptions error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete card exceptions error",e,{class:this.constructor.name,method:this._removeCardDatesAsync.name})}})(),await this._calendarCardsSrv.removeCalendarCardAsync(this._calendarCard)}catch(e){this._$log.error("Planyway remove card error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant(_t[this._calendarCard.cardType].error),x.A.Error),this._telemetrySrv.logError("Planyway remove card error",e,{class:this.constructor.name,method:this._removeCardDatesAsync.name})}finally{this.isToggleDatesDisabled=!1}}}},{kind:"method",key:"_deleteCardAsync",value:async function _deleteCardAsync(e){if(!ze()(gt).call(gt,this._calendarCard.cardType))return;if(await this._dialogSrv.showConfirmAsync(this._$translate.instant(Ct[this._calendarCard.cardType].title),this._$translate.instant(Ct[this._calendarCard.cardType].confirm),{buttons:[{text:this._$translate.instant("BUTTONS.DELETE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]})){this._logCardEvent(e);try{this._appCommonSrv.setSchedulerBusy(!0),!this.isNewCard&&this._calendarCard.recurrenceRule&&(async()=>{try{await this._calendarCardsSrv.deleteRecurrenceExceptionsAsync(this._calendarCard.cardType,this._calendarCard)}catch(e){this._$log.error("Planyway delete card exceptions error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete card exceptions error",e,{class:this.constructor.name,method:this._deleteCardAsync.name})}})(),await this._calendarCardsSrv.deleteCalendarCardAsync(this._calendarCard)}catch(e){this._$log.error("Planyway delete card error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant(Ct[this._calendarCard.cardType].error),x.A.Error),this._telemetrySrv.logError("Planyway delete card error",e,{class:this.constructor.name,method:this._deleteCardAsync.name})}finally{this._appCommonSrv.setSchedulerBusy(!1)}}}},{kind:"method",key:"_createAttachmentsAsync",value:async function _createAttachmentsAsync(e,t){if(0!==(e=S()(e).call(e,(e=>!(e.type===x.b.File&&e.file.size>10485760)||(this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.ATTACH_MAX_FILE_SIZE_WARNING",{fileName:ct()(e.name,36)}),x.A.Warning),!1)))).length)try{this.isDetailed||await this.switchDetailedModeAsync(),this._hasChanges=!0,this._$scope.$evalAsync((()=>{this._scrollToSection("attachments")}));for(let r of e)bt(),this._logCardEvent({event:t.event,data:{...t.data,attachmentType:r.type}}),await this._calendarCardsSrv.createCalendarCardAttachmentAsync(this._calendarCard,r,(({id:e,isComplete:t,percent:r})=>{t?Et.has(e)&&(bt(),Et.delete(e)):Et.get(e)!==r&&(bt(),Et.set(e,r))}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{bt()}}},{kind:"method",key:"_toggleHighlightAttachmentsDropArea",value:function _toggleHighlightAttachmentsDropArea(e){this._isHighlightAttachmentsDropArea!==e&&this._$scope.$evalAsync((()=>{var t;c()(t=this._$element).call(t,".pw-dialog").toggleClass("pw-dialog--dragover",e),this._isHighlightAttachmentsDropArea=e}))}},{kind:"method",key:"_onDropAttachmentsAsync",value:function _onDropAttachmentsAsync(e){var t,r;if(this.isBusy||this.isReadOnly||!this.isAttachmentsAvailable)return;let i=(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)||[],a=R()(r=re()(i)).call(r,(e=>({type:x.b.File,name:e.name,file:e})));return this._createAttachmentsAsync(a,{event:x.X.CardEvents.AttachmentAdded,data:{by:x.U.Mouse}})}},{kind:"method",key:"_onPasteAttachmentsAsync",value:function _onPasteAttachmentsAsync(e){var t,r,i,n;if(this.isBusy||this.isReadOnly||!this.isAttachmentsAvailable)return;let o=(null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[],s=S()(r=b()(i=R()(n=re()(o)).call(n,(t=>{switch(t.kind){case"string":if(a()(e.target).is("input:focus, textarea:focus"))return;let r=e.clipboardData.getData(t.type).split(/\s+/);return R()(r).call(r,(e=>{if(/^https?:\/\//.test(e))return{type:x.b.Link,name:e,url:e}}));case"file":let i=t.getAsFile();if(!i)return;return{type:x.b.File,name:i.name,file:i}}}))).call(i)).call(r,(e=>e));return this._createAttachmentsAsync(s,{event:x.X.CardEvents.AttachmentAdded,data:{by:x.U.Paste}})}},{kind:"method",key:"_loadCommentsAsync",value:function _loadCommentsAsync(){if(x.ob.has(this._calendarCard.cardType))return this._loadCommentsPromise||(this._loadCommentsPromise=(async()=>{this.isNewCard||(this._isCommentsBusy=!0,await this._calendarCardsSrv.reloadCalendarCardCommentsAsync(this._calendarCard),this._$scope.$evalAsync((()=>{this._cardComments=null,this._isCommentsBusy=!1})))})()),this._loadCommentsPromise}},{kind:"method",key:"_logCardEvent",value:function _logCardEvent(e){this._telemetrySrv.logSessionEvent(e.event,{isAllDay:this.isAllDay,start:this.startDate,end:this.endDate,cardRole:this._calendarCard.cardRole,cardType:this._calendarCard.cardType,isCurrentBoardCard:this._calendarCard.isCurrentBoardCard,isNewCard:this.isNewCard,recurrenceRule:this._calendarCard.recurrenceRule,priority:this._calendarCard.priority,where:this._taskListsContainer?x.W.TaskList:x.W.Scheduler,by:x.U.Dialog,isDetailed:this.isDetailed,durationMinutes:this.durationMinutes,...e.data})}}]}}));function EditRecurringConfirmDialogController_getDecoratorsApi(){EditRecurringConfirmDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!EditRecurringConfirmDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=EditRecurringConfirmDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:EditRecurringConfirmDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=EditRecurringConfirmDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function EditRecurringConfirmDialogController_createElementDescriptor(e){var t,r=EditRecurringConfirmDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function EditRecurringConfirmDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function EditRecurringConfirmDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function EditRecurringConfirmDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function EditRecurringConfirmDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function EditRecurringConfirmDialogController_toPropertyKey(e){var t=function EditRecurringConfirmDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let St=function EditRecurringConfirmDialogController_decorate(e,t,r,i){var a,n=EditRecurringConfirmDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function EditRecurringConfirmDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(EditRecurringConfirmDialogController_isDataDescriptor(a.descriptor)||EditRecurringConfirmDialogController_isDataDescriptor(i.descriptor)){if(EditRecurringConfirmDialogController_hasDecorators(a)||EditRecurringConfirmDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(EditRecurringConfirmDialogController_hasDecorators(a)){if(EditRecurringConfirmDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}EditRecurringConfirmDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,EditRecurringConfirmDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$translate","$mdDialog","cardType","modifyCardType"])],(function(e){return{F:class EditRecurringConfirmDialogController{constructor(t,r,i,a){var n;e(this),this._$translate=t,this._$mdDialog=r;let o=x.w.OnlyOccurrence;this._isDangerous=!1;let s={mode:x.w.OnlyOccurrence},l={mode:x.w.ThisAndFollowing},d={mode:x.w.AllSeries};switch(this._editModes=[s,l,d],i){case x.h.TrelloCard:switch(s.text=this._$translate.instant("BUTTONS.EDIT_CARD_OCCURRENCE"),l.text=this._$translate.instant("BUTTONS.EDIT_CARD_THIS_AND_FOLLOWING"),d.text=this._$translate.instant("BUTTONS.EDIT_CARD_SERIES"),a){case x.v.Open:this._title=this._$translate.instant("DIALOGS.RECURRENT_CARD_OPEN_CONFIRM_TITLE"),o=x.w.AllSeries;break;case x.v.Edit:this._title=this._$translate.instant("DIALOGS.RECURRENT_CARD_EDIT_CONFIRM_TITLE");break;case x.v.Remove:this._title=this._$translate.instant("DIALOGS.RECURRENT_CARD_REMOVE_CONFIRM_TITLE"),this._isDangerous=!0;break;case x.v.Delete:this._title=this._$translate.instant("DIALOGS.RECURRENT_CARD_DELETE_CONFIRM_TITLE"),this._isDangerous=!0}break;case x.h.GoogleEvent:switch(s.text=this._$translate.instant("BUTTONS.EDIT_EVENT_OCCURRENCE"),l.text=this._$translate.instant("BUTTONS.EDIT_EVENT_THIS_AND_FOLLOWING"),d.text=this._$translate.instant("BUTTONS.EDIT_EVENT_SERIES"),a){case x.v.Open:this._title=this._$translate.instant("DIALOGS.RECURRENT_EVENT_OPEN_CONFIRM_TITLE"),o=x.w.AllSeries;break;case x.v.Edit:this._title=this._$translate.instant("DIALOGS.RECURRENT_EVENT_EDIT_CONFIRM_TITLE");break;case x.v.Delete:this._title=this._$translate.instant("DIALOGS.RECURRENT_EVENT_DELETE_CONFIRM_TITLE"),this._isDangerous=!0}}this._selectedEditMode=c()(n=this._editModes).call(n,(e=>e.mode===o))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"editRecurringConfirmDialogCtrl"}},{kind:"get",key:"title",value:function title(){return this._title}},{kind:"get",key:"editModes",value:function editModes(){return this._editModes}},{kind:"get",key:"selectedEditMode",value:function selectedEditMode(){return this._selectedEditMode}},{kind:"set",key:"selectedEditMode",value:function selectedEditMode(e){this._selectedEditMode=e}},{kind:"get",key:"isDangerous",value:function isDangerous(){return this._isDangerous}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.hide()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._$mdDialog.hide(this.selectedEditMode.mode)}}]}}));function FeedbackDialogController_getDecoratorsApi(){FeedbackDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!FeedbackDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=FeedbackDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:FeedbackDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=FeedbackDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function FeedbackDialogController_createElementDescriptor(e){var t,r=FeedbackDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function FeedbackDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function FeedbackDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function FeedbackDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function FeedbackDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function FeedbackDialogController_toPropertyKey(e){var t=function FeedbackDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Tt=function FeedbackDialogController_decorate(e,t,r,i){var a,n=FeedbackDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function FeedbackDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(FeedbackDialogController_isDataDescriptor(a.descriptor)||FeedbackDialogController_isDataDescriptor(i.descriptor)){if(FeedbackDialogController_hasDecorators(a)||FeedbackDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(FeedbackDialogController_hasDecorators(a)){if(FeedbackDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}FeedbackDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,FeedbackDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$translate","$mdDialog","FileUploader","backendSrv","notificationSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){class FeedbackDialogController{constructor(t,r,i,a,o,s,l,d){e(this),this._$scope=t,this._$translate=r,this._$mdDialog=i,this._backendSrv=o,this._notificationSrv=s,this._telemetrySrv=l,this._trelloIntegrationSrv=d,this._fileUploader=new a,this._fileUploader.queueLimit=4,this._fileUploader.filters.push({name:"imageFilter",fn:n.nb}),this._fileUploader.filters.push({name:"totalSizeFilter",fn:e=>{let t=0;for(let e of this._fileUploader.queue)t+=e.file.size;return t+e.size<=15728640}}),this._fileUploader.filters.push({name:"duplicateFilter",fn:e=>{var t;return!xe()(t=this._fileUploader.queue).call(t,(t=>t.file.name===e.name))}}),this._fileUploader.onAfterAddingFile=e=>{this.addFile(e._file)},this._fileUploader.onWhenAddingFileFailed=(e,t)=>{if(!e||!t)return;let r;switch(t.name){case"imageFilter":r=this._$translate.instant("NOTIFICATIONS.FEEDBACK_FILE_NOT_IMAGE",{fileName:e.name});break;case"totalSizeFilter":r=this._$translate.instant("NOTIFICATIONS.FEEDBACK_FILE_SIZE_LIMIT_REACHED",{fileName:e.name});break;case"queueLimit":r=this._$translate.instant("NOTIFICATIONS.FEEDBACK_FILE_LIMIT_REACHED");break;default:return}this._notificationSrv.showNotification(r,x.A.Warning)},this._memberId=this._trelloIntegrationSrv.getMemberId()||sessionStorage.planywayLastFeedbackId}}return{F:FeedbackDialogController,d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"feedbackDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"isMemberInfoLoaded",value:function isMemberInfoLoaded(){return this._memberId&&this.feedbackData.memberName&&this.feedbackData.memberEmail}},{kind:"get",key:"feedbackData",value:function feedbackData(){return this._feedbackData||(this._feedbackData={memberName:this._trelloIntegrationSrv.getMemberName()||sessionStorage.planywayLastFeedbackName,memberEmail:this._trelloIntegrationSrv.getMemberEmail()||sessionStorage.planywayLastFeedbackEmail,get message(){return FeedbackDialogController._unsentMessage||(FeedbackDialogController._unsentMessage=""),FeedbackDialogController._unsentMessage},set message(e){FeedbackDialogController._unsentMessage=e},get files(){return FeedbackDialogController._unsentFiles||(FeedbackDialogController._unsentFiles=[]),FeedbackDialogController._unsentFiles},set files(e){FeedbackDialogController._unsentFiles=e}}),this._feedbackData}},{kind:"set",key:"feedbackData",value:function feedbackData(e){this._feedbackData=e}},{kind:"get",key:"feedbackForm",value:function feedbackForm(){return this._feedbackForm}},{kind:"set",key:"feedbackForm",value:function feedbackForm(e){this._feedbackForm=e}},{kind:"get",key:"fileUploader",value:function fileUploader(){return this._fileUploader}},{kind:"get",key:"isAddFileUnavailable",value:function isAddFileUnavailable(){return 4===this.feedbackData.files.length}},{kind:"get",key:"isFilesAdded",value:function isFilesAdded(){return this.feedbackData.files.length>0}},{kind:"method",key:"addFile",value:function addFile(e){this.isBusy||this.feedbackData.files.push(e)}},{kind:"method",key:"removeFile",value:function removeFile(e){var t,r;if(this.isBusy)return;let i=_()(t=this.feedbackData.files).call(t,e);var a;-1!==i&&y()(a=this.feedbackData.files).call(a,i,1);let n=c()(r=this.fileUploader.queue).call(r,(t=>t._file===e));n&&n.remove()}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._$mdDialog.hide()}},{kind:"method",key:"sendFeedbackAsync",value:async function sendFeedbackAsync(){if(this.isBusy||!this.feedbackForm.$valid)return;this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.FeedbackSent),this.isBusy=!0;try{sessionStorage.planywayLastFeedbackId=this._memberId,sessionStorage.planywayLastFeedbackName=this.feedbackData.memberName,sessionStorage.planywayLastFeedbackEmail=this.feedbackData.memberEmail}catch(e){}await this._backendSrv.sendFeedbackAsync({memberId:this._memberId,...this.feedbackData})&&(this.feedbackData.message=null,this.feedbackData.files=null,this.hideDialog()),this.isBusy=!1}}]}}));function GoogleConnectDialogController_getDecoratorsApi(){GoogleConnectDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!GoogleConnectDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=GoogleConnectDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:GoogleConnectDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=GoogleConnectDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function GoogleConnectDialogController_createElementDescriptor(e){var t,r=GoogleConnectDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function GoogleConnectDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function GoogleConnectDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function GoogleConnectDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function GoogleConnectDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function GoogleConnectDialogController_toPropertyKey(e){var t=function GoogleConnectDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let At=function GoogleConnectDialogController_decorate(e,t,r,i){var a,n=GoogleConnectDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function GoogleConnectDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(GoogleConnectDialogController_isDataDescriptor(a.descriptor)||GoogleConnectDialogController_isDataDescriptor(i.descriptor)){if(GoogleConnectDialogController_hasDecorators(a)||GoogleConnectDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(GoogleConnectDialogController_hasDecorators(a)){if(GoogleConnectDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}GoogleConnectDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,GoogleConnectDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$scope","$log","$translate","$mdDialog","appCommonSrv","googleIntegrationSrv","htmlHelperSrv","notificationSrv","platformSrv","telemetrySrv"])],(function(e){return{F:class GoogleConnectDialogController{constructor(t,r,i,a,n,o,s,l,d,c,h){e(this),this._$element=t,this._$scope=r,this._$log=i,this._$translate=a,this._$mdDialog=n,this._appCommonSrv=o,this._googleIntegrationSrv=s,this._htmlHelperSrv=l,this._notificationSrv=d,this._platformSrv=c,this._telemetrySrv=h,this._googleIntegrationSrv.isGoogleConnectEnabled()||(this.isGoogleConnectBusy=!0,this._htmlHelperSrv.elementAdded(this._$element,".pw-js-google-auth-iframe",(async e=>{e.on("load",(()=>{this.isGoogleConnectBusy=!1}));let t=await this._getGoogleAuthCodeAsync();t&&await this._enableGoogleConnectAsync(t),this._hideDialog()}),!0))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"googleConnectDialogCtrl"}},{kind:"get",key:"isGoogleConnectBusy",value:function isGoogleConnectBusy(){return this._googleIntegrationSrv.isGoogleConnectBusy()||this._isGoogleConnectBusy}},{kind:"set",key:"isGoogleConnectBusy",value:function isGoogleConnectBusy(e){this._$scope.$evalAsync((()=>this._isGoogleConnectBusy=e))}},{kind:"get",key:"isGoogleConnectEnabled",value:function isGoogleConnectEnabled(){return this._googleIntegrationSrv.isGoogleConnectEnabled()}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"_enableGoogleConnectAsync",value:async function _enableGoogleConnectAsync(e){try{this.isGoogleConnectBusy=!0,await this._googleIntegrationSrv.enableGoogleConnectAsync({googleAuthCode:e}),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.GoogleConnectEnabled)}finally{this.isGoogleConnectBusy=!1}}},{kind:"method",key:"_getGoogleAuthCodeAsync",value:async function _getGoogleAuthCodeAsync(){try{return await this._platformSrv.exchangeSiteDataAsync(x.o.GetGoogleAuthCode,this._appCommonSrv.getLanguage(),".pw-js-google-auth-iframe")}catch(e){if(this._$scope.$$destroyed)return;switch(e.code){case"popup_blocked_by_browser":this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_AUTH_POPUP_BLOCKED"),x.A.Error);break;case"idpiframe_initialization_failed":this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_AUTH_INITIALIZATION_FAILED"),x.A.Error);break;default:this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_AUTH_FAILED"),x.A.Error)}this._$log.error("Google authorization error:"),this._$log.error(e),this._telemetrySrv.logError("Google authorization error",e,{class:this.constructor.name,method:this._getGoogleAuthCodeAsync.name}),this.cancelDialog()}}},{kind:"method",key:"_hideDialog",value:function _hideDialog(){this._$mdDialog.hide()}}]}}));function GoogleSyncRestartDialogController_getDecoratorsApi(){GoogleSyncRestartDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!GoogleSyncRestartDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=GoogleSyncRestartDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:GoogleSyncRestartDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=GoogleSyncRestartDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function GoogleSyncRestartDialogController_createElementDescriptor(e){var t,r=GoogleSyncRestartDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function GoogleSyncRestartDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function GoogleSyncRestartDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function GoogleSyncRestartDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function GoogleSyncRestartDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function GoogleSyncRestartDialogController_toPropertyKey(e){var t=function GoogleSyncRestartDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let It=function GoogleSyncRestartDialogController_decorate(e,t,r,i){var a,n=GoogleSyncRestartDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function GoogleSyncRestartDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(GoogleSyncRestartDialogController_isDataDescriptor(a.descriptor)||GoogleSyncRestartDialogController_isDataDescriptor(i.descriptor)){if(GoogleSyncRestartDialogController_hasDecorators(a)||GoogleSyncRestartDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(GoogleSyncRestartDialogController_hasDecorators(a)){if(GoogleSyncRestartDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}GoogleSyncRestartDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,GoogleSyncRestartDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$mdDialog","dialogSrv","googleIntegrationSrv","licenseSrv","onSyncStopped"])],(function(e){return{F:class GoogleSyncRestartDialogController{constructor(t,r,i,a,n,o){e(this),this._$scope=t,this._$mdDialog=r,this._dialogSrv=i,this._googleIntegrationSrv=a,this._licenseSrv=n,this._onSyncStopped=o}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"googleSyncRestartDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"method",key:"stopSyncAsync",value:async function stopSyncAsync(){if(!this.isBusy)try{this.isBusy=!0,await this._googleIntegrationSrv.stopGoogleSyncAsync()}finally{this.isBusy=!1,this._$mdDialog.hide(),this._onSyncStopped()}}},{kind:"method",key:"restartSyncAsync",value:async function restartSyncAsync(){try{if(this.isBusy=!0,await this._googleIntegrationSrv.stopGoogleSyncAsync(!0),!this._licenseSrv.checkPaidFeatureAvailable(x.B.GoogleSync,!0))return;await this._dialogSrv.showGoogleSyncStartDialogAsync()}finally{this.isBusy=!1,this._$mdDialog.hide(),this._onSyncStopped()}}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}}]}}));function GoogleSyncStartDialogController_getDecoratorsApi(){GoogleSyncStartDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!GoogleSyncStartDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=GoogleSyncStartDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:GoogleSyncStartDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=GoogleSyncStartDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function GoogleSyncStartDialogController_createElementDescriptor(e){var t,r=GoogleSyncStartDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function GoogleSyncStartDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function GoogleSyncStartDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function GoogleSyncStartDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function GoogleSyncStartDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function GoogleSyncStartDialogController_toPropertyKey(e){var t=function GoogleSyncStartDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Rt=function GoogleSyncStartDialogController_decorate(e,t,r,i){var a,n=GoogleSyncStartDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function GoogleSyncStartDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(GoogleSyncStartDialogController_isDataDescriptor(a.descriptor)||GoogleSyncStartDialogController_isDataDescriptor(i.descriptor)){if(GoogleSyncStartDialogController_hasDecorators(a)||GoogleSyncStartDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(GoogleSyncStartDialogController_hasDecorators(a)){if(GoogleSyncStartDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}GoogleSyncStartDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,GoogleSyncStartDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$scope","$log","$translate","$mdDialog","appCommonSrv","googleIntegrationSrv","htmlHelperSrv","notificationSrv","platformSrv","settingsSrv","telemetrySrv","onSyncStarted"])],(function(e){return{F:class GoogleSyncStartDialogController{constructor(t,r,i,a,n,o,s,l,d,h,u,p,m){var f,y,v,_;e(this),this._$element=t,this._$scope=r,this._$log=i,this._$translate=a,this._$mdDialog=n,this._appCommonSrv=o,this._googleIntegrationSrv=s,this._htmlHelperSrv=l,this._notificationSrv=d,this._platformSrv=h,this._settingsSrv=u,this._telemetrySrv=p,this._onSyncStarted=m,this._localSettings=this._settingsSrv.currentSettings.local,this.syncOnlyMemberCards=c()(f=this.syncOnlyMemberCardsOptions).call(f,(e=>e.value===this._localSettings.syncOnlyMyCards)),this.setEventColorByLabel=c()(y=this.setEventColorByLabelOptions).call(y,(e=>e.value===this._localSettings.setEventColorByLabel)),this.syncCompletedCards=c()(v=this.syncCompletedCardsOptions).call(v,(e=>e.value===this._localSettings.syncCompletedCards)),this.syncAsFree=c()(_=this.syncAsFreeOptions).call(_,(e=>e.value===this._localSettings.syncAsFree)),this.isBusy=!0,this._htmlHelperSrv.elementAdded(this._$element,".pw-js-google-auth-iframe",(async e=>{e.on("load",(()=>{this.isBusy=!1}));let t=await this._getGoogleAuthCodeAsync();t&&this._$scope.$evalAsync((()=>this._googleAuthCode=t))}),!0)}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"googleSyncStartDialogCtrl"}},{kind:"field",key:"_googleAuthCode",value:void 0},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"isAuthorized",value:function isAuthorized(){return!!this._googleAuthCode}},{kind:"get",key:"syncOnlyMemberCardsOptions",value:function syncOnlyMemberCardsOptions(){return this._syncOnlyMemberCardsOptions||(this._syncOnlyMemberCardsOptions=[{title:this._$translate.instant("DIALOGS.GOOGLE_SYNC_START_SYNC_CARDS_ALL_CARDS"),value:!1},{title:this._$translate.instant("DIALOGS.GOOGLE_SYNC_START_SYNC_CARDS_ONLY_MY_CARDS"),value:!0}]),this._syncOnlyMemberCardsOptions}},{kind:"get",key:"syncOnlyMemberCards",value:function syncOnlyMemberCards(){return this._syncOnlyMemberCards||this.syncOnlyMemberCardsOptions[0]}},{kind:"set",key:"syncOnlyMemberCards",value:function syncOnlyMemberCards(e){this._syncOnlyMemberCards=e}},{kind:"get",key:"setEventColorByLabelOptions",value:function setEventColorByLabelOptions(){return this._setEventColorByLabelOptions||(this._setEventColorByLabelOptions=[{title:this._$translate.instant("DIALOGS.GOOGLE_SYNC_START_SET_EVENT_COLORS_DEFAULT"),value:!1},{title:this._$translate.instant("DIALOGS.GOOGLE_SYNC_START_SET_EVENT_COLORS_BY_LABEL"),value:!0}]),this._setEventColorByLabelOptions}},{kind:"get",key:"setEventColorByLabel",value:function setEventColorByLabel(){return this._setEventColorByLabel||this.setEventColorByLabelOptions[0]}},{kind:"set",key:"setEventColorByLabel",value:function setEventColorByLabel(e){this._setEventColorByLabel=e}},{kind:"get",key:"syncCompletedCardsOptions",value:function syncCompletedCardsOptions(){return this._syncCompletedCardsOptions||(this._syncCompletedCardsOptions=[{title:this._$translate.instant("DIALOGS.GOOGLE_SYNC_START_COMPLETED_CARDS_EXCLUDE"),value:!1},{title:this._$translate.instant("DIALOGS.GOOGLE_SYNC_START_COMPLETED_CARDS_MARK"),value:!0}]),this._syncCompletedCardsOptions}},{kind:"get",key:"syncCompletedCards",value:function syncCompletedCards(){return this._syncCompletedCards||this.syncCompletedCardsOptions[0]}},{kind:"set",key:"syncCompletedCards",value:function syncCompletedCards(e){this._syncCompletedCards=e}},{kind:"get",key:"syncAsFreeOptions",value:function syncAsFreeOptions(){return this._syncAsFreeOptions||(this._syncAsFreeOptions=[{title:this._$translate.instant("DIALOGS.GOOGLE_SYNC_START_AVAILABILITY_BUSY"),value:!1},{title:this._$translate.instant("DIALOGS.GOOGLE_SYNC_START_AVAILABILITY_FREE"),value:!0}]),this._syncAsFreeOptions}},{kind:"get",key:"syncAsFree",value:function syncAsFree(){return this._syncAsFree||this.syncAsFreeOptions[0]}},{kind:"set",key:"syncAsFree",value:function syncAsFree(e){this._syncAsFree=e}},{kind:"method",key:"startSyncAsync",value:async function startSyncAsync(){if(!this.isBusy&&this.isAuthorized){this._localSettings.syncOnlyMyCards=this.syncOnlyMemberCards.value,this._localSettings.syncSetEventColorByLabel=this.setEventColorByLabel.value,this._localSettings.syncCompletedCards=this.syncCompletedCards.value,this._localSettings.syncAsFree=this.syncAsFree.value,this._settingsSrv.saveLocal();try{this.isBusy=!0,await this._googleIntegrationSrv.startGoogleSyncAsync({googleAuthCode:this._googleAuthCode,syncOnlyMemberCards:this.syncOnlyMemberCards.value,setEventColorByLabel:this.setEventColorByLabel.value,syncCompletedCards:this.syncCompletedCards.value,syncAsFree:this.syncAsFree.value})}finally{this.isBusy=!1,this._$mdDialog.hide(),this._onSyncStarted()}}}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"_getGoogleAuthCodeAsync",value:async function _getGoogleAuthCodeAsync(){try{return await this._platformSrv.exchangeSiteDataAsync(x.o.GetGoogleAuthCode,this._appCommonSrv.getLanguage(),".pw-js-google-auth-iframe")}catch(e){if(this._$scope.$$destroyed)return;switch(e.code){case"popup_blocked_by_browser":this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_AUTH_POPUP_BLOCKED"),x.A.Error);break;case"idpiframe_initialization_failed":this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_AUTH_INITIALIZATION_FAILED"),x.A.Error);break;default:this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_AUTH_FAILED"),x.A.Error)}this._$log.error("Google authorization error:"),this._$log.error(e),this._telemetrySrv.logError("Google authorization error",e,{class:this.constructor.name,method:this._getGoogleAuthCodeAsync.name}),this._$mdDialog.cancel()}}}]}}));function ICalEditDialogController_getDecoratorsApi(){ICalEditDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ICalEditDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ICalEditDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ICalEditDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ICalEditDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ICalEditDialogController_createElementDescriptor(e){var t,r=ICalEditDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ICalEditDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ICalEditDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ICalEditDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ICalEditDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ICalEditDialogController_toPropertyKey(e){var t=function ICalEditDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ot=function ICalEditDialogController_decorate(e,t,r,i){var a,n=ICalEditDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ICalEditDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ICalEditDialogController_isDataDescriptor(a.descriptor)||ICalEditDialogController_isDataDescriptor(i.descriptor)){if(ICalEditDialogController_hasDecorators(a)||ICalEditDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ICalEditDialogController_hasDecorators(a)){if(ICalEditDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ICalEditDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ICalEditDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$log","$mdDialog","iCalIntegrationSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv","calendarId"])],(function(e){return{F:class ICalEditDialogController{constructor(t,r,i,a,n,o,s){e(this),this._$log=t,this._$mdDialog=r,this._iCalIntegrationSrv=i,this._settingsSrv=a,this._telemetrySrv=n,this._trelloIntegrationSrv=o,this._iCalCalendar=this._iCalIntegrationSrv.getICalCalendarById(s),this.calendarColor=this._iCalCalendar.color}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"iCalEditDialogCtrl"}},{kind:"get",key:"cardTime",value:function cardTime(){let e=Object(n.W)(new Date),t=Object(n.a)(Object(n.c)(e,90),2),r=Object(n.v)(e,t).minutes;return`${Object(n.C)(e,t)} (${Object(n.E)(6e4*r)})`}},{kind:"get",key:"cardPreviewClasses",value:function cardPreviewClasses(){return[`pw-card-${this.cardTheme}`,`pw-card--ical_${this._iCalCalendar.type}`,`pw-card--ical_${this.calendarColor}`].join(" ")}},{kind:"get",key:"cardTheme",value:function cardTheme(){return this._globalBoardSettings.cardTheme}},{kind:"get",key:"calendarColors",value:function calendarColors(){return x.r}},{kind:"get",key:"calendarColor",value:function calendarColor(){return this._calendarColor}},{kind:"set",key:"calendarColor",value:function calendarColor(e){this._calendarColor=e}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._$mdDialog.hide()}},{kind:"method",key:"saveICalCalendar",value:function saveICalCalendar(){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ICalColorChanged,{previousColor:this._iCalCalendar.color,newColor:this.calendarColor}),this._iCalIntegrationSrv.updateICalCalendarProperties(this._iCalCalendar.id,{color:this.calendarColor}),this.hideDialog()}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){let e=this._trelloIntegrationSrv.getCurrentBoardId();return this._settingsSrv.currentSettings.getGlobalBoardSettings(e)}}]}}));function ICalExportDialogController_getDecoratorsApi(){ICalExportDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ICalExportDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ICalExportDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ICalExportDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ICalExportDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ICalExportDialogController_createElementDescriptor(e){var t,r=ICalExportDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ICalExportDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ICalExportDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ICalExportDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ICalExportDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ICalExportDialogController_toPropertyKey(e){var t=function ICalExportDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Pt=function ICalExportDialogController_decorate(e,t,r,i){var a,n=ICalExportDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ICalExportDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ICalExportDialogController_isDataDescriptor(a.descriptor)||ICalExportDialogController_isDataDescriptor(i.descriptor)){if(ICalExportDialogController_hasDecorators(a)||ICalExportDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ICalExportDialogController_hasDecorators(a)){if(ICalExportDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ICalExportDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ICalExportDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$window","$log","$timeout","$translate","$mdDialog","iCalIntegrationSrv","notificationSrv","telemetrySrv"])],(function(e){return{F:class ICalExportDialogController{constructor(t,r,i,a,n,o,s,l,d){e(this),this._$scope=t,this._$window=r,this._$log=i,this._$timeout=a,this._$translate=n,this._$mdDialog=o,this._notificationSrv=l,this._iCalIntegrationSrv=s,this._telemetrySrv=d}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"iCalExportDialogCtrl"}},{kind:"get",key:"exportICalUrl",value:function exportICalUrl(){return this._exportICalUrl}},{kind:"set",key:"exportICalUrl",value:function exportICalUrl(e){this._$scope.$evalAsync((()=>this._exportICalUrl=e))}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._$mdDialog.hide()}},{kind:"method",key:"copyToClipboard",value:function copyToClipboard(){this.isBusy||(a()(".pw-js-copy-to-clipboard-input").trigger("focus"),this._$timeout((()=>{this._$window.document.execCommand("copy")&&this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.URL_COPIED_TO_CLIPBOARD"),x.A.Success)}),250,!1))}},{kind:"method",key:"getICalUrlAsync",value:async function getICalUrlAsync(){try{this.isBusy=!0,this.exportICalUrl=await this._iCalIntegrationSrv.getExportICalCalendarUrlAsync()}catch(e){this._$log.error("Planyway get iCal URL error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway get iCal URL error",e,{class:this.constructor.name,method:this.getICalUrlAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.ICAL_EXPORT_GET_ERROR"),x.A.Error),this.hideDialog()}finally{this.isBusy=!1}}},{kind:"method",key:"resetICalUrlAsync",value:async function resetICalUrlAsync(){if(!this.isBusy)try{this.isBusy=!0,this.exportICalUrl=await this._iCalIntegrationSrv.resetExportICalCalendarUrlAsync(),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.ICAL_EXPORT_POST_SUCCESS"),x.A.Success)}catch(e){this._$log.error("Planyway reset iCal URL error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway reset iCal URL error",e,{class:this.constructor.name,method:this.resetICalUrlAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.ICAL_EXPORT_POST_ERROR"),x.A.Error),this.hideDialog()}finally{this.isBusy=!1}}},{kind:"method",key:"deleteICalUrlAsync",value:async function deleteICalUrlAsync(){if(!this.isBusy)try{this.isBusy=!0,await this._iCalIntegrationSrv.deleteExportICalCalendarUrlAsync(),this.exportICalUrl="",this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.ICAL_EXPORT_DELETE_SUCCESS"),x.A.Success),this.hideDialog()}catch(e){this._$log.error("Planyway delete iCal URL error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete iCal URL error",e,{class:this.constructor.name,method:this.deleteICalUrlAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.ICAL_EXPORT_DELETE_ERROR"),x.A.Error),this.hideDialog()}finally{this.isBusy=!1}}},{kind:"get",key:"iCalHowToLinks",value:function iCalHowToLinks(){return this._iCalHowToLinks||(this._iCalHowToLinks=[{name:"Outlook",url:"https://support.microsoft.com/en-us/office/import-or-subscribe-to-a-calendar-in-outlook-com-cff1429c-5af6-41ec-a5b4-74f2c278e98c"},{name:"Google",url:"https://support.google.com/calendar/answer/37100?co=GENIE.Platform%3DDesktop&hl=en"},{name:"Apple",url:"https://support.apple.com/guide/calendar/subscribe-to-calendars-icl1022/11.0/mac/10.15"}]),this._iCalHowToLinks}},{kind:"method",key:"onHowToLinkClick",value:function onHowToLinkClick(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.ExportICalHowToLinkClicked,{calendarName:e})}}]}}));function ICalImportDialogController_getDecoratorsApi(){ICalImportDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ICalImportDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ICalImportDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ICalImportDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ICalImportDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ICalImportDialogController_createElementDescriptor(e){var t,r=ICalImportDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ICalImportDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ICalImportDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ICalImportDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ICalImportDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ICalImportDialogController_toPropertyKey(e){var t=function ICalImportDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Lt=function ICalImportDialogController_decorate(e,t,r,i){var a,n=ICalImportDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ICalImportDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ICalImportDialogController_isDataDescriptor(a.descriptor)||ICalImportDialogController_isDataDescriptor(i.descriptor)){if(ICalImportDialogController_hasDecorators(a)||ICalImportDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ICalImportDialogController_hasDecorators(a)){if(ICalImportDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ICalImportDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ICalImportDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$translate","$mdDialog","iCalIntegrationSrv","telemetrySrv"])],(function(e){return{F:class ICalImportDialogController{constructor(t,r,i,a,n,o){e(this),this._$rootScope=t,this._$scope=r,this._$translate=i,this._$mdDialog=a,this._iCalIntegrationSrv=n,this._telemetrySrv=o}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"iCalImportDialogCtrl"}},{kind:"get",key:"isICalBusy",value:function isICalBusy(){return this._isICalBusy}},{kind:"set",key:"isICalBusy",value:function isICalBusy(e){this._$scope.$evalAsync((()=>this._isICalBusy=e))}},{kind:"get",key:"iCalCalendarUrlForm",value:function iCalCalendarUrlForm(){return this._iCalCalendarUrlForm}},{kind:"set",key:"iCalCalendarUrlForm",value:function iCalCalendarUrlForm(e){this._iCalCalendarUrlForm=e}},{kind:"get",key:"iCalCalendarUrl",value:function iCalCalendarUrl(){return this._iCalCalendarUrl}},{kind:"set",key:"iCalCalendarUrl",value:function iCalCalendarUrl(e){this._iCalCalendarUrl!==e&&(this._iCalCalendarUrl=e,this._validateICalCalendarUrlAsync())}},{kind:"get",key:"isICalCalendarValid",value:function isICalCalendarValid(){return!!this._iCalCalendarData}},{kind:"get",key:"iCalValidationMessage",value:function iCalValidationMessage(){return this._iCalValidationMessage}},{kind:"set",key:"iCalValidationMessage",value:function iCalValidationMessage(e){this._iCalValidationMessage!==e&&(this._iCalValidationMessage=e,this.iCalCalendarUrlForm.iCalCalendarUrlInput.$setValidity("custom",!e))}},{kind:"get",key:"iCalHowToLinks",value:function iCalHowToLinks(){return this._iCalHowToLinks||(this._iCalHowToLinks=[{name:"Outlook",url:"https://support.microsoft.com/en-us/office/share-your-calendar-in-outlook-com-0fc1cb48-569d-4d1e-ac20-5a9b3f5e6ff2?ui=en-us&rs=en-us&ad=us"},{name:"Google",url:"https://support.google.com/calendar/answer/37648?hl=en"},{name:"Apple",url:"https://support.apple.com/guide/calendar/share-icloud-calendars-icl32362/mac"}]),this._iCalHowToLinks}},{kind:"method",key:"onHowToLinkClick",value:function onHowToLinkClick(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.ImportICalHowToLinkClicked,{calendarName:e})}},{kind:"method",key:"addICalCalendar",value:function addICalCalendar(){if(!this.isICalCalendarValid||this.isICalBusy)return;this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ICalAdded,{iCalType:this._iCalCalendarData.type});let e=x.r[Math.floor(Math.random()*x.r.length)],t=this._iCalIntegrationSrv.addICalCalendar({...this._iCalCalendarData,color:e});this._$rootScope.$broadcast(x.n.SelectICalCalendarRequested,{iCalCalendarId:t.id,isSelected:!0}),this._hideDialog()}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"_validateICalCalendarUrlAsync",value:async function _validateICalCalendarUrlAsync(){if(this._iCalCalendarData=null,this.iCalCalendarUrl)try{this.isICalBusy=!0;let e=this.iCalCalendarUrl,t=this.iCalCalendarUrl.replace(/^http:\/+/,"http://").replace(/^https:\/+/,"https://").replace(/^webcal:\/+/,"https://").replace(/^\/+/,"");ce()(t).call(t,"http")||(t=`https://${t}`);let r=await this._iCalIntegrationSrv.checkICalCalendarAsync(t);if(this.iCalCalendarUrl!==e)return;r?(this._iCalCalendarData=r,this.iCalValidationMessage=""):this.iCalValidationMessage=this._$translate.instant("DIALOGS.ICAL_IMPORT_INVALID_CALENDAR")}finally{this.isICalBusy=!1}else this.iCalValidationMessage=""}},{kind:"method",key:"_hideDialog",value:function _hideDialog(){this._$mdDialog.hide()}}]}}));var Mt=r(662),Nt=r.n(Mt);function IntegrationsDialogController_getDecoratorsApi(){IntegrationsDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!IntegrationsDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=IntegrationsDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:IntegrationsDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=IntegrationsDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function IntegrationsDialogController_createElementDescriptor(e){var t,r=IntegrationsDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function IntegrationsDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function IntegrationsDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function IntegrationsDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function IntegrationsDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function IntegrationsDialogController_toPropertyKey(e){var t=function IntegrationsDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Bt=function IntegrationsDialogController_decorate(e,t,r,i){var a,n=IntegrationsDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function IntegrationsDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(IntegrationsDialogController_isDataDescriptor(a.descriptor)||IntegrationsDialogController_isDataDescriptor(i.descriptor)){if(IntegrationsDialogController_hasDecorators(a)||IntegrationsDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(IntegrationsDialogController_hasDecorators(a)){if(IntegrationsDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}IntegrationsDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,IntegrationsDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$sce","$translate","dialogSrv","googleIntegrationSrv","licenseSrv","mdPanelRef","platformSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class IntegrationsDialogController{constructor(t,r,i,a,n,o,s,l,d,c){e(this),this._$scope=t,this._$sce=r,this._$translate=i,this._dialogSrv=a,this._googleIntegrationSrv=n,this._licenseSrv=o,this._mdPanelRef=s,this._platformSrv=l,this._telemetrySrv=d,this._trelloIntegrationSrv=c}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"IntegrationsDialogCtrl"}},{kind:"get",key:"planywayIconUrl",value:function planywayIconUrl(){return this._platformSrv.getPlatformUrl(Nt.a)}},{kind:"get",key:"googleCalendarIconUrl",value:function googleCalendarIconUrl(){return this._platformSrv.getPlatformUrl(ne.a)}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._mdPanelRef.close()}},{kind:"get",key:"isGoogleSyncBusy",value:function isGoogleSyncBusy(){return this._googleIntegrationSrv.isGoogleSyncBusy()||this._isGoogleSyncBusy}},{kind:"set",key:"isGoogleSyncBusy",value:function isGoogleSyncBusy(e){this._$scope.$evalAsync((()=>this._isGoogleSyncBusy=e))}},{kind:"get",key:"googleSyncDescription",value:function googleSyncDescription(){return this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.INTEGRATIONS_GOOGLE_SYNC"))}},{kind:"get",key:"isGoogleSyncStatusLoaded",value:function isGoogleSyncStatusLoaded(){return void 0!==this._googleIntegrationSrv.getGoogleSyncStatus()}},{kind:"get",key:"isGoogleSyncStarted",value:function isGoogleSyncStarted(){return this.isGoogleSyncStatusLoaded&&this._googleIntegrationSrv.getGoogleSyncStatus()===me.j.Ok}},{kind:"set",key:"isGoogleSyncStarted",value:function isGoogleSyncStarted(e){}},{kind:"method",key:"toggleGoogleSyncAsync",value:async function toggleGoogleSyncAsync(e){if(!this._trelloIntegrationSrv.isCurrentBoardReadOnly()&&!this.isGoogleSyncBusy)try{this.isGoogleSyncBusy=!0;let t=this._googleIntegrationSrv.getGoogleSyncStatus();if(null===t){if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.GoogleSync,!0))return;this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.IntegrationsEnableGoogleSyncClicked),await this._dialogSrv.showGoogleSyncStartDialogAsync(e)}else if(t===me.j.Ok){await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.GOOGLE_SYNC_STOP_TITLE"),this._$translate.instant("DIALOGS.GOOGLE_SYNC_STOP_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]})&&await this._googleIntegrationSrv.stopGoogleSyncAsync()}else await this._dialogSrv.showGoogleSyncRestartDialogAsync(e)}finally{this.isGoogleSyncBusy=!1}}},{kind:"get",key:"isExportICalBusy",value:function isExportICalBusy(){return this._isExportICalBusy}},{kind:"set",key:"isExportICalBusy",value:function isExportICalBusy(e){this._$scope.$evalAsync((()=>this._isExportICalBusy=e))}},{kind:"get",key:"exportICalDescription",value:function exportICalDescription(){return this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.INTEGRATIONS_EXPORT_ICAL"))}},{kind:"method",key:"showExportICalDialog",value:async function showExportICalDialog(e){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.IntegrationsExportByURLClicked);try{this.isExportICalBusy=!0,await this._dialogSrv.showICalExportDialogAsync(e)}finally{this.isExportICalBusy=!1}}}]}}));function LoginDialogController_getDecoratorsApi(){LoginDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!LoginDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=LoginDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:LoginDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=LoginDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function LoginDialogController_createElementDescriptor(e){var t,r=LoginDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function LoginDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function LoginDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function LoginDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function LoginDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function LoginDialogController_toPropertyKey(e){var t=function LoginDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ft=function LoginDialogController_decorate(e,t,r,i){var a,n=LoginDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function LoginDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(LoginDialogController_isDataDescriptor(a.descriptor)||LoginDialogController_isDataDescriptor(i.descriptor)){if(LoginDialogController_hasDecorators(a)||LoginDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(LoginDialogController_hasDecorators(a)){if(LoginDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}LoginDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,LoginDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$scope","$sce","$log","$translate","appCommonSrv","dialogSrv","notificationSrv","telemetrySrv","trelloIntegrationSrv","mdPanelRef","canClose"])],(function(e){return{F:class LoginDialogController{constructor(t,r,i,a,n,o,s,l,d,c,h,u){e(this),this._$element=t,this._$scope=r,this._$sce=i,this._$log=a,this._$translate=n,this._appCommonSrv=o,this._dialogSrv=s,this._notificationSrv=l,this._telemetrySrv=d,this._trelloIntegrationSrv=c,this._mdPanelRef=h,this._canClose=u,this.isStandalone&&this._$element.on("click",".pw-js-sign-in-link",(()=>this.logIn({signInProvider:x.P.ThirdParty})))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"loginDialogCtrl"}},{kind:"get",key:"isStandalone",value:function isStandalone(){return!1}},{kind:"get",key:"isAuthByTokenRequired",value:function isAuthByTokenRequired(){return!1}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"canClose",value:function canClose(){return this._canClose}},{kind:"get",key:"buttonText",value:function buttonText(){return this._$translate.instant(this.isStandalone?"BUTTONS.SIGN_IN_WITH_TRELLO":"BUTTONS.CONNECT_WITH_TRELLO")}},{kind:"get",key:"alternativeSignInText",value:function alternativeSignInText(){return this._$sce.trustAsHtml(this._$translate.instant("MISC.ALTERNATIVE_SIGN_IN"))}},{kind:"get",key:"trelloTokenForm",value:function trelloTokenForm(){return this._trelloTokenForm}},{kind:"set",key:"trelloTokenForm",value:function trelloTokenForm(e){this._trelloTokenForm=e}},{kind:"get",key:"trelloTokenValidationMessage",value:function trelloTokenValidationMessage(){return this._trelloTokenValidationMessage}},{kind:"set",key:"trelloTokenValidationMessage",value:function trelloTokenValidationMessage(e){this.trelloTokenForm&&this._trelloTokenValidationMessage!==e&&(this._trelloTokenValidationMessage=e,this.trelloTokenForm.trelloTokenInput.$setValidity("custom",!e))}},{kind:"get",key:"trelloToken",value:function trelloToken(){return this._treloToken}},{kind:"set",key:"trelloToken",value:function trelloToken(e){this._treloToken=e,this._treloToken&&this.logIn({token:this._treloToken})}},{kind:"get",key:"trelloTokenUrl",value:function trelloTokenUrl(){return this._trelloTokenUrl||(this._trelloTokenUrl=this._trelloIntegrationSrv.getTrelloTokenUrl()),this._trelloTokenUrl}},{kind:"get",key:"authorizeConsent",value:function authorizeConsent(){return this.isAuthByTokenRequired?this._$sce.trustAsHtml(this._$translate.instant("MISC.CONNECT_TO_TRELLO_BY_TOKEN_CONSENT",{termsOfUseUrl:U.P,privacyPolicyUrl:U.D})):this._$sce.trustAsHtml(this._$translate.instant("MISC.CONNECT_TO_TRELLO_CONSENT",{btnText:this.buttonText,termsOfUseUrl:U.P,privacyPolicyUrl:U.D}))}},{kind:"method",key:"logIn",value:async function logIn(e={}){try{this.isBusy=!0;let t=e.signInProvider||x.P.Trello,r=e.token;r?this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.SignedInWithTrelloToken):this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.LogInClicked,{by:t===x.P.Trello?x.Z.Button:x.Z.Link});if(await this._trelloIntegrationSrv.authorizeAsync(r)){this.trelloTokenValidationMessage="";let e=await this._trelloIntegrationSrv.initMemberAsync();e&&this._appCommonSrv.sendLaunchAsync(),this._mdPanelRef.close(e&&"success")}else this.trelloTokenValidationMessage=this._$translate.instant("DIALOGS.LOGIN_INVALID_TOKEN")}catch(e){this._$log.error("Planyway login error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway login error",e,{class:this.constructor.name,method:this.logIn.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.LOGIN_ERROR"),x.A.Error)}finally{this.isBusy=!1}}},{kind:"method",key:"onGetTrelloTokenClick",value:function onGetTrelloTokenClick(){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.GetTrelloTokenLinkClicked)}},{kind:"method",key:"onHelpClick",value:function onHelpClick(){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.HelpClicked)}},{kind:"method",key:"showFeedbackDialog",value:function showFeedbackDialog(e){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.FeedbackOpened,{where:x.Y.LoginDialog}),this._dialogSrv.showFeedbackDialogAsync()}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._mdPanelRef.close()}},{kind:"get",key:"_isInsideElectron",value:function _isInsideElectron(){return this._appCommonSrv.isInsideElectron()}},{kind:"get",key:"_isInsideTeams",value:function _isInsideTeams(){return this._appCommonSrv.isInsideTeams()}}]}}));function MemberInviteDialogController_getDecoratorsApi(){MemberInviteDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!MemberInviteDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=MemberInviteDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:MemberInviteDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=MemberInviteDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function MemberInviteDialogController_createElementDescriptor(e){var t,r=MemberInviteDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function MemberInviteDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function MemberInviteDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function MemberInviteDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function MemberInviteDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function MemberInviteDialogController_toPropertyKey(e){var t=function MemberInviteDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let $t=function MemberInviteDialogController_decorate(e,t,r,i){var a,n=MemberInviteDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function MemberInviteDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(MemberInviteDialogController_isDataDescriptor(a.descriptor)||MemberInviteDialogController_isDataDescriptor(i.descriptor)){if(MemberInviteDialogController_hasDecorators(a)||MemberInviteDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(MemberInviteDialogController_hasDecorators(a)){if(MemberInviteDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}MemberInviteDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,MemberInviteDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$log","$window","$timeout","$translate","backendSrv","notificationSrv","telemetrySrv","trelloIntegrationSrv","mdPanelRef","boardId"])],(function(e){return{F:class MemberInviteDialogController{constructor(t,r,i,a,n,o,s,l,d,c,h,u){var p;(e(this),this._$rootScope=t,this._$scope=r,this._$log=i,this._$window=a,this._$timeout=n,this._$translate=o,this._backendSrv=s,this._notificationSrv=l,this._telemetrySrv=d,this._trelloIntegrationSrv=c,this._mdPanelRef=h,this._trelloBoard=this._trelloIntegrationSrv.getTrelloBoardById(u),this._trelloBoard)&&(this._trelloOrganization=this._trelloIntegrationSrv.getTrelloOrganizationById(this._trelloBoard.organizationId),this._trelloBoardMemberIds=new M.a(R()(p=this._trelloBoard.members).call(p,(e=>e.id))))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"memberInviteDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"method",key:"querySearchAsync",value:async function querySearchAsync(e){if(!this._trelloBoard||!e)return[];try{var t;let r=await this._trelloIntegrationSrv.searchMembersAsync(e.replace(/^@?/,""));return We()(t=R()(r).call(r,(e=>{let t;return this._trelloBoardMemberIds.has(e.id)?t=this._$translate.instant("DIALOGS.MEMBER_INVITE_JOINED"):!this._trelloOrganization||this._trelloOrganization.canInviteGuests||this._trelloOrganization.memberships.has(e.id)||(t=this._$translate.instant("DIALOGS.MEMBER_INVITE_NOT_TEAM_MEMBER")),{...e,isValid:!t,validationMessage:t}}))).call(t,((e,t)=>{let r=t.similarity-e.similarity;return 0===r&&(r=Object(n.j)(e.fullName,t.fullName)),r}))}catch(e){return this._$log.error("Trello search members error:"),this._$log.error(e),this._telemetrySrv.logError("Trello search members error",e,{class:this.constructor.name,method:this.querySearchAsync.name}),[]}}},{kind:"get",key:"selectedMember",value:function selectedMember(){return this._selectedMember}},{kind:"set",key:"selectedMember",value:function selectedMember(e){this._selectedMember=e}},{kind:"method",key:"inviteMemberToBoardAsync",value:async function inviteMemberToBoardAsync(){if(!this.isBusy&&this.selectedMember&&this.selectedMember.isValid)try{let e;if(this.isBusy=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.MemberAdded),this.selectedMember.email){e={inviteeId:await this._trelloIntegrationSrv.inviteMemberToBoardAsync(this._trelloBoard.id,this.selectedMember.email),inviteeEmail:this.selectedMember.email}}else await this._trelloIntegrationSrv.addMemberToBoardAsync(this._trelloBoard.id,this.selectedMember.id),e={inviteeId:this.selectedMember.id};try{await this._backendSrv.notifyMemberInvitedToBoardAsync(this._trelloBoard.id,e)}catch(e){this._$log.error("Planyway notify invite member to board error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway notify invite member to board error",e,{class:this.constructor.name,method:this.inviteMemberToBoardAsync.name})}}catch(e){this._$log.error("Trello add board member error:"),this._$log.error(e),this._telemetrySrv.logError("Trello add board member error",e,{class:this.constructor.name,method:this.inviteMemberToBoardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.ADD_MEMBER_TO_BOARD_ERROR"),x.A.Error)}finally{this.isBusy=!1,this.hideDialog()}}},{kind:"get",key:"canInviteGuests",value:function canInviteGuests(){if(!this._trelloBoard)return!1;let e=this._trelloIntegrationSrv.getTrelloOrganizationById(this._trelloBoard.organizationId);return!e||e.canInviteGuests}},{kind:"get",key:"inviteLink",value:function inviteLink(){return this._inviteLink}},{kind:"method",key:"createInviteLinkAsync",value:async function createInviteLinkAsync(){if(!this.isBusy&&!this.inviteLink)try{this.isBusy=!0,this._inviteToken=await this._backendSrv.createInviteTokenAsync(this._trelloBoard.id),this._$scope.$evalAsync((()=>{let e=new le.a;e.set(U.e,this._trelloBoard.id),e.set(U.V,x.G.InviteLink),e.set(U.u,this._inviteToken),this._inviteLink=`${U.L}?${e}`}))}catch(e){this._$log.error("Planyway create invite link error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway create invite link error",e,{class:this.constructor.name,method:this.createInviteLinkAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.CREATE_INVITE_LINK_ERROR"),x.A.Error)}finally{this.isBusy=!1}}},{kind:"method",key:"deleteInviteLinkAsync",value:async function deleteInviteLinkAsync(){if(!this.isBusy&&this.inviteLink)try{this.isBusy=!0,await this._backendSrv.deleteInviteTokenAsync(this._inviteToken),this._$scope.$evalAsync((()=>this._inviteLink=null))}catch(e){this._$log.error("Planyway delete invite link error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete invite link error",e,{class:this.constructor.name,method:this.deleteInviteLinkAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.DELETE_INVITE_LINK_ERROR"),x.A.Error)}finally{this.isBusy=!1}}},{kind:"method",key:"copyInviteLink",value:function copyInviteLink(){a()(".pw-js-invite-link-input");a()(".pw-js-copy-to-clipboard-input").trigger("focus"),this._$timeout((()=>{this._$window.document.execCommand("copy")&&this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.URL_COPIED_TO_CLIPBOARD"),x.A.Success)}),250,!1)}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._mdPanelRef.close()}}]}}));function MemberManageDialogController_getDecoratorsApi(){MemberManageDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!MemberManageDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=MemberManageDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:MemberManageDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=MemberManageDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function MemberManageDialogController_createElementDescriptor(e){var t,r=MemberManageDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function MemberManageDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function MemberManageDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function MemberManageDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function MemberManageDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function MemberManageDialogController_toPropertyKey(e){var t=function MemberManageDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let xt=function MemberManageDialogController_decorate(e,t,r,i){var a,n=MemberManageDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function MemberManageDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(MemberManageDialogController_isDataDescriptor(a.descriptor)||MemberManageDialogController_isDataDescriptor(i.descriptor)){if(MemberManageDialogController_hasDecorators(a)||MemberManageDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(MemberManageDialogController_hasDecorators(a)){if(MemberManageDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}MemberManageDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,MemberManageDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$log","$translate","notificationSrv","telemetrySrv","trelloIntegrationSrv","mdPanelRef","boardId","mode","member"])],(function(e){return{F:class MemberManageDialogController{constructor(t,r,i,a,n,o,s,l,d,c,h){e(this),this._$rootScope=t,this._$scope=r,this._$log=i,this._$translate=a,this._notificationSrv=n,this._telemetrySrv=o,this._trelloIntegrationSrv=s,this._mdPanelRef=l,this._trelloBoard=this._trelloIntegrationSrv.getTrelloBoardById(d),this.setMode(c,h)}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"memberManageDialogCtrl"}},{kind:"get",key:"mode",value:function mode(){return this._mode}},{kind:"get",key:"previousMode",value:function previousMode(){switch(this.mode){case"showMember":return"allMembers";case"removeMember":return"showMember"}}},{kind:"method",key:"setMode",value:function setMode(e,t){switch(this._mode=e,this._member=t,this._actions=[],this.mode){case"showMember":this._member=t,this.member.id!==this._currentMemberId&&this._trelloBoard&&!this._trelloBoard.isReadOnly&&(this._trelloBoard.memberships.get(this._currentMemberId)===x.rb.Admin||this._trelloBoard.invitationLevel===x.lb.Members&&this._trelloBoard.memberships.get(this.member.id)!==x.rb.Admin)&&this._actions.push({title:this._$translate.instant("DIALOGS.MEMBER_MANAGE_REMOVE_MEMBER_ACTION"),handler:()=>this.setMode("removeMember",t)});break;case"removeMember":this._member=t}}},{kind:"get",key:"title",value:function title(){switch(this.mode){case"allMembers":return this._$translate.instant("DIALOGS.MEMBER_MANAGE_ALL_MEMBERS_TITLE");case"showMember":return this._$translate.instant("DIALOGS.MEMBER_MANAGE_SHOW_MEMBER_TITLE");case"removeMember":return this._$translate.instant("DIALOGS.MEMBER_MANAGE_REMOVE_MEMBER_TITLE")}}},{kind:"get",key:"member",value:function member(){return this._member}},{kind:"get",key:"actions",value:function actions(){return this._actions}},{kind:"get",key:"members",value:function members(){if(!this._trelloBoard)return[];var e,t;this._members||(this._members=We()(e=R()(t=this._trelloBoard.members).call(t,(e=>({...e})))).call(e,((e,t)=>e.id===this._currentMemberId?-1:t.id===this._currentMemberId?1:Object(n.r)(e,t))));return this._members}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"method",key:"removeMemberFromBoardAsync",value:async function removeMemberFromBoardAsync(){try{this.isBusy=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.MemberRemoved),await this._trelloIntegrationSrv.removeMemberFromBoardAsync(this._trelloBoard.id,this._member.id)}catch(e){this._$log.error("Trello remove board member error:"),this._$log.error(e),this._telemetrySrv.logError("Trello remove board member error",e,{class:this.constructor.name,method:this.removeMemberFromBoardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.REMOVE_MEMBER_FROM_BOARD_ERROR"),x.A.Error)}finally{this.isBusy=!1,this.hideDialog()}}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._mdPanelRef.close()}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}}]}}));function NewsDialogController_getDecoratorsApi(){NewsDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!NewsDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=NewsDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:NewsDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=NewsDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function NewsDialogController_createElementDescriptor(e){var t,r=NewsDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function NewsDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function NewsDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function NewsDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function NewsDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function NewsDialogController_toPropertyKey(e){var t=function NewsDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Gt=function NewsDialogController_decorate(e,t,r,i){var a,n=NewsDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function NewsDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(NewsDialogController_isDataDescriptor(a.descriptor)||NewsDialogController_isDataDescriptor(i.descriptor)){if(NewsDialogController_hasDecorators(a)||NewsDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(NewsDialogController_hasDecorators(a)){if(NewsDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}NewsDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,NewsDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$sce","$translate","telemetrySrv","onboardingSrv","mdPanelRef","forceLoad"])],(function(e){return{F:class NewsDialogController{constructor(t,r,i,a,n,o,s){e(this),this._$sce=r,this._$translate=i,this._telemetrySrv=a,this._onboardingSrv=n,this._mdPanelRef=o,s&&this._onboardingSrv.loadLastNewsAsync(),t.$watch((()=>this.isNewsDialogBusy),(()=>this._lastNews=null))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"newsDialogCtrl"}},{kind:"method",key:"onElementClick",value:function onElementClick(e){switch(!0){case e.target instanceof HTMLAnchorElement:let t=e.target.href;switch(t){case U.d:this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.NewsBlogClicked,{newsDate:this._onboardingSrv.lastNewsDate});break;case U.s:this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.NewsHelpClicked,{newsDate:this._onboardingSrv.lastNewsDate});break;default:let r=e.currentTarget.getAttribute("data-news-date");r&&this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.NewsLearnMoreClicked,{newsLink:t,newsDate:r})}}}},{kind:"get",key:"isNewsDialogBusy",value:function isNewsDialogBusy(){return this._onboardingSrv.isNewsDialogBusy}},{kind:"get",key:"lastNews",value:function lastNews(){var e;this._lastNews||(this._lastNews=R()(e=this._onboardingSrv.lastNews).call(e,(e=>({date:e.date,formattedDate:kendo.toString(new Date(e.date),"D"),title:this._$sce.trustAsHtml(e.title),content:this._$sce.trustAsHtml(e.content)}))));return this._lastNews}},{kind:"get",key:"footerText",value:function footerText(){return this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.NEWS_FOOTER_TEXT",{blogUrl:U.d,helpUrl:U.s}))}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._mdPanelRef.close()}}]}}));var zt=r(663),Ut=r.n(zt),Wt=r(664),jt=r.n(Wt),Ht=r(665),Vt=r.n(Ht),Yt=r(666),Kt=r.n(Yt),Xt=r(667),qt=r.n(Xt),Qt=r(668),Jt=r.n(Qt),Zt=r(669),er=r.n(Zt),tr=r(670),rr=r.n(tr),ir=r(671),ar=r.n(ir),nr=r(672),or=r.n(nr),sr=r(673),lr=r.n(sr),dr=r(674),cr=r.n(dr),hr=r(223),ur=r.n(hr),pr=r(675),mr=r.n(pr);function PaidFeatureOfferDialogController_getDecoratorsApi(){PaidFeatureOfferDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!PaidFeatureOfferDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PaidFeatureOfferDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PaidFeatureOfferDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PaidFeatureOfferDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PaidFeatureOfferDialogController_createElementDescriptor(e){var t,r=PaidFeatureOfferDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PaidFeatureOfferDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PaidFeatureOfferDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function PaidFeatureOfferDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PaidFeatureOfferDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PaidFeatureOfferDialogController_toPropertyKey(e){var t=function PaidFeatureOfferDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const fr={[x.B.MultiBoard]:{title:"DIALOGS.PAID_FEATURE_MULTIBOARD_TITLE",description:"DIALOGS.PAID_FEATURE_MULTIBOARD_DESCRIPTION",img:rr.a,learnMoreUrl:`${U.s}/features/multi-board-view`},[x.B.RecurringCards]:{title:"DIALOGS.PAID_FEATURE_RECURRING_CARDS_TITLE",description:"DIALOGS.PAID_FEATURE_RECURRING_CARDS_DESCRIPTION",img:or.a,learnMoreUrl:`${U.s}/features/recurring-cards-in-trello`},[x.B.Filters]:{title:"DIALOGS.PAID_FEATURE_FILTERS_TITLE",description:"DIALOGS.PAID_FEATURE_FILTERS_DESCRIPTION",img:Kt.a,learnMoreUrl:`${U.s}/getting-started`},[x.B.GoogleSync]:{title:"DIALOGS.PAID_FEATURE_GOOGLE_SYNC_TITLE",description:"DIALOGS.PAID_FEATURE_GOOGLE_SYNC_DESCRIPTION",img:Jt.a,learnMoreUrl:`${U.s}/integration/google-calendar-integration`},[x.B.GoogleConnect]:{title:"DIALOGS.PAID_FEATURE_GOOGLE_CONNECT_TITLE",description:"DIALOGS.PAID_FEATURE_GOOGLE_CONNECT_DESCRIPTION",img:qt.a,learnMoreUrl:`${U.s}/integration/google-calendar-integration`},[x.B.Milestones]:{title:"DIALOGS.PAID_FEATURE_MILESTONES_TITLE",description:"DIALOGS.PAID_FEATURE_MILESTONES_DESCRIPTION",img:er.a,learnMoreUrl:`${U.s}/features/milestones`},[x.B.PushNotifications]:{title:"DIALOGS.PAID_FEATURE_PUSH_NOTIFICATIONS_TITLE",description:"DIALOGS.PAID_FEATURE_PUSH_NOTIFICATIONS_DESCRIPTION",img:ar.a,learnMoreUrl:`${U.s}/reminders`},[x.B.Dependencies]:{title:"DIALOGS.PAID_FEATURE_DEPENDENCIES_TITLE",description:"DIALOGS.PAID_FEATURE_DEPENDENCIES_DESCRIPTION",img:Vt.a,learnMoreUrl:`${U.s}/dependencies`},[x.B.Timeline]:{title:"DIALOGS.PAID_FEATURE_TIMELINE_TITLE",description:"DIALOGS.PAID_FEATURE_TIMELINE_DESCRIPTION",img:cr.a,learnMoreUrl:`${U.s}/features/timeline-view`},[x.B.TimelineMember]:{title:"DIALOGS.PAID_FEATURE_TIMELINE_GROUPS_TITLE",description:"DIALOGS.PAID_FEATURE_TIMELINE_GROUPS_DESCRIPTION",img:ur.a,learnMoreUrl:`${U.s}/features/timeline-view#team-timeline`},[x.B.TimelineBoard]:{title:"DIALOGS.PAID_FEATURE_TIMELINE_GROUPS_TITLE",description:"DIALOGS.PAID_FEATURE_TIMELINE_GROUPS_DESCRIPTION",img:ur.a,learnMoreUrl:`${U.s}/features/timeline-view#portfolio-timeline`},[x.B.TimelineList]:{title:"DIALOGS.PAID_FEATURE_TIMELINE_GROUPS_TITLE",description:"DIALOGS.PAID_FEATURE_TIMELINE_GROUPS_DESCRIPTION",img:ur.a,learnMoreUrl:`${U.s}/features/timeline-view`},[x.B.TimelineLabel]:{title:"DIALOGS.PAID_FEATURE_TIMELINE_GROUPS_TITLE",description:"DIALOGS.PAID_FEATURE_TIMELINE_GROUPS_DESCRIPTION",img:ur.a,learnMoreUrl:`${U.s}/features/timeline-view`},[x.B.TimelineScales]:{title:"DIALOGS.PAID_FEATURE_TIMELINE_SCALES_TITLE",description:"DIALOGS.PAID_FEATURE_TIMELINE_SCALES_DESCRIPTION",img:mr.a,learnMoreUrl:`${U.s}/features/timeline-view#zoom-levels`},[x.B.TimeRecords]:{title:"DIALOGS.PAID_FEATURE_TIME_RECORDS_TITLE",description:"DIALOGS.PAID_FEATURE_TIME_RECORDS_DESCRIPTION",img:lr.a,learnMoreUrl:`${U.s}/features/time-tracking`},[x.B.CustomFields]:{title:"DIALOGS.PAID_FEATURE_CUSTOM_FIELDS_TITLE",description:"DIALOGS.PAID_FEATURE_CUSTOM_FIELDS_DESCRIPTION",img:jt.a,learnMoreUrl:`${U.s}/getting-started`},[x.B.CsvReport]:{title:"DIALOGS.PAID_FEATURE_CSV_REPORT_TITLE",description:"DIALOGS.PAID_FEATURE_CSV_REPORT_DESCRIPTION",img:Ut.a,learnMoreUrl:`${U.s}/getting-started`}};let yr=function PaidFeatureOfferDialogController_decorate(e,t,r,i){var a,n=PaidFeatureOfferDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PaidFeatureOfferDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(PaidFeatureOfferDialogController_isDataDescriptor(a.descriptor)||PaidFeatureOfferDialogController_isDataDescriptor(i.descriptor)){if(PaidFeatureOfferDialogController_hasDecorators(a)||PaidFeatureOfferDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PaidFeatureOfferDialogController_hasDecorators(a)){if(PaidFeatureOfferDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PaidFeatureOfferDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,PaidFeatureOfferDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$sce","$scope","$timeout","$translate","$mdDialog","dialogSrv","licenseSrv","platformSrv","telemetrySrv","paidFeature","options"])],(function(e){return{F:class PaidFeatureOfferDialogController{constructor(t,r,i,a,n,o,s,l,d,c,h){e(this),this._$scope=r,this._$timeout=i,this._$translate=a,this._$mdDialog=n,this._dialogSrv=o,this._licenseSrv=s,this._telemetrySrv=d,this._paidFeature=c;let u=fr[c];switch(c){case x.B.TimelineMember:this._licenseSrv.isLicenseActive()&&this._licenseSrv.getLicenseType()===me.g.Team&&void 0!==h.paidLanesCount&&(u={...u,title:"DIALOGS.PAID_FEATURE_TIMELINE_TEAM_NOT_ENOUGH_TITLE",description:"DIALOGS.PAID_FEATURE_TIMELINE_TEAM_NOT_ENOUGH_DESCRIPTION",showFeedbackButton:!0})}this._feature={title:this._$translate.instant(u.title),description:this._$translate.instant(u.description),img:u.img&&l.getPlatformUrl(u.img),learnMoreUrl:u.learnMoreUrl,showFeedbackButton:u.showFeedbackButton},this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.UpgradeOffered,{featureName:c})}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"paidFeatureOfferDialogCtrl"}},{kind:"get",key:"feature",value:function feature(){return this._feature}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"isTrialAvailable",value:function isTrialAvailable(){return this._licenseSrv.isTrialAvailable()}},{kind:"method",key:"activateTrialLicenseAsync",value:async function activateTrialLicenseAsync(){try{this.isBusy=!0,this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.TrialStarted,{trialSource:x.cb.PaidFeatureOfferDialog,featureName:this._paidFeature}),await this._licenseSrv.activateTrialLicenseAsync()}finally{this.isBusy=!1,this._$mdDialog.hide()}}},{kind:"get",key:"isSubscriptionAvailable",value:function isSubscriptionAvailable(){return!this._licenseSrv.isLicenseLoaded()||!this._licenseSrv.isLicenseActive()||this._licenseSrv.getLicenseType()===me.g.Trial}},{kind:"get",key:"pricingUrl",value:function pricingUrl(){return U.C}},{kind:"get",key:"billingUrl",value:function billingUrl(){return U.E}},{kind:"get",key:"badgeText",value:function badgeText(){return x.E[me.g.Pro].has(this._paidFeature)?this._$translate.instant("DIALOGS.PAID_FEATURE_BADGE_PRO"):this._$translate.instant("DIALOGS.PAID_FEATURE_BADGE_BUSINESS")}},{kind:"method",key:"onUpgradeClick",value:function onUpgradeClick(){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.UpgradeOfferUpgradeClicked,{upgradeSource:x.eb.PaidFeatureOfferDialog,featureName:this._paidFeature}),this._$timeout((()=>this._$mdDialog.hide()))}},{kind:"method",key:"onLearnMoreClick",value:function onLearnMoreClick(){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.UpgradeOfferLearnClicked,{featureName:this._paidFeature})}},{kind:"method",key:"showFeedbackDialog",value:function showFeedbackDialog(e){this.cancelDialog(),this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.FeedbackOpened,{where:x.Y.PaidFeatureOfferDialog}),this._dialogSrv.showFeedbackDialogAsync(e)}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}}]}}));var vr=r(676),_r=r.n(vr),gr=r(677),Cr=r.n(gr),kr=r(678),Dr=r.n(kr),Er=r(679),br=r.n(Er);function ProductTourController_getDecoratorsApi(){ProductTourController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ProductTourController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ProductTourController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ProductTourController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ProductTourController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ProductTourController_createElementDescriptor(e){var t,r=ProductTourController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ProductTourController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ProductTourController_hasDecorators(e){return e.decorators&&e.decorators.length}function ProductTourController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ProductTourController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ProductTourController_toPropertyKey(e){var t=function ProductTourController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const wr="image";let Sr=function ProductTourController_decorate(e,t,r,i){var a,n=ProductTourController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ProductTourController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ProductTourController_isDataDescriptor(a.descriptor)||ProductTourController_isDataDescriptor(i.descriptor)){if(ProductTourController_hasDecorators(a)||ProductTourController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ProductTourController_hasDecorators(a)){if(ProductTourController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ProductTourController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ProductTourController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$interval","$sce","$translate","platformSrv","settingsSrv","telemetrySrv","mdPanelRef","mode","type","stepIndex"])],(function(e){return{F:class ProductTourController{constructor(t,r,i,a,n,o,s,l,d,c){var h;e(this),this._$interval=t,this._$sce=r,this._$translate=i,this._platformSrv=a,this._settingsSrv=n,this._telemetrySrv=o,this._mdPanelRef=s,this._mode=l,this._type=d,this.productTours=new lt.a([[x.H.Trial,[{name:"drag and drop",title:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.PRODUCT_TOUR_STEP_1_TITLE")),text:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.PRODUCT_TOUR_STEP_1_TEXT")),background:"linear-gradient(180deg, #F5CC61 0%, #F3BC51 100%)",media:{type:wr,url:this._platformSrv.getPlatformUrl(_r.a)}},{name:"multiple boards",title:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.PRODUCT_TOUR_STEP_2_TITLE")),text:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.PRODUCT_TOUR_STEP_2_TEXT")),background:"linear-gradient(180deg, #926BEC 0%, #815EE3 100%)",media:{type:wr,url:this._platformSrv.getPlatformUrl(Cr.a)}},{name:"google connect",title:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.PRODUCT_TOUR_STEP_3_TITLE")),text:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.PRODUCT_TOUR_STEP_3_TEXT")),background:"linear-gradient(180deg, #5BA7FF 0%, #5988FF 100%)",media:{type:wr,url:this._platformSrv.getPlatformUrl(Dr.a)}},{name:"views",title:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.PRODUCT_TOUR_STEP_4_TITLE")),text:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.PRODUCT_TOUR_STEP_4_TEXT")),background:"linear-gradient(180deg, #EEA2D5 0%, #E380C2 100%)",media:{type:wr,url:this._platformSrv.getPlatformUrl(br.a)}}]]]),this.setCurrentStep(null!==(h=this.steps[c])&&void 0!==h?h:this.steps[0])}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"productTourCtrl"}},{kind:"get",key:"mode",value:function mode(){return this._mode}},{kind:"set",key:"mode",value:function mode(e){this._mode=e,this._globalSettings.isProductTourMinimized=e===x.I.Small,this._settingsSrv.saveGlobalAsync()}},{kind:"get",key:"steps",value:function steps(){return this._steps||(this._steps=this.productTours.get(this._type)),this._steps}},{kind:"get",key:"currentStep",value:function currentStep(){return this._currentStep}},{kind:"get",key:"currentStepIndex",value:function currentStepIndex(){var e;return _()(e=this.steps).call(e,this.currentStep)||0}},{kind:"get",key:"isLastStep",value:function isLastStep(){return this.currentStepIndex===this.steps.length-1}},{kind:"get",key:"isFirstStep",value:function isFirstStep(){return 0===this.currentStepIndex}},{kind:"method",key:"setCurrentStep",value:function setCurrentStep(e){this._currentStep=e,this._telemetrySrv.logSessionEvent(x.X.OnboardingEvents.TourStepShown,{step:this.currentStep.name}),this._globalSettings.productTourStepIndex=this.currentStepIndex,this._settingsSrv.saveGlobalAsync()}},{kind:"method",key:"moveToPreviousStep",value:function moveToPreviousStep(){this.isFirstStep||this.setCurrentStep(this.steps[this.currentStepIndex-1])}},{kind:"method",key:"moveToNextStep",value:function moveToNextStep(){this.isLastStep?(this._telemetrySrv.logSessionEvent(x.X.OnboardingEvents.TourDone),this._mdPanelRef.close(),this._globalSettings.isProductTourPassed=!0,this._settingsSrv.saveGlobalAsync()):this.setCurrentStep(this.steps[this.currentStepIndex+1])}},{kind:"get",key:"progress",value:function progress(){return(this.currentStepIndex+1)/this.steps.length*100}},{kind:"get",key:"progressText",value:function progressText(){return`${this.currentStepIndex+1} of ${this.steps.length}`}},{kind:"method",key:"minimize",value:function minimize(){this._telemetrySrv.logSessionEvent(x.X.OnboardingEvents.TourMinimized),this.mode=x.I.Small}},{kind:"method",key:"maximize",value:function maximize(){this._telemetrySrv.logSessionEvent(x.X.OnboardingEvents.TourMaximized),this.mode=x.I.Large}},{kind:"method",key:"close",value:function close(){this._telemetrySrv.logSessionEvent(x.X.OnboardingEvents.TourClosed),this._mdPanelRef.close(),this._globalSettings.isProductTourClosed=!0,this._settingsSrv.saveGlobalAsync()}},{kind:"get",key:"_globalSettings",value:function _globalSettings(){return this._settingsSrv.currentSettings.global}}]}}));var Tr=r(82),Ar=r.n(Tr);function RecurrentEditorController_getDecoratorsApi(){RecurrentEditorController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!RecurrentEditorController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=RecurrentEditorController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:RecurrentEditorController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=RecurrentEditorController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function RecurrentEditorController_createElementDescriptor(e){var t,r=RecurrentEditorController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function RecurrentEditorController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function RecurrentEditorController_hasDecorators(e){return e.decorators&&e.decorators.length}function RecurrentEditorController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function RecurrentEditorController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function RecurrentEditorController_toPropertyKey(e){var t=function RecurrentEditorController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Ir=Ar.a.RRule,Rr="never",Or="after",Pr="on",Lr=[Ir.MO,Ir.TU,Ir.WE,Ir.TH,Ir.FR,Ir.SA,Ir.SU];let Mr=function RecurrentEditorController_decorate(e,t,r,i){var a,n=RecurrentEditorController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function RecurrentEditorController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(RecurrentEditorController_isDataDescriptor(a.descriptor)||RecurrentEditorController_isDataDescriptor(i.descriptor)){if(RecurrentEditorController_hasDecorators(a)||RecurrentEditorController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(RecurrentEditorController_hasDecorators(a)){if(RecurrentEditorController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}RecurrentEditorController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,RecurrentEditorController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$translate","settingsSrv","trelloIntegrationSrv","mdPanelRef","rule","start","isAllDay"])],(function(e){return{F:class RecurrentEditorController{constructor(t,r,i,a,o,s,l){e(this),this._$translate=t,this._settingsSrv=r,this._trelloIntegrationSrv=i,this._mdPanelRef=a,this._frequencies=[{title:this._$translate.instant("DIALOGS.DAILY"),value:Ir.DAILY},{title:this._$translate.instant("DIALOGS.WEEKLY"),value:Ir.WEEKLY},{title:this._$translate.instant("DIALOGS.MONTHLY"),value:Ir.MONTHLY},{title:this._$translate.instant("DIALOGS.YEARLY"),value:Ir.YEARLY}],this._start=new Date(s),this._isAllDay=l;let d=kendo.culture(),h=d.calendar.days.names;this._weekDays=R()(h).call(h,((e,t)=>{let r=t-1;return r<0&&(r=6),{weekday:Lr[r].weekday,title:e,shortTitle:d.calendar.days.namesShort[t].toUpperCase().charAt(0),isSelected:!1}})),this._currentWeekDay=this._weekDays[this._start.getDay()],this._currentWeekDay.isSelected=!0;for(let e=0;e<d.calendar.firstDay;e++)this._weekDays.push(this._weekDays.shift());switch(this._weekDaysOrder=[{title:this._$translate.instant("DIALOGS.FIRST"),value:1},{title:this._$translate.instant("DIALOGS.SECOND"),value:2},{title:this._$translate.instant("DIALOGS.THIRD"),value:3},{title:this._$translate.instant("DIALOGS.FOURTH"),value:4},{title:this._$translate.instant("DIALOGS.LAST"),value:-1}],this._recurrenceRule=o,this._recurrenceRule?(this._ruleObject=Ir.fromString(this._recurrenceRule),this._normalizedRule=this._ruleObject.toString({onlyDate:this._isAllDay})):this._ruleObject=new Ir({freq:Ir.WEEKLY,byweekday:[Lr[this._currentWeekDay.weekday]]}),this._ruleObject.origOptions.count?this._endsMode=Or:this._ruleObject.origOptions.until?this._endsMode=Pr:this._endsMode=Rr,this._ruleObject.origOptions.freq){case Ir.DAILY:this._defaultCount=30,this._defaultUntil=Object(n.a)(this._start,this._defaultCount);break;case Ir.WEEKLY:if(this._ruleObject.origOptions.byweekday)for(let e of this._weekDays){var u;e.isSelected=xe()(u=this._ruleObject.origOptions.byweekday).call(u,(t=>t.weekday===e.weekday))}this._defaultCount=13,this._defaultUntil=Object(n.e)(this._start,this._defaultCount);break;case Ir.MONTHLY:let e,t,r,i,a;if(this._ruleObject.origOptions.byweekday&&this._ruleObject.origOptions.byweekday[0]){var p,m;e=this._start.getDate(),t=this._ruleObject.origOptions.byweekday[0],r=c()(p=this._weekDaysOrder).call(p,(e=>e.value===t.n)),i=c()(m=this._weekDays).call(m,(e=>e.weekday===t.weekday)),a=1}else{var f;e=this._ruleObject.origOptions.bymonthday;let n=Math.floor(this._start.getDate()/7),o=this._start.getDay()-1;o<0&&(o=6),r=this._weekDaysOrder[n],t=Lr[o].nth(r.value),i=c()(f=this._weekDays).call(f,(e=>e.weekday===Lr[o].weekday)),a=0}this._monthlyRepeatModes=[{index:0,title:this._$translate.instant("DIALOGS.ON_DAY",{day:e}),value:{bymonthday:e,byweekday:null}},{index:1,title:this._$translate.instant("DIALOGS.ON_WEEKDAY",{weekdayOrder:r.title,weekday:i.title}),value:{bymonthday:null,byweekday:t}}],this._selectedMonthlyRepeatMode=this.monthlyRepeatModes[a],this._defaultCount=12,this._defaultUntil=Object(n.d)(this._start,this._defaultCount);break;case Ir.YEARLY:this._defaultCount=5,this._defaultUntil=Object(n.g)(this._start,this._defaultCount)}}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"recurrentEditorCtrl"}},{kind:"get",key:"showWeekNumbers",value:function showWeekNumbers(){return this._globalBoardSettings.showWeekNumbers}},{kind:"get",key:"recurrenceRule",value:function recurrenceRule(){return this._recurrenceRule}},{kind:"get",key:"interval",value:function interval(){return this._ruleObject.origOptions.interval||1}},{kind:"set",key:"interval",value:function interval(e){this._ruleObject.origOptions.interval=e>1?e:null}},{kind:"get",key:"frequencies",value:function frequencies(){return this._frequencies}},{kind:"get",key:"selectedFrequency",value:function selectedFrequency(){var e;return c()(e=this._frequencies).call(e,(e=>e.value===this._ruleObject.origOptions.freq))}},{kind:"set",key:"selectedFrequency",value:function selectedFrequency(e){var t,r,i;if(this._ruleObject.origOptions.freq!==e.value)switch(this._ruleObject.origOptions.freq=e.value,e.value){case Ir.DAILY:this._ruleObject.origOptions.bymonthday=null,this._ruleObject.origOptions.byweekday=null,this._defaultCount=30,this._defaultUntil=Object(n.a)(this._start,this._defaultCount);break;case Ir.WEEKLY:this._ruleObject.origOptions.bymonthday=null,this._ruleObject.origOptions.byweekday=R()(t=S()(r=this.weekDays).call(r,(e=>e.isSelected))).call(t,(e=>Lr[e.weekday])),this._defaultCount=13,this._defaultUntil=Object(n.e)(this._start,this._defaultCount);break;case Ir.MONTHLY:this._ruleObject.origOptions.bymonthday=this._start.getDate(),this._ruleObject.origOptions.byweekday=null,this._defaultCount=12,this._defaultUntil=Object(n.d)(this._start,this._defaultCount);let e=this._ruleObject.origOptions.bymonthday,a=Math.floor(this._start.getDate()/7),o=this._start.getDay()-1;o<0&&(o=6);let s=this._weekDaysOrder[a],l=Lr[o].nth(s.value),d=c()(i=this._weekDays).call(i,(e=>e.weekday===Lr[o].weekday));this._monthlyRepeatModes=[{index:0,title:this._$translate.instant("DIALOGS.ON_DAY",{day:e}),value:{bymonthday:e,byweekday:null}},{index:1,title:this._$translate.instant("DIALOGS.ON_WEEKDAY",{weekdayOrder:s.title,weekday:d.title}),value:{bymonthday:null,byweekday:l}}],this._selectedMonthlyRepeatMode=this.monthlyRepeatModes[0];break;case Ir.YEARLY:this._ruleObject.origOptions.bymonthday=null,this._ruleObject.origOptions.byweekday=null,this._defaultCount=5,this._defaultUntil=Object(n.g)(this._start,this._defaultCount)}}},{kind:"get",key:"monthlyRepeatModes",value:function monthlyRepeatModes(){return this._monthlyRepeatModes}},{kind:"get",key:"selectedMonthlyRepeatMode",value:function selectedMonthlyRepeatMode(){return this._selectedMonthlyRepeatMode}},{kind:"set",key:"selectedMonthlyRepeatMode",value:function selectedMonthlyRepeatMode(e){this._selectedMonthlyRepeatMode=e,this._ruleObject.origOptions={...this._ruleObject.origOptions,bymonthday:e.value.bymonthday,byweekday:e.value.byweekday}}},{kind:"get",key:"weekDays",value:function weekDays(){return this._weekDays}},{kind:"method",key:"switchWeekDaySelection",value:function switchWeekDaySelection(e){var t,r,i;e.isSelected=!e.isSelected,A()(t=this.weekDays).call(t,(e=>!e.isSelected))&&(this._currentWeekDay.isSelected=!0),this._ruleObject.origOptions.byweekday=R()(r=S()(i=this.weekDays).call(i,(e=>e.isSelected))).call(r,(e=>Lr[e.weekday]))}},{kind:"get",key:"endsMode",value:function endsMode(){return this._endsMode}},{kind:"set",key:"endsMode",value:function endsMode(e){switch(this._endsMode=e,this._endsMode){case Rr:this._ruleObject.origOptions.until=null,this._ruleObject.origOptions.count=null;break;case Or:this._ruleObject.origOptions.until=null,this._ruleObject.origOptions.count=this._defaultCount;break;case Pr:this._ruleObject.origOptions.until=this._isAllDay?Object(n.O)(this._defaultUntil):Object(n.N)(this._defaultUntil),this._ruleObject.origOptions.count=null}}},{kind:"get",key:"minUntil",value:function minUntil(){return this._start}},{kind:"get",key:"until",value:function until(){return this._ruleObject.origOptions.until||this._defaultUntil}},{kind:"set",key:"until",value:function until(e){this._ruleObject.origOptions.until!==e&&(e&&(e=this._isAllDay?Object(n.O)(e):Object(n.N)(e)),this._ruleObject.origOptions.until=e)}},{kind:"get",key:"count",value:function count(){return this._ruleObject.origOptions.count||this._defaultCount}},{kind:"set",key:"count",value:function count(e){e||(e=1),this._ruleObject.origOptions.count=e}},{kind:"method",key:"onSaveClick",value:function onSaveClick(){let e=this._ruleObject.toString({onlyDate:this._isAllDay});e!==this._normalizedRule&&(this._recurrenceRule=e),this._mdPanelRef&&this._mdPanelRef.close("success")}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._mdPanelRef.close()}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){let e=this._trelloIntegrationSrv.getCurrentBoardId();return this._settingsSrv.currentSettings.getGlobalBoardSettings(e)}}]}}));function ReportDialogController_getDecoratorsApi(){ReportDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ReportDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ReportDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ReportDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ReportDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ReportDialogController_createElementDescriptor(e){var t,r=ReportDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ReportDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ReportDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ReportDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ReportDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ReportDialogController_toPropertyKey(e){var t=function ReportDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Nr=function ReportDialogController_decorate(e,t,r,i){var a,n=ReportDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ReportDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ReportDialogController_isDataDescriptor(a.descriptor)||ReportDialogController_isDataDescriptor(i.descriptor)){if(ReportDialogController_hasDecorators(a)||ReportDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ReportDialogController_hasDecorators(a)){if(ReportDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ReportDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ReportDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$scope","htmlHelperSrv","reportSrv","telemetrySrv","mdPanelRef","type","parameters"])],(function(e){return{F:class ReportDialogController{constructor(t,r,i,a,n,o,s,l){var d,h;e(this),this._$element=t,this._$scope=r,this._htmlHelperSrv=i,this._reportSrv=a,this._telemetrySrv=n,this._mdPanelRef=o,this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.ReportDialogOpened,{type:s}),this._report=c()(d=this._reportSrv.availableReports).call(d,(e=>e.type===s)),this._parameters=l,c()(h=this._$element).call(h,".pw-js-dialog-report-parameters").append(this._htmlHelperSrv.compileHtml(this._report.parameters.template,this._$scope,!0))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"reportDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"report",value:function report(){return this._report}},{kind:"get",key:"parameters",value:function parameters(){return this._parameters}},{kind:"method",key:"reportParametersChanged",value:function reportParametersChanged(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.ReportParametersChanged,{type:this.report.type}),this._$scope.$evalAsync((()=>this._parameters=e))}},{kind:"get",key:"canBuildReport",value:function canBuildReport(){return this.report.parameters.isValid(this._parameters)}},{kind:"method",key:"buildReportAsync",value:async function buildReportAsync(){this.isBusy=!0,this._reportSrv.isCancelled=!1,this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.ReportBuilt,{type:this.report.type}),await this.report.build(this._parameters),this.isBusy=!1,this._mdPanelRef.close()}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this.isBusy&&(this._reportSrv.isCancelled=!0),this._mdPanelRef.close()}}]}}));var Br=r(78),Fr=r.n(Br);function SettingsDialogController_getDecoratorsApi(){SettingsDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SettingsDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SettingsDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SettingsDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SettingsDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SettingsDialogController_createElementDescriptor(e){var t,r=SettingsDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SettingsDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SettingsDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function SettingsDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SettingsDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SettingsDialogController_toPropertyKey(e){var t=function SettingsDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let $r=function SettingsDialogController_decorate(e,t,r,i){var a,n=SettingsDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SettingsDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SettingsDialogController_isDataDescriptor(a.descriptor)||SettingsDialogController_isDataDescriptor(i.descriptor)){if(SettingsDialogController_hasDecorators(a)||SettingsDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SettingsDialogController_hasDecorators(a)){if(SettingsDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SettingsDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SettingsDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$log","$timeout","$translate","$mdDialog","appCommonSrv","notificationSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class SettingsDialogController{constructor(t,r,i,a,o,s,l,d,h,u,p){var m,f,y,v,_,g,C,k,D,E,b;e(this),this._$rootScope=t,this._$scope=r,this._$log=i,this._$timeout=a,this._$translate=o,this._$mdDialog=s,this._appCommonSrv=l,this._notificationSrv=d,this._settingsSrv=h,this._telemetrySrv=u,this._trelloIntegrationSrv=p;let w=null!==(m=this._globalSettings.firstWeekDay)&&void 0!==m?m:kendo.culture().calendar.firstDay;this._workDayStart=Object(n.J)(this._globalSettings.workDayStart),this._workDayEnd=Object(n.J)(this._globalSettings.workDayEnd),this._firstWeekDay=c()(f=this.daysOfWeek).call(f,(e=>e.value===w))||this.daysOfWeek[0],this._workWeekStart=c()(y=this.daysOfWeek).call(y,(e=>e.value===this._globalSettings.workWeekStart))||this.daysOfWeek[0],this._workWeekEnd=c()(v=this.daysOfWeek).call(v,(e=>e.value===this._globalSettings.workWeekEnd))||this.daysOfWeek[this.daysOfWeek.length-1],this._selectedLocale=c()(_=this.locales).call(_,(e=>e.code===this._appCommonSrv.getLocale()));let S=this._trelloIntegrationSrv.getCurrentBoardId();this._currentBoard=this._trelloIntegrationSrv.getTrelloBoardById(S),this._selectedDueLinkType=c()(g=this.dueLinkTypes).call(g,(e=>e.value===this._currentBoard.dueLinkType))||this.dueLinkTypes[0],this._selectedDueLinkTypeAllDay=c()(C=this.dueLinkTypesAllDay).call(C,(e=>e.value===this._currentBoard.dueLinkTypeAllDay))||this.dueLinkTypesAllDay[0],this._selectedDefaultCardDuration=c()(k=this.defaultCardDurations).call(k,(e=>this._currentBoard.defaultCardIsAllDay===e.isAllDay&&e.value===this._currentBoard.defaultCardDuration))||this.defaultCardDurations[2],this._selectedDefaultCardPosition=c()(D=this.defaultCardPositions).call(D,(({value:e})=>this._currentBoard.defaultCardPosition===e))||this.defaultCardPositions[1],this._currentBoardLists=R()(E=this._currentBoard.lists).call(E,(e=>({...e}))),0===this.currentBoardLists.length&&(this._currentBoardLists=[{name:this._$translate.instant("DIALOGS.NEW_LIST")}]),this._selectedDefaultList=c()(b=this.currentBoardLists).call(b,(e=>e.id===this._currentBoard.defaultListId))||this.currentBoardLists[0]}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"settingsDialogCtrl"}},{kind:"get",key:"isCurrentBoardReadOnly",value:function isCurrentBoardReadOnly(){return this._trelloIntegrationSrv.isCurrentBoardReadOnly()}},{kind:"get",key:"workDayStart",value:function workDayStart(){return this._workDayStart}},{kind:"set",key:"workDayStart",value:function workDayStart(e){e?this._$timeout((()=>this._workDayStart=Object(n.Q)(e))):this._$scope.$evalAsync((()=>this._workDayStart=new Date(this.workDayStart)))}},{kind:"get",key:"maxWorkDayStart",value:function maxWorkDayStart(){return Object(n.b)(Object(n.Eb)(this.workDayStart,this.workDayEnd),-1)}},{kind:"get",key:"workDayEnd",value:function workDayEnd(){return this._workDayEnd}},{kind:"set",key:"workDayEnd",value:function workDayEnd(e){e?this._workDayEnd=e:this._$scope.$evalAsync((()=>this._workDayEnd=new Date(this.workDayEnd)))}},{kind:"get",key:"minWorkDayEnd",value:function minWorkDayEnd(){return Object(n.b)(Object(n.Eb)(this.workDayEnd,this.workDayStart),1)}},{kind:"get",key:"maxWorkDayEnd",value:function maxWorkDayEnd(){return Object(n.N)(this.workDayEnd)}},{kind:"get",key:"daysOfWeek",value:function daysOfWeek(){if(!this._daysOfWeek){var e,t;let r=kendo.culture().calendar.days.names;this._daysOfWeek=R()(r).call(r,((e,t)=>({title:e,value:t})));let i=null!==(e=null===(t=this.firstWeekDay)||void 0===t?void 0:t.value)&&void 0!==e?e:kendo.culture().calendar.firstDay;for(let e=0;e<i;e++)this._daysOfWeek.push(this._daysOfWeek.shift())}return this._daysOfWeek}},{kind:"get",key:"firstWeekDay",value:function firstWeekDay(){return this._firstWeekDay}},{kind:"set",key:"firstWeekDay",value:function firstWeekDay(e){this._firstWeekDay=e,this._daysOfWeek=null}},{kind:"get",key:"workWeekStart",value:function workWeekStart(){return this._workWeekStart}},{kind:"set",key:"workWeekStart",value:function workWeekStart(e){this._workWeekStart=e}},{kind:"get",key:"workWeekEnd",value:function workWeekEnd(){return this._workWeekEnd}},{kind:"set",key:"workWeekEnd",value:function workWeekEnd(e){this._workWeekEnd=e}},{kind:"get",key:"locales",value:function locales(){if(!this._locales){var e;this._locales=[];for(let e of Fr()(kendo.cultures))"current"!==e&&this._locales.push({code:e,name:kendo.cultures[e].localizedName});We()(e=this._locales).call(e,((e,t)=>Object(n.j)(e.code,t.code)))}return this._locales}},{kind:"get",key:"selectedLocale",value:function selectedLocale(){return this._selectedLocale}},{kind:"set",key:"selectedLocale",value:function selectedLocale(e){this._selectedLocale=e}},{kind:"get",key:"selectedDueLinkType",value:function selectedDueLinkType(){return this._selectedDueLinkType}},{kind:"set",key:"selectedDueLinkType",value:function selectedDueLinkType(e){this._selectedDueLinkType=e}},{kind:"get",key:"selectedDueLinkTypeAllDay",value:function selectedDueLinkTypeAllDay(){return this._selectedDueLinkTypeAllDay}},{kind:"set",key:"selectedDueLinkTypeAllDay",value:function selectedDueLinkTypeAllDay(e){this._selectedDueLinkTypeAllDay=e}},{kind:"get",key:"dueLinkTypes",value:function dueLinkTypes(){return this._dueLinkTypes||(this._dueLinkTypes=[{title:this._$translate.instant("DIALOGS.START_TIME"),value:me.e.DueStart},{title:this._$translate.instant("DIALOGS.END_TIME"),value:me.e.DueEnd},{title:this._$translate.instant("DIALOGS.NOT_LINKED"),value:me.e.NotLinked}]),this._dueLinkTypes}},{kind:"get",key:"dueLinkTypesAllDay",value:function dueLinkTypesAllDay(){return this._dueLinkTypesAllDay||(this._dueLinkTypesAllDay=[{title:this._$translate.instant("DIALOGS.START_DATE"),value:me.e.DueStart},{title:this._$translate.instant("DIALOGS.END_DATE"),value:me.e.DueEnd},{title:this._$translate.instant("DIALOGS.NOT_LINKED"),value:me.e.NotLinked}]),this._dueLinkTypesAllDay}},{kind:"get",key:"selectedDefaultCardDuration",value:function selectedDefaultCardDuration(){return this._selectedDefaultCardDuration}},{kind:"set",key:"selectedDefaultCardDuration",value:function selectedDefaultCardDuration(e){this._selectedDefaultCardDuration=e}},{kind:"get",key:"defaultCardDurations",value:function defaultCardDurations(){return this._defaultCardDurations||(this._defaultCardDurations=[{title:this._$translate.instant("DIALOGS.FIFTEEN_MINUTES"),isAllDay:!1,value:15},{title:this._$translate.instant("DIALOGS.HALF_HOUR"),isAllDay:!1,value:30},{title:this._$translate.instant("DIALOGS.ONE_HOUR"),isAllDay:!1,value:60},{title:this._$translate.instant("DIALOGS.ONE_DAY"),isAllDay:!0,value:1}]),this._defaultCardDurations}},{kind:"get",key:"currentBoardLists",value:function currentBoardLists(){return this._currentBoardLists}},{kind:"get",key:"selectedDefaultList",value:function selectedDefaultList(){return this._selectedDefaultList}},{kind:"set",key:"selectedDefaultList",value:function selectedDefaultList(e){this._selectedDefaultList=e}},{kind:"get",key:"selectedDefaultCardPosition",value:function selectedDefaultCardPosition(){return this._selectedDefaultCardPosition}},{kind:"set",key:"selectedDefaultCardPosition",value:function selectedDefaultCardPosition(e){this._selectedDefaultCardPosition=e}},{kind:"get",key:"defaultCardPositions",value:function defaultCardPositions(){return this._defaultCardPositions||(this._defaultCardPositions=[{title:this._$translate.instant("DIALOGS.CARD_POSITION_SETTINGS_TOP"),value:me.b.Top},{title:this._$translate.instant("DIALOGS.CARD_POSITION_SETTINGS_BOTTOM"),value:me.b.Bottom}]),this._defaultCardPositions}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._$mdDialog.hide()}},{kind:"method",key:"saveSettingsAsync",value:async function saveSettingsAsync(){try{this.hideDialog(),this._appCommonSrv.setSchedulerButtonBusy(!0),this._appCommonSrv.setSchedulerBusy(!0);let e=!1,t=Object(n.Hb)(this.workDayStart),r=Object(n.Hb)(this.workDayEnd);if(this._globalSettings.workDayStart===t&&this._globalSettings.workDayEnd===r||(this._globalSettings.workDayStart=t,this._globalSettings.workDayEnd=r,this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.WorkHoursChanged),e=!0),this._globalSettings.firstWeekDay!==this.firstWeekDay.value){let t=null!==this._globalSettings.firstWeekDay;this._globalSettings.firstWeekDay=this.firstWeekDay.value,t&&this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.FirstWeekDayChanged),e=!0}if(this._globalSettings.workWeekStart===this.workWeekStart.value&&this._globalSettings.workWeekEnd===this.workWeekEnd.value||(this._globalSettings.workWeekStart=this.workWeekStart.value,this._globalSettings.workWeekEnd=this.workWeekEnd.value,this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.WorkDaysChanged),e=!0),this._globalSettings.locale!==this.selectedLocale.code){let t=this._appCommonSrv.getLocale(),r=null!==this._globalSettings.locale;this._globalSettings.locale=this.selectedLocale.code,r&&this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.LocaleChanged);let i=this.selectedLocale.code;this._appCommonSrv.applyLocale(i),this._appCommonSrv.checkReloadLocaleRequired(t,i),this._localSettings.locale=i,this._settingsSrv.saveLocal(),e=!0}let i=!1,a=!1;this._currentBoard.isReadOnly||(this._currentBoard.dueLinkType!==this.selectedDueLinkType.value&&(this._currentBoard.dueLinkType=this.selectedDueLinkType.value,this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.DueLinkChanged),i=!0),this._currentBoard.dueLinkTypeAllDay!==this.selectedDueLinkTypeAllDay.value&&(this._currentBoard.dueLinkTypeAllDay=this.selectedDueLinkTypeAllDay.value,this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.DueLinkAllDayChanged),i=!0),this._currentBoard.defaultCardIsAllDay===this.selectedDefaultCardDuration.isAllDay&&this._currentBoard.defaultCardDuration===this.selectedDefaultCardDuration.value||(this._currentBoard.defaultCardIsAllDay=this.selectedDefaultCardDuration.isAllDay,this._currentBoard.defaultCardDuration=this.selectedDefaultCardDuration.value,this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.DefaultDurationChanged),i=!0),this._currentBoard.defaultListId!==this.selectedDefaultList.id&&(this._currentBoard.defaultListId=this.selectedDefaultList.id,this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.DefaultListChanged),i=!0,a=!0),this._currentBoard.defaultCardPosition!==this.selectedDefaultCardPosition.value&&(this._currentBoard.defaultCardPosition=this.selectedDefaultCardPosition.value,this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.DefaultCardPositionChanged),i=!0)),await P.a.all([(()=>{if(e)return this._settingsSrv.saveGlobalAsync()})(),(()=>{if(i)return this._settingsSrv.saveBoardSettingsAsync(this._currentBoard.id,{dueLinkType:this.selectedDueLinkType.value,dueLinkTypeAllDay:this.selectedDueLinkTypeAllDay.value,defaultCardIsAllDay:this.selectedDefaultCardDuration.isAllDay,defaultCardDuration:this.selectedDefaultCardDuration.value,defaultListId:this.selectedDefaultList.id,defaultCardPosition:this.selectedDefaultCardPosition.value})})()]),(e||i)&&this._$rootScope.$broadcast(x.n.SettingsChanged),a&&this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Lists})}catch(e){this._$log.error("Planyway settings dialog save error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway settings dialog save error",e,{class:this.constructor.name,method:this.saveSettingsAsync.name})}finally{this._appCommonSrv.setSchedulerButtonBusy(!1),this._appCommonSrv.setSchedulerBusy(!1)}}},{kind:"get",key:"_globalSettings",value:function _globalSettings(){return this._settingsSrv.currentSettings.global}},{kind:"get",key:"_localSettings",value:function _localSettings(){return this._settingsSrv.currentSettings.local}}]}}));function ShareBoardDialogController_getDecoratorsApi(){ShareBoardDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ShareBoardDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ShareBoardDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ShareBoardDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ShareBoardDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ShareBoardDialogController_createElementDescriptor(e){var t,r=ShareBoardDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ShareBoardDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ShareBoardDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ShareBoardDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ShareBoardDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ShareBoardDialogController_toPropertyKey(e){var t=function ShareBoardDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let xr=function ShareBoardDialogController_decorate(e,t,r,i){var a,n=ShareBoardDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ShareBoardDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ShareBoardDialogController_isDataDescriptor(a.descriptor)||ShareBoardDialogController_isDataDescriptor(i.descriptor)){if(ShareBoardDialogController_hasDecorators(a)||ShareBoardDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ShareBoardDialogController_hasDecorators(a)){if(ShareBoardDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ShareBoardDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ShareBoardDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$window","$log","$timeout","$translate","$mdDialog","notificationSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class ShareBoardDialogController{constructor(t,r,i,a,n,o,s,l,d){e(this),this._$scope=t,this._$window=r,this._$log=i,this._$timeout=a,this._$translate=n,this._$mdDialog=o,this._notificationSrv=s,this._telemetrySrv=l,this._trelloIntegrationSrv=d,this._currentBoardId=this._trelloIntegrationSrv.getCurrentBoardId(),this._currentBoard=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId)}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"shareBoardDialogCtrl"}},{kind:"get",key:"sharePermissionLevels",value:function sharePermissionLevels(){if(!this._sharePermissionLevels&&(this._sharePermissionLevels=[],this._currentBoard.memberships.get(this._currentMemberId)===x.rb.Admin)){this._sharePermissionLevels.push({permissionLevel:x.mb.Private,title:this._$translate.instant("DIALOGS.BOARD_PRIVATE_TITLE"),subtitle:this._$translate.instant("DIALOGS.BOARD_PRIVATE_SUBTITLE")});let e=this._trelloIntegrationSrv.getTrelloOrganizationById(this._currentBoard.organizationId);e&&this._sharePermissionLevels.push({permissionLevel:x.mb.Organization,title:this._$translate.instant("DIALOGS.BOARD_ORGANIZATION_TITLE"),subtitle:this._$translate.instant("DIALOGS.BOARD_ORGANIZATION_SUBTITLE",{organizationName:e.name})}),this._sharePermissionLevels.push({permissionLevel:x.mb.Public,isCommentsPublic:!0,title:this._$translate.instant("DIALOGS.BOARD_PUBLIC_TITLE"),subtitle:this._$translate.instant("DIALOGS.BOARD_PUBLIC_SUBTITLE")})}return this._sharePermissionLevels}},{kind:"get",key:"sharePermissionLevel",value:function sharePermissionLevel(){var e;this._sharePermissionLevel||(this._sharePermissionLevel=c()(e=this.sharePermissionLevels).call(e,(e=>e.permissionLevel===this._currentBoard.permissionLevel&&(void 0===e.isCommentsPublic||e.isCommentsPublic===this._currentBoard.isCommentsPublic))));return this._sharePermissionLevel}},{kind:"set",key:"sharePermissionLevel",value:function sharePermissionLevel(e){e&&this.sharePermissionLevel!==e&&(async()=>{try{this.isBusy=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ShareBoardPermissionChanged,{permissionLevel:e.permissionLevel}),this._currentBoard=await this._trelloIntegrationSrv.updateTrelloBoardAsync(this._currentBoardId,{permissionLevel:e.permissionLevel,isCommentsPublic:e.isCommentsPublic});let t=this._trelloIntegrationSrv.getCurrentBoardConnectedBoards();this._trelloIntegrationSrv.setCurrentBoardConnectedBoards(t),this._sharePermissionLevel=null}catch(e){this._$log.error("Trello update board permissions error:"),this._$log.error(e),this._telemetrySrv.logError("Trello update board permissions error",e,{class:this.constructor.name,method:this.sharePermissionLevel.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_BOARD_PERMISSION_ERROR"),x.A.Error)}finally{this.isBusy=!1}})()}},{kind:"get",key:"shareBoardUrl",value:function shareBoardUrl(){if(!this._shareBoardUrl){let e=new le.a;e.set(U.e,this._currentBoardId),e.set(U.V,x.G.ShareBoard),this._shareBoardUrl=`${U.L}?${e}`}return this._shareBoardUrl}},{kind:"method",key:"onShareBoardUrlCopy",value:function onShareBoardUrlCopy(){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ShareBoardLinkCopied,{permissionLevel:this.sharePermissionLevel.permissionLevel})}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._$mdDialog.cancel()}},{kind:"method",key:"hideDialog",value:function hideDialog(){this._$mdDialog.hide()}},{kind:"method",key:"copyToClipboard",value:function copyToClipboard(){this.isBusy||(a()(".pw-js-copy-to-clipboard-input").trigger("focus"),this._$timeout((()=>{this._$window.document.execCommand("copy")&&this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.URL_COPIED_TO_CLIPBOARD"),x.A.Success)}),250,!1))}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}}]}}));function ShortcutsDialogController_getDecoratorsApi(){ShortcutsDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ShortcutsDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ShortcutsDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ShortcutsDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ShortcutsDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ShortcutsDialogController_createElementDescriptor(e){var t,r=ShortcutsDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ShortcutsDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ShortcutsDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function ShortcutsDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ShortcutsDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ShortcutsDialogController_toPropertyKey(e){var t=function ShortcutsDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Gr=function ShortcutsDialogController_decorate(e,t,r,i){var a,n=ShortcutsDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ShortcutsDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ShortcutsDialogController_isDataDescriptor(a.descriptor)||ShortcutsDialogController_isDataDescriptor(i.descriptor)){if(ShortcutsDialogController_hasDecorators(a)||ShortcutsDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ShortcutsDialogController_hasDecorators(a)){if(ShortcutsDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ShortcutsDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ShortcutsDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$translate","appCommonSrv","mdPanelRef"])],(function(e){return{F:class ShortcutsDialogController{constructor(t,r,i){e(this),this._$translate=t,this._appCommonSrv=r,this._mdPanelRef=i}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"ShortcutsDialogCtrl"}},{kind:"get",key:"shortcuts",value:function shortcuts(){return this._shortcuts||(this._shortcuts=[{description:this._$translate.instant("DIALOGS.SHORTCUTS_DELETE_CARD_DESCRIPTION"),keys:this._appCommonSrv.isMacOS()?"⌘⌫":"Shift + Delete"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_DUPLICATE_CARD_DESCRIPTION"),keys:this._appCommonSrv.isMacOS()?"⌘D":"Ctrl + D"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_REMOVE_CARD_DESCRIPTION"),keys:this._appCommonSrv.isMacOS()?"⌫":"Delete"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_ASSIGN_YOURSELF_DESCRIPTION"),keys:"Space"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_QUICK_ADD_LABEL_DESCRIPTION"),keys:"0...9"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_ARCHIVE_CARD_DESCRIPTION"),keys:"C"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_MY_CARDS_DESCRIPTION"),keys:"Q"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_TOGGLE_LABEL_DESCRIPTION"),keys:"L"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_TOGGLE_MEMBER_DESCRIPTION"),keys:"M"},{description:this._$translate.instant("DIALOGS.SHORTCUTS_WATCH_DESCRIPTION"),keys:"S"}]),this._shortcuts}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._mdPanelRef.close()}}]}}));var zr=r(680),Ur=r.n(zr),Wr=r(101),jr=r.n(Wr);function TrialExpiredDialogController_getDecoratorsApi(){TrialExpiredDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrialExpiredDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrialExpiredDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrialExpiredDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrialExpiredDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrialExpiredDialogController_createElementDescriptor(e){var t,r=TrialExpiredDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrialExpiredDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrialExpiredDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function TrialExpiredDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrialExpiredDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrialExpiredDialogController_toPropertyKey(e){var t=function TrialExpiredDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Hr={[me.d.USD]:"$",[me.d.ARS]:"ARS",[me.d.AUD]:"A$",[me.d.BRL]:"R$",[me.d.CAD]:"CA$",[me.d.CNY]:"¥",[me.d.CZK]:"Kč",[me.d.DKK]:"Kr.",[me.d.EUR]:"€",[me.d.HKD]:"HK$",[me.d.HUF]:"Ft",[me.d.INR]:"₹",[me.d.JPY]:"¥",[me.d.MXN]:"Mex$",[me.d.TWD]:"NT$",[me.d.NZD]:"NZ$",[me.d.NOK]:"kr",[me.d.PLN]:"zł",[me.d.GBP]:"£",[me.d.RUB]:"₽",[me.d.SGD]:"S$",[me.d.ZAR]:"R",[me.d.KRW]:"₩",[me.d.SEK]:"kr",[me.d.CHF]:"Fr.",[me.d.THB]:"฿"};let Vr=function TrialExpiredDialogController_decorate(e,t,r,i){var a,n=TrialExpiredDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrialExpiredDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrialExpiredDialogController_isDataDescriptor(a.descriptor)||TrialExpiredDialogController_isDataDescriptor(i.descriptor)){if(TrialExpiredDialogController_hasDecorators(a)||TrialExpiredDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrialExpiredDialogController_hasDecorators(a)){if(TrialExpiredDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrialExpiredDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrialExpiredDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$sce","$log","$translate","$window","backendSrv","dialogSrv","notificationSrv","telemetrySrv","mdPanelRef"])],(function(e){return{F:class TrialExpiredDialogController{constructor(t,r,i,a,n,o,s,l,d,c){e(this),this._$scope=t,this._$sce=r,this._$log=i,this._$translate=a,this._$window=n,this._backendSrv=o,this._dialogSrv=s,this._notificationSrv=l,this._telemetrySrv=d,this._mdPanelRef=c,this._loadPricingAsync()}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"trialExpiredDialogCtrl"}},{kind:"get",key:"plans",value:function plans(){return this._plans||(this._plans=[{title:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_FREE_TITLE"),description:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_FREE_TEXT"),featuresTitle:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_FREE_FEATURES_TITLE"),features:this._getFeatures("DIALOGS.TRIAL_EXPIRED_DIALOG_FREE_FEATURE",8),btnText:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_FREE_BUTTON_TEXT"),handler:()=>this._stayFreeClicked()},{licenseType:me.g.Pro,title:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_PRO_TITLE"),isPriceAvailable:!0,featuresTitle:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_PRO_FEATURES_TITLE"),features:this._getFeatures("DIALOGS.TRIAL_EXPIRED_DIALOG_PRO_FEATURE",8),btnText:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_PRO_BUTTON_TEXT"),handler:e=>this._purchaseClicked(e)},{licenseType:me.g.Team,title:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_TEAM_TITLE"),isRecommended:!0,isPriceAvailable:!0,featuresTitle:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_TEAM_FEATURES_TITLE"),features:this._getFeatures("DIALOGS.TRIAL_EXPIRED_DIALOG_TEAM_FEATURE",4),btnText:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_TEAM_BUTTON_TEXT"),handler:e=>this._purchaseClicked(e)},{title:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_ENTERPRISE_TITLE"),description:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_ENTERPRISE_TEXT"),featuresTitle:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURES_TITLE"),features:this._getFeatures("DIALOGS.TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURE",6),btnText:this._$translate.instant("DIALOGS.TRIAL_EXPIRED_DIALOG_ENTERPRISE_BUTTON_TEXT"),handler:()=>this._contactUsClicked()}]),this._plans}},{kind:"get",key:"paymentPeriod",value:function paymentPeriod(){return void 0===this._paymentPeriod&&(this._paymentPeriod=me.i.Year),this._paymentPeriod}},{kind:"set",key:"paymentPeriod",value:function paymentPeriod(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.TrialExpiredPaymentPeriodChanged,{paymentPeriod:e}),this._paymentPeriod=e,this._updatePrices()}},{kind:"get",key:"isPricingLoaded",value:function isPricingLoaded(){return!!this._pricing}},{kind:"method",key:"cancelDialog",value:function cancelDialog(){this._mdPanelRef.close()}},{kind:"method",key:"_loadPricingAsync",value:async function _loadPricingAsync(){try{this._pricing=await this._backendSrv.getPricingAsync(),this._updatePrices()}catch(e){this._$log.error("Planyway load pricing error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway load pricing error",e,{class:this.constructor.name,method:this._loadPricingAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.LOAD_PRICING_ERROR"),x.A.Error)}}},{kind:"method",key:"_updatePrices",value:function _updatePrices(){if(this.isPricingLoaded)for(let t of this.plans){var e;if(!t.isPriceAvailable)continue;let r=this._pricing[t.licenseType];if(!r)continue;let i=r[this.paymentPeriod];if(!i)continue;let a=this.paymentPeriod===me.i.Month?i.price:i.price/12,n=Math.round(100*a)/100,o=jr()(n).toString(),s=Ur()(e=Math.round(100*(n-o)).toString()).call(e,2,"0");this._$scope.$evalAsync((()=>{t.price={currency:Hr[i.currency]||i.currency,intPrice:o,modPrice:s}}))}}},{kind:"method",key:"_getFeatures",value:function _getFeatures(e,t){var r;return R()(r=[...new Array(t)]).call(r,((t,r)=>this._$translate.instant(`${e}_${r+1}`)))}},{kind:"method",key:"_stayFreeClicked",value:function _stayFreeClicked(){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.TrialExpiredStayFreeClicked),this._mdPanelRef.close("success")}},{kind:"method",key:"_purchaseClicked",value:function _purchaseClicked(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.TrialExpiredPurchaseNowClicked,{paymentPeriod:this.paymentPeriod,licenseType:e.licenseType});let t=new le.a;t.set("action","buy"),t.set("paymentPeriod",this.paymentPeriod),t.set("licenseType",e.licenseType),this._$window.open(`${U.J}/pricing?${t.toString()}`,"_blank"),this._mdPanelRef.close("success")}},{kind:"method",key:"_contactUsClicked",value:async function _contactUsClicked(){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.TrialExpiredContactUsClicked),await this._dialogSrv.showContactUsDialogAsync()?this._mdPanelRef.close("success"):this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.ContactUsClosed)}}]}}));var Yr=r(33),Kr=r.n(Yr),Xr=r(27),qr=r.n(Xr),Qr=r(99),Jr=r.n(Qr),Zr=r(681),ei=r.n(Zr);function WelcomeSurveyDialogController_getDecoratorsApi(){WelcomeSurveyDialogController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!WelcomeSurveyDialogController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=WelcomeSurveyDialogController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:WelcomeSurveyDialogController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=WelcomeSurveyDialogController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function WelcomeSurveyDialogController_createElementDescriptor(e){var t,r=WelcomeSurveyDialogController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function WelcomeSurveyDialogController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function WelcomeSurveyDialogController_hasDecorators(e){return e.decorators&&e.decorators.length}function WelcomeSurveyDialogController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function WelcomeSurveyDialogController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function WelcomeSurveyDialogController_toPropertyKey(e){var t=function WelcomeSurveyDialogController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ti=function WelcomeSurveyDialogController_decorate(e,t,r,i){var a,n=WelcomeSurveyDialogController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function WelcomeSurveyDialogController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(WelcomeSurveyDialogController_isDataDescriptor(a.descriptor)||WelcomeSurveyDialogController_isDataDescriptor(i.descriptor)){if(WelcomeSurveyDialogController_hasDecorators(a)||WelcomeSurveyDialogController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(WelcomeSurveyDialogController_hasDecorators(a)){if(WelcomeSurveyDialogController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}WelcomeSurveyDialogController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,WelcomeSurveyDialogController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$sce","$translate","backendSrv","licenseSrv","platformSrv","telemetrySrv","trelloIntegrationSrv","mdPanelRef"])],(function(e){return{F:class WelcomeSurveyDialogController{constructor(t,r,i,a,n,o,s,l){e(this),this._$sce=t,this._$translate=r,this._backendSrv=i,this._licenseSrv=a,this._platformSrv=n,this._telemetrySrv=o,this._trelloIntegrationSrv=s,this._mdPanelRef=l}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"welcomeSurveyDialogCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){var e;return null!==(e=this._isBusy)&&void 0!==e&&e}},{kind:"set",key:"isBusy",value:function isBusy(e){this._isBusy=e}},{kind:"get",key:"welcomeMessage",value:function welcomeMessage(){if(!this._welcomeMessage){var e;let t=null!==(e=this._trelloIntegrationSrv.getMemberName())&&void 0!==e?e:"";this._welcomeMessage=this._$translate.instant("DIALOGS.WELCOME_SURVEY_GREETING",{memberName:t.split(" ")[0]})}return this._welcomeMessage}},{kind:"get",key:"questions",value:function questions(){if(!this._questions){this._questions=[{name:this._$translate.instant("DIALOGS.WELCOME_SURVEY_WHAT_WILL_BE_USED_FOR"),options:[{name:this._$translate.instant("MENU.WELCOME_SURVEY_WHAT_WILL_BE_USED_FOR_1"),icon:"icons-24:briefcase-outline"},{name:this._$translate.instant("MENU.WELCOME_SURVEY_WHAT_WILL_BE_USED_FOR_2"),icon:"icons-24:user-outline"}],optionsLayout:"grid",inputType:"button",gridColumns:2,visible:!0,nextQuestionIndex:{[this._$translate.instant("MENU.WELCOME_SURVEY_WHAT_WILL_BE_USED_FOR_1")]:1,[this._$translate.instant("MENU.WELCOME_SURVEY_WHAT_WILL_BE_USED_FOR_2")]:2}},{name:this._$translate.instant("DIALOGS.WELCOME_SURVEY_WHAT_COMPANY_SIZE"),options:this._getOptions("MENU.WELCOME_SURVEY_WHAT_COMPANY_SIZE",6),optionsLayout:"grid",inputType:"button",gridColumns:3,visible:!1,nextQuestionIndex:3},{name:this._$translate.instant("DIALOGS.WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH"),options:this._getOptions("MENU.WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH",6),optionsLayout:"grid",inputType:"button",gridColumns:3,visible:!1},{name:this._$translate.instant("DIALOGS.WELCOME_SURVEY_WHAT_ROLE"),options:this._getOptions("MENU.WELCOME_SURVEY_WHAT_ROLE",6),optionsLayout:"list",placeholder:this._$translate.instant("DIALOGS.WELCOME_SURVEY_WHAT_ROLE_PLACEHOLDER"),inputType:"select",visible:!1}];for(let e of this._questions)C()(e,"selectedOption",{get:()=>{var t;return null!==(t=e._selectedOption)&&void 0!==t?t:null},set:t=>{var r;e._selectedOption=t;let i=_()(r=this._questions).call(r,e);for(let[e,t]of Jr()(a=this._questions).call(a)){var a;e>i&&(t.visible=!1)}if(e.nextQuestionIndex){let r="object"==typeof e.nextQuestionIndex?e.nextQuestionIndex[t.name]:e.nextQuestionIndex,i=this._questions[r];i.visible=!0;let a=i.selectedOption;a&&(i.selectedOption=a)}}})}return this._questions}},{kind:"get",key:"imageUrl",value:function imageUrl(){return this._imageUrl||(this._imageUrl=this._platformSrv.getPlatformUrl(ei.a)),this._imageUrl}},{kind:"get",key:"trialTipsTitle",value:function trialTipsTitle(){return this._trialTipsTitle||(this._trialTipsTitle=this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.WELCOME_SURVEY_TRIAL_TIPS_TITLE"))),this._trialTipsTitle}},{kind:"get",key:"trialTips",value:function trialTips(){return this._trialTips||(this._trialTips=[{name:this._$translate.instant("DIALOGS.WELCOME_SURVEY_TRIAL_TIP_FEATURES_NAME"),description:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.WELCOME_SURVEY_TRIAL_TIP_FEATURES_DESCRIPTION"))},{name:this._$translate.instant("DIALOGS.WELCOME_SURVEY_TRIAL_TIP_CREDIT_CARD_NAME"),description:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.WELCOME_SURVEY_TRIAL_TIP_CREDIT_CARD_DESCRIPTION"))},{name:this._$translate.instant("DIALOGS.WELCOME_SURVEY_TRIAL_TIP_WHEN_ENDED_NAME"),description:this._$sce.trustAsHtml(this._$translate.instant("DIALOGS.WELCOME_SURVEY_TRIAL_TIP_WHEN_ENDED_DESCRIPTION"))}]),this._trialTips}},{kind:"method",key:"submitAsync",value:async function submitAsync(){this._sendSurvey(),await this._activateTrialLicenseAsync(),this._mdPanelRef.close("success")}},{kind:"method",key:"_activateTrialLicenseAsync",value:async function _activateTrialLicenseAsync(){if(!this._licenseSrv.isLicenseActive()&&this._licenseSrv.isTrialAvailable())try{this.isBusy=!0,this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.TrialStarted,{trialSource:x.cb.OnboardingDialog}),await this._licenseSrv.activateTrialLicenseAsync()}finally{this.isBusy=!1}}},{kind:"method",key:"_sendSurvey",value:function _sendSurvey(){let e=this._getAnswers();this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.SurveyPassed,e),this._backendSrv.sendSurveyAsync(e);try{localStorage.planywayWelcomeSurveyAnswers=qr()(e)}catch(e){}}},{kind:"method",key:"_getOptions",value:function _getOptions(e,t){var r,i;return R()(r=[...Kr()(i=Array(t)).call(i)]).call(r,(t=>({name:this._$translate.instant(`${e}_${t+1}`)})))}},{kind:"method",key:"_getAnswers",value:function _getAnswers(){var e,t,r;let i=this.questions[0].selectedOption?this.questions[0].nextQuestionIndex[this.questions[0].selectedOption.name]:1;return{usedFor:null===(e=this.questions[0].selectedOption)||void 0===e?void 0:e.name,teamSize:null===(t=this.questions[i].selectedOption)||void 0===t?void 0:t.name,role:null===(r=this.questions[3].selectedOption)||void 0===r?void 0:r.name}}}]}}));var ri=r(682),ii=r.n(ri),ai=r(683),ni=r.n(ai),oi=r(684),si=r.n(oi),li=r(685),di=r.n(li),ci=r(686),hi=r.n(ci),ui=r(687),pi=r.n(ui),mi=r(688),fi=r.n(mi),yi=r(689),vi=r.n(yi),_i=r(690),gi=r.n(_i),Ci=r(691),ki=r.n(Ci),Di=r(692),Ei=r.n(Di),bi=r(693),wi=r.n(bi),Si=r(694),Ti=r.n(Si),Ai=r(695),Ii=r.n(Ai),Ri=r(696),Oi=r.n(Ri),Pi=r(697),Li=r.n(Pi),Mi=r(698),Ni=r.n(Mi),Bi=r(699),Fi=r.n(Bi),$i=r(700),xi=r.n($i),Gi=r(701),zi=r.n(Gi),Ui=r(702),Wi=r.n(Ui),ji=r(703),Hi=r.n(ji),Vi=r(704),Yi=r.n(Vi),Ki=r(705),Xi=r.n(Ki),qi=r(706),Qi=r.n(qi),Ji=r(707),Zi=r.n(Ji),ea=r(708),ta=r.n(ea),ra=r(709),ia=r.n(ra),aa=r(710),na=r.n(aa),oa=r(711),sa=r.n(oa),la=r(712),da=r.n(la),ca=r(713),ha=r.n(ca),ua=r(714),pa=r.n(ua),ma=r(715),fa=r.n(ma),ya=r(716),va=r.n(ya),_a=r(717),ga=r.n(_a);function DialogService_getDecoratorsApi(){DialogService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DialogService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DialogService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DialogService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DialogService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DialogService_createElementDescriptor(e){var t,r=DialogService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DialogService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DialogService_hasDecorators(e){return e.decorators&&e.decorators.length}function DialogService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DialogService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DialogService_toPropertyKey(e){var t=function DialogService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Ca=[ie,oe,Se,Ae,Ne,Fe,Ke,wt,Nr,Bt,Ft,$t,xt,Gt,Sr,Mr,Gr,Vr,ti];let ka=function DialogService_decorate(e,t,r,i){var a,n=DialogService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DialogService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DialogService_isDataDescriptor(a.descriptor)||DialogService_isDataDescriptor(i.descriptor)){if(DialogService_hasDecorators(a)||DialogService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DialogService_hasDecorators(a)){if(DialogService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DialogService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DialogService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$injector","$rootScope","$log","$window","$timeout","$translate","$mdDialog","$mdMenu","$mdPanel","htmlHelperSrv","settingsSrv"])],(function(e){return{F:class DialogService{constructor(t,r,i,a,n,o,s,l,d,c,h){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$window=a,this._$timeout=n,this._$translate=o,this._$mdDialog=s,this._$mdMenu=l,this._$mdPanel=d,this._htmlHelperSrv=c,this._settingsSrv=h;for(let e of Ca)this._$mdPanel.newPanelGroup(e.controllerName,{maxOpen:1});this._currentBoardFilterDialog=null}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"dialogSrv"}},{kind:"get",key:"_onboardingSrv",value:function _onboardingSrv(){return this._onboardingSrvLazy||(this._onboardingSrvLazy=this._$injector.get("onboardingSrv")),this._onboardingSrvLazy}},{kind:"method",key:"showAddCalendarsDialogAsync",value:async function showAddCalendarsDialogAsync(e){let t,r,i=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),a=new P.a((e=>{t=e}));const n=["pw-dialog"],o=["pw-panel-backdrop"];try{let s=this._createPanelConfig({getPanelRef:()=>r,templateUrl:si.a,targetEvent:e,disableParentScroll:!0,propagateContainerEvents:!1,controller:oe.controllerName,zIndex:1998,position:i,panelClass:n.join(" "),onDomAdded:()=>{var e;return null===(e=r)||void 0===e?void 0:e.panelContainer.addClass(o.join(" "))},onCloseSuccess:()=>t()});return r=this._$mdPanel.create(s),await r.open(),await a}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show add calendars dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showConfirmAsync",value:async function showConfirmAsync(e,t,r={}){try{let i=r.buttons||[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,dialogResult:!0}],a=this._settingsSrv.currentSettings.global;if(r.dontAskType&&a.dontAskConfirmDialogs[r.dontAskType]&&i.length>0){let e=c()(i).call(i,(e=>e.isPrimary));if(e)return e.dialogResult}let n=this._$mdDialog.confirm(this._createDialogConfig({templateUrl:vi.a,controller:Be.controllerName,locals:{title:e,message:t,showDontAskCheckbox:!!r.dontAskType,buttons:i}})),{dontAskChecked:o,dialogResult:s}=await this._$mdDialog.show(n)||{};if(r.dontAskType&&o){let e=c()(i).call(i,(e=>e.isPrimary));e&&e.dialogResult===s&&(a.dontAskConfirmDialogs[r.dontAskType]=!0,this._settingsSrv.saveGlobalAsync())}return s}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway confirm dialog showing error:"),this._$log.error(e)}}}},{kind:"method",key:"showGoogleConnectDialogAsync",value:async function showGoogleConnectDialogAsync(e){try{return await this._$mdDialog.show(this._createDialogConfig({templateUrl:Ni.a,controller:At.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show google connect error:"),this._$log.error(e)}}}},{kind:"method",key:"showGoogleSyncRestartDialogAsync",value:function showGoogleSyncRestartDialogAsync(e){return new P.a((async t=>{try{let r=this._$mdDialog.confirm(this._createDialogConfig({templateUrl:Fi.a,controller:It.controllerName,targetEvent:e,locals:{onSyncStopped:t}}));await this._$mdDialog.show(r)}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show stop Google sync dialog error:"),this._$log.error(e)}t()}}))}},{kind:"method",key:"showGoogleSyncStartDialogAsync",value:function showGoogleSyncStartDialogAsync(e){return new P.a((async t=>{try{await this._$mdDialog.show(this._createDialogConfig({templateUrl:xi.a,controller:Rt.controllerName,targetEvent:e,locals:{onSyncStarted:t}}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show start Google sync dialog error:"),this._$log.error(e)}t()}}))}},{kind:"method",key:"showICalEditDialogAsync",value:async function showICalEditDialogAsync(e,t){try{await this._$mdDialog.show(this._createDialogConfig({templateUrl:zi.a,controller:Ot.controllerName,targetEvent:t,locals:{calendarId:e}}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show iCal edit dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showICalExportDialogAsync",value:async function showICalExportDialogAsync(e){try{await this._$mdDialog.show(this._createDialogConfig({templateUrl:Wi.a,controller:Pt.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show iCal export dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showICalImportDialogAsync",value:async function showICalImportDialogAsync(e){try{return await this._$mdDialog.show(this._createDialogConfig({templateUrl:Hi.a,controller:Lt.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show iCal import dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showIntegrationsDialogAsync",value:async function showIntegrationsDialogAsync(e){let t,r,i=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),a=new P.a((e=>{t=e}));const n=["pw-dialog"],o=["pw-panel-backdrop"];try{let s=this._createPanelConfig({getPanelRef:()=>r,templateUrl:Yi.a,targetEvent:e,disableParentScroll:!0,propagateContainerEvents:!1,controller:Bt.controllerName,zIndex:1998,position:i,panelClass:n.join(" "),onDomAdded:()=>{var e;return null===(e=r)||void 0===e?void 0:e.panelContainer.addClass(o.join(" "))},onCloseSuccess:()=>t()});return r=this._$mdPanel.create(s),await r.open(),await a}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show integrations dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showMemberInviteDialogAsync",value:async function showMemberInviteDialogAsync(e,t){this._currentMemberInviteDialog&&await this._currentMemberInviteDialog.close();let r,i,a=this._$mdPanel.newPanelPosition().relativeTo(e.currentTarget).withOffsetY("3px").addPanelPosition(this._$mdPanel.xPosition.ALIGN_START,this._$mdPanel.yPosition.BELOW),n=new P.a((e=>{r=e}));try{let e=this._createPanelConfig({getPanelRef:()=>i,templateUrl:Qi.a,controller:$t.controllerName,locals:{boardId:t},position:a,panelClass:"pw-dialog pw-dialog-member-invite",onComplete:(e,t)=>{this._currentMemberInviteDialog=i,this._$timeout((()=>c()(t).call(t,".pw-js-dialog-invite-members-input").trigger("focus")),0,!1)},onCloseSuccess:()=>{this._currentInviteMembersDialog=null,r()}});return i=this._$mdPanel.create(e),await i.open(),await n}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show member invite dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showMemberManageDialogAsync",value:async function showMemberManageDialogAsync(e,t,r,i){this._currentMemberManageDialog&&await this._currentMemberManageDialog.close();let a,n,o=this._$mdPanel.newPanelPosition().relativeTo(e.currentTarget).withOffsetY("3px").addPanelPosition(this._$mdPanel.xPosition.ALIGN_START,this._$mdPanel.yPosition.BELOW),s=new P.a((e=>{a=e}));try{let e=this._createPanelConfig({getPanelRef:()=>n,templateUrl:Zi.a,controller:xt.controllerName,locals:{boardId:t,mode:r,member:i},position:o,panelClass:"pw-dialog pw-dialog-member-manage",onComplete:()=>{this._currentMemberManageDialog=n},onCloseSuccess:()=>{this._currentManageMembersDialog=null,a()}});return n=this._$mdPanel.create(e),await n.open(),await s}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show member manage dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showReportDialogAsync",value:async function showReportDialogAsync(e,t){let r,i,a=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().top("20%"),n=new P.a((e=>{r=e}));const o=["pw-dialog","pw-dialog-report"],s=["pw-panel-backdrop"];try{let l=this._createPanelConfig({getPanelRef:()=>i,templateUrl:Oi.a,disableParentScroll:!0,controller:Nr.controllerName,locals:{type:e,parameters:t},zIndex:9999,position:a,panelClass:o.join(" "),onDomAdded:()=>{var e;return null===(e=i)||void 0===e?void 0:e.panelContainer.addClass(s.join(" "))},onCloseSuccess:()=>r()});return i=this._$mdPanel.create(l),await i.open(),await n}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show report dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showEditRecurringConfirmDialogAsync",value:async function showEditRecurringConfirmDialogAsync(e,t){if(!this._editRecurringConfirmDialogShown)try{let r=this._$mdDialog.confirm(this._createDialogConfig({templateUrl:Ii.a,controller:St.controllerName,locals:{cardType:e,modifyCardType:t},onRemoving:()=>{this._editRecurringConfirmDialogShown=!1}}));return this._editRecurringConfirmDialogShown=!0,await this._$mdDialog.show(r)}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway recurring edit confirm dialog showing error:"),this._$log.error(e)}}}},{kind:"method",key:"showRecurringEditorAsync",value:async function showRecurringEditorAsync(e,t,r){this._currentRecurringEditor&&await this._currentRecurringEditor.close();let i,n,o=this._$mdPanel.newPanelPosition().relativeTo(".pw-js-recurrent-btn").withOffsetY("3px").addPanelPosition(this._$mdPanel.xPosition.ALIGN_START,this._$mdPanel.yPosition.BELOW),s=new P.a((e=>{i=e}));const l=a()("pw-recurrent-select > md-menu.md-open").scope();try{let a=this._createPanelConfig({getPanelRef:()=>n,templateUrl:da.a,controller:Mr.controllerName,locals:{rule:e,start:t,isAllDay:r},position:o,panelClass:"pw-dialog pw-dialog-recurrent-editor",zIndex:2e3,onDomAdded:()=>{null==l||l.$evalAsync((()=>l.isRecurringEditorOpen=!0))},onComplete:()=>{this._currentRecurringEditor=n},onCloseSuccess:(t,r)=>{this._currentRecurringEditor=null,null==l||l.$evalAsync((()=>l.isRecurringEditorOpen=!1)),i(t&&"success"===r?t.$ctrl.recurrenceRule:e)}});return n=this._$mdPanel.create(a),await n.open(),await s}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show recurring editor error:"),this._$log.error(e)}}},{kind:"method",key:"showAddBoardByUrlDialogAsync",value:async function showAddBoardByUrlDialogAsync(e){try{return await this._$mdDialog.show(this._createDialogConfig({templateUrl:ni.a,controller:he.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show add board by URL dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showBoardDialogAsync",value:async function showBoardDialogAsync(e,t={}){try{return await this._$mdDialog.show(this._createDialogConfig({templateUrl:pi.a,controller:Te.controllerName,targetEvent:e,locals:{board:t.board,organization:t.organization}}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show board dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showShareBoardDialogAsync",value:async function showShareBoardDialogAsync(e){try{return await this._$mdDialog.show(this._createDialogConfig({templateUrl:pa.a,controller:xr.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show share board dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showBoardFilterDialogAsync",value:async function showBoardFilterDialogAsync(e,t){if(this._currentBoardFilterDialog){if(this._currentBoardFilterDialog.config.locals.board===e)return;await this._currentBoardFilterDialog.close()}let r,i,n=this._$mdPanel.newPanelPosition().relativeTo(t.currentTarget).withOffsetY("3px").addPanelPosition(this._$mdPanel.xPosition.ALIGN_START,this._$mdPanel.yPosition.BELOW),o=new P.a((e=>{r=e}));try{let s=this._createPanelConfig({getPanelRef:()=>i,templateUrl:ta.a,controller:Ae.controllerName,locals:{board:e},position:n,panelClass:"pw-dialog pw-dialog-board-filter",onComplete:()=>{this._currentBoardFilterDialog=i},onCloseSuccess:()=>{this._currentBoardFilterDialog=null,r(),a()(t.target).parent().removeClass("pw-scheduler-sidebar-calendar-item__actions--visible").prev("md-checkbox").trigger("focus")}});a()(t.target).parent().addClass("pw-scheduler-sidebar-calendar-item__actions--visible"),i=this._$mdPanel.create(s),await i.open(),await o}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show board filter menu error:"),this._$log.error(e)}}},{kind:"method",key:"showCustomFiltersDialogAsync",value:async function showCustomFiltersDialogAsync(e){try{return await this._$mdDialog.show(this._createDialogConfig({templateUrl:Ei.a,controller:Ye.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway custom filters dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showFeedbackDialogAsync",value:async function showFeedbackDialogAsync(e){try{await this._$mdDialog.show(this._createDialogConfig({templateUrl:Li.a,controller:Tt.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show feedback dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showShortcutsDialogAsync",value:async function showShortcutsDialogAsync(e){let t,r,i=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),a=new P.a((e=>{t=e}));const n=["pw-dialog","pw-dialog-shortcuts"],o=["pw-panel-backdrop"];try{let s=this._createPanelConfig({getPanelRef:()=>r,templateUrl:fa.a,targetEvent:e,disableParentScroll:!0,propagateContainerEvents:!1,controller:Gr.controllerName,zIndex:9999,position:i,panelClass:n.join(" "),onDomAdded:()=>{var e;return null===(e=r)||void 0===e?void 0:e.panelContainer.addClass(o.join(" "))},onComplete:()=>{var e,t;null===(e=r)||void 0===e||null===(t=e._restoreScroll)||void 0===t||t.call(e)},onCloseSuccess:()=>t()});return r=this._$mdPanel.create(s),await r.open(),await a}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show shortcuts dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showSettingsDialogAsync",value:async function showSettingsDialogAsync(e){try{await this._$mdDialog.show(this._createDialogConfig({templateUrl:ha.a,controller:$r.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show settings dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showAppearanceDialogAsync",value:async function showAppearanceDialogAsync(e){try{await this._$mdDialog.show(this._createDialogConfig({templateUrl:di.a,controller:we.controllerName,targetEvent:e}))}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show appearance dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showCustomFieldsSettingsDialog",value:async function showCustomFieldsSettingsDialog(e){try{await this._$mdDialog.show(this._createDialogConfig({templateUrl:ki.a,controller:je.controllerName,targetEvent:e}))}catch(e){e&&(this._$log.error("Planyway show custom field settings dialog error:"),this._$log.error(e))}}},{kind:"method",key:"showEditCardDialogAsync",value:async function showEditCardDialogAsync(e,t={}){!t.noAnimation&&this._currentEditCardDialog&&await this._currentEditCardDialog.close();const r=a()("body");let i,n,o=new P.a((e=>{i=e}));const onDocumentMouseDown=t=>{if(!n)return;if(t.offsetX>t.target.clientWidth||t.offsetY>t.target.clientHeight)return;let i=a()(t.target);i.closest(`.k-event[data-uid="${e.id}"]`)[0]||i.hasClass("timeline-item")&&i.children(`.k-event[data-uid="${e.id}"]`)[0]||i.closest(`.pw-tasks-list-item__card[data-id="${e.id}"]`)[0]||i.closest(".md-dialog-container, .md-panel-outer-wrapper")[0]||c()(r).call(r,"> .md-open-menu-container.md-active, > .k-animation-container > .k-list-container.k-state-border-up")[0]||i.closest(".k-notification")[0]||n.close()};try{let r=this._settingsSrv.currentSettings.local.editCardDialog.isDetailed,a=this._createPanelConfig({getPanelRef:()=>n,propagateContainerEvents:!r,templateUrl:Ti.a,disableParentScroll:!0,controller:wt.controllerName,locals:{calendarCard:e,cardElement:t.cardElement,allowedPositions:t.allowedPositions,schedulerWidget:t.schedulerWidget,taskListsContainer:t.taskListsContainer,allowedCardTypes:t.allowedCardTypes||J()(x.h)},panelClass:"pw-dialog pw-dialog-edit-card",onDomAdded:e=>{if(r&&(n&&(n.panelContainer.addClass("pw-panel-backdrop"),t.noAnimation&&n.panelContainer.addClass("pw-panel-backdrop--no-animation")),t.noAnimation&&this._currentEditCardDialog)){let e=this._currentEditCardDialog;e.panelContainer.addClass("pw-panel-backdrop--hiding"),this._$timeout((()=>e.close()),250,!1)}let i;null==e||e.$watch((()=>this._settingsSrv.currentSettings.local.editCardDialog.isDetailed),(t=>{var r;t?null===(r=i)||void 0===r||r():i=null==e?void 0:e.$watch((()=>n.innerWrapper.height()),(e=>{let{innerWrapper:t,panelContainer:r}=n;e>r.height()?t.offset({top:8}):t.offset().top+e>=r.height()&&t.offset({top:r.height()-t.height()-8})}))}))},onComplete:()=>{var e,t;null===(e=n)||void 0===e||null===(t=e._restoreScroll)||void 0===t||t.call(e),this._currentEditCardDialog=n,this._$window.document.addEventListener("mousedown",onDocumentMouseDown,!0),this._$window.document.addEventListener("pwMouseDown",onDocumentMouseDown,!0)},onRemoving:()=>{this._currentRecurringEditor&&this._currentRecurringEditor.close()},onCloseSuccess:t=>{this._currentEditCardDialog===n&&(this._currentEditCardDialog=null),this._$window.document.removeEventListener("mousedown",onDocumentMouseDown,!0),this._$window.document.removeEventListener("pwMouseDown",onDocumentMouseDown,!0);let r=null==t?void 0:t.$ctrl.dialogResult;e.isTempCard?i("cardCreated"===r):i("cardEdited"===r)}});return t.schedulerWidget&&(this._editCardDialogOpenCount=(this._editCardDialogOpenCount||0)+1,t.schedulerWidget.select(t.cardElement&&t.cardElement[0]?[t.cardElement.data("uid")]:null)),n=this._$mdPanel.create(a),await n.open(),await o}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;throw e}finally{t.schedulerWidget&&(this._editCardDialogOpenCount-=1,0===this._editCardDialogOpenCount&&t.schedulerWidget.select(null))}}},{kind:"method",key:"showAddAttachmentDialogAsync",value:async function showAddAttachmentDialogAsync(e){this._currentAddAttachmentDialog&&await this._currentAddAttachmentDialog.close();let t,r,i=this._$mdPanel.newPanelPosition().relativeTo(e.currentTarget).withOffsetY("3px").addPanelPosition(this._$mdPanel.xPosition.ALIGN_START,this._$mdPanel.yPosition.BELOW),a=new P.a((e=>{t=e})),n=Function.prototype;try{let e=this._createPanelConfig({getPanelRef:()=>r,templateUrl:ii.a,controller:ie.controllerName,position:i,panelClass:"pw-dialog pw-dialog-add-attachment",zIndex:2e3,onDomAdded:e=>{var t;let i=null===(t=r.panelEl)||void 0===t?void 0:t[0];i&&(n=e.$watch((()=>i.scrollHeight),(()=>{let e=i.getBoundingClientRect().bottom-window.innerHeight+8;i.style.top=e>0?-e+"px":"0px"})))},onComplete:()=>{this._currentAddAttachmentDialog=r},onCloseSuccess:(e,r)=>{var i;switch(this._currentAddAttachmentDialog=null,r){case"files":t(R()(i=e.$ctrl.files).call(i,(e=>({type:x.b.File,name:e.name,file:e}))));break;case"link":t([{type:x.b.Link,name:e.$ctrl.name||e.$ctrl.url,url:e.$ctrl.url}]);break;default:t()}},onRemoving:()=>{n()}});return r=this._$mdPanel.create(e),await r.open(),await a}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show add attachment dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showEditAttachmentDialogAsync",value:async function showEditAttachmentDialogAsync(e,t){this._currentEditAttachmentDialog&&await this._currentEditAttachmentDialog.close();let r,i,a=this._$mdPanel.newPanelPosition().relativeTo(t.currentTarget).withOffsetX("30px").addPanelPosition(this._$mdPanel.xPosition.ALIGN_START,this._$mdPanel.yPosition.ALIGN_TOPS),n=new P.a((e=>{r=e}));try{let t=this._createPanelConfig({getPanelRef:()=>i,templateUrl:wi.a,controller:Ke.controllerName,position:a,panelClass:"pw-dialog pw-dialog-edit-attachment",zIndex:2e3,locals:{attachment:e},onComplete:()=>{this._currentEditAttachmentDialog=i},onCloseSuccess:(e,t)=>{this._currentEditAttachmentDialog=null,e&&"success"===t?r({name:e.$ctrl.name,url:e.$ctrl.url}):r()}});return i=this._$mdPanel.create(t),await i.open(),await n}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show edit attachment dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showAttachmentPopupAsync",value:async function showAttachmentPopupAsync(e,t){let r,i,n=this._$mdPanel.newPanelPosition().absolute().left("0").top("0"),o=new P.a((e=>{r=e}));try{i=this._$mdPanel.create(this._createPanelConfig({templateUrl:hi.a,controller:Se.controllerName,propagateContainerEvents:!1,disableParentScroll:!0,panelClass:"pw-dialog pw-dialog-attachment-popup",position:n,locals:{attachmentUrl:e},bindToController:!1,onDomAdded:()=>{var e;a()(".pw-panel-backdrop:not(.pw-panel-backdrop--child)").addClass("pw-panel-backdrop--parent"),null===(e=i)||void 0===e||e.panelContainer.addClass("pw-panel-backdrop pw-panel-backdrop--child")},onComplete:()=>{var e,t,r;null===(e=i)||void 0===e||null===(t=e._restoreScroll)||void 0===t||t.call(e),null===(r=i)||void 0===r||r.panelContainer.on("click pwClick",(()=>{var e;return null===(e=i)||void 0===e?void 0:e.close()}))},onRemoving:()=>{a()(".pw-panel-backdrop.pw-panel-backdrop--parent").removeClass("pw-panel-backdrop--parent")},onCloseSuccess:()=>r()})),await i.open(),await o}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show attachment popup error:"),this._$log.error(e)}}}},{kind:"method",key:"showPaidFeatureOfferDialogAsync",value:async function showPaidFeatureOfferDialogAsync(e,t={}){if(!this._paidFeatureOfferDialogShown)try{this._$mdMenu.hide();let r=this._$mdDialog.confirm(this._createDialogConfig({templateUrl:na.a,controller:yr.controllerName,locals:{paidFeature:e,options:t},onRemoving:()=>{this._paidFeatureOfferDialogShown=!1}}));this._paidFeatureOfferDialogShown=!0,await this._$mdDialog.show(r)}catch(e){if(e){if(e.message===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show paid feature offer dialog error:"),this._$log.error(e)}}}},{kind:"method",key:"showNewsDialogAsync",value:async function showNewsDialogAsync(e={}){const{forceLoad:t=!1}=e;let r,i,n=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),o=new P.a((e=>{r=e}));const onDocumentMouseDown=e=>{i&&(a()(e.target).closest(".md-dialog-container, .md-panel-outer-wrapper")[0]||i.close())};try{let e=this._createPanelConfig({getPanelRef:()=>i,templateUrl:ia.a,disableParentScroll:!1,propagateContainerEvents:!1,controller:Gt.controllerName,zIndex:9999,position:n,panelClass:"pw-dialog pw-dialog-news",locals:{forceLoad:t},onDomAdded:()=>{var e;return null===(e=i)||void 0===e?void 0:e.panelContainer.addClass("pw-panel-backdrop")},onComplete:()=>{this._$window.document.addEventListener("mousedown",onDocumentMouseDown,!0),this._$window.document.addEventListener("pwMouseDown",onDocumentMouseDown,!0)},onCloseSuccess:()=>{this._$window.document.removeEventListener("mousedown",onDocumentMouseDown,!0),this._$window.document.removeEventListener("pwMouseDown",onDocumentMouseDown,!0),r()}});i=this._$mdPanel.create(e),await i.open(),await o}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show news dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showProductTourAsync",value:async function showProductTourAsync(e={}){let t,r,i=this._$mdPanel.newPanelPosition().absolute().bottom("35px").right("35px"),a=new P.a((e=>{t=e}));try{let n=this._createPanelConfig({getPanelRef:()=>r,templateUrl:sa.a,disableParentScroll:!1,propagateContainerEvents:!0,focusOnOpen:!1,preventClose:!0,hasBackdrop:!1,controller:Sr.controllerName,zIndex:999,position:i,panelClass:"pw-dialog pw-product-tour",locals:{mode:e.mode,type:e.type,stepIndex:e.stepIndex},onCloseSuccess:()=>{t()}});r=this._$mdPanel.create(n),await r.open(),await a}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show product tour error:"),this._$log.error(e)}}},{kind:"method",key:"showOnboardingTipAsync",value:async function showOnboardingTipAsync(e){let t=a()(e.target);if(!t[0]&&(await Object(n.x)(1e3),t=a()(e.target),!t[0]))return null;let r,i,o=t.scope();if(!o)return null;const hide=()=>{i&&(i.destroy(),a()(r).remove())};let s=o.$new();return u()(s,{arrowPosition:e.position.arrowPosition,title:e.title,text:e.text,close:()=>{var t;null===(t=e.onClose)||void 0===t||t.call(e),hide()}}),r=this._htmlHelperSrv.compileHtml("<pw-onboarding-tip></pw-onboarding-tip>",s,!1),a()("body").append(r),i=await this._$timeout((()=>{let i=new ee.a({element:r,target:t[0],offset:e.offset||"0 0",targetOffset:e.targetOffset||"0 0",attachment:e.position.attachment,targetAttachment:e.position.targetAttachment});return t[0].parentNode?(i.position(),i):(i.destroy(),r.parentNode.removeChild(r),null)}),0,!1),i&&(i.hide=hide),i}},{kind:"method",key:"showLoginDialogAsync",value:async function showLoginDialogAsync(e={}){const{canClose:t=!0,fullSize:r=!1}=e;let i,a,n=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),o=new P.a((e=>{i=e}));const s=["pw-dialog","pw-dialog-login"],l=["pw-panel-backdrop"];r&&(s.push("pw-dialog--full-size"),l.push("pw-panel-backdrop--full-size"),s.push("pw-dialog--full-size-with-margin"));try{let e=this._createPanelConfig({getPanelRef:()=>a,templateUrl:Xi.a,disableParentScroll:!0,propagateContainerEvents:!1,preventClose:!t,clickOutsideToClose:t,controller:Ft.controllerName,locals:{canClose:t},zIndex:1998,position:n,panelClass:s.join(" "),onDomAdded:()=>{var e;return null===(e=a)||void 0===e?void 0:e.panelContainer.addClass(l.join(" "))},onComplete:()=>{var e,t;return null===(e=a)||void 0===e||null===(t=e._restoreScroll)||void 0===t?void 0:t.call(e)},onCloseSuccess:(e,t)=>i("success"===t)});return a=this._$mdPanel.create(e),await a.open(),await o}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show login dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showWelcomeSurveyDialogAsync",value:async function showWelcomeSurveyDialogAsync(e={}){let t,r,i=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),a=new P.a((e=>{t=e}));const n=["pw-dialog","pw-dialog-welcome-survey"],o=["pw-panel-backdrop"];e.fullSize&&(n.push("pw-dialog--full-size"),o.push("pw-panel-backdrop--full-size"),n.push("pw-dialog--full-size-with-margin"));try{let e=this._createPanelConfig({getPanelRef:()=>r,templateUrl:ga.a,disableParentScroll:!0,propagateContainerEvents:!1,preventClose:!0,controller:ti.controllerName,zIndex:9999,position:i,panelClass:n.join(" "),onDomAdded:()=>{var e;return null===(e=r)||void 0===e?void 0:e.panelContainer.addClass(o.join(" "))},onComplete:()=>{var e,t;return null===(e=r)||void 0===e||null===(t=e._restoreScroll)||void 0===t?void 0:t.call(e)},onCloseSuccess:()=>t()});return r=this._$mdPanel.create(e),await r.open(),await a}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show welcome survey dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showChooseModeDialogAsync",value:async function showChooseModeDialogAsync(){let e,t,r=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),i=new P.a((t=>{e=t}));const a=["pw-dialog","pw-dialog--full-size","pw-dialog-choose-mode"],n=["pw-panel-backdrop","pw-panel-backdrop--full-size"];a.push("pw-dialog--full-size-with-margin");try{let o=this._createPanelConfig({getPanelRef:()=>t,templateUrl:fi.a,disableParentScroll:!0,propagateContainerEvents:!1,preventClose:!0,controller:Ne.controllerName,zIndex:9999,position:r,panelClass:a.join(" "),onDomAdded:()=>{var e;return null===(e=t)||void 0===e?void 0:e.panelContainer.addClass(n.join(" "))},onComplete:()=>{var e,r;return null===(e=t)||void 0===e||null===(r=e._restoreScroll)||void 0===r?void 0:r.call(e)},onCloseSuccess:(t,r)=>e(r)});return t=this._$mdPanel.create(o),await t.open(),await i}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show welcome survey dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showTrialExpiredDialogAsync",value:async function showTrialExpiredDialogAsync(e={}){let t,r,i=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),a=new P.a((e=>{t=e}));const n=["pw-dialog","pw-dialog-trial-expired"],o=["pw-panel-backdrop"];e.fullSize&&(n.push("pw-dialog--full-size"),o.push("pw-panel-backdrop--full-size"));try{let e=this._createPanelConfig({getPanelRef:()=>r,templateUrl:va.a,disableParentScroll:!0,propagateContainerEvents:!1,controller:Vr.controllerName,zIndex:9999,position:i,panelClass:n.join(" "),onDomAdded:()=>{var e;return null===(e=r)||void 0===e?void 0:e.panelContainer.addClass(o.join(" "))},onCloseSuccess:(e,r)=>t("success"===r)});return r=this._$mdPanel.create(e),await r.open(),await a}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show trial expired dialog error:"),this._$log.error(e)}}},{kind:"method",key:"showContactUsDialogAsync",value:async function showContactUsDialogAsync(){let e,t,r=this._$mdPanel.newPanelPosition().absolute().centerHorizontally().centerVertically(),i=new P.a((t=>{e=t}));const a=["pw-dialog","pw-dialog-contact-us"],n=["pw-panel-backdrop"];try{let o=this._createPanelConfig({getPanelRef:()=>t,templateUrl:gi.a,disableParentScroll:!0,propagateContainerEvents:!1,controller:Fe.controllerName,zIndex:9999,position:r,panelClass:a.join(" "),onDomAdded:()=>{var e;return null===(e=t)||void 0===e?void 0:e.panelContainer.addClass(n.join(" "))},onCloseSuccess:(t,r)=>e("success"===r)});return t=this._$mdPanel.create(o),await t.open(),await i}catch(e){if((null==e?void 0:e.message)===x.n.CloseDialogsRequested)return;this._$log.error("Planyway show contact us dialog error:"),this._$log.error(e)}}},{kind:"method",key:"_createDialogConfig",value:function _createDialogConfig(e={}){const t=a()("body");let r,i;return{parent:t,clickOutsideToClose:!0,escapeToClose:!0,disableParentScroll:!0,zIndex:9999,controllerAs:"$ctrl",...e,onComplete:(n,o)=>{var s;if(r=n,i=o,null===(s=e.onComplete)||void 0===s||s.call(e,r,i),r.$on(x.n.CloseDialogsRequested,(()=>this._$mdDialog.cancel())),i){let r=!0;i.on("mousedown pwMouseDown",(e=>{r=!a()(e.target).is("input, textarea")&&!c()(t).call(t,"> .md-open-menu-container.md-active, > .k-animation-container > .k-list-container.k-state-border-up")[0]})),i.on("mouseup pwMouseUp",(i=>{if(!a()(i.target).closest("md-dialog")[0])return c()(t).call(t,"> .md-open-menu-container.md-active")[0]?(this._$mdMenu.hide(),void i.stopPropagation()):void(r?e.clickOutsideToClose&&this._$mdDialog.cancel():i.stopPropagation())})),i.on("click",(e=>{let t=a()(e.target);t.closest("a")[0]||t.is("input[type=file]")||(e.preventDefault(),e.stopPropagation())})),c()(i).call(i,"> md-dialog").on("keydown",(e=>{e.which===x.t.Escape&&(c()(t).call(t,"> .md-open-menu-container.md-active")[0]&&(this._$mdMenu.hide(),e.stopPropagation()),i.trigger("focus"))})),i.on("keydown",(e=>e.stopPropagation())),i.on("keypress",(e=>{if(e.stopPropagation(),e.which===x.t.Enter||e.which===x.t.Enter2){let t=a()(e.target);if(t.is("input:focus, textarea:focus"))return void((!t.hasClass("pw-js-multiline-textarea")||e.ctrlKey||e.shiftKey)&&i.trigger("focus"));e.preventDefault(),c()(i).call(i,".pw-js-dialog-primary-btn").click()}}))}},onRemoving:()=>{var a,o,s;null===(a=e.onRemoving)||void 0===a||a.call(e,r,i),null===(o=i)||void 0===o||o.detach(),null===(s=r)||void 0===s||s.$destroy(),Object(n.tb)(c()(t).call(t,".md-panel"))}}}},{kind:"method",key:"_createPanelConfig",value:function _createPanelConfig(e={}){const t=a()("body");let r,i,o,s=this._$mdPanel.newPanelAnimation();e.targetEvent?s.openFrom(e.targetEvent).withAnimation(this._$mdPanel.animation.SCALE):s.withAnimation(this._$mdPanel.animation.FADE).duration({open:50,close:0});let l=!1;const d=this._$rootScope.$on(x.n.CloseDialogsRequested,(()=>{l=!0,d()}));return{attachTo:t,disableParentScroll:!0,propagateContainerEvents:!1,animation:s,zIndex:1e3,controllerAs:"$ctrl",bindToController:!1,groupName:e.controller,mouseUpOutsideToClose:!0,...e,escapeToClose:!e.preventClose,clickOutsideToClose:!1,onDomAdded:()=>{var t,a;if(e.getPanelRef&&(r=e.getPanelRef(),o=r.panelContainer,i=r.config.scope),null===(t=e.onDomAdded)||void 0===t||t.call(e,i,o),l)throw null===(a=i)||void 0===a||a.$destroy(),new Error(x.n.CloseDialogsRequested)},onOpenComplete:()=>{var s;if(null===(s=e.onComplete)||void 0===s||s.call(e,i,o),i){if(l)return void r.close();d();let e=!0;i.$on(x.n.CloseDialogsRequested,(()=>{e=!1,r.close()})),r.registerInterceptor(this._$mdPanel.interceptorTypes.CLOSE,(async()=>{if(i.$ctrl.confirmCloseAsync&&e){if(!await i.$ctrl.confirmCloseAsync())return P.a.reject(U.t)}return P.a.resolve()}))}if(o){let s=!0;o.on("mousedown pwMouseDown",(r=>{if(e.propagateContainerEvents)return;if(r.offsetX>r.target.clientWidth||r.offsetY>r.target.clientHeight)return void(s=!1);let i=a()(r.target);s=!i.is("input, textarea")&&!c()(t).call(t,"> .md-open-menu-container.md-active, > .k-animation-container > .k-list-container.k-state-border-up")[0]&&(!i.closest(".md-panel")[0]&&!a()(this._$window.document.activeElement).hasClass("pw-js-multiline-textarea"))})),o.on("mouseup pwMouseUp",(i=>{var n;if(!a()(i.target).closest(".md-panel")[0])return c()(t).call(t,"> .md-open-menu-container.md-active")[0]?(this._$mdMenu.hide(),void i.stopPropagation()):void(s&&!e.preventClose?null===(n=r)||void 0===n||n.close():i.stopPropagation())})),o.on("click",(e=>{let t=a()(e.target);t.closest("a")[0]||t.is("input[type=file]")||(e.preventDefault(),e.stopPropagation())}));const l=c()(o).call(o,".md-panel");l.on("keydown",(e=>{if(e.which===x.t.Escape){i.$ctrl.preventEscape&&e.stopPropagation(),c()(t).call(t,"> .md-open-menu-container.md-active")[0]&&(this._$mdMenu.hide(),e.stopPropagation()),c()(t).call(t,"> .k-animation-container > .k-list-container.k-state-border-up")[0]&&e.stopPropagation();let r=a()(e.target);if(r.hasClass("pw-js-cancellable-input")){let t=r.scope();t&&(t.value=""),e.stopPropagation()}Object(n.tb)(l)}})),o.on("keydown",(t=>{e.propagateContainerEvents||t.stopPropagation()})).on("keypress",(e=>{if(e.stopPropagation(),e.which===x.t.Enter||e.which===x.t.Enter2){let t=a()(e.target);if(t.is("input:focus, textarea:focus"))return void((!t.hasClass("pw-js-multiline-textarea")||e.ctrlKey||e.shiftKey)&&Object(n.tb)(l));e.preventDefault(),c()(l).call(l,".pw-js-dialog-primary-btn").click()}}))}},onRemoving:()=>{var r,a,s;null===(r=e.onRemoving)||void 0===r||r.call(e,i,o),null===(a=o)||void 0===a||a.detach(),null===(s=i)||void 0===s||s.$destroy(),Object(n.tb)(c()(t).call(t,".md-panel"))},onCloseSuccess:(t,r)=>{var a;null===(a=e.onCloseSuccess)||void 0===a||a.call(e,i,r)}}}}]}}));var Da=r(45),Ea=r.n(Da),ba=r(38),wa=r.n(ba),Sa=r(29),Ta=r.n(Sa),Aa=r(88);function GoogleCardsService_getDecoratorsApi(){GoogleCardsService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!GoogleCardsService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=GoogleCardsService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:GoogleCardsService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=GoogleCardsService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function GoogleCardsService_createElementDescriptor(e){var t,r=GoogleCardsService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function GoogleCardsService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function GoogleCardsService_hasDecorators(e){return e.decorators&&e.decorators.length}function GoogleCardsService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function GoogleCardsService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function GoogleCardsService_toPropertyKey(e){var t=function GoogleCardsService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Ia=["id","htmlLink","status","attendees","transparency","summary","description","start","end","recurrence","recurringEventId","originalStartTime"];let Ra=function GoogleCardsService_decorate(e,t,r,i){var a,n=GoogleCardsService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function GoogleCardsService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(GoogleCardsService_isDataDescriptor(a.descriptor)||GoogleCardsService_isDataDescriptor(i.descriptor)){if(GoogleCardsService_hasDecorators(a)||GoogleCardsService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(GoogleCardsService_hasDecorators(a)){if(GoogleCardsService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}GoogleCardsService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,GoogleCardsService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$injector","$rootScope","$log","$timeout","$translate","appCommonSrv","googleIntegrationSrv","notificationSrv","platformSrv","settingsSrv","telemetrySrv"])],(function(e){return{F:class GoogleCardsService{constructor(t,r,i,a,n,o,s,l,d,c,h){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$timeout=a,this._$translate=n,this._appCommonSrv=o,this._googleIntegrationSrv=s,this._notificationSrv=l,this._platformSrv=d,this._settingsSrv=c,this._telemetrySrv=h,this._googleIntegrationSrv.addGoogleCalendarEventListener("updated",(e=>{this._loadedCalendarIdsMap.has(e.id)&&(this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._requestReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded))})),this._googleIntegrationSrv.addGoogleCalendarEventListener("deleted",(e=>{this._loadedCalendarIdsMap.has(e.id)&&(this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._loadedCalendarIdsMap.delete(e.id),this._requestReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded))})),this._googleIntegrationSrv.addGoogleCalendarEventListener("cleared",(()=>{this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._loadedCalendarIdsMap.clear(),this._requestReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded)}));for(const e in this._calendarCardsListeners)this._calendarCardsMap.addEventListener(e,((t,r={})=>{var i;r.silent||B()(i=this._calendarCardsListeners[e]).call(i,(e=>e(t,r)))}))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"googleCardsSrv"}},{kind:"field",key:"_loadedCalendarIdsMap",value:()=>new lt.a},{kind:"field",key:"_hiddenCalendarIds",value:()=>new M.a},{kind:"field",key:"_busyCalendarIdsMap",value:()=>new lt.a},{kind:"field",key:"_googleCalendarsSyncTokens",value:()=>new lt.a},{kind:"field",key:"_calendarCardsMap",value:()=>new Aa.a("id")},{kind:"field",key:"_cardsUpdateBuffers",value:()=>new lt.a},{kind:"field",key:"_calendarCardsListeners",value:()=>({added:new M.a,updated:new M.a,deleted:new M.a,cleared:new M.a})},{kind:"get",key:"_trelloIntegrationSrv",value:function _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=this._$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}},{kind:"method",key:"initCurrentBoardAsync",value:async function initCurrentBoardAsync(e){this._loadedCalendarIdsMap.clear(),this._hiddenCalendarIds.clear(),this._busyCalendarIdsMap.clear(),this._googleCalendarsSyncTokens.clear(),this._calendarCardsMap.clear(),this._cardsUpdateBuffers.clear();let t=[];for(let e of this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars())e.isSelected&&t.push(e.id);this.setGoogleCalendarsLoad(t);try{await this.getCalendarCardsAsync(e)}catch(e){this._$log.error("Planyway initialize current board Google cards error:"),this._$log.error(e)}}},{kind:"method",key:"setGoogleCalendarsLoad",value:function setGoogleCalendarsLoad(e){for(let r of Kr()(t=this._loadedCalendarIdsMap).call(t)){var t;ze()(e).call(e,r)||this._hiddenCalendarIds.add(r)}for(let t of e)this._loadedCalendarIdsMap.has(t)?this._hiddenCalendarIds.delete(t):this._loadedCalendarIdsMap.set(t,!0);this._requestReloadCalendarCards()}},{kind:"method",key:"isGoogleCalendarBusy",value:function isGoogleCalendarBusy(e){var t;return null!==(t=this._busyCalendarIdsMap.get(e))&&void 0!==t&&t}},{kind:"method",key:"needReloadCalendarCards",value:function needReloadCalendarCards(){for(let t of Kr()(e=this._loadedCalendarIdsMap).call(e)){var e;this._loadedCalendarIdsMap.set(t,!0)}this._requestReloadCalendarCards()}},{kind:"method",key:"getCalendarCardsAsync",value:async function getCalendarCardsAsync(e){if(!this._googleIntegrationSrv.isGoogleConnectEnabled())return[];var t,r;if(!this._reloadCalendarCardsRequested)return this._getCalendarCardsPromise?this._getCalendarCardsPromise:S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(e=>!this._hiddenCalendarIds.has(e.googleCalendarId)));this._reloadCalendarCardsRequested=!1,e||(e=this._getCancellationToken("getCalendarCards"));try{return this._getCalendarCardsPromise=P.a.race([this._getCalendarCardsAsync(e),this._$timeout((()=>{var t,r;if(!e.isCanceled())return S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(e=>!this._hiddenCalendarIds.has(e.googleCalendarId)))}),3e3,!1)]),await this._getCalendarCardsPromise}catch(e){throw this._telemetrySrv.logError("Planyway get Google calendar cards error",e,{class:this.constructor.name,method:this.getCalendarCardsAsync.name}),e}finally{this._getCalendarCardsPromise=null}}},{kind:"method",key:"getCalendarCardByIdAsync",value:function getCalendarCardByIdAsync(e){return this._calendarCardsMap.get(e)}},{kind:"method",key:"getCalendarCardById",value:function getCalendarCardById(e){return this._calendarCardsMap.get(e)}},{kind:"method",key:"createCalendarCardAsync",value:async function createCalendarCardAsync(e){e.title||(e.title=this._$translate.instant("MISC.NO_TITLE"));let t,r=this._googleIntegrationSrv.getGoogleCalendarById(e.googleCalendarId);if(e.recurrenceId){let i=this.getCalendarCardByIdAsync(e.recurrenceId),{items:[a]}=await this._googleIntegrationSrv.restAsync(x.L.Get,x.q.Calendar,`/calendars/${e.googleCalendarId}/events/${i.googleEventId}/instances`,"Get Google event recurring instance",{originalStart:e.originalStart});if(!a)throw new Error("Cannot get Google calendar recurring event instance for Google event");let n=G.a.fromGoogleEvent(a,r);n.title=e.title,n.description=e.description,n.isAllDay=e.isAllDay,n.start=e.start,n.end=e.end;let o=n.toGoogleEvent(r,["summary","description","start","end"]);t=await this._googleIntegrationSrv.restAsync(x.L.Patch,x.q.Calendar,`/calendars/${e.googleCalendarId}/events/${n.googleEventId}`,"Update Google event recurring instance",o)}else{let i=e.toGoogleEvent(r,["summary","description","start","end","recurrence"]);t=await this._googleIntegrationSrv.restAsync(x.L.Post,x.q.Calendar,`/calendars/${e.googleCalendarId}/events`,"Create Google event",i)}let i=G.a.fromGoogleEvent(t,r);return this._loadedCalendarIdsMap.has(i.googleCalendarId)?(i.ignoreFilters=e.ignoreFilters,this._calendarCardsMap.delete(e,{delayed:!0}),this._calendarCardsMap.add(i,{delayed:!0})):this._calendarCardsMap.delete(e),i}},{kind:"method",key:"createTempCalendarCardByScheduler",value:function createTempCalendarCardByScheduler(e,t){let{addToCache:r}=t,i=e.googleCalendarId;var a;i||(i=c()(a=this._googleIntegrationSrv.getGoogleCalendars()).call(a,(e=>e.isPrimary)).id);let n=G.a.getTempCard(x.h.GoogleEvent,this._currentBoardId,{googleCalendarId:i});return n.updateBySchedulerData(e),n.ignoreFilters=!0,r&&this._calendarCardsMap.add(n),n}},{kind:"method",key:"changeCalendarCardType",value:function changeCalendarCardType(e,t,r){t===x.h.GoogleEvent?this._calendarCardsMap.delete(e,{silent:!0}):r===x.h.GoogleEvent&&(e.cardType=r,this._calendarCardsMap.add(e,{silent:!0}))}},{kind:"method",key:"updateCalendarCardAsync",value:async function updateCalendarCardAsync(e,t={}){let{waitForUpdate:r,includeGoogleFields:i=[],movedFromCalendarId:a}=t;try{let t=e.clone();if(a&&(this._appCommonSrv.setSchedulerBusy(!0),e.isTempCard||await this._googleIntegrationSrv.restAsync(x.L.Post,x.q.Calendar,`/calendars/${a}/events/${e.googleEventId}/move?destination=${e.googleCalendarId}`,"Move Google event")),e.isTempCard||0===i.length&&!a)return void(this._loadedCalendarIdsMap.has(e.googleCalendarId)?this._calendarCardsMap.update(e):this._calendarCardsMap.delete(e));let n=this._googleIntegrationSrv.getGoogleCalendarById(e.googleCalendarId),o=e.toGoogleEvent(n,i);r||(this._loadedCalendarIdsMap.has(e.googleCalendarId)?this._calendarCardsMap.update(e,{delayed:!!a}):this._calendarCardsMap.delete(e));let s=await this._googleIntegrationSrv.restAsync(x.L.Patch,x.q.Calendar,`/calendars/${e.googleCalendarId}/events/${e.googleEventId}`,"Update Google event",o,r?3:9),l=G.a.fromGoogleEvent(s,n);if(l.exceptionDates=e.exceptionDates,!this._calendarCardsMap.get(e.id))return;!r&&t.equals(l)||(this._loadedCalendarIdsMap.has(l.googleCalendarId)?this._calendarCardsMap.update(l,{delayed:!!a}):this._calendarCardsMap.delete(l)),a&&this._calendarCardsMap.delete(e,{replacedWith:l})}catch(e){if(this._telemetrySrv.logError("Google update card error",e,{class:this.constructor.name,method:this.updateCalendarCardAsync.name}),r)throw e;this._$log.error("Google update card error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{a&&this._appCommonSrv.setSchedulerBusy(!1)}}},{kind:"method",key:"updateCalendarCardPropertiesAsync",value:function updateCalendarCardPropertiesAsync(e,t){let r=this._cardsUpdateBuffers.get(e.id);r||(r={changes:{}},this._cardsUpdateBuffers.set(e.id,r)),r.changes||(r.changes={});for(let[e,i]of wa()(t))void 0!==i&&(r.changes[e]=i);return r.processUpdatePromise||(r.processUpdatePromise=this._processCardUpdateBufferAsync(e.id,r)),r.processUpdatePromise}},{kind:"method",key:"updateCalendarCardBySchedulerAsync",value:async function updateCalendarCardBySchedulerAsync(e,t){let r=await this.getCalendarCardByIdAsync(e.id);if(r){let i=[],a=null;return e.calendarId&&e.calendarId!==r.googleCalendarId&&(a=r.googleCalendarId),void 0!==e.isAllDay&&e.isAllDay!==r.isAllDay?i.push("start","end"):(void 0===e.start||Object(n.w)(e.start,r.start)||i.push("start"),void 0===e.end||Object(n.w)(e.end,r.end)||i.push("end")),r=r.clone(),r.updateBySchedulerData(e),r.correctRecurrenceDates(),this.updateCalendarCardAsync(r,{...t,includeGoogleFields:i,movedFromCalendarId:a})}}},{kind:"method",key:"deleteCalendarCardAsync",value:async function deleteCalendarCardAsync(e,t={}){let{waitForDelete:r}=t;try{var i,a;if(e.isTempCard)return void this._calendarCardsMap.delete(e);let t=S()(i=Ta()(a=this._calendarCardsMap).call(a)).call(i,(t=>t.recurrenceId===e.id));if(!r){this._calendarCardsMap.delete(e);for(let e of t)this._calendarCardsMap.delete(e)}if(await this._googleIntegrationSrv.restAsync(x.L.Delete,x.q.Calendar,`/calendars/${e.googleCalendarId}/events/${e.googleEventId}`,"Delete Google event",null,r?3:9),r){this._calendarCardsMap.delete(e);for(let e of t)this._calendarCardsMap.delete(e)}}catch(e){if(r)throw e;this._$log.error("Google delete event error:"),this._$log.error(e),this._telemetrySrv.logError("Google delete event error",e,{class:this.constructor.name,method:this.deleteCalendarCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.DELETE_GOOGLE_EVENT_ERROR"),x.A.Error)}}},{kind:"method",key:"createRecurrenceGapAsync",value:async function createRecurrenceGapAsync(e){let t=this.getCalendarCardByIdAsync(e.recurrenceId),{items:[r]}=await this._googleIntegrationSrv.restAsync(x.L.Get,x.q.Calendar,`/calendars/${e.googleCalendarId}/events/${t.googleEventId}/instances`,"Get Google event recurring instance",{originalStart:e.originalStart});if(!r)throw new Error("Cannot get Google calendar recurring event instance for Google event");await this._googleIntegrationSrv.restAsync(x.L.Delete,x.q.Calendar,`/calendars/${e.googleCalendarId}/events/${r.id}`,"Delete Google event recurring instance")}},{kind:"method",key:"addExceptionToRecurrentAsync",value:async function addExceptionToRecurrentAsync(e,t={}){let{waitForAdd:r}=t,i=await this.getCalendarCardByIdAsync(e.recurrenceId);if(i)return i.addExceptionDate(e.exceptionDate),this.updateCalendarCardAsync(i,{waitForUpdate:r})}},{kind:"method",key:"removeExceptionsFromRecurrentAsync",value:async function removeExceptionsFromRecurrentAsync(e,t={}){let{fromDate:r,waitForRemove:i}=t,a=await this.getCalendarCardByIdAsync(e.id);if(a)return a.deleteExceptionDates(r),this.updateCalendarCardAsync(a,{waitForUpdate:i,includeGoogleFields:["recurrence"]})}},{kind:"method",key:"deleteRecurrenceExceptionsAsync",value:async function deleteRecurrenceExceptionsAsync(e,t={}){var r,i;let{fromDate:a,waitForDelete:n}=t,o=S()(r=Ta()(i=this._calendarCardsMap).call(i)).call(r,(t=>t.recurrenceId===e.id&&!(a&&t.exceptionDate<a)));if(!n)for(let e of o)this._calendarCardsMap.delete(e);for(;o.length>0;){var s;await P.a.all(R()(s=y()(o).call(o,0,5)).call(s,(async e=>{try{await this._googleIntegrationSrv.restAsync(x.L.Delete,x.q.Calendar,`/calendars/${e.googleCalendarId}/events/${e.googleEventId}`,"Delete Google event recurrence exception",null,n?3:9)}catch(e){this._$log.error("Google delete recurrence exception error:"),this._$log.error(e)}})))}if(n)for(let e of o)this._calendarCardsMap.delete(e)}},{kind:"method",key:"addCalendarCardEventListener",value:function addCalendarCardEventListener(e,t){let r=this._calendarCardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.add(t)}},{kind:"method",key:"removeCalendarCardEventListener",value:function removeCalendarCardEventListener(e,t){let r=this._calendarCardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.delete(t)}},{kind:"method",key:"isCalendarCardVisible",value:function isCalendarCardVisible(e){return!!e.isTempCard||!this._hiddenCalendarIds.has(e.googleCalendarId)}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"method",key:"_requestReloadCalendarCards",value:function _requestReloadCalendarCards(){this._reloadCalendarCardsRequested=!0,this._getCalendarCardsPromise=null,this._busyCalendarIdsMap.clear()}},{kind:"method",key:"_setGoogleCalendarBusy",value:function _setGoogleCalendarBusy(e,t){this._$rootScope.$evalAsync((()=>this._busyCalendarIdsMap.set(e,t)))}},{kind:"method",key:"_getGoogleCalendarEventsAsync",value:async function _getGoogleCalendarEventsAsync(e,t,r=!1){let i=[];for(e=[...e];e.length>0;){var a;await P.a.all(R()(a=y()(e).call(e,0,4)).call(a,(async e=>{try{this._setGoogleCalendarBusy(e,!0);let{items:a,nextSyncToken:n,isFullSync:o}=await this._googleIntegrationSrv.listAsync(`/calendars/${encodeURIComponent(e)}/events`,"Get Google calendar events",Ia,r?this._googleCalendarsSyncTokens.get(e):null);if(this._googleCalendarsSyncTokens.set(e,n),t.isCanceled())return;this._setGoogleCalendarBusy(e,!1),i.push({calendarId:e,googleEvents:a,onlyChanged:!o})}catch(t){this._setGoogleCalendarBusy(e,!1),this._$log.error("Planyway get Google calendar events error:"),this._$log.error(t)}})))}return i}},{kind:"method",key:"_getCancellationToken",value:function _getCancellationToken(e){this._cancellationTokens||(this._cancellationTokens={});let t=Ea()(),r={_timestamp:t,isCanceled:()=>this._cancellationTokens[e]._timestamp!==t};return this._cancellationTokens[e]=r,r}},{kind:"method",key:"_getCalendarCardsAsync",value:async function _getCalendarCardsAsync(e){var t,r;for(let e of Ta()(i=this._calendarCardsMap).call(i)){var i,a;e.isTempCard||(null===(a=this._loadedCalendarIdsMap.get(e.googleCalendarId))||void 0===a||a)&&this._calendarCardsMap.delete(e.id,{delayed:!0})}let o=[];for(let e of Kr()(s=this._loadedCalendarIdsMap).call(s)){var s;this._loadedCalendarIdsMap.get(e)&&o.push(e)}let l=await this._getGoogleCalendarEventsAsync(o,e);if(null!=e&&e.isCanceled())return;for(let{calendarId:e,googleEvents:t}of l){let r={},i=[],a=this._googleIntegrationSrv.getGoogleCalendarById(e);for(let e of t){var d;if(e.recurringEventId){let t=Object(G.d)(e.recurringEventId,a.shortId),i=r[t];i||(i=[],r[t]=i),i.push(Object(n.H)(e.originalStartTime.dateTime||e.originalStartTime.date))}if("confirmed"!==e.status)continue;if(null!==(d=e.attendees)&&void 0!==d&&xe()(d).call(d,(e=>e.self&&"declined"===e.responseStatus)))continue;let t=G.a.fromGoogleEvent(e,a);t&&i.push(t)}for(let e of i)e.recurrenceRule&&(e.exceptionDates=r[e.id]),this._calendarCardsMap.add(e,{delayed:!0})}for(let e of o)this._loadedCalendarIdsMap.set(e,!1);this._pollingTimeout&&this._$timeout.cancel(this._pollingTimeout);const pollGoogleEventsAsync=async()=>{if(this._googleIntegrationSrv.isGoogleConnectEnabled()){try{await this._pollGoogleEventsAsync()}catch(e){this._$log.error("Planyway poll Google events error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway poll Google events error",e,{class:this.constructor.name,method:this._pollGoogleEventsAsync.name})}this._pollingTimeout=this._$timeout((()=>pollGoogleEventsAsync()),6e4,!1)}else this._pollingTimeout=null};return this._pollingTimeout=this._$timeout((()=>pollGoogleEventsAsync()),6e4,!1),S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(e=>!this._hiddenCalendarIds.has(e.googleCalendarId)))}},{kind:"method",key:"_pollGoogleEventsAsync",value:async function _pollGoogleEventsAsync(){var e;let t=this._getCancellationToken("pollGoogleEvents"),r=re()(Kr()(e=this._loadedCalendarIdsMap).call(e)),i=await this._getGoogleCalendarEventsAsync(r,t,!0);if(!t.isCanceled())for(let{calendarId:e,googleEvents:t,onlyChanged:r}of i){if(!this._loadedCalendarIdsMap.has(e))continue;let i=new lt.a;for(let t of Ta()(a=this._calendarCardsMap).call(a)){var a;t.googleCalendarId===e&&i.set(t.id,t)}let o=new lt.a,s={},l=[],d=[],c=[],h=this._googleIntegrationSrv.getGoogleCalendarById(e);for(let e of t){if(e.recurringEventId){let t=Object(G.d)(e.recurringEventId,h.shortId),r=s[t];r||(r=[],s[t]=r),r.push(Object(n.H)(e.originalStartTime.dateTime||e.originalStartTime.date))}let t=Object(G.d)(e.id,h.shortId),r=this._calendarCardsMap.get(t);if("confirmed"!==e.status)r&&l.push(r);else{let t=G.a.fromGoogleEvent(e,h);if(o.set(t.id,t),r){if(r.equals(t))continue;d.push(t)}else c.push(t)}}if(!r)for(let e of Kr()(i).call(i))o.has(e)||l.push(i.get(e));for(let[e,t]of wa()(s)){let r=this._calendarCardsMap.get(e);if(r){for(let e of t)r.addExceptionDate(e);this._calendarCardsMap.update(r,{delayed:!0})}}for(let e of l)this._calendarCardsMap.delete(e,{delayed:!0});for(let e of d)e.recurrenceRule&&(e.exceptionDates=this._calendarCardsMap.get(e.id).exceptionDates),this._calendarCardsMap.update(e,{delayed:!0});for(let e of c)e.recurrenceRule&&(e.exceptionDates=s[e.id]),this._calendarCardsMap.add(e,{delayed:!0})}}},{kind:"method",key:"_processCardUpdateBufferAsync",value:async function _processCardUpdateBufferAsync(e,t){if(t.processUpdatePromise)return t.processUpdatePromise;try{for(await Object(n.x)(200);t.changes;){let r=t.changes;t.changes=null;let i=await this.getCalendarCardByIdAsync(e);if(!i)return;let a={title:"summary",description:"description",start:"start",end:"end",recurrenceRule:"recurrence"},n=[],o=null;for(let e in r){let t=a[e];t&&n.push(t),"googleCalendarId"===e&&(o=i.googleCalendarId),i[e]=r[e]}(r.start||r.end)&&i.correctRecurrenceDates(),await this.updateCalendarCardAsync(i,{waitForUpdate:!1,includeGoogleFields:n,movedFromCalendarId:o})}}finally{this._cardsUpdateBuffers.delete(e)}}}]}}));var Oa=r(26),Pa=r.n(Oa),La=r(89),Ma=r.n(La),Na=r(462),Ba=r.n(Na);function GoogleIntegrationService_getDecoratorsApi(){GoogleIntegrationService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!GoogleIntegrationService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=GoogleIntegrationService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:GoogleIntegrationService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=GoogleIntegrationService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function GoogleIntegrationService_createElementDescriptor(e){var t,r=GoogleIntegrationService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function GoogleIntegrationService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function GoogleIntegrationService_hasDecorators(e){return e.decorators&&e.decorators.length}function GoogleIntegrationService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function GoogleIntegrationService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function GoogleIntegrationService_toPropertyKey(e){var t=function GoogleIntegrationService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Fa=["id","summary","backgroundColor","timeZone","primary","accessRole","hidden","deleted"],$a={[me.j.TrelloAuthError]:"NOTIFICATIONS.PLANYWAY_SYNC_TRELLO_AUTH_ERROR",[me.j.StartTrelloAuthError]:"NOTIFICATIONS.PLANYWAY_SYNC_START_TRELLO_AUTH_ERROR",[me.j.TrelloBoardError]:"NOTIFICATIONS.PLANYWAY_SYNC_TRELLO_BOARD_ERROR",[me.j.StartTrelloBoardError]:"NOTIFICATIONS.PLANYWAY_SYNC_START_TRELLO_BOARD_ERROR",[me.j.TrelloLimitError]:"NOTIFICATIONS.PLANYWAY_SYNC_TRELLO_LIMIT_ERROR",[me.j.GoogleAuthError]:"NOTIFICATIONS.PLANYWAY_SYNC_GOOGLE_AUTH_ERROR",[me.j.StartGoogleAuthError]:"NOTIFICATIONS.PLANYWAY_SYNC_START_GOOGLE_AUTH_ERROR",[me.j.GoogleCalendarError]:"NOTIFICATIONS.PLANYWAY_SYNC_GOOGLE_CALENDAR_ERROR",[me.j.StartGoogleCalendarError]:"NOTIFICATIONS.PLANYWAY_SYNC_START_GOOGLE_CALENDAR_ERROR",[me.j.GoogleGSuiteError]:"NOTIFICATIONS.PLANYWAY_SYNC_GOOGLE_G_SUITE_ERROR",[me.j.StartGoogleGSuiteError]:"NOTIFICATIONS.PLANYWAY_SYNC_START_GOOGLE_G_SUITE_ERROR",[me.j.PlanywayLicenseExpired]:"NOTIFICATIONS.PLANYWAY_SYNC_LICENSE_EXPIRED_ERROR"},xa={[me.f.GoogleSyncStartFailureNotLicensed]:"NOTIFICATIONS.PLANYWAY_SYNC_START_FAILED_NOT_LICENSED",[me.f.GoogleSyncStartFailureNotAuthorized]:"NOTIFICATIONS.PLANYWAY_SYNC_START_FAILED_NOT_AUTHORIZED",[me.f.GoogleConnectFailureNotConnected]:"NOTIFICATIONS.PLANYWAY_GOOGLE_CONNECT_FAILED_NOT_CONNECTED",[me.f.GoogleConnectFailureNotAuthorized]:"NOTIFICATIONS.PLANYWAY_GOOGLE_CONNECT_FAILED_NOT_AUTHORIZED",[me.f.GoogleConnectFailureGSuiteError]:"NOTIFICATIONS.PLANYWAY_GOOGLE_CONNECT_FAILED_G_SUITE_ERROR"};let Ga=function GoogleIntegrationService_decorate(e,t,r,i){var a,n=GoogleIntegrationService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function GoogleIntegrationService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(GoogleIntegrationService_isDataDescriptor(a.descriptor)||GoogleIntegrationService_isDataDescriptor(i.descriptor)){if(GoogleIntegrationService_hasDecorators(a)||GoogleIntegrationService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(GoogleIntegrationService_hasDecorators(a)){if(GoogleIntegrationService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}GoogleIntegrationService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,GoogleIntegrationService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$injector","$rootScope","$log","$timeout","$window","$translate","notificationSrv","platformSrv","settingsSrv","licenseSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class GoogleIntegrationService{constructor(t,r,i,a,n,o,s,l,d,h,u,p){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$timeout=a,this._$window=n,this._$translate=o,this._notificationSrv=s,this._platformSrv=l,this._settingsSrv=d,this._licenseSrv=h,this._telemetrySrv=u,this._trelloIntegrationSrv=p;for(const e in this._googleCalendarsListeners)this._googleCalendarsMap.addEventListener(e,((t,r={})=>{var i,a;r.silent||B()(a=this._googleCalendarsListeners[e]).call(a,(e=>e(t,r)));if(this._googleCalendars=null,"cleared"===e)return void this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars});this._setupGoogleCalendarStyle(t);let n=c()(i=this.getCurrentBoardConnectedGoogleCalendars()).call(i,(e=>e.id===t.id));switch(e){case"updated":if(n&&!n.isSelected)return;t.name!==r.oldValue.name&&this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars});break;case"deleted":if(n&&!n.isSelected)return;this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars})}}))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"googleIntegrationSrv"}},{kind:"field",key:"_googleCalendarsMap",value:()=>new Aa.a("id")},{kind:"field",key:"_googleCalendarStyleElements",value:()=>new lt.a},{kind:"field",key:"_googleCalendarsListeners",value:()=>({added:new M.a,updated:new M.a,deleted:new M.a,cleared:new M.a})},{kind:"get",key:"_googleCardsSrv",value:function _googleCardsSrv(){return this._googleCardsSrvLazy||(this._googleCardsSrvLazy=this._$injector.get("googleCardsSrv")),this._googleCardsSrvLazy}},{kind:"method",key:"initCurrentBoardAsync",value:function initCurrentBoardAsync(e){return P.a.all([this._initGoogleSyncAsync(e),this._initGoogleConnectAsync(e)])}},{kind:"method",key:"isGoogleSyncBusy",value:function isGoogleSyncBusy(){return this._isGoogleSyncBusy}},{kind:"method",key:"getGoogleSyncStatus",value:function getGoogleSyncStatus(){return this._googleSyncStatus}},{kind:"method",key:"getGoogleSyncOptions",value:function getGoogleSyncOptions(){return this._googleSyncOptions}},{kind:"method",key:"getGoogleSyncErrorMessage",value:function getGoogleSyncErrorMessage(){if(null===this._googleSyncStatus||this._googleSyncStatus===me.j.Ok)return;let e;return e=this._googleSyncStatus?$a[this._googleSyncStatus]||"NOTIFICATIONS.PLANYWAY_SYNC_UNKNOWN_ERROR":"NOTIFICATIONS.PLANYWAY_SYNC_STATUS_LOADING_ERROR",this._$translate.instant(e)}},{kind:"method",key:"startGoogleSyncAsync",value:async function startGoogleSyncAsync(e,t=!1){let r=this._getCancellationToken("startSync");try{let i=await this._restAsync(x.L.Post,`${U.N}/trello/${this._memberId}/control`,"Start Google Sync",{token:this._trelloToken,body:{action:"start",data:{boardId:this._currentBoardId,timeZone:Pa.a.tz.guess(),...e}}});if(r.isCanceled())return;if(!i.success)return void this._notificationSrv.showNotification(xa[i.code]?this._$translate.instant(xa[i.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_START_FAILED_WITH_MESSAGE",{message:i.message}),x.A.Error);this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.SyncStarted,{...e});let a=(async()=>{this._setGoogleSyncBusy(!0);let e=0;for(;e<5;){if(await Object(n.x)(1e3*(0===e?10:5)),e+=1,r.isCanceled())return;try{if(!await this._loadGoogleSyncStatusAsync()||r.isCanceled())return;if(this._googleSyncStatus){if(this._googleSyncStatus===me.j.Ok)this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_STARTED"),x.A.Success);else{let e=this.getGoogleSyncErrorMessage();e&&this._notificationSrv.showNotification(e,x.A.Error)}return void this._setGoogleSyncBusy(!1)}}catch(e){this._$log.error("Planyway poll sync status error:"),this._$log.error(e)}}this._setGoogleSyncBusy(!1),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_START_LONGER_THEN_USUAL"),x.A.Warning)})();t&&await a}catch(e){this._$log.error("Planyway start Google Sync error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway start Google Sync error",e,{class:this.constructor.name,method:this.startGoogleSyncAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_START_FAILED"),x.A.Error)}}},{kind:"method",key:"stopGoogleSyncAsync",value:async function stopGoogleSyncAsync(e=!1){let t=this._getCancellationToken("stopSync");try{let r=await this._restAsync(x.L.Post,`${U.N}/trello/${this._memberId}/control`,"Stop Google Sync",{token:this._trelloToken,body:{action:"stop",data:{boardId:this._currentBoardId}}});if(t.isCanceled())return;if(!r.success)return void this._notificationSrv.showNotification(xa[r.code]?this._$translate.instant(xa[r.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_STOP_FAILED_WITH_MESSAGE",{message:r.message}),x.A.Error);this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.SyncStopped);let i=(async()=>{this._setGoogleSyncBusy(!0);let e=0;for(;e<5;){if(await Object(n.x)(5e3),e+=1,t.isCanceled())return;try{if(!await this._loadGoogleSyncStatusAsync()||t.isCanceled())return;if(!this._googleSyncStatus)return this._setGoogleSyncBusy(!1),void this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_STOPPED"),x.A.Success)}catch(e){this._$log.error("Planyway get sync status error:"),this._$log.error(e)}}this._setGoogleSyncBusy(!1),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_STOP_LONGER_THEN_USUAL"),x.A.Warning)})();e&&await i}catch(e){this._$log.error("Planyway stop Google Sync error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway stop Google Sync error",e,{class:this.constructor.name,method:this.stopGoogleSyncAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_STOP_FAILED"),x.A.Error)}}},{kind:"method",key:"isGoogleConnectBusy",value:function isGoogleConnectBusy(){return this._isGoogleConnectBusy}},{kind:"method",key:"isGoogleConnectEnabled",value:function isGoogleConnectEnabled(){return this._isGoogleConnectEnabled}},{kind:"method",key:"enableGoogleConnectAsync",value:async function enableGoogleConnectAsync(e){if(!this._settingsSrv.currentSettings.global.connectedGooglePrimaryCalendarId)try{this._setGoogleConnectBusy(!0);let t=await this._restAsync(x.L.Post,`${U.c}/trello/${this._memberId}/connect`,"Google Connect connect",{token:this._trelloToken,body:{action:"connectGoogle",data:e}});if(!t.success)return void this._notificationSrv.showNotification(xa[t.code]?this._$translate.instant(xa[t.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_CONNECT_ERROR_WITH_MESSAGE",{message:t.message}),x.A.Error);let{primaryCalendarId:r,accessToken:i,expiringIn:a}=t.data.googleCredentials;this._googleCredentials={primaryCalendarId:r,accessToken:i,expiryDate:new Date(Ea()()+a)},await this._platformSrv.setGoogleCredentialsAsync(this._googleCredentials),this._settingsSrv.currentSettings.global.connectedGooglePrimaryCalendarId=r,await this._settingsSrv.saveGlobalAsync(),this._isGoogleConnectInitialized=!1,this._initGoogleConnectAsync()}catch(e){this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_CONNECT_FAILED"),x.A.Error),this._$log.error("Planyway Google Connect enable error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway Google Connect enable error",e,{class:this.constructor.name,method:this.enableGoogleConnectAsync.name})}finally{this._setGoogleConnectBusy(!1)}}},{kind:"method",key:"disableGoogleConnectAsync",value:async function disableGoogleConnectAsync(){if(this._settingsSrv.currentSettings.global.connectedGooglePrimaryCalendarId)try{this._setGoogleConnectBusy(!0);let e=await this._restAsync(x.L.Post,`${U.c}/trello/${this._memberId}/connect`,"Google Connect disconnect",{token:this._trelloToken,body:{action:"disconnectGoogle"}});if(!e.success)return void this._notificationSrv.showNotification(xa[e.code]?this._$translate.instant(xa[e.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_DISCONNECT_ERROR_WITH_MESSAGE",{message:e.message}),x.A.Error);this._googleCredentials=null,await this._platformSrv.setGoogleCredentialsAsync(null),this._isGoogleConnectEnabled=!1,this._settingsSrv.currentSettings.global.connectedGooglePrimaryCalendarId=null;for(let e of J()(this._settingsSrv.currentSettings.global.calendarBoard))e.connectedGoogleCalendars&&(e.connectedGoogleCalendars=null);this._settingsSrv.saveGlobalAsync(),this._googleCalendars=null,this._googleCalendarsMap.clear(),this._googleCalendarAccountName=null}catch(e){this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_DISCONNECT_FAILED"),x.A.Error),this._$log.error("Planyway Google Connect disable error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway Google Connect disable error",e,{class:this.constructor.name,method:this.disableGoogleConnectAsync.name})}finally{this._setGoogleConnectBusy(!1)}}},{kind:"method",key:"getGoogleCalendarAccountName",value:function getGoogleCalendarAccountName(){return this._googleCalendarAccountName}},{kind:"method",key:"getCurrentBoardConnectedGoogleCalendars",value:function getCurrentBoardConnectedGoogleCalendars(){var e;let t=this._licenseSrv.checkPaidFeatureAvailable(x.B.GoogleConnect,!1),r=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).connectedGoogleCalendars;return R()(e=this.getGoogleCalendars()).call(e,(e=>{var i,a;return{id:e.id,isSelected:t&&null!==(i=null===(a=r[e.id])||void 0===a?void 0:a.isSelected)&&void 0!==i&&i}}))}},{kind:"method",key:"setCurrentBoardConnectedGoogleCalendars",value:function setCurrentBoardConnectedGoogleCalendars(e){let t=[],r=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).connectedGoogleCalendars;for(let i of e)i.isSelected&&t.push(i.id),r[i.id]={...r[i.id],isSelected:i.isSelected};this._googleCardsSrv.setGoogleCalendarsLoad(t),this._settingsSrv.saveGlobalAsync()}},{kind:"method",key:"getGoogleCalendars",value:function getGoogleCalendars(){var e,t;this._googleCalendars||(this._googleCalendars=We()(e=Ta()(t=this._googleCalendarsMap).call(t)).call(e,((e,t)=>e.isPrimary?-1:t.isPrimary?1:Object(n.j)(e.name,t.name)||Object(n.j)(e.id,t.id))));return this._googleCalendars}},{kind:"method",key:"getGoogleCalendarById",value:function getGoogleCalendarById(e){return this._googleCalendarsMap.get(e)}},{kind:"method",key:"isConnectedGoogleCalendarBusy",value:function isConnectedGoogleCalendarBusy(e){return this._googleCardsSrv.isGoogleCalendarBusy(e)}},{kind:"method",key:"addGoogleCalendarEventListener",value:function addGoogleCalendarEventListener(e,t){let r=this._googleCalendarsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.add(t)}},{kind:"method",key:"removeGoogleCalendarEventListener",value:function removeGoogleCalendarEventListener(e,t){let r=this._googleCalendarsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.delete(t)}},{kind:"method",key:"listAsync",value:async function listAsync(e,t,r,i,a=3){try{let n=[],o=null;do{let s=await this.restAsync(x.L.Get,x.q.Calendar,e,t,{syncToken:i,pageToken:o,showDeleted:!0,fields:r?`items(${r.join()}),nextPageToken,nextSyncToken`:void 0},a);if(s.nextPageToken&&s.nextPageToken===o)throw new Error("List Google request failed! Duplicated next page token");if(n.push(...s.items),o=s.nextPageToken,s.nextSyncToken)return{items:n,nextSyncToken:s.nextSyncToken,isFullSync:!i}}while(o)}catch(i){if(410===i.status)return this._$log.warn("List Google request sync token is no longer valid, a full sync is required"),this.listAsync(e,t,r,null,a);throw i}}},{kind:"method",key:"restAsync",value:async function restAsync(e,t,r,i,a,n=3){let o={token:await this._getAccessTokenAsync()};try{switch(e){case x.L.Get:case x.L.Delete:o.query=a;break;default:o.body=a}return await this._restAsync(e,t+r,i,o)}catch(a){if(401===a.status)return o.token=await this._refreshAccessTokenAsync(),this._restAsync(e,t+r,i,o);throw a}}},{kind:"get",key:"_memberId",value:function _memberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_trelloToken",value:function _trelloToken(){return this._trelloIntegrationSrv.getTrelloToken()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"method",key:"_setGoogleSyncBusy",value:function _setGoogleSyncBusy(e){this._$rootScope.$evalAsync((()=>this._isGoogleSyncBusy=e))}},{kind:"method",key:"_initGoogleSyncAsync",value:async function _initGoogleSyncAsync(e=this._getCancellationToken("initGoogleSync")){if(this._currentBoardId){this._googleSyncStatus=void 0,this._googleSyncOptions=void 0;try{let{lastSyncStatus:t=null}=this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId);if(this._setGoogleSyncBusy(!0),!await this._loadGoogleSyncStatusAsync(e))return;if(this._setGoogleSyncBusy(!1),!this._googleSyncStatus||this._googleSyncStatus===t)return;let r=this.getGoogleSyncErrorMessage();r&&this._notificationSrv.showNotification(r,x.A.Error)}catch(e){this._setGoogleSyncBusy(!1),this._$log.error("Planyway init Google sync error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway init Google sync error",e,{class:this.constructor.name,method:this._initGoogleSyncAsync.name})}}}},{kind:"method",key:"_loadGoogleSyncStatusAsync",value:async function _loadGoogleSyncStatusAsync(e=this._getCancellationToken("loadGoogleSyncStatus")){let t=this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId),r=await this._restAsync(x.L.Get,`${U.N}/trello/${this._memberId}/control`,"Get Google Sync status",{token:this._trelloToken,query:{boardId:this._currentBoardId}});if(e.isCanceled())return!1;if(!r.success)return this._notificationSrv.showNotification(xa[r.code]?this._$translate.instant(xa[r.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_SYNC_STATUS_LOADING_ERROR_WITH_MESSAGE",{message:r.message}),x.A.Error),!0;let{syncStatus:i,primaryCalendarId:a,syncOnlyMemberCards:n,syncCompletedCards:o,setEventColorByLabel:s,syncAsFree:l}=r.data;return i?(this._googleSyncStatus=i,this._googleSyncOptions={primaryCalendarId:a,syncOnlyMemberCards:n,setEventColorByLabel:s,syncCompletedCards:o,syncAsFree:l}):(this._googleSyncStatus=null,this._googleSyncOptions=void 0),t.lastSyncStatus=this._googleSyncStatus,this._settingsSrv.saveLocal(),!0}},{kind:"method",key:"_setGoogleConnectBusy",value:function _setGoogleConnectBusy(e){this._$rootScope.$evalAsync((()=>this._isGoogleConnectBusy=e))}},{kind:"method",key:"_initGoogleConnectAsync",value:async function _initGoogleConnectAsync(e=this._getCancellationToken("initGoogleConnect")){if(this._currentBoardId){if(this._settingsSrv.currentSettings.global.connectedGooglePrimaryCalendarId){if(!this._isGoogleConnectInitialized){try{if(this._setGoogleConnectBusy(!0),this._isGoogleConnectEnabled=!1,!await this._getAccessTokenAsync())return this._isGoogleConnectInitialized=!0,this._setGoogleConnectBusy(!1),this._settingsSrv.currentSettings.global.connectedGooglePrimaryCalendarId=null,void this._settingsSrv.saveGlobalAsync();if(e.isCanceled())return}catch(e){return this._isGoogleConnectInitialized=!0,this._setGoogleConnectBusy(!1),this._$log.error("Planyway Google Connect auth initialization error:"),this._$log.error(e),void this._telemetrySrv.logError("Planyway Google Connect auth initialization error",e,{class:this.constructor.name,method:this._initGoogleConnectAsync.name})}try{let{googleCalendars:t}=await this._getGoogleCalendarsAsync();if(e.isCanceled())return;this._isGoogleConnectEnabled=!0;for(let e of t)e.isDeleted||this._googleCalendarsMap.add(e);this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars}),this._googleCalendarsPollingTimeout&&this._$timeout.cancel(this._googleCalendarsPollingTimeout);const pollGoogleCalendarsAsync=async()=>{if(this.isGoogleConnectEnabled()){try{await this._pollGoogleCalendarsAsync()}catch(e){this._$log.error("Planyway poll Google calendars error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway poll Google calendars error",e,{class:this.constructor.name,method:this._pollGoogleCalendarsAsync.name})}this._googleCalendarsPollingTimeout=this._$timeout((()=>pollGoogleCalendarsAsync()),6e4,!1)}else this._googleCalendarsPollingTimeout=null};this._googleCalendarsPollingTimeout=this._$timeout((()=>pollGoogleCalendarsAsync()),6e4,0,!1),this._isGoogleConnectInitialized=!0,this._setGoogleConnectBusy(!1)}catch(e){return this._isGoogleConnectInitialized=!0,this._setGoogleConnectBusy(!1),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_CONNECT_FAILED"),x.A.Error),this._$log.error("Planyway Google Connect calendars initialization error:"),this._$log.error(e),void this._telemetrySrv.logError("Planyway Google Connect calendars initialization error",e,{class:this.constructor.name,method:this._initGoogleConnectAsync.name})}}return this._googleCardsSrv.initCurrentBoardAsync(e)}this._isGoogleConnectEnabled=!1}}},{kind:"method",key:"_pollGoogleCalendarsAsync",value:async function _pollGoogleCalendarsAsync(){let e=this._getCancellationToken("pollGoogleCalendars"),{googleCalendars:t,onlyChanged:r}=await this._getGoogleCalendarsAsync(!0);if(e.isCanceled())return;let i=new lt.a;for(let e of Ta()(a=this._googleCalendarsMap).call(a)){var a;i.set(e.id,e)}let o=new lt.a,s=!1;for(let e of t){o.set(e.id,e);let t=i.get(e.id);e.isDeleted?t&&this._googleCalendarsMap.delete(e):t?t.name===e.name&&Object(n.Cb)(t.color,e.color)&&t.timeZone===e.timeZone&&t.isReadOnly===e.isReadOnly||this._googleCalendarsMap.update(e):(this._googleCalendarsMap.add(e),s=!0)}if(!r)for(let e of Kr()(i).call(i))o.has(e)||this._googleCalendarsMap.delete(e);s&&this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars})}},{kind:"method",key:"_getGoogleCalendarsAsync",value:async function _getGoogleCalendarsAsync(e=!1){let[{items:t,nextSyncToken:r,isFullSync:i},{name:a,email:n}]=await P.a.all([this.listAsync("/users/me/calendarList","Get Google calendars",Fa,e?this._googleCalendarsSyncToken:null),this.restAsync(x.L.Get,x.q.User,"/userinfo","Get Google user info")]);return this._googleCalendarsSyncToken=r,{googleCalendars:R()(t).call(t,(e=>{var t;let r=null!==(t=e.primary)&&void 0!==t&&t;r&&(this._googleCalendarAccountName=e.id);let i="owner"!==e.accessRole&&"writer"!==e.accessRole;return{id:r?"primary":e.id,shortId:Ma()(e.id),name:getGoogleCalendarName(e,a,n),color:getGoogleColor(e.backgroundColor),timeZone:e.timeZone,isPrimary:r,isReadOnly:i,isDeleted:e.hidden||e.deleted||i}})),onlyChanged:!i}}},{kind:"method",key:"_getAccessTokenAsync",value:async function _getAccessTokenAsync(){this._getAccessTokenPromise||(this._getAccessTokenPromise=(async()=>{let e=this._googleCredentials||await this._platformSrv.getGoogleCredentialsAsync();if(e&&e.primaryCalendarId===this._settingsSrv.currentSettings.global.connectedGooglePrimaryCalendarId)return e.accessToken&&e.expiryDate>new Date?(this._googleCredentials=e,e.accessToken):this._refreshAccessTokenAsync();let t=await this._restAsync(x.L.Get,`${U.c}/trello/${this._memberId}/connect`,"Get Google Connect credentials",{token:this._trelloToken,deduplicationTag:`Get Google Connect Credentials Request ${Math.floor(Ea()()/1e3/60)}`});if(!t.success){let e=new Error(t.message);throw e.code=t.code,e.details=t.details,e}let{primaryCalendarId:r,accessToken:i,expiringIn:a}=t.data.googleCredentials||{};return i?(this._googleCredentials={primaryCalendarId:r,accessToken:i,expiryDate:new Date(Ea()()+a)},await this._platformSrv.setGoogleCredentialsAsync(this._googleCredentials),i):this._refreshAccessTokenAsync()})());try{return await this._getAccessTokenPromise}finally{this._getAccessTokenPromise=null}}},{kind:"method",key:"_refreshAccessTokenAsync",value:async function _refreshAccessTokenAsync(){this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=(async()=>{let e=await this._restAsync(x.L.Post,`${U.c}/trello/${this._memberId}/connect`,"Refresh Google Connect credentials",{token:this._trelloToken,body:{action:"refreshGoogle"},deduplicationTag:`Refresh Google Connect Credentials Request ${Math.floor(Ea()()/1e3/60)}`});if(!e.success){this._notificationSrv.showNotification(xa[e.code]?this._$translate.instant(xa[e.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_GOOGLE_CONNECT_ERROR_WITH_MESSAGE",{message:e.message}),x.A.Error),this._isGoogleConnectEnabled=!1,this._settingsSrv.currentSettings.global.connectedGooglePrimaryCalendarId=null,await this._settingsSrv.saveGlobalAsync(),this._googleCalendars=null,this._googleCalendarsMap.clear(),this._googleCalendarAccountName=null;let t=new Error(e.message);throw t.code=e.code,t.details=e.details,t}let{primaryCalendarId:t,accessToken:r,expiringIn:i}=e.data.googleCredentials;return this._googleCredentials={primaryCalendarId:t,accessToken:r,expiryDate:new Date(Ea()()+i)},await this._platformSrv.setGoogleCredentialsAsync(this._googleCredentials),r})());try{return await this._refreshAccessTokenPromise}finally{this._refreshAccessTokenPromise=null}}},{kind:"method",key:"_setupGoogleCalendarStyle",value:function _setupGoogleCalendarStyle(e){let t=this._googleCalendarStyleElements.get(e.shortId);t||(t=this._$window.document.createElement("style"),t.setAttribute("type","text/css"),this._$window.document.head.appendChild(t),this._googleCalendarStyleElements.set(e.shortId,t)),t.innerHTML=[getGoogleEventColorfulStyle(e),getGoogleEventLightStyle(e),getGoogleEventPreviewStyle(e)].join("")}},{kind:"method",key:"_getCancellationToken",value:function _getCancellationToken(e){this._cancellationTokens||(this._cancellationTokens={});let t=Ea()(),r={_timestamp:t,isCanceled:()=>this._cancellationTokens[e]._timestamp!==t};return this._cancellationTokens[e]=r,r}},{kind:"method",key:"_restAsync",value:async function _restAsync(e,t,r,i={}){let a,n=this._telemetrySrv.logRequest(r,e,t,{...i.query,...i.body}),o=200;try{return await this._platformSrv.restAsync(e,t,i)}catch(e){throw o=e.status,a=e.response,e}finally{this._telemetrySrv.logRequestEnd(n,o,a)}}}]}}));function getGoogleCalendarName(e,t,r){return e.id!==e.summary||e.id!==r?e.summary:null!=t?t:e.summary}function getGoogleColor(e){if(!e)return{};let t=Ba()(e),r=t.mix(Ba()("#ffffff"),.65);return{base:t.darken(.2).hex(),light:r.hex(),dark:r.darken(.6).desaturate(.7).hex(),highlight:r.darken(.2).hex()}}var za=r(161);function ICalCardsService_getDecoratorsApi(){ICalCardsService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ICalCardsService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ICalCardsService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ICalCardsService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ICalCardsService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ICalCardsService_createElementDescriptor(e){var t,r=ICalCardsService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ICalCardsService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ICalCardsService_hasDecorators(e){return e.decorators&&e.decorators.length}function ICalCardsService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ICalCardsService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ICalCardsService_toPropertyKey(e){var t=function ICalCardsService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Ua=3e5;let Wa=function ICalCardsService_decorate(e,t,r,i){var a,n=ICalCardsService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ICalCardsService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ICalCardsService_isDataDescriptor(a.descriptor)||ICalCardsService_isDataDescriptor(i.descriptor)){if(ICalCardsService_hasDecorators(a)||ICalCardsService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ICalCardsService_hasDecorators(a)){if(ICalCardsService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ICalCardsService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ICalCardsService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$injector","$rootScope","$log","$timeout","$translate","iCalIntegrationSrv","notificationSrv","platformSrv","settingsSrv","telemetrySrv"])],(function(e){return{F:class ICalCardsService{constructor(t,r,i,a,n,o,s,l,d,c){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$timeout=a,this._$translate=n,this._iCalIntegrationSrv=o,this._notificationSrv=s,this._platformSrv=l,this._settingsSrv=d,this._telemetrySrv=c,this._iCalIntegrationSrv.addICalCalendarEventListener("updated",(e=>{this._loadedCalendarIdsMap.has(e.id)&&(this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._requestReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded))})),this._iCalIntegrationSrv.addICalCalendarEventListener("deleted",(e=>{this._loadedCalendarIdsMap.has(e.id)&&(this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._loadedCalendarIdsMap.delete(e.id),this._requestReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded))}));for(const e in this._calendarCardsListeners)this._calendarCardsMap.addEventListener(e,((t,r={})=>{var i;r.silent||B()(i=this._calendarCardsListeners[e]).call(i,(e=>e(t,r)))}))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"iCalCardsSrv"}},{kind:"field",key:"_loadedCalendarIdsMap",value:()=>new lt.a},{kind:"field",key:"_hiddenCalendarIds",value:()=>new M.a},{kind:"field",key:"_busyCalendarIdsMap",value:()=>new lt.a},{kind:"field",key:"_invalidCalendarIds",value:()=>new M.a},{kind:"field",key:"_calendarCardsMap",value:()=>new Aa.a("id")},{kind:"field",key:"_calendarCardsListeners",value:()=>({added:new M.a,updated:new M.a,deleted:new M.a,cleared:new M.a})},{kind:"method",key:"initCurrentBoardAsync",value:async function initCurrentBoardAsync(e){this._loadedCalendarIdsMap.clear(),this._hiddenCalendarIds.clear(),this._busyCalendarIdsMap.clear(),this._invalidCalendarIds.clear(),this._calendarCardsMap.clear();let t=[];for(let e of this._iCalIntegrationSrv.getCurrentBoardConnectedICalCalendars())e.isSelected&&t.push(e.id);this.setICalCalendarsLoad(t);try{await this.getCalendarCardsAsync(e)}catch(e){this._$log.error("Planyway initialize current board iCal cards error:"),this._$log.error(e)}}},{kind:"method",key:"setICalCalendarsLoad",value:function setICalCalendarsLoad(e){for(let r of Kr()(t=this._loadedCalendarIdsMap).call(t)){var t;ze()(e).call(e,r)||this._hiddenCalendarIds.add(r)}for(let t of e)this._loadedCalendarIdsMap.has(t)?this._hiddenCalendarIds.delete(t):this._loadedCalendarIdsMap.set(t,!0);this._requestReloadCalendarCards()}},{kind:"method",key:"isICalCalendarBusy",value:function isICalCalendarBusy(e){var t;return null!==(t=this._busyCalendarIdsMap.get(e))&&void 0!==t&&t}},{kind:"method",key:"needReloadCalendarCards",value:function needReloadCalendarCards(){for(let t of Kr()(e=this._loadedCalendarIdsMap).call(e)){var e;this._loadedCalendarIdsMap.set(t,!0)}this._invalidCalendarIds.clear(),this._requestReloadCalendarCards()}},{kind:"method",key:"getCalendarCardsAsync",value:async function getCalendarCardsAsync(e){var t,r;if(!this._reloadCalendarCardsRequested)return this._getCalendarCardsPromise?this._getCalendarCardsPromise:S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(e=>!this._hiddenCalendarIds.has(e.iCalCalendarId)));this._reloadCalendarCardsRequested=!1,e||(e=this._getCancellationToken("getCalendarCards"));try{return this._getCalendarCardsPromise=P.a.race([this._getCalendarCardsAsync(e),this._$timeout((()=>{var t,r;if(!e.isCanceled())return S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(e=>!this._hiddenCalendarIds.has(e.iCalCalendarId)))}),3e3,!1)]),await this._getCalendarCardsPromise}catch(e){throw this._telemetrySrv.logError("Planyway get ICal calendar cards error",e,{class:this.constructor.name,method:this.getCalendarCardsAsync.name}),e}finally{this._getCalendarCardsPromise=null}}},{kind:"method",key:"getCalendarCardByIdAsync",value:function getCalendarCardByIdAsync(e){return this.getCalendarCardById(e)}},{kind:"method",key:"getCalendarCardById",value:function getCalendarCardById(e){return this._calendarCardsMap.get(e)}},{kind:"method",key:"addCalendarCardEventListener",value:function addCalendarCardEventListener(e,t){let r=this._calendarCardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.add(t)}},{kind:"method",key:"removeCalendarCardEventListener",value:function removeCalendarCardEventListener(e,t){let r=this._calendarCardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.delete(t)}},{kind:"method",key:"isCalendarCardVisible",value:function isCalendarCardVisible(e){return!!e.isTempCard||!this._hiddenCalendarIds.has(e.iCalCalendarId)}},{kind:"method",key:"_requestReloadCalendarCards",value:function _requestReloadCalendarCards(){this._reloadCalendarCardsRequested=!0,this._getCalendarCardsPromise=null,this._busyCalendarIdsMap.clear()}},{kind:"method",key:"_getCalendarCardsAsync",value:async function _getCalendarCardsAsync(e){var t,r;for(let e of Ta()(i=this._calendarCardsMap).call(i)){var i,a;(null===(a=this._loadedCalendarIdsMap.get(e.iCalCalendarId))||void 0===a||a)&&this._calendarCardsMap.delete(e.id,{delayed:!0})}let n=[];for(let e of Kr()(o=this._loadedCalendarIdsMap).call(o)){var o;this._loadedCalendarIdsMap.get(e)&&n.push(e)}let s=await this._getICalCalendarsDataAsync(n,e);if(e.isCanceled())return;for(let{calendarId:e,type:t,events:r}of s)for(let i of r){let r=G.a.fromICalEvent(i,e,t);this._calendarCardsMap.add(r,{delayed:!0})}for(let e of n)this._loadedCalendarIdsMap.set(e,!1);this._pollingTimeout&&this._$timeout.cancel(this._pollingTimeout);const pollICalCalendarsAsync=async()=>{try{await this._pollICalCalendarsAsync()}catch(e){this._$log.error("Planyway poll iCal calendars error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway poll iCal calendars error",e,{class:this.constructor.name,method:this._pollICalCalendarsAsync.name})}this._pollingTimeout=this._$timeout((()=>pollICalCalendarsAsync()),Ua,!1)};return this._pollingTimeout=this._$timeout((()=>pollICalCalendarsAsync()),Ua,!1),S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(e=>!this._hiddenCalendarIds.has(e.iCalCalendarId)))}},{kind:"method",key:"_getICalCalendarsDataAsync",value:async function _getICalCalendarsDataAsync(e,t){let r=[];for(e=[...e];e.length>0;){var i;await P.a.all(R()(i=y()(e).call(e,0,4)).call(i,(async e=>{try{this._setICalCalendarBusy(e,!0);let i=this._iCalIntegrationSrv.getICalCalendarById(e),a=await this._iCalIntegrationSrv.getICalCalendarDataAsync(i.url);if(t.isCanceled())return;this._setICalCalendarBusy(e,!1),r.push({...a,calendarId:e})}catch(t){this._invalidCalendarIds.add(e),this._setICalCalendarBusy(e,!1),this._$log.error("Planyway get iCal calendar data error:"),this._$log.error(t)}})))}return r}},{kind:"method",key:"_pollICalCalendarsAsync",value:async function _pollICalCalendarsAsync(){var e,t;let r=this._getCancellationToken("pollICalCalendars"),i=S()(e=re()(Kr()(t=this._loadedCalendarIdsMap).call(t))).call(e,(e=>!this._invalidCalendarIds.has(e))),a=await this._getICalCalendarsDataAsync(i,r);if(!r.isCanceled())for(let{calendarId:e,type:t,events:r}of a){if(!this._loadedCalendarIdsMap.has(e))continue;let i=new lt.a;for(let t of Ta()(n=this._calendarCardsMap).call(n)){var n;t.iCalCalendarId===e&&i.set(t.id,t)}let a=new lt.a;for(let i of r){let r=G.a.fromICalEvent(i,e,t);a.set(r.id,r)}for(let[e,t]of a){let r=i.get(e);if(r){if(r.equals(t))continue;this._calendarCardsMap.update(t,{delayed:!0})}else{if(t.recurrenceId){let e=i.get(t.recurrenceId);e&&(e.addExceptionDate(t.exceptionDate),this._calendarCardsMap.update(e,{delayed:!0}))}this._calendarCardsMap.add(t,{delayed:!0})}}for(let e of Kr()(i).call(i))a.has(e)||this._calendarCardsMap.delete(e,{delayed:!0})}}},{kind:"method",key:"_setICalCalendarBusy",value:function _setICalCalendarBusy(e,t){this._$rootScope.$evalAsync((()=>this._busyCalendarIdsMap.set(e,t)))}},{kind:"method",key:"_getCancellationToken",value:function _getCancellationToken(e){this._cancellationTokens||(this._cancellationTokens={});let t=Ea()(),r={_timestamp:t,isCanceled:()=>this._cancellationTokens[e]._timestamp!==t};return this._cancellationTokens[e]=r,r}}]}}));var ja=r(188);function ICalIntegrationService_getDecoratorsApi(){ICalIntegrationService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ICalIntegrationService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ICalIntegrationService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ICalIntegrationService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ICalIntegrationService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ICalIntegrationService_createElementDescriptor(e){var t,r=ICalIntegrationService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ICalIntegrationService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ICalIntegrationService_hasDecorators(e){return e.decorators&&e.decorators.length}function ICalIntegrationService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ICalIntegrationService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ICalIntegrationService_toPropertyKey(e){var t=function ICalIntegrationService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ha=function ICalIntegrationService_decorate(e,t,r,i){var a,n=ICalIntegrationService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ICalIntegrationService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ICalIntegrationService_isDataDescriptor(a.descriptor)||ICalIntegrationService_isDataDescriptor(i.descriptor)){if(ICalIntegrationService_hasDecorators(a)||ICalIntegrationService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ICalIntegrationService_hasDecorators(a)){if(ICalIntegrationService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ICalIntegrationService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ICalIntegrationService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$injector","$rootScope","$log","$interval","$translate","notificationSrv","platformSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class ICalIntegrationService{constructor(t,r,i,a,n,o,s,l,d,c){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$interval=a,this._$translate=n,this._notificationSrv=o,this._platformSrv=s,this._settingsSrv=l,this._telemetrySrv=d,this._trelloIntegrationSrv=c}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"iCalIntegrationSrv"}},{kind:"field",key:"_iCalCalendarsMap",value:()=>new Aa.a("id")},{kind:"field",key:"_iCalCalendarsListeners",value:()=>({added:new M.a,updated:new M.a,deleted:new M.a,cleared:new M.a})},{kind:"get",key:"_iCalCardsSrv",value:function _iCalCardsSrv(){return this._iCalCardsSrvLazy||(this._iCalCardsSrvLazy=this._$injector.get("iCalCardsSrv")),this._iCalCardsSrvLazy}},{kind:"method",key:"initCurrentBoardAsync",value:function initCurrentBoardAsync(e){return this._loadCalendars(),this._iCalCardsSrv.initCurrentBoardAsync(e)}},{kind:"method",key:"getCurrentBoardConnectedICalCalendars",value:function getCurrentBoardConnectedICalCalendars(){var e;let t=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).boardICals;return R()(e=this.getICalCalendars()).call(e,(e=>{var r,i;return{id:e.id,isSelected:null!==(r=null===(i=t[e.id])||void 0===i?void 0:i.isSelected)&&void 0!==r&&r}}))}},{kind:"method",key:"setCurrentBoardConnectedICalCalendars",value:function setCurrentBoardConnectedICalCalendars(e){let t=[],r=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).boardICals;for(let i of e)i.isSelected&&t.push(i.id),r[i.id]={...r[i.id],isSelected:i.isSelected};this._iCalCardsSrv.setICalCalendarsLoad(t),this._settingsSrv.saveGlobalAsync()}},{kind:"method",key:"getICalCalendars",value:function getICalCalendars(){var e;return Ta()(e=this._iCalCalendarsMap).call(e)}},{kind:"method",key:"getICalCalendarById",value:function getICalCalendarById(e){return this._iCalCalendarsMap.get(e)}},{kind:"method",key:"checkICalCalendarAsync",value:async function checkICalCalendarAsync(e){try{let t=await this.getICalCalendarDataAsync(e);return{type:t.type,url:t.url,name:t.name}}catch(e){this._$log.error("Planyway iCal validation error:"),this._$log.error(e)}}},{kind:"method",key:"getICalCalendarDataAsync",value:async function getICalCalendarDataAsync(e){let t;try{if(t=await this._restAsync(x.L.Get,`${U.G}/trello/${this._memberId}/ical/proxy`,"Load iCal",{token:this._trelloToken,query:{url:e}}),!t.success){let e=new Error(t.message);throw e.code=t.code,e.details=t.details,e}}catch(e){throw this._telemetrySrv.logError("Planyway get iCal data error",e,{class:this.constructor.name,method:this.getICalCalendarDataAsync.name}),e}try{return this._parseICalCalendarData(e,t.data)}catch(e){throw this._telemetrySrv.logError("Planyway parse iCal data error",e,{class:this.constructor.name,method:this.getICalCalendarDataAsync.name}),e}}},{kind:"method",key:"addICalCalendar",value:function addICalCalendar(e){var t;let r=c()(t=this._iCalCalendarsMap).call(t,(t=>t.url===e.url));return r||(r={...e,id:Ve()()},this._iCalCalendarsMap.add(r),this._settingsSrv.currentSettings.global.iCalList.push({id:r.id,iCalType:r.type,calendarUrl:r.url,calendarName:r.name,calendarColor:r.color}),this._settingsSrv.saveGlobalAsync(),r)}},{kind:"method",key:"updateICalCalendarProperties",value:function updateICalCalendarProperties(e,t){let r=this.getICalCalendarById(e);r&&(t.color&&(r.color=t.color),this._iCalCalendarsMap.update(r),this._settingsSrv.currentSettings.global.iCalList.push({id:e,iCalType:r.type,calendarUrl:r.url,calendarName:r.name,calendarColor:r.color}),this._settingsSrv.saveGlobalAsync())}},{kind:"method",key:"removeICalCalendar",value:function removeICalCalendar(e){var t;this._iCalCalendarsMap.delete(e);let r=this._settingsSrv.currentSettings.global,i=at()(t=r.iCalList).call(t,(t=>t.id===e));if(-1!==i){var a;y()(a=r.iCalList).call(a,i,1);for(let t of J()(r.calendarBoard))t.boardICals[e]&&(t.boardICals[e]={});this._settingsSrv.saveGlobalAsync()}}},{kind:"method",key:"isConnectedICalCalendarBusy",value:function isConnectedICalCalendarBusy(e){return this._iCalCardsSrv.isICalCalendarBusy(e)}},{kind:"method",key:"addICalCalendarEventListener",value:function addICalCalendarEventListener(e,t){let r=this._iCalCalendarsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.add(t)}},{kind:"method",key:"removeICalCalendarEventListener",value:function removeICalCalendarEventListener(e,t){let r=this._iCalCalendarsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.delete(t)}},{kind:"method",key:"getExportICalCalendarUrlAsync",value:async function getExportICalCalendarUrlAsync(){let e=await this._restAsync(x.L.Get,`${U.l}/iCalExport/${this._memberId}/${this._currentBoardId}?token=${this._trelloToken}`,"Get iCal URL");return e.url?e.url:this.resetExportICalCalendarUrlAsync()}},{kind:"method",key:"resetExportICalCalendarUrlAsync",value:async function resetExportICalCalendarUrlAsync(){return(await this._restAsync(x.L.Post,`${U.l}/iCalExport/${this._memberId}/${this._currentBoardId}?token=${this._trelloToken}`,"Reset iCal URL",{body:{timeZone:Pa.a.tz.guess()}})).url}},{kind:"method",key:"deleteExportICalCalendarUrlAsync",value:async function deleteExportICalCalendarUrlAsync(){await this._restAsync(x.L.Delete,`${U.l}/iCalExport/${this._memberId}/${this._currentBoardId}?token=${this._trelloToken}`,"Delete iCal URL")}},{kind:"get",key:"_memberId",value:function _memberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_trelloToken",value:function _trelloToken(){return this._trelloIntegrationSrv.getTrelloToken()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"method",key:"_loadCalendars",value:function _loadCalendars(){if(this._calendarsLoaded)return;this._calendarsLoaded=!0;let e=this._settingsSrv.currentSettings.global.iCalList;for(let t of e)this._iCalCalendarsMap.add({id:t.id,type:t.iCalType,url:t.calendarUrl,name:t.calendarName,color:t.calendarColor});for(const e in this._iCalCalendarsListeners)this._iCalCalendarsMap.addEventListener(e,((t,r={})=>{var i,a;r.silent||B()(a=this._iCalCalendarsListeners[e]).call(a,(e=>e(t,r)));if("cleared"===e)return void this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars});let n=c()(i=this.getCurrentBoardConnectedICalCalendars()).call(i,(e=>e.id===t.id));switch(e){case"updated":if(n&&!n.isSelected)return;t.name!==r.oldValue.name&&this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars});break;case"deleted":if(n&&!n.isSelected)return;this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars})}}))}},{kind:"method",key:"_parseICalCalendarData",value:function _parseICalCalendarData(e,t){let r=new ja.a.Component(ja.a.parse(t)),i=x.s.Other,a=r.getFirstPropertyValue("prodid");a?ze()(a).call(a,"Google Calendar")?i=x.s.Google:ze()(a).call(a,"Microsoft")&&(i=x.s.Outlook):ze()(e).call(e,"icloud")&&(i=x.s.Apple);let o=r.getAllSubcomponents("vtimezone");for(let e of o){let t=e.getFirstPropertyValue("tzid");ja.a.TimezoneService.has(t)||ja.a.TimezoneService.register(e)}let s=new lt.a,l=new lt.a,d=new lt.a,c=[],h=r.getAllSubcomponents("vevent");for(let t of h){let r=t.getFirstPropertyValue("uid");if(!r){this._$log.warn("iCal event uid property not found!");continue}let i=t.getFirstPropertyValue("summary"),a=t.getFirstPropertyValue("description"),o=t.getFirstPropertyValue("dtstart");if(!o){this._$log.warn("iCal event dtstart property not found!");continue}let h=t.getFirstPropertyValue("dtend");h||(h=o);let m=t.getFirstPropertyValue("rrule"),f=t.getFirstPropertyValue("recurrence-id"),y=t.getAllProperties("exdate"),v=Ma()(e)+Ma()(r),_=i||this._$translate.instant("MISC.NO_TITLE"),g=a,C=o.toJSDate(),k=h.toJSDate();k<C&&(k=C);let D=o.isDate&&h.isDate;D&&!Object(n.w)(C,k)&&(k=Object(n.a)(k,-1));let E,w,S=m&&m.toString();if(f){w=f&&f.toJSDate(),E=v,v+=Object(n.Gb)(w);let e=l.get(E);if(e)e.relateException(t);else{let e=d.get(E);e?e.push(t):d.set(E,[t])}}let T=[];var u,p;if(y)T=R()(u=b()(p=R()(y).call(y,(e=>e.getValues()))).call(p)).call(u,(e=>e.toJSDate()));let A;if(S){let e=new ja.a.Event(t,{exceptions:d.get(v)||[]});l.set(v,e);let r=k-C;A=function(t,i){let a=e.iterator(),n=[],o=a.next();for(;o;){let s=o.toJSDate();if(s>i)break;s>=t-r&&!e.exceptions[o]&&n.push(this.toOccurrence({start:s,end:new Date(s.getTime()+r)})),o=a.next()}return n}}else A=function(){return[this]};let I={id:v,title:_,description:g,isAllDay:D,start:C,end:k,recurrenceRule:S,exceptionDates:T,recurrenceId:E,exceptionDate:w,customExpand:A};E&&c.push(I),s.set(v,I)}for(let e of c){let t=s.get(e.recurrenceId);t&&t.exceptionDates.push(e.exceptionDate)}return{type:i,url:e,name:r.getFirstPropertyValue("x-wr-calname")||e,events:re()(Ta()(s).call(s))}}},{kind:"method",key:"_restAsync",value:async function _restAsync(e,t,r,i={}){let a,n=this._telemetrySrv.logRequest(r,e,t,{...i.query,...i.body}),o=200;try{return await this._platformSrv.restAsync(e,t,i)}catch(e){throw o=e.status,a=e.response,e}finally{this._telemetrySrv.logRequestEnd(n,o,a)}}}]}}));var Va=r(219),Ya=r(220),Ka=r(718);function OnboardingService_getDecoratorsApi(){OnboardingService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!OnboardingService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=OnboardingService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:OnboardingService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=OnboardingService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function OnboardingService_createElementDescriptor(e){var t,r=OnboardingService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function OnboardingService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function OnboardingService_hasDecorators(e){return e.decorators&&e.decorators.length}function OnboardingService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function OnboardingService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function OnboardingService_toPropertyKey(e){var t=function OnboardingService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Xa=r.n(Ka)()({TRIAL_OR_TEAM_MANY_MEMBERS_ON_BOARD:"TRIAL_OR_TEAM_MANY_MEMBERS_ON_BOARD",TRIAL_OR_TEAM_OR_PRO_ONE_MEMBER_ON_BOARD:"TRIAL_OR_TEAM_OR_PRO_ONE_MEMBER_ON_BOARD",FREE:"FREE"});let qa=function OnboardingService_decorate(e,t,r,i){var a,n=OnboardingService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function OnboardingService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(OnboardingService_isDataDescriptor(a.descriptor)||OnboardingService_isDataDescriptor(i.descriptor)){if(OnboardingService_hasDecorators(a)||OnboardingService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(OnboardingService_hasDecorators(a)){if(OnboardingService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}OnboardingService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,OnboardingService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$injector","$rootScope","$log","$timeout","$window","appCommonSrv","dialogSrv","licenseSrv","platformSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class OnboardingService{constructor(t,r,i,a,n,o,s,l,d,c,h,u){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$timeout=a,this._appCommonSrv=o,this._dialogSrv=s,this._licenseSrv=l,this._platformSrv=d,this._settingsSrv=c,this._telemetrySrv=h,this._trelloIntegrationSrv=u,this._isInOnboarding=n.location.search===U.z,this._$rootScope.$on(x.n.BoardInitialized,(()=>this._showOnboardingAsync())),this._$rootScope.$on(x.n.SchedulerShowing,(()=>this._showOnboardingAsync({ignoreSchedulerShown:!0}))),this._$rootScope.$on(x.n.SchedulerShown,(()=>this._showOnboardingAsync()));for(let e of[x.n.ResizerContentResized,x.n.ResizeListenerElementResized,x.n.SchedulerOrientationChanged])this._$rootScope.$on(e,(()=>{this._$timeout((()=>{this.repositionTips()}),0,!1)}));this._$rootScope.$on(x.n.CloseDialogsRequested,(()=>this.hideTips()))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"onboardingSrv"}},{kind:"field",key:"_lastBoardId",value:void 0},{kind:"field",key:"_onboardingStrategy",value:()=>null},{kind:"field",key:"_onboardingStrategies",value:()=>new lt.a},{kind:"get",key:"isInOnboarding",value:function isInOnboarding(){return this._isInOnboarding}},{kind:"method",key:"showWelcomeSurveyDialogAsync",value:async function showWelcomeSurveyDialogAsync(){this._showWelcomeSurveyDialogPromise||(this._showWelcomeSurveyDialogPromise=(async()=>{await this._settingsSrv.loadSettingsAsync(),this._globalSettings.isOnboardingWelcomeSurveyPassed||(this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.SurveyShown),await this._dialogSrv.showWelcomeSurveyDialogAsync({fullSize:!0}),this._globalSettings.isOnboardingWelcomeSurveyPassed=!0,this._$rootScope.$evalAsync((()=>{this._settingsSrv.saveGlobalAsync()})))})());try{return await this._showWelcomeSurveyDialogPromise}finally{this._showWelcomeSurveyDialogPromise=null}}},{kind:"get",key:"lastNews",value:function lastNews(){return this._lastNews||[]}},{kind:"get",key:"lastNewsDate",value:function lastNewsDate(){return this._lastNewsDate}},{kind:"get",key:"isNewsDialogBusy",value:function isNewsDialogBusy(){return this._isNewsDialogBusy}},{kind:"method",key:"isNewsAvailable",value:function isNewsAvailable(){if(this._appCommonSrv.isSchedulerInPreview())return!1;if(void 0===this._isNewsAvailable)if(!this.lastNewsDate||new Date(this.lastNewsDate)<Object(n.a)(new Date,-30)||this._telemetrySrv.getAcquisitionDate()>Object(n.a)(new Date,-1))this._isNewsAvailable=!1;else{let e=this._globalSettings.news;!e.lastNewsDate||new Date(e.lastNewsDate)<new Date(this.lastNewsDate)?(e.lastNewsDate=this.lastNewsDate,e.newsHidden=!1,e.showUntilDate=Object(n.Fb)(Object(n.a)(new Date,30)),this._settingsSrv.saveGlobalAsync(),this._isNewsAvailable=!0):this._isNewsAvailable=!e.newsHidden&&new Date(e.showUntilDate)>new Date}return this._isNewsAvailable}},{kind:"method",key:"loadLastNewsAsync",value:async function loadLastNewsAsync(){try{var e;this._$rootScope.$evalAsync((()=>this._isNewsDialogBusy=!0));let t=await this._platformSrv.restAsync(x.L.Get,U.g,{maxRetryCount:3,headers:{"cache-control":"no-cache"}});this._lastNews=We()(t).call(t,((e,t)=>new Date(t)-new Date(e))),this._lastNewsDate=null===(e=this.lastNews[0])||void 0===e?void 0:e.date}catch(e){this._$log.error("Planyway load app changelog error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway load app changelog error",e,{class:this.constructor.name,method:this.loadLastNewsAsync.name})}finally{this._$rootScope.$evalAsync((()=>this._isNewsDialogBusy=!1))}}},{kind:"method",key:"showProductTourAsync",value:function showProductTourAsync(e={}){if(!e.force&&(this._globalSettings.isProductTourPassed||this._globalSettings.isProductTourClosed))return;let t=e.force?x.I.Large:this._globalSettings.isProductTourMinimized?x.I.Small:x.I.Large,r=this._globalSettings.productTourType,i=this._globalSettings.productTourStepIndex,a=x.H.Trial;r!==a&&(r=a,i=0,this._globalSettings.productTourType=r,this._globalSettings.productTourStepIndex=i,this._settingsSrv.saveGlobalAsync()),this._dialogSrv.showProductTourAsync({mode:t,type:r,stepIndex:i})}},{kind:"method",key:"hideTips",value:function hideTips(){for(let[t,r]of this._strategyTips||[]){var e;null===(e=r.tip)||void 0===e||e.hide()}}},{kind:"method",key:"repositionTips",value:function repositionTips(){for(let[t,r]of this._strategyTips||[]){var e;null===(e=r.tip)||void 0===e||e.position()}}},{kind:"method",key:"_showOnboardingAsync",value:async function _showOnboardingAsync(e={}){this._trelloIntegrationSrv.isMemberUnavailable()||this._appCommonSrv.isSchedulerUnavailable()||!e.ignoreSchedulerShown&&!this._appCommonSrv.isSchedulerShown()||this._lastBoardId!==this._currentBoardId&&(this._lastBoardId=this._currentBoardId,this._onboardingStrategy=this._getOnboardingStrategy(),await this.showWelcomeSurveyDialogAsync(),await this._showTrialExpiredDialogAsync(),await this._showChooseModeDialogAsync(),await this._showNewsDialogAsync(),await this.showProductTourAsync())}},{kind:"get",key:"_globalSettings",value:function _globalSettings(){return this._settingsSrv.currentSettings.global}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_currentBoardHasMultipleMembers",value:function _currentBoardHasMultipleMembers(){return this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId).members.length>1}},{kind:"method",key:"_showNewsDialogAsync",value:async function _showNewsDialogAsync(){this._showNewsDialogPromise||(this._showNewsDialogPromise=(async()=>{await this.loadLastNewsAsync(),this.isNewsAvailable()&&(await Object(n.x)(1e3),this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.NewsShown,{newsDate:this.lastNewsDate}),await this._dialogSrv.showNewsDialogAsync(),this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.NewsHidden,{newsDate:this.lastNewsDate}),this._$timeout((()=>{this._isNewsAvailable=!1,this._globalSettings.news.newsHidden=!0,this._settingsSrv.saveGlobalAsync()})))})());try{return await this._showNewsDialogPromise}finally{this._showNewsDialogPromise=null}}},{kind:"method",key:"_getOnboardingStrategy",value:function _getOnboardingStrategy(){switch(this._licenseSrv.getLicenseType()){case me.g.Trial:case me.g.Team:return this._currentBoardHasMultipleMembers?Xa.TRIAL_OR_TEAM_MANY_MEMBERS_ON_BOARD:Xa.TRIAL_OR_TEAM_OR_PRO_ONE_MEMBER_ON_BOARD;case me.g.Pro:return Xa.TRIAL_OR_TEAM_OR_PRO_ONE_MEMBER_ON_BOARD;default:return Xa.FREE}}},{kind:"get",key:"_strategyTips",value:function _strategyTips(){if(this._onboardingStrategy)return this._onboardingStrategies.get(this._onboardingStrategy)}},{kind:"method",key:"_showTipsAsync",value:async function _showTipsAsync(){this._showTipsPromise||(this._showTipsPromise=(async()=>{this.hideTips();const e=await this._platformSrv.getAppStorageDataAsync(),t=e.onboardingBoardId;if(t){if(this._currentBoardId!==t)return}else e.onboardingBoardId=this._currentBoardId,await this._platformSrv.setAppStorageDataAsync(e);this._showNextTip()})());try{return await this._showTipsPromise}finally{this._showTipsPromise=null}}},{kind:"method",key:"_showNextTip",value:function _showNextTip(){for(let[e,t]of this._strategyTips||[])if(t.canShow()){t.handler();break}}},{kind:"method",key:"_getTip",value:function _getTip(e){var t;return(null===(t=this._strategyTips)||void 0===t?void 0:t.get(e))||null}},{kind:"method",key:"_setTip",value:function _setTip(e,t){this._onboardingStrategy&&(this._hideTip(e),this._getTip(e).tip=t)}},{kind:"method",key:"_hideTip",value:function _hideTip(e){let t=this._getTip(e);null!=t&&t.tip&&(t.tip.hide(),t.tip=null)}},{kind:"method",key:"_showChooseModeDialogAsync",value:async function _showChooseModeDialogAsync(){if(this._currentBoardId){this._showChooseModeDialogPromise||(this._showChooseModeDialogPromise=(async()=>{if(this._globalBoardSettings.isViewTemplateSelected)return;let e;this._telemetrySrv.logSessionEvent(x.X.OnboardingEvents.ChooseModeShown);let t=await this._dialogSrv.showChooseModeDialogAsync(),r=this._licenseSrv.getLicenseType();switch(t){case x.M.Calendar:e=x.sb.MonthlySchedule;break;case x.M.Timeline:switch(r){case me.g.Trial:case me.g.Team:e=x.sb.TeamManagement;break;case me.g.Pro:e=x.sb.NoLanes}break;case x.M.TimeTracking:switch(r){case me.g.Trial:case me.g.Team:e=x.sb.TimeTracking}}e||(e=x.sb.MonthlySchedule),await this._appCommonSrv.selectTemplateAsync(e),this._globalBoardSettings.isViewTemplateSelected=!0,this._$rootScope.$evalAsync((()=>{this._settingsSrv.saveGlobalAsync()}))})());try{return await this._showChooseModeDialogPromise}finally{this._showChooseModeDialogPromise=null}}}},{kind:"method",key:"_showTrialExpiredDialogAsync",value:async function _showTrialExpiredDialogAsync(){this._showTrialExpiredDialogPromise||(this._showTrialExpiredDialogPromise=(async()=>{if(this._licenseSrv.isLicenseActive())try{localStorage.removeItem("planywayTrialExpirationNotified")}catch(e){}else if(this._licenseSrv.getLicenseType()===me.g.Trial&&!localStorage.planywayTrialExpirationNotified){await Object(n.x)(1e3),this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.TrialExpiredShown),await this._dialogSrv.showTrialExpiredDialogAsync({fullSize:!1})||this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.TrialExpiredClosed);try{localStorage.planywayTrialExpirationNotified=!0}catch(e){}}})());try{return await this._showTrialExpiredDialogPromise}finally{this._showTrialExpiredDialogPromise=null}}}]}}));var Qa=r(124),Ja=r.n(Qa),Za=r(182);function PushNotificationsService_getDecoratorsApi(){PushNotificationsService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!PushNotificationsService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PushNotificationsService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PushNotificationsService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PushNotificationsService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PushNotificationsService_createElementDescriptor(e){var t,r=PushNotificationsService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PushNotificationsService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PushNotificationsService_hasDecorators(e){return e.decorators&&e.decorators.length}function PushNotificationsService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PushNotificationsService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PushNotificationsService_toPropertyKey(e){var t=function PushNotificationsService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const en=new(r.n(Za).a)(U.y);let tn=function PushNotificationsService_decorate(e,t,r,i){var a,n=PushNotificationsService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PushNotificationsService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(PushNotificationsService_isDataDescriptor(a.descriptor)||PushNotificationsService_isDataDescriptor(i.descriptor)){if(PushNotificationsService_hasDecorators(a)||PushNotificationsService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PushNotificationsService_hasDecorators(a)){if(PushNotificationsService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PushNotificationsService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,PushNotificationsService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$log","$translate","$window","appCommonSrv","backendSrv","dialogSrv","licenseSrv","notificationSrv","platformSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class PushNotificationsService{constructor(t,r,i,a,n,o,s,l,d,c,h){e(this),this._$log=t,this._$translate=r,this._appCommonSrv=a,this._backendSrv=n,this._dialogSrv=o,this._licenseSrv=s,this._notificationSrv=l,this._platformSrv=d,this._telemetrySrv=c,this._trelloIntegrationSrv=h;try{this._browser=Ja.a.getParser(i.navigator.userAgent),this._requestNotificationStatusAsync()}catch(e){}}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"pushNotificationsSrv"}},{kind:"get",key:"isNotificationsSupported",value:function isNotificationsSupported(){var e;void 0===this._isNotificationsSupported&&(this._isNotificationsSupported="Safari"!==(null===(e=this._browser)||void 0===e?void 0:e.getBrowserName())&&!this._appCommonSrv.isInsideElectron());return this._isNotificationsSupported}},{kind:"get",key:"isNotificationsEnabled",value:function isNotificationsEnabled(){return this.notificationStatus===x.J.Enabled||this.notificationStatus===x.J.Disabling}},{kind:"get",key:"notificationStatus",value:function notificationStatus(){return this._notificationStatus}},{kind:"method",key:"enableNotificationsAsync",value:async function enableNotificationsAsync(){try{if(this.notificationStatus===x.J.Enabled||this.notificationStatus===x.J.Enabling)return!0;let e=await this._platformSrv.exchangeSiteDataAsync(x.o.SubscribeNotifications,this._appCommonSrv.getLocale());if(!e)return!1;let t=await this._platformSrv.getPushNotificationsSubscriptionsAsync(),r=en.encrypt(e,"base64");if(t[this._memberId]=r,await this._platformSrv.setPushNotificationsSubscriptionsAsync(t),this._notificationStatus=x.J.Enabling,this._licenseSrv.isLicenseActive()){await this._backendSrv.subscribePushNotificationsAsync(r,Pa.a.tz.guess());let e=(async()=>{let e=0;for(;e<5;){if(await Object(n.x)(1e3*(0===e?10:5)),e+=1,await this._backendSrv.checkPushNotificationsSubscriptionAsync(r))return void(this._notificationStatus=x.J.Enabled)}this._notificationStatus=x.J.Disabled,this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PUSH_NOTIFICATIONS_REGISTER_LONGER_THAN_USUAL"),x.A.Warning,x.z.PushNotifications)})();await e,this.notificationStatus===x.J.Disabled&&await this._disableMemberNotificationsSubscriptionAsync()}else this._notificationStatus=x.J.Enabled;return!0}catch(e){this._notificationStatus=x.J.Disabled,await this._disableMemberNotificationsSubscriptionAsync();let t="NotAllowedError"===e.name?"NOTIFICATIONS.PUSH_NOTIFICATIONS_BLOCKED_ERROR":"NOTIFICATIONS.PUSH_NOTIFICATIONS_ENABLE_ERROR";return this._notificationSrv.showNotification(this._$translate.instant(t),x.A.Error,x.z.PushNotifications),this._$log.error("Planyway enable push notifications error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway enable push notifications error",e,{class:this.constructor.name,method:this.enableNotificationsAsync.name}),!1}}},{kind:"method",key:"disableNotificationsAsync",value:async function disableNotificationsAsync(){try{if(this.notificationStatus===x.J.Disabled||this.notificationStatus===x.J.Disabling)return!0;if(!await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.DISABLE_NOTIFICATIONS_TITLE"),this._$translate.instant("DIALOGS.DISABLE_NOTIFICATIONS_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))return!1;this._notificationStatus=x.J.Disabling;let e=await this._getMemberNotificationsSubscriptionAsync();await this._backendSrv.unsubscribePushNotificationsAsync();let t=(async()=>{let t=0;for(;t<5;){if(await Object(n.x)(5e3),t+=1,!await this._backendSrv.checkPushNotificationsSubscriptionAsync(e))return void(this._notificationStatus=x.J.Disabled)}this._notificationStatus=x.J.Enabled,this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PUSH_NOTIFICATIONS_UNREGISTER_LONGER_THAN_USUAL"),x.A.Warning,x.z.PushNotifications)})();return await t,this.notificationStatus===x.J.Disabled&&await this._disableMemberNotificationsSubscriptionAsync(this._memberId),!0}catch(e){return this._notificationStatus=x.J.Enabled,this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PUSH_NOTIFICATIONS_DISABLE_ERROR"),x.A.Error,x.z.PushNotifications),this._$log.error("Planyway enable push notifications error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway disable push notifications error",e,{class:this.constructor.name,method:this.disableNotificationsAsync.name}),!1}}},{kind:"get",key:"_memberId",value:function _memberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_trelloToken",value:function _trelloToken(){return this._trelloIntegrationSrv.getTrelloToken()}},{kind:"method",key:"_requestNotificationStatusAsync",value:async function _requestNotificationStatusAsync(){let e=await this._getMemberNotificationsSubscriptionAsync();this._notificationStatus=e?x.J.Enabled:x.J.Disabled,e&&this.isNotificationsEnabled&&this._licenseSrv.isLicenseActive()&&!await this._backendSrv.checkPushNotificationsSubscriptionAsync(e)&&this._backendSrv.subscribePushNotificationsAsync(e,Pa.a.tz.guess())}},{kind:"method",key:"_getMemberNotificationsSubscriptionAsync",value:async function _getMemberNotificationsSubscriptionAsync(){return(await this._platformSrv.getPushNotificationsSubscriptionsAsync())[this._memberId]}},{kind:"method",key:"_disableMemberNotificationsSubscriptionAsync",value:async function _disableMemberNotificationsSubscriptionAsync(){let e=await this._platformSrv.getPushNotificationsSubscriptionsAsync();delete e[this._memberId],await this._platformSrv.setPushNotificationsSubscriptionsAsync(e)}}]}}));var rn=r(181),an=r.n(rn),nn=r(719),on=r.n(nn),sn=r(463);function ReportService_getDecoratorsApi(){ReportService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ReportService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ReportService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ReportService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ReportService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ReportService_createElementDescriptor(e){var t,r=ReportService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ReportService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ReportService_hasDecorators(e){return e.decorators&&e.decorators.length}function ReportService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ReportService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ReportService_toPropertyKey(e){var t=function ReportService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const ln=Ar.a.RRule,dn=Ar.a.RRuleSet,cn="custom_field__",hn="Archived",un="Completed",pn="Incomplete";let mn=function ReportService_decorate(e,t,r,i){var a,n=ReportService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ReportService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ReportService_isDataDescriptor(a.descriptor)||ReportService_isDataDescriptor(i.descriptor)){if(ReportService_hasDecorators(a)||ReportService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ReportService_hasDecorators(a)){if(ReportService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ReportService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ReportService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$log","$translate","appCommonSrv","calendarCardsSrv","googleIntegrationSrv","iCalIntegrationSrv","notificationSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class ReportService{constructor(t,r,i,a,n,o,s,l,d,c){e(this),this._$log=t,this._$translate=r,this._appCommonSrv=i,this._calendarCardsSrv=a,this._googleIntegrationSrv=n,this._iCalIntegrationSrv=o,this._notificationSrv=s,this._settingsSrv=l,this._telemetrySrv=d,this._trelloIntegrationSrv=c}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"reportSrv"}},{kind:"get",key:"availableReports",value:function availableReports(){return this._availableReports||(this._availableReports=[{type:x.K.TimeRecords,parameters:{title:this._$translate.instant("DIALOGS.REPORTS_EXPORT_TIME_RECORDS"),template:this._getParametersTemplate("pw-time-records-report-parameters"),isValid:e=>this._isTimeRecordsReportParametersValid(e)},actionText:this._$translate.instant("BUTTONS.EXPORT_TO_CSV"),build:e=>this._buildTimeRecordsReportAsync(e)},{type:x.K.AllCards,parameters:{title:this._$translate.instant("DIALOGS.REPORTS_EXPORT_ALL_CARDS"),template:this._getParametersTemplate("pw-all-cards-report-parameters"),isValid:e=>this._isAllCardsReportParametersValid(e)},actionText:this._$translate.instant("BUTTONS.EXPORT_TO_CSV"),build:e=>this._buildAllCardsReportAsync(e)}]),this._availableReports}},{kind:"get",key:"isCancelled",value:function isCancelled(){return this._isCancelled}},{kind:"set",key:"isCancelled",value:function isCancelled(e){this._isCancelled=e}},{kind:"method",key:"getDefaultParameters",value:function getDefaultParameters(e,{view:t,unit:r}={}){switch(e){case x.K.TimeRecords:return{startDate:Object(n.O)(t.startDate()),endDate:Object(n.N)(t.endDate())};case x.K.AllCards:switch(this._appCommonSrv.getSchedulerMode()){case x.M.Calendar:switch(this._appCommonSrv.getSchedulerView()){case x.O.OneDay:case x.O.ThreeDay:case x.O.Week:return{startDate:Object(n.O)(t.startDate()),endDate:Object(n.N)(t.endDate())};case x.O.Month:return{startDate:Object(n.O)(kendo.date.firstDayOfMonth(t.selectedDate)),endDate:Object(n.N)(kendo.date.lastDayOfMonth(t.selectedDate))}}break;case x.M.Timeline:switch(r){case x.hb.Day:let e=kendo.culture().calendar.firstDay,r=(e+6)%7;return{startDate:Object(n.O)(Object(n.eb)(t.selectedDate,e)),endDate:Object(n.N)(Object(n.db)(t.selectedDate,r))};case x.hb.Week:return{startDate:Object(n.O)(kendo.date.firstDayOfMonth(t.selectedDate)),endDate:Object(n.N)(kendo.date.lastDayOfMonth(t.selectedDate))};case x.hb.Month:return{startDate:Object(n.O)(Object(n.ab)(t.selectedDate)),endDate:Object(n.N)(Object(n.Z)(t.selectedDate))};case x.hb.Quarter:case x.hb.Year:return{startDate:Object(n.O)(Object(n.gb)(t.selectedDate)),endDate:Object(n.N)(Object(n.fb)(t.selectedDate))}}}}return{}}},{kind:"method",key:"_getParametersTemplate",value:function _getParametersTemplate(e){return`\n            <${e}\n                class="pw-report-parameters"\n                is-disabled="$ctrl.isBusy"\n                parameters="$ctrl.parameters"\n                parameters-changed-callback="$ctrl.reportParametersChanged(parameters)"\n            ></${e}>\n        `}},{kind:"method",key:"_generateCsvReport",value:function _generateCsvReport(e,t,r="\t"){return on()(e,{columns:t,delimiter:r,header:!0,quoted_match:r})}},{kind:"method",key:"_getCardLabels",value:function _getCardLabels(e){var t,r;return R()(t=S()(r=e.labelIds).call(r,(e=>e!==U.k))).call(t,(e=>{let t=this._trelloIntegrationSrv.getTrelloLabelById(e);return(null==t?void 0:t.name)||(null==t?void 0:t.color)||U.k}))}},{kind:"method",key:"_getCardMembers",value:function _getCardMembers(e){var t,r;return R()(t=S()(r=e.members).call(r,(e=>e!==U.k))).call(t,(e=>this._trelloIntegrationSrv.getTrelloMemberById(e).fullName))}},{kind:"method",key:"_getCardDurationHours",value:function _getCardDurationHours(e){return e.isAllDay?Object(n.pb)(e.start,e.end)?24:24*(Object(n.R)(e.start,e.end)+1):Object(n.S)(e.start,e.end)/60}},{kind:"method",key:"_getCardCustomFields",value:function _getCardCustomFields(e,t){var r,i;let a=this._calendarCardsSrv.getCalendarCardCustomFieldValues(e)||{};return rt()(r=S()(i=t.customFields).call(i,(e=>e.id!==t.cardDataCustomFieldId))).call(r,((e,t)=>{var r,i;let o,s=a[t.id];if(void 0!==s)switch(t.type){case x.pb.Checkbox:o=s.toString();break;case x.pb.Date:o=Object(n.Hb)(s);break;case x.pb.Number:o=kendo.toString(s,"n");break;case x.pb.List:o=null===(r=c()(i=t.options).call(i,(e=>e.id===s)))||void 0===r?void 0:r.name;break;case x.pb.Text:o=s}return e.set(`custom_field__${t.name}`,o),e}),new lt.a)}},{kind:"method",key:"_getCardRecurrences",value:function _getCardRecurrences(e,t,r){var i;let a=Object(n.T)(e.start,e.end),o=new Date(t.getTime()-a),s=new Date(r.getTime()+a),l=new ln({...ln.parseString(e.recurrenceRule),dtstart:e.start}),d=new dn;d.rrule(l);for(let t of e.exceptionDates)d.exdate(t);let c=d.between(o,s,!0);return S()(i=R()(c).call(c,(e=>({start:e,end:new Date(e.getTime()+a)})))).call(i,(e=>Object(n.ib)(t,r,e.start,e.end)))}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}},{kind:"method",key:"_isTimeRecordsReportParametersValid",value:function _isTimeRecordsReportParametersValid(e){return!!e&&(Object(n.rb)(e.startDate)&&Object(n.rb)(e.endDate))}},{kind:"method",key:"_buildTimeRecordsReportAsync",value:async function _buildTimeRecordsReportAsync(e){let{startDate:t,endDate:r}=e,i=this._trelloIntegrationSrv.getMemberId();try{var a,o;let e=await this._calendarCardsSrv.getCalendarCardsAsync();if(this.isCancelled)return;let s=rt()(a=We()(o=S()(e).call(e,(e=>e.cardType===x.h.TrelloTimeRecord&&e.members[0]===i&&Object(n.ib)(t,r,e.start,e.end)))).call(o,((e,t)=>e.start-t.start))).call(a,((e,t)=>[...e,...this._timeRecordToTimeRecordsReportRows(t)]),[]),l=this._generateCsvReport(s,{board:"Board",list:"List",card:"Card",member:"Member",labels:"Labels",date:"Date",startTime:"StartTime",endTime:"EndTime",durationHours:"DurationHours",description:"Description"}),d=new Blob([String.fromCharCode(65279),l],{type:"text/csv;charset=utf-8"}),c=`Planyway-time-report-${Object(n.Fb)(t)}-${Object(n.Fb)(r)}.csv`;Object(sn.saveAs)(d,c)}catch(e){this._$log.error("Planyway time records report error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway time records report error",e,{class:this.constructor.name,method:this._buildTimeRecordsReportAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.REPORT_ERROR"),x.A.Error)}}},{kind:"method",key:"_timeRecordToTimeRecordsReportRows",value:function _timeRecordToTimeRecordsReportRows(e){let t=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,e.parentId),r={board:this._trelloIntegrationSrv.getTrelloBoardById(t.boardId).name,list:this._trelloIntegrationSrv.getTrelloListById(t.listId).name,card:t.title,member:this._trelloIntegrationSrv.getTrelloMemberById(e.members[0]).fullName,description:t.description,labels:this._getCardLabels(t).join()},getReportRow=(e,t,i,a)=>({board:r.board,list:r.list,card:r.card,member:r.member,labels:r.labels,date:Object(n.Fb)(e),startTime:i?void 0:Object(n.Ib)(e),endTime:i?void 0:Object(n.Ib)(t),durationHours:kendo.toString(a/60,"n2"),description:r.description});if(Object(n.pb)(e.start,e.end)||Object(n.w)(e.end,Object(n.O)(e.end)))return[getReportRow(e.start,e.end,e.isAllDay,e.durationMinutes)];{let t=Object(n.O)(e.end);return[getReportRow(e.start,t,e.isAllDay,Object(n.S)(e.start,t)),getReportRow(t,e.end,e.isAllDay,Object(n.S)(t,e.end))]}}},{kind:"method",key:"_isAllCardsReportParametersValid",value:function _isAllCardsReportParametersValid(e){return!!e&&(Object(n.rb)(e.startDate)&&Object(n.rb)(e.endDate))}},{kind:"method",key:"_buildAllCardsReportAsync",value:async function _buildAllCardsReportAsync(e){let{startDate:t,endDate:r}=e;try{var i,a;let e=await this._calendarCardsSrv.getCalendarCardsAsync();if(this.isCancelled)return;let o=We()(i=rt()(a=S()(e).call(e,(e=>{var i,a,o,s;if(e.cardType===x.h.TrelloCustomField||!Object(n.ib)(t,r,e.start,e.end)&&!e.recurrenceRule)return!1;const l=this._globalBoardSettings.filters,d=e.cardType===x.h.GoogleEvent||e.cardType===x.h.ICalEvent;if(!d&&(l.cardsVisibility===x.j.Completed&&!e.isCompleted||l.cardsVisibility===x.j.Incompleted&&e.isCompleted))return!1;if(!this._globalBoardSettings.showArchivedCards&&e.isArchived)return!1;if(!this._globalBoardSettings.isCheckItemCardsShown&&e.cardType===x.h.TrelloCheckItem)return!1;if(!this._globalBoardSettings.isTimeRecordCardsShown&&e.cardType===x.h.TrelloTimeRecord)return!1;if(!this._globalBoardSettings.isMilestonesShown&&e.cardRole===me.c.Milestone)return!1;if(!d&&l.members.length&&!c()(i=l.members).call(i,(t=>{var r;return ze()(r=e.members).call(r,t)})))return!1;let h=rt()(a=e.labelIds).call(a,((e,t)=>{if(t===U.k)e.push(U.k);else{let r=this._trelloIntegrationSrv.getTrelloLabelById(t);r&&e.push(Object(n.V)(r))}return e}),[]);if(!d&&l.labels.length&&!c()(o=l.labels).call(o,(e=>ze()(h).call(h,e))))return!1;if(!d&&l.lists.length&&!ze()(s=l.lists).call(s,e.listId))return!1;if(!d&&l.customFields.length)return!1;if(!d&&l.customFilters.length){var u;if(e.boardId!==this._currentBoardId)return!1;let t=null===(u=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId))||void 0===u?void 0:u.customFilters,r=null==t?void 0:S()(t).call(t,(e=>{var t;return ze()(t=l.customFilters).call(t,e.id)})),i=this._calendarCardsSrv.getCalendarCardCustomFieldValues(e)||{};if(null==r||!xe()(r).call(r,(e=>i[e.targetId]===e.value)))return!1}return!0}))).call(a,((i,a)=>[...i,...this._cardToAllCardsReportRows(a,e,t,r)]),[])).call(i,((e,t)=>e.date-t.date)),s=[this._$translate.instant("DIALOGS.CARD_ROLE_CARD"),this._$translate.instant("DIALOGS.CARD_ROLE_MILESTONE")],l={};for(let e of o)if(ze()(s).call(s,e.type))for(let t of Fr()(e))ce()(t).call(t,cn)&&!(t in l)&&(l[t]=t.replace(cn,""));let d=this._generateCsvReport(o,{type:"Type",board:"Board/Calendar",list:"List",title:"Title",members:"Members",labels:"Labels",status:"Status",startDate:"StartDate",startTime:"StartTime",endDate:"EndDate",endTime:"EndTime",durationHours:"DurationHours",estimatedTimeHours:"EstimatedTimeHours",trackedTimeHours:"TrackedTimeHours",description:"Description",...l}),h=new Blob([String.fromCharCode(65279),d],{type:"text/csv;charset=utf-8"}),u=`Planyway-report-${Object(n.Fb)(t)}-${Object(n.Fb)(r)}.csv`;Object(sn.saveAs)(h,u)}catch(e){this._$log.error("Planyway all cards report error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway all cards report error",e,{class:this.constructor.name,method:this._buildAllCardsReportAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.REPORT_ERROR"),x.A.Error)}}},{kind:"method",key:"_cardToAllCardsReportRows",value:function _cardToAllCardsReportRows(e,t,r,i){var a;let o,s,l,d,c,h,u,p,m,f=!1,y=!1,v=!1;switch(e.cardType){case x.h.GoogleEvent:o=this._$translate.instant("DIALOGS.CARD_ROLE_GOOGLE_EVENT"),v=!0,l=this._googleIntegrationSrv.getGoogleCalendarById(e.googleCalendarId),c=this._getCardDurationHours(e),e.recurrenceRule&&(m=this._getCardRecurrences(e,r,i));break;case x.h.ICalEvent:o=this._$translate.instant("DIALOGS.CARD_ROLE_ICAL_EVENT"),v=!0,l=this._iCalIntegrationSrv.getICalCalendarById(e.calendarId),c=this._getCardDurationHours(e),e.recurrenceRule&&(m=this._getCardRecurrences(e,r,i));break;case x.h.TrelloCard:switch(e.cardRole){case me.c.Card:o=this._$translate.instant("DIALOGS.CARD_ROLE_CARD");break;case me.c.Milestone:o=this._$translate.instant("DIALOGS.CARD_ROLE_MILESTONE"),y=!0}l=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId),d=e.isArchived?hn:e.isCompleted?un:pn,c=this._getCardDurationHours(e),h=e.isDailyEstimateFieldShown?(e.getTotalEstimationMs(e.dailyEstimateMinutes)||0)/1e3/60/60:void 0,u=(rt()(a=S()(t).call(t,(t=>t.cardType===x.h.TrelloTimeRecord&&t.parentId===e.id))).call(a,((e,t)=>e+t.durationMinutes),0)||0)/60,p=this._getCardCustomFields(e,l),e.recurrenceRule&&(m=this._getCardRecurrences(e,r,i));break;case x.h.TrelloCheckItem:o=this._$translate.instant("DIALOGS.CARD_ROLE_CHECK_ITEM"),s=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,e.parentId),l=this._trelloIntegrationSrv.getTrelloBoardById(s.boardId),d=e.isArchived?hn:e.isCompleted?un:pn,c=this._getCardDurationHours(e),p=this._getCardCustomFields(e,l);break;case x.h.TrelloTimeRecord:o=this._$translate.instant("DIALOGS.CARD_ROLE_TIME_RECORD"),s=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,e.parentId),f=!0,l=this._trelloIntegrationSrv.getTrelloBoardById(s.boardId),d=e.isArchived?hn:void 0,c=e.durationMinutes/60,p=this._getCardCustomFields(e,l)}p=p&&p.size?an()(p):{};let getReportRow=(t,r)=>{var i,a,m;return{date:t,type:o,board:l.name,list:v||null===(i=this._trelloIntegrationSrv.getTrelloListById((null===(a=s)||void 0===a?void 0:a.listId)||e.listId))||void 0===i?void 0:i.name,title:f?s.title:e.title,members:this._getCardMembers(e).join(),labels:this._getCardLabels(s||e).join(),status:d,startDate:Object(n.Fb)(t),startTime:e.isAllDay?void 0:Object(n.Ib)(t),endDate:y?void 0:Object(n.Fb)(r),endTime:e.isAllDay||y?void 0:Object(n.Ib)(r),durationHours:kendo.toString(c,"n2"),estimatedTimeHours:void 0===h?void 0:kendo.toString(h,"n2"),trackedTimeHours:u?kendo.toString(u,"n2"):void 0,description:(null===(m=s)||void 0===m?void 0:m.description)||e.description,...p}};return m?R()(m).call(m,(e=>getReportRow(e.start,e.end))):[getReportRow(e.start,e.end)]}}]}}));var fn=r(222),yn=r(112),vn=r(62),_n=r.n(vn),gn=r(126),Cn=r.n(gn),kn=r(464),Dn=r.n(kn);function TrelloCardsService_getDecoratorsApi(){TrelloCardsService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrelloCardsService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloCardsService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloCardsService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloCardsService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloCardsService_createElementDescriptor(e){var t,r=TrelloCardsService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloCardsService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloCardsService_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloCardsService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloCardsService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloCardsService_toPropertyKey(e){var t=function TrelloCardsService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const En=["name","pos","idList","idBoard","dateLastActivity","desc","due","idShort","shortLink","labels","closed","idMembers","dueComplete","subscribed"].join(),bn=["commentCard","copyCommentCard"].join(),wn=["cardRole","isAllDay","start","end","recurrenceRule","recurrenceId","priority","defaultSortOrder","membersSortOrder","calendarsSortOrder","listsSortOrder","labelsSortOrder"],Sn={day:1,week:7,month:28};let Tn=function TrelloCardsService_decorate(e,t,r,i){var a,n=TrelloCardsService_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloCardsService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrelloCardsService_isDataDescriptor(a.descriptor)||TrelloCardsService_isDataDescriptor(i.descriptor)){if(TrelloCardsService_hasDecorators(a)||TrelloCardsService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrelloCardsService_hasDecorators(a)){if(TrelloCardsService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrelloCardsService_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrelloCardsService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$injector","$rootScope","$log","$timeout","$window","$translate","appCommonSrv","licenseSrv","notificationSrv","platformSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class TrelloCardsService{constructor(t,r,i,a,n,o,s,l,d,c,h,u,p){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$timeout=a,this._$window=n,this._$translate=o,this._appCommonSrv=s,this._licenseSrv=l,this._platformSrv=c,this._notificationSrv=d,this._settingsSrv=h,this._telemetrySrv=u,this._trelloIntegrationSrv=p,this._trelloIntegrationSrv.addTrelloBoardEventListener("updated",((e,t)=>{this._loadedBoardIdsMap.has(e.id)&&(this._$rootScope.$broadcast(x.n.CardsReloadRequested),e.closed&&this._loadedBoardIdsMap.delete(e.id),this._requestReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded))})),this._trelloIntegrationSrv.addTrelloBoardEventListener("deleted",(e=>{this._loadedBoardIdsMap.has(e.id)&&(this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._loadedBoardIdsMap.delete(e.id),this._requestReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded))}));for(const e in this._calendarCardsListeners)this._calendarCardsMap.addEventListener(e,((t,r={})=>{var i;(this._cardCachedLinksMap.clear(),r.silent)||B()(i=this._calendarCardsListeners[e]).call(i,(e=>e(t,r)));switch(e){case"added":case"updated":t.cardType===x.h.TrelloCard&&(t.isTempCard||this._cardsShortIdMap.set(t.shortId,t.id));break;case"deleted":if(t.cardType===x.h.TrelloCard){t.isTempCard||this._cardsShortIdMap.delete(t.shortId);for(let e of t.trelloCustomFieldCards)this._calendarCardsMap.delete(e.id,{delayed:!0});this._cardsCustomFieldItemsMap.delete(t.id),this._cardsCustomFieldValuesMap.delete(t.id);for(let e of t.trelloCheckItemCards)this._calendarCardsMap.delete(e.id,{delayed:!0});this._cardsChecklistsMap.delete(t.id);for(let e of t.trelloTimeRecordCards)this._calendarCardsMap.delete(e.id,{delayed:!0});this._cardsAttachmentsMap.delete(t.id),t.isTempCard&&this._cardsCommentsMap.delete(t.id)}break;case"cleared":this._cardsShortIdMap.clear()}}));this._$window.document.addEventListener(x.n.TrelloSyncUpdate,(e=>{switch(e.detail.typeName){case"Card":for(let t of e.detail.deltas)this._updateByTrelloCardDeltaAsync(t);break;case"List":for(let t of e.detail.deltas)this._updateByTrelloListDelta(t);break;case"CustomFieldItem":for(let t of e.detail.deltas)this._updateByTrelloCustomFieldItemDelta(t);break;case"Checklist":for(let t of e.detail.deltas)this._updateByTrelloChecklistDelta(t);break;case"Action":for(let t of e.detail.deltas)this._updateByTrelloActionDelta(t)}})),this._$window.document.addEventListener(x.n.TrelloSyncDelete,(e=>{switch(e.detail.typeName){case"Card":for(let t of e.detail.deltas)this._deleteByTrelloCardDelta(t);break;case"CustomField":for(let t of e.detail.deltas)this._deleteByTrelloCustomFieldDelta(t);break;case"Checklist":for(let t of e.detail.deltas)this._deleteByTrelloChecklistDelta(t);break;case"Action":for(let t of e.detail.deltas)this._deleteByTrelloActionDelta(t)}})),this._$rootScope.$on(x.n.FiltersChanged,(()=>{for(let t of Ta()(e=this._calendarCardsMap).call(e)){var e;t.ignoreFilters&&(t.ignoreFilters=!1,this._calendarCardsMap.update(t))}}))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"trelloCardsSrv"}},{kind:"field",key:"_loadedBoardIdsMap",value:()=>new lt.a},{kind:"field",key:"_hiddenBoardIds",value:()=>new M.a},{kind:"field",key:"_boardsLastModifiedDateMap",value:()=>new lt.a},{kind:"field",key:"_boardCardsLastModifiedDateMap",value:()=>new lt.a},{kind:"field",key:"_calendarCardsMap",value:()=>new Aa.a("id")},{kind:"field",key:"_cardsShortIdMap",value:()=>new lt.a},{kind:"field",key:"_ignoredChangeIds",value:()=>new M.a},{kind:"field",key:"_ignoredCardsCountMap",value:()=>new lt.a},{kind:"field",key:"_creatingCalendarCardPromise",value:()=>null},{kind:"field",key:"_cardsUpdateBuffers",value:()=>new lt.a},{kind:"field",key:"_cardsCustomFieldItemsMap",value:()=>new lt.a},{kind:"field",key:"_cardsCustomFieldValuesMap",value:()=>new lt.a},{kind:"field",key:"_cardsChecklistsMap",value:()=>new lt.a},{kind:"field",key:"_checklistsUpdateBuffers",value:()=>new lt.a},{kind:"field",key:"_ignoredChecklistsCountMap",value:()=>new lt.a},{kind:"field",key:"_cardsCommentsMap",value:()=>new lt.a},{kind:"field",key:"_ignoredCommentsCountMap",value:()=>new lt.a},{kind:"field",key:"_timeRecordsUpdateBuffers",value:()=>new lt.a},{kind:"field",key:"_cardsAttachmentsMap",value:()=>new lt.a},{kind:"field",key:"_cardCachedLinksMap",value:()=>new lt.a},{kind:"field",key:"_calendarCardsListeners",value:()=>({added:new M.a,updated:new M.a,deleted:new M.a,cleared:new M.a})},{kind:"field",key:"_subscribeBoardsUpdatesRequested",value:()=>!0},{kind:"field",key:"_reloadBoardsDataRequested",value:()=>!1},{kind:"method",key:"initCurrentBoardAsync",value:async function initCurrentBoardAsync(e){this._loadedBoardIdsMap.clear(),this._hiddenBoardIds.clear(),this._boardsLastModifiedDateMap.clear(),this._boardCardsLastModifiedDateMap.clear(),this._calendarCardsMap.clear(),this._cardsShortIdMap.clear(),this._ignoredChangeIds.clear(),this._ignoredCardsCountMap.clear(),this._cardsUpdateBuffers.clear(),this._cardsCustomFieldItemsMap.clear(),this._cardsCustomFieldValuesMap.clear(),this._cardsChecklistsMap.clear(),this._checklistsUpdateBuffers.clear(),this._ignoredChecklistsCountMap.clear(),this._cardsCommentsMap.clear(),this._timeRecordsUpdateBuffers.clear(),this._ignoredCommentsCountMap.clear();let t=[this._currentBoardId];for(let e of this._trelloIntegrationSrv.getCurrentBoardConnectedBoards())e.isSelected&&t.push(e.id);this.setBoardsLoad(t);try{await this.getCalendarCardsAsync(e)}catch(e){this._$log.error("Planyway initialize current board Trello cards error:"),this._$log.error(e)}}},{kind:"method",key:"setBoardsLoad",value:function setBoardsLoad(e){for(let r of Kr()(t=this._loadedBoardIdsMap).call(t)){var t;ze()(e).call(e,r)||this._hiddenBoardIds.add(r)}for(let t of e)this._loadedBoardIdsMap.has(t)?this._hiddenBoardIds.delete(t):this._loadedBoardIdsMap.set(t,!0);this._requestReloadCalendarCards()}},{kind:"method",key:"needReloadCalendarCards",value:function needReloadCalendarCards(e={}){for(let e of Kr()(t=this._loadedBoardIdsMap).call(t)){var t;this._loadedBoardIdsMap.set(e,!0)}this._subscribeBoardsUpdatesRequested=!0,e.reloadAdditionalData&&(this._reloadBoardsDataRequested=!0),this._requestReloadCalendarCards()}},{kind:"method",key:"getCalendarCardsAsync",value:async function getCalendarCardsAsync(e){var t,r;if(!this._reloadCalendarCardsRequested)return this._getCalendarCardsPromise?this._getCalendarCardsPromise:S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(e=>!this._hiddenBoardIds.has(e.boardId)));this._reloadCalendarCardsRequested=!1,e||(e=this._getCancellationToken("getCalendarCards"));try{this._getCalendarCardsPromise=this._getCalendarCardsAsync(e);let t=await this._getCalendarCardsPromise;return this._$rootScope.$broadcast(x.n.CardsLoaded),t}catch(e){throw this._telemetrySrv.logError("Planyway get Trello cards error",e,{class:this.constructor.name,method:this.getCalendarCardsAsync.name}),e}finally{this._getCalendarCardsPromise=null}}},{kind:"method",key:"getCalendarCardByIdAsync",value:async function getCalendarCardByIdAsync(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this.getCalendarCardById(e,t)}let r=this.getCalendarCardById(e,t);if(r)return r;if(e===U.k)return;let i=await this._trelloIntegrationSrv.restAsync(x.L.Get,`/cards/${e}`,"Get Trello card",{fields:En,customFieldItems:!0,checklists:"all",attachments:!0}),a=this._trelloIntegrationSrv.getTrelloBoardById(i.idBoard);if(a||(a=await this._trelloIntegrationSrv.addPublicBoardAsync(i.idBoard),a)){var n;if(i.customFieldItems)if(this._updateCustomFieldItemsCache(i.id,i.customFieldItems),i.customFieldItems.length>0)xe()(n=i.customFieldItems).call(n,(e=>{var t;return!xe()(t=a.customFields).call(t,(t=>t.id===e.idCustomField))}))&&(await this._trelloIntegrationSrv.loadBoardDataAsync(i.idBoard),a=this._trelloIntegrationSrv.getTrelloBoardById(i.idBoard));if(i.checklists&&this._updateChecklistsCache(i.id,i.checklists),i.attachments&&this._updateAttachmentsCache(i.id,i.attachments),r=this._createCalendarCardFromTrelloCard(i),this._loadedBoardIdsMap.has(r.boardId)){this._calendarCardsMap.add(r);for(let e of r.trelloCustomFieldCards)this._calendarCardsMap.add(e,{delayed:!0});for(let e of r.trelloCheckItemCards)this._calendarCardsMap.add(e,{delayed:!0});for(let e of r.trelloTimeRecordCards)this._calendarCardsMap.add(e,{delayed:!0})}return r}}},{kind:"method",key:"getCalendarCardById",value:function getCalendarCardById(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this._calendarCardsMap.get(e)}return this._calendarCardsMap.get(this._cardsShortIdMap.get(e)||e)}},{kind:"method",key:"createCalendarCardAsync",value:async function createCalendarCardAsync(e){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let t=null;try{var r,i;e.title||(e.title=this._$translate.instant("MISC.NO_TITLE"));let l=e.boardId||this._currentBoardId;if(!e.listId){let t=await this._getDefaultListIdAsync(l);if(!t)throw new Error("Cannot find Trello list for creating new card!");e.boardId=l,e.listId=t}let d=await P.a.all(R()(r=[...e.labelIds]).call(r,(e=>this._trelloIntegrationSrv.createTrelloLabelAsync(e))));var a,o;if(e.labelIds=new M.a(R()(i=S()(d).call(d,(e=>e))).call(i,(e=>e.id))),e.sourceCardId)e.links=[];else e.links=R()(a=S()(o=this.getCalendarCardLinks(e)||[]).call(o,(e=>!e.linkError))).call(a,(e=>({cardId:e.toCardId,type:e.linkType})));let h=this._trelloIntegrationSrv.getTrelloBoardById(l),{cardDataCustomFieldValue:u,...p}=e.toTrelloCard(h,["name","idList","pos","desc","closed","dueComplete","idLabels","idMembers","subscribed","idCardSource","cardData"]),m=null;this._creatingCalendarCardPromise=(async()=>{m=await this._trelloIntegrationSrv.restAsync(x.L.Post,"/cards","Create Trello card",p),t=m.id,this._addChangeToIgnored(m),this._addCardToIgnored(t)})();try{await this._creatingCalendarCardPromise}finally{this._creatingCalendarCardPromise=null}let f={...this.getCalendarCardCustomFieldValues(e)};h.cardDataCustomFieldId&&(f[h.cardDataCustomFieldId]=u);let y,v,_=this._updateCustomFieldValuesAsync({id:t,boardId:l,cardType:x.h.TrelloCard},f,{waitForUpdate:!0}),g=new lt.a,C=(async()=>{if(y=this.getCalendarCardChecklists(e),y)for(let[l,d]of Jr()(r=We()(y).call(y,n.m)).call(r)){var r;let{id:h}=await this.createCalendarCardChecklistAsync({id:t,cardType:x.h.TrelloCard},{name:d.name,position:U.U*(l+1)});for(let[r,l]of Jr()(i=We()(a=d.checkItems).call(a,n.l)).call(i)){var i,a,o,s;let n=c()(o=e.trelloCheckItemCards).call(o,(e=>e.id===l.id)),{id:d}=await this.createCalendarCardCheckItemAsync({id:t,cardType:x.h.TrelloCard},h,{name:l.name,due:null==n?void 0:n.realDue,memberIds:n&&S()(s=re()(n.memberIds)).call(s,(e=>e!==U.k)),position:U.U*(r+1),isCompleted:l.isCompleted});g.set(l.id,d)}}})(),k=new lt.a,D=(async()=>{if(v=this.getCalendarCardTimeRecords(e),v)for(let e of We()(v).call(v,n.t)){let r=await this.createCalendarCardTimeRecordAsync({id:t,cardType:x.h.TrelloCard});k.set(e.id,r.id)}})(),E=(async()=>{let r=this.getCalendarCardAttachments(e);if(r)for(let e of Dn()(i=We()(r).call(r,n.k)).call(i)){var i;await this.createCalendarCardAttachmentAsync({id:t,cardType:x.h.TrelloCard},e)}})(),b=(async()=>{let r=this.getCalendarCardComments(e);if(r)for(let e of Dn()(i=We()(r).call(r,n.n)).call(i)){var i;await this.createCalendarCardCommentAsync({id:t,cardType:x.h.TrelloCard},e)}})(),w=(async()=>{for(let r of e.links)await this._linkCalendarCardsAsync(r.cardId,t,x.k[r.type])})();if(await P.a.all([_,C,D,E,b,w]),this._updateBoardCardsLastModifiedDate(m.idBoard,m.dateLastActivity),this._cardsCustomFieldItemsMap.has(e.sourceCardId)||this._cardsChecklistsMap.has(e.sourceCardId)||this._cardsAttachmentsMap.has(e.sourceCardId)){let e=await this._trelloIntegrationSrv.restAsync(x.L.Get,`/cards/${t}`,"Get Trello card",{customFieldItems:!0,checklists:"all",attachments:!0});e.customFieldItems&&this._updateCustomFieldItemsCache(e.id,e.customFieldItems),e.checklists&&this._updateChecklistsCache(e.id,e.checklists),e.attachments&&this._updateAttachmentsCache(e.id,e.attachments)}m.customFieldItems=this._cardsCustomFieldItemsMap.get(t)||[],m.checklists=this._cardsChecklistsMap.get(t)||[];let T=this._createCalendarCardFromTrelloCard(m);for(let e of T.trelloCustomFieldCards)this._calendarCardsMap.add(e,{delayed:!0});let A=!1;if(y){var s;T.trelloCheckItemCards=[],T.checkItemCardsData=[];let e=ze()(s=h.premiumFeatures).call(s,x.nb.AdvancedChecklists);for(let t of y)for(let r of t.checkItems){let t=T.addTrelloCheckItemCard({...r,id:g.get(r.id)},h,{syncWithTrello:e});(t.hasDates||t.hasMembers)&&(A=!0)}}for(let e of T.trelloCheckItemCards)this._calendarCardsMap.add(e,{delayed:!0});if(v){T.trelloTimeRecordCards=[],T.timeRecordCardsData=[];for(let e of v){T.addTrelloTimeRecordCard({...e,id:k.get(e.id)},h)&&(A=!0)}}for(let e of T.trelloTimeRecordCards)this._calendarCardsMap.add(e,{delayed:!0});return this._loadedBoardIdsMap.has(T.boardId)?(T.ignoreFilters=e.ignoreFilters,this._calendarCardsMap.delete(e,{delayed:!0}),this._calendarCardsMap.add(T,{delayed:!0}),A&&await this.updateCalendarCardPropertiesAsync(T,{trelloCheckItemCards:T.trelloCheckItemCards,checkItemCardsData:T.checkItemCardsData})):this._calendarCardsMap.delete(e),T}finally{this._removeCardFromIgnored(t)}}},{kind:"method",key:"createTempCalendarCardByScheduler",value:function createTempCalendarCardByScheduler(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${t.cardType}`)}let{addToCache:r=!0}=t,i=e.listId;var a;i&&(e.calendarId=null===(a=this._trelloIntegrationSrv.getTrelloListById(i))||void 0===a?void 0:a.boardId);let n=e.calendarId||this._currentBoardId,o=this._trelloIntegrationSrv.getTrelloBoardById(n);var s,l,d;i||(i=o.defaultListId&&(null===(s=c()(l=o.lists).call(l,(e=>e.id===o.defaultListId)))||void 0===s?void 0:s.id),i||(i=null===(d=o.lists[0])||void 0===d?void 0:d.id));let h=G.a.getTempCard(x.h.TrelloCard,this._currentBoardId,{boardId:n,listId:i,position:o.defaultCardPosition});return h.updateBySchedulerData(e),h.ignoreFilters=!0,r&&this._calendarCardsMap.add(h),h}},{kind:"method",key:"createTempCalendarCardByTaskList",value:function createTempCalendarCardByTaskList(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${t.cardType}`)}let{title:r,boardId:i=this._currentBoardId,listId:a,position:n}=e,{addToCache:o=!0}=t;if(!a){var s,l;let e=this._trelloIntegrationSrv.getTrelloBoardById(i);var d;if(a=e.defaultListId&&(null===(s=c()(l=e.lists).call(l,(t=>t.id===e.defaultListId)))||void 0===s?void 0:s.id),!a)a=null===(d=e.lists[0])||void 0===d?void 0:d.id}let h=G.a.getTempCard(x.h.TrelloCard,this._currentBoardId,{title:r,boardId:i,listId:a,position:n});return h.ignoreFilters=!0,o&&this._calendarCardsMap.add(h),h}},{kind:"method",key:"createTempCalendarCardByTimeTrackingAsync",value:async function createTempCalendarCardByTimeTrackingAsync(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${t.cardType}`)}let r=G.a.getTempCard(x.h.TrelloTimeRecord,this._currentBoardId);return r.ignoreFilters=!0,this._calendarCardsMap.add(r),await this.updateCalendarCardPropertiesAsync(r,{...e,isAllDay:e.isDuration,start:e.from,end:e.to,memberIds:new M.a([e.memberId])}),r}},{kind:"method",key:"changeCalendarCardType",value:function changeCalendarCardType(e,t,r){x.ob.has(t)&&x.ob.has(r)?(e.cardType=r,this._calendarCardsMap.update(e,{silent:!0})):x.ob.has(t)?this._calendarCardsMap.delete(e,{silent:!0}):x.ob.has(r)&&(e.cardType=r,this._calendarCardsMap.add(e,{silent:!0}))}},{kind:"method",key:"updateCalendarCardAsync",value:async function updateCalendarCardAsync(e,t={}){switch(e.cardType){case x.h.TrelloCustomField:throw new Error(`Unsupported method for card type: ${e.cardType}`);case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:if(e.isTempCard)return void this._calendarCardsMap.update(e);throw new Error(`Unsupported method for card type: ${e.cardType}`)}let{waitForUpdate:r,includeTrelloFields:i=[],customFieldValues:a={}}=t;try{var n,o;if(this._addCardToIgnored(e.id),ze()(i).call(i,"idBoard")){if(this._appCommonSrv.setSchedulerBusy(!0),!e.listId){let t=e.boardId||this._currentBoardId,r=await this._getDefaultListIdAsync(t);if(!r)throw new Error("Cannot find Trello list for moving card!");e.boardId=t,e.listId=r}if(e.isTempCard){let t=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId),r=new M.a;for(let i of e.labelIds){var s;if(i===U.k)continue;let e=this._trelloIntegrationSrv.getTrelloLabelById(i),a=c()(s=t.labels).call(s,(t=>t.color===e.color&&t.name===e.name));a&&r.add(a.id)}e.labelIds=r;let i=new M.a;for(let r of e.memberIds){var l;r!==U.k&&(xe()(l=t.members).call(l,(e=>e.id===r))&&i.add(r))}e.memberIds=i}else{var d;let t=await this._trelloIntegrationSrv.restAsync(x.L.Put,`/cards/${e.id}`,"Move Trello card",{idBoard:e.boardId,idList:e.listId});this._addChangeToIgnored(t),this._updateBoardCardsLastModifiedDate(t.idBoard,t.dateLastActivity),e.trelloCardNumber=t.idShort,e.memberIds=new M.a(t.idMembers),e.labelIds=new M.a(R()(d=t.labels).call(d,(e=>e.id))),e.lastChangeId=new Date(t.dateLastActivity).getTime()}}if(e.isTempCard||0===i.length&&0===Fr()(a).length)return this._loadedBoardIdsMap.has(e.boardId)?this._calendarCardsMap.update(e):this._calendarCardsMap.delete(e),void(e.isTempCard&&await this._updateCustomFieldValuesAsync(e,a,{waitForUpdate:r}));let t=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);ze()(i).call(i,"cardData")&&e.incrementDataVersion();const h=e.clone();let u=await P.a.all(R()(n=[...e.labelIds]).call(n,(e=>this._trelloIntegrationSrv.createTrelloLabelAsync(e))));e.labelIds=new M.a(R()(o=S()(u).call(u,(e=>e))).call(o,(e=>e.id)));let{cardDataCustomFieldValue:p,...m}=e.toTrelloCard(t,i);t.cardDataCustomFieldId&&ze()(i).call(i,"cardData")&&(a[t.cardDataCustomFieldId]=p);let f=this._updateCustomFieldValuesAsync(e,a,{waitForUpdate:r});const updateCustomFieldCards=e=>{for(let t of e.trelloCustomFieldCards){let r=!1;(ze()(i).call(i,"idBoard")||ze()(i).call(i,"idList"))&&(t.boardId=e.boardId,t.listId=e.listId,r=!0),ze()(i).call(i,"name")&&(t.title=e.title,r=!0),ze()(i).call(i,"desc")&&(t.description=e.description,r=!0),ze()(i).call(i,"closed")&&(t.isArchived=e.isArchived,r=!0),(ze()(i).call(i,"idLabels")||ze()(i).call(i,"idBoard"))&&(t.labelIds=new M.a(e.labelIds),r=!0),(ze()(i).call(i,"idMembers")||ze()(i).call(i,"idBoard"))&&(t.memberIds=new M.a(e.memberIds),r=!0),ze()(i).call(i,"subscribed")&&(t.isSubscribed=e.isSubscribed,r=!0),this._calendarCardsMap.has(t.id)?r&&this._calendarCardsMap.update(t,{delayed:!0}):this._calendarCardsMap.add(t,{delayed:!0})}for(let[i,s]of wa()(a)){var r,n,o;if(i===t.cardDataCustomFieldId)continue;let a=c()(r=t.customFields).call(r,(e=>e.id===i));if((null==a?void 0:a.type)!==x.pb.Date)continue;let l=null===(n=this._cardsCustomFieldItemsMap.get(e.id))||void 0===n?void 0:c()(n).call(n,(e=>e.idCustomField===i));if(l&&l.id)if(xe()(o=e.trelloCustomFieldCards).call(o,(e=>e.id===l.id))){let{customFieldCardUpdated:t,customFieldCard:r}=e.updateTrelloCustomFieldCard(l.id,{date:s});t&&(r.hasDates?this._calendarCardsMap.update(r,{delayed:!0}):(e.deleteTrelloCustomFieldCard(l.id),this._calendarCardsMap.delete(l.id,{delayed:!0})))}else{let t=e.addTrelloCustomFieldCard({id:l.id,customFieldId:l.idCustomField,date:s});t&&this._calendarCardsMap.add(t,{delayed:!0})}}},updateCheckItemCards=e=>{for(let a of e.trelloCheckItemCards){let n=!1;var r;if((ze()(i).call(i,"idBoard")||ze()(i).call(i,"idList"))&&(a.boardId=e.boardId,a.listId=e.listId,n=!0),ze()(i).call(i,"desc")&&(a.description=e.description,n=!0),ze()(i).call(i,"closed")&&(a.isArchived=e.isArchived,n=!0),(ze()(i).call(i,"idLabels")||ze()(i).call(i,"idBoard"))&&(a.labelIds=new M.a(e.labelIds),n=!0),ze()(i).call(i,"idBoard"))a.memberIds=S()(r=a.memberIds).call(r,(e=>{var r;return xe()(r=t.members).call(r,(t=>t.id===e))})),n=!0;ze()(i).call(i,"subscribed")&&(a.isSubscribed=e.isSubscribed,n=!0),this._calendarCardsMap.has(a.id)?n&&this._calendarCardsMap.update(a,{delayed:!0}):this._calendarCardsMap.add(a,{delayed:!0})}},updateTimeRecordCards=e=>{for(let a of e.trelloTimeRecordCards){let n=!1;var r;if((ze()(i).call(i,"idBoard")||ze()(i).call(i,"idList"))&&(a.boardId=e.boardId,a.listId=e.listId,n=!0),ze()(i).call(i,"desc")&&(a.description=e.description,n=!0),ze()(i).call(i,"closed")&&(a.isArchived=e.isArchived,n=!0),(ze()(i).call(i,"idLabels")||ze()(i).call(i,"idBoard"))&&(a.labelIds=new M.a(e.labelIds),n=!0),ze()(i).call(i,"idBoard"))a.memberIds=S()(r=a.memberIds).call(r,(e=>{var r;return xe()(r=t.members).call(r,(t=>t.id===e))})),n=!0;ze()(i).call(i,"subscribed")&&(a.isSubscribed=e.isSubscribed,n=!0),this._calendarCardsMap.has(a.id)?n&&this._calendarCardsMap.update(a,{delayed:!0}):this._calendarCardsMap.add(a,{delayed:!0})}};r||(this._loadedBoardIdsMap.has(e.boardId)?(this._calendarCardsMap.update(e),updateCustomFieldCards(e),updateCheckItemCards(e),updateTimeRecordCards(e)):this._calendarCardsMap.delete(e)),await f;let y=await this._trelloIntegrationSrv.restAsync(x.L.Put,`/cards/${e.id}`,"Update Trello card",m,r?3:9);if(this._addChangeToIgnored(y),this._updateBoardCardsLastModifiedDate(y.idBoard,y.dateLastActivity),ze()(i).call(i,"idBoard"))if(await this._trelloIntegrationSrv.loadBoardDataAsync(e.boardId),t=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId),t.customFields.length>0){let{customFieldItems:t}=await this._trelloIntegrationSrv.restAsync(x.L.Get,`/cards/${e.id}`,"Get Trello card",{customFieldItems:!0});this._updateCustomFieldItemsCache(y.id,t)}else{for(let t of e.trelloCustomFieldCards)this._calendarCardsMap.delete(t.id,{delayed:!0});this._cardsCustomFieldItemsMap.delete(e.id),this._cardsCustomFieldValuesMap.delete(e.id)}y.customFieldItems=this._cardsCustomFieldItemsMap.get(y.id)||[],y.checklists=this._cardsChecklistsMap.get(y.id)||[];let v=this._createCalendarCardFromTrelloCard(y);if(ze()(i).call(i,"idBoard")&&v.trelloCustomFieldCards.length>0)for(let e of v.trelloCustomFieldCards)this._calendarCardsMap.has(e.id)?this._calendarCardsMap.update(e,{delayed:!0}):this._calendarCardsMap.add(e,{delayed:!0});let _=this._calendarCardsMap.get(e.id);if(!_||ze()(i).call(i,"cardData")&&_.lastDataVersionId>v.lastDataVersionId)return;r||!h.equals(v)?this._loadedBoardIdsMap.has(v.boardId)?(this._calendarCardsMap.update(v),updateCustomFieldCards(v),updateCheckItemCards(v),updateTimeRecordCards(e)):this._calendarCardsMap.delete(v):e.lastChangeId=new Date(y.dateLastActivity).getTime()}catch(e){if(this._telemetrySrv.logError("Trello update card error",e,{class:this.constructor.name,method:this.updateCalendarCardAsync.name}),r)throw e;this._$log.error("Trello update card error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e.id),ze()(i).call(i,"idBoard")&&this._appCommonSrv.setSchedulerBusy(!1)}}},{kind:"method",key:"updateCalendarCardPropertiesAsync",value:async function updateCalendarCardPropertiesAsync(e,t){let r,i;switch(e.cardType){case x.h.TrelloCustomField:{if(r=this._calendarCardsMap.get(e.parentId),!r)return;let{isCompleted:a,isAllDay:n,start:o,end:s,...l}=t;i=l,await this._updateCustomFieldCardAsync(e.id,r,{isCompleted:a,isAllDay:n,date:o});break}case x.h.TrelloCheckItem:{var a;r=this._calendarCardsMap.get(e.parentId);let{title:n,isCompleted:o,isAllDay:s,start:l,end:d,memberIds:c,...h}=t;if(i=h,e.isTempCard)break;if(!r)return;await this._updateCheckItemCardAsync(e.id,r,{name:n,isCompleted:o,isAllDay:s,start:l,end:d,memberIds:c&&S()(a=re()(c)).call(a,(e=>e!==U.k))});break}case x.h.TrelloTimeRecord:{var n;r=this._calendarCardsMap.get(e.parentId);let{isAllDay:a,start:o,end:s,durationMinutes:l,memberIds:d,...c}=t;if(i=c,e.isTempCard)break;if(!r)return;await this._updateTimeRecordCardAsync(e.id,r,{isDuration:a,from:o,to:s,durationMinutes:l,memberId:d&&S()(n=re()(d)).call(n,(e=>e!==U.k))[0]});break}}if(r&&(i&&Fr()(i).length>0&&this.updateCalendarCardPropertiesAsync(r,i),!e.isTempCard))return;let o=this._cardsUpdateBuffers.get(e.id);o||(o={changes:{}},this._cardsUpdateBuffers.set(e.id,o)),o.changes||(o.changes={});for(let[e,r]of wa()(t))void 0!==r&&(o.changes[e]=r);return o.processUpdatePromise||(o.processUpdatePromise=this._processCardUpdateBufferAsync(e.id,o)),o.processUpdatePromise}},{kind:"method",key:"updateCalendarCardBySchedulerAsync",value:async function updateCalendarCardBySchedulerAsync(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:{let t=this._calendarCardsMap.get(e.parentId);if(!t)return;let{isAllDay:r,start:i,end:a,defaultSortOrder:n,membersSortOrder:o,calendarsSortOrder:s,listsSortOrder:l,labelsSortOrder:d,...c}=e;await this._updateCustomFieldCardAsync(e.id,t,{isAllDay:r,date:i,defaultSortOrder:n,membersSortOrder:o,calendarsSortOrder:s,listsSortOrder:l,labelsSortOrder:d}),e={id:t.id,calendarId:c.calendarId,listId:c.listId,labelIds:c.labelIds,members:c.members};break}case x.h.TrelloCheckItem:{if(e.isTempCard)break;let t=this._calendarCardsMap.get(e.parentId);if(!t)return;let{isAllDay:r,start:i,end:a,members:n,defaultSortOrder:o,membersSortOrder:s,calendarsSortOrder:l,listsSortOrder:d,labelsSortOrder:c,...h}=e;await this._updateCheckItemCardAsync(e.id,t,{isAllDay:r,start:i,end:a,memberIds:null==n?void 0:S()(n).call(n,(e=>e!==U.k)),defaultSortOrder:o,membersSortOrder:s,calendarsSortOrder:l,listsSortOrder:d,labelsSortOrder:c}),e={id:t.id,labelIds:h.labelIds};break}case x.h.TrelloTimeRecord:{if(e.isTempCard)break;let t=this._calendarCardsMap.get(e.parentId);if(!t)return;let{isAllDay:r,start:i,end:a,members:n,defaultSortOrder:o,membersSortOrder:s,calendarsSortOrder:l,listsSortOrder:d,labelsSortOrder:c,...h}=e;await this._updateTimeRecordCardAsync(e.id,t,{isDuration:r,from:i,to:a,memberId:null==n?void 0:S()(n).call(n,(e=>e!==U.k))[0],defaultSortOrder:o,membersSortOrder:s,calendarsSortOrder:l,listsSortOrder:d,labelsSortOrder:c}),e={id:t.id,labelIds:h.labelIds};break}}let r=await this.getCalendarCardByIdAsync(e.id||e.shortId,{cardType:x.h.TrelloCard});if(r){let a=[];var i;if(e.members&&!Object(n.h)(e.members,r.members)&&a.push("idMembers"),e.labelIds&&!Object(n.h)([...e.labelIds],[...r.labelIds])&&a.push("idLabels"),e.listId&&e.listId!==r.listId)e.calendarId=null===(i=this._trelloIntegrationSrv.getTrelloListById(e.listId))||void 0===i?void 0:i.boardId,a.push("idList");return e.calendarId&&e.calendarId!==r.boardId&&(e.listId&&e.listId!==r.listId||(e.listId=null,a.push("idList")),a.push("idBoard")),xe()(wn).call(wn,(t=>void 0!==e[t]&&e[t]!==r[t]))&&a.push("cardData"),r=r.clone(),r.updateBySchedulerData(e),r.correctRecurrenceDates(),this.updateCalendarCardAsync(r,{...t,includeTrelloFields:a})}}},{kind:"method",key:"removeCalendarCardAsync",value:async function removeCalendarCardAsync(e,t={}){switch(e.cardType){case x.h.TrelloCustomField:{let t=this._calendarCardsMap.get(e.parentId);if(!t)return;return this._deleteCustomFieldCardAsync(e.id,t)}case x.h.TrelloCheckItem:{var r;if(e.isTempCard)break;let t=this._calendarCardsMap.get(e.parentId);if(!t)return;let i=null===(r=this._cardsChecklistsMap.get(t.id))||void 0===r?void 0:c()(r).call(r,(t=>{var r;return xe()(r=t.checkItems).call(r,(t=>t.id===e.id))}));if(!i)return;return this.updateCalendarCardCheckItemAsync(t,i.id,e.id,{start:null,end:null})}case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let{waitForRemove:i}=t;try{if(this._addCardToIgnored(e.id),e.isTempCard)return e.isAllDay=null,e.start=null,e.end=null,e.recurrenceRule=void 0,e.exceptionDates=void 0,void this._calendarCardsMap.update(e);this._removeChangeFromIgnored(e.lastChangeId);let t=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);e.isAllDay=null,e.start=null,e.end=null,e.recurrenceRule=void 0,e.exceptionDates=void 0;let{cardDataCustomFieldValue:r,...a}=e.toTrelloCard(t,["cardData"]);const n=e.clone();i||(this._loadedBoardIdsMap.has(e.boardId)?this._calendarCardsMap.update(e):this._calendarCardsMap.delete(e)),t.cardDataCustomFieldId&&await this._updateCustomFieldValuesAsync(e,{[t.cardDataCustomFieldId]:r},{waitForUpdate:i}),a=await this._trelloIntegrationSrv.restAsync(x.L.Put,`/cards/${e.id}`,"Update Trello card remove",a,i?3:9),this._addChangeToIgnored(a),this._updateBoardCardsLastModifiedDate(a.idBoard,a.dateLastActivity),a.customFieldItems=this._cardsCustomFieldItemsMap.get(a.id)||[],a.checklists=this._cardsChecklistsMap.get(a.id)||[];let o=this._createCalendarCardFromTrelloCard(a);i||!n.equals(o)?this._loadedBoardIdsMap.has(o.boardId)?this._calendarCardsMap.update(o):this._calendarCardsMap.delete(o):e.lastChangeId=new Date(a.dateLastActivity).getTime()}catch(e){if(i)throw e;this._$log.error("Trello remove card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello remove card error",e,{class:this.constructor.name,method:this.removeCalendarCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.REMOVE_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e.id)}}},{kind:"method",key:"deleteCalendarCardAsync",value:async function deleteCalendarCardAsync(e,t={}){switch(e.cardType){case x.h.TrelloCustomField:throw new Error(`Unsupported method for card type: ${e.cardType}`);case x.h.TrelloCheckItem:{var r;if(e.isTempCard)break;let t=this._calendarCardsMap.get(e.parentId);if(!t)return;let i=null===(r=this._cardsChecklistsMap.get(t.id))||void 0===r?void 0:c()(r).call(r,(t=>{var r;return xe()(r=t.checkItems).call(r,(t=>t.id===e.id))}));if(!i)return;return this.deleteCalendarCardCheckItemAsync(t,i.id,e.id)}case x.h.TrelloTimeRecord:{if(e.isTempCard)break;let t=this._calendarCardsMap.get(e.parentId);if(!t)return;return this.deleteCalendarCardTimeRecordAsync(t,e.id)}}let{waitForDelete:i}=t;try{if(this._addCardToIgnored(e.id),e.isTempCard)return void this._calendarCardsMap.delete(e);this._removeChangeFromIgnored(e.lastChangeId);for(let t of e.links)await this._unlinkCalendarCardsAsync(t.cardId,e.id,x.k[t.type]);i||this._calendarCardsMap.delete(e),await this._trelloIntegrationSrv.restAsync(x.L.Delete,`/cards/${e.id}`,"Delete Trello card",null,i?3:9),i&&this._calendarCardsMap.delete(e)}catch(e){if(i)throw e;this._$log.error("Trello delete card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello delete card error",e,{class:this.constructor.name,method:this.deleteCalendarCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.DELETE_TRELLO_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e.id)}}},{kind:"method",key:"createRecurrenceGapAsync",value:function createRecurrenceGapAsync(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${t.cardType}`)}}},{kind:"method",key:"addExceptionToRecurrentAsync",value:function addExceptionToRecurrentAsync(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${t.cardType}`)}let{waitForAdd:r}=t,i=this.getCalendarCardById(e.recurrenceId,t);if(i)return i.addExceptionDate(e.exceptionDate),this.updateCalendarCardAsync(i,{waitForUpdate:r,includeTrelloFields:["cardData"]})}},{kind:"method",key:"removeExceptionsFromRecurrentAsync",value:function removeExceptionsFromRecurrentAsync(e,t={}){switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${t.cardType}`)}let{fromDate:r,waitForRemove:i}=t,a=this.getCalendarCardById(e.id,t);if(a)return a.deleteExceptionDates(r),this.updateCalendarCardAsync(a,{waitForUpdate:i,includeTrelloFields:["cardData"]})}},{kind:"method",key:"deleteRecurrenceExceptionsAsync",value:async function deleteRecurrenceExceptionsAsync(e,t={}){var r,i;switch(t.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${t.cardType}`)}let{fromDate:a,waitForDelete:n}=t,o=S()(r=Ta()(i=this._calendarCardsMap).call(i)).call(r,(t=>t.recurrenceId===e.id&&!(a&&t.exceptionDate<a)));if(!n)for(let e of o)this._calendarCardsMap.delete(e);for(;o.length>0;){var s;await P.a.all(R()(s=y()(o).call(o,0,5)).call(s,(async e=>{try{await this._trelloIntegrationSrv.restAsync(x.L.Delete,`/cards/${e.id}`,"Delete Trello card recurrence exception",null,n?3:9)}catch(e){this._$log.error("Trello delete card recurrence exception error:"),this._$log.error(e)}})))}if(n)for(let e of o)this._calendarCardsMap.delete(e)}},{kind:"method",key:"getCalendarCardCustomFieldValues",value:function getCalendarCardCustomFieldValues(e){var t,r;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}if(!this._cardsCustomFieldValuesMap.has(e.id)){let a=this._cardsCustomFieldItemsMap.get(e.id);if(!a)return;let n=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId),o={};for(let e of a){var i;if(e.idCustomField===n.cardDataCustomFieldId)continue;let a,s=c()(i=n.customFields).call(i,(t=>t.id===e.idCustomField));if(s){switch(s.type){case x.pb.Checkbox:a="true"===(null===(t=e.value)||void 0===t?void 0:t.checked);break;case x.pb.Date:a=e.value&&new Date(e.value.date);break;case x.pb.List:a=e.idValue;break;case x.pb.Number:a=e.value&&Cn()(e.value.number);break;case x.pb.Text:a=null===(r=e.value)||void 0===r?void 0:r.text}o[e.idCustomField]=a}}this._cardsCustomFieldValuesMap.set(e.id,o)}return this._cardsCustomFieldValuesMap.get(e.id)}},{kind:"method",key:"getCalendarCardChecklists",value:function getCalendarCardChecklists(e){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}let t=this._cardsChecklistsMap.get(e.id);if(t)return R()(t).call(t,(e=>{var t;return{id:e.id,name:e.name,position:e.pos,checkItems:R()(t=e.checkItems).call(t,(e=>{var t,r;let i=this._calendarCardsMap.get(e.id);return{id:e.id,name:e.name,position:e.pos,isCompleted:"complete"===e.state,isAllDay:null===(t=null==i?void 0:i.isAllDay)||void 0===t||t,start:null==i?void 0:i.start,end:null==i?void 0:i.end,memberIds:i?S()(r=re()(i.memberIds)).call(r,(e=>e!==U.k)):[]}}))}}))}},{kind:"method",key:"createCalendarCardChecklistAsync",value:async function createCalendarCardChecklistAsync(e,t={}){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloCheckItem:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let r,i={id:getIncrementalTempId(),idCard:e.id,name:t.name||this._$translate.instant("MISC.CHECKLIST"),pos:t.position||Ea()(),checkItems:[]};if(this._updateChecklistsCache(e.id,i),e.isTempCard)r=i;else try{r=await this._trelloIntegrationSrv.restAsync(x.L.Post,"/checklists","Create Trello checklist",{...i,pos:t.position||"bottom"}),this._updateChecklistsCache(e.id,r)}finally{var a;this._updateChecklistsCache(e.id,S()(a=this._cardsChecklistsMap.get(e.id)||[]).call(a,(e=>e.id!==i.id)))}return{id:r.id,name:r.name,position:r.pos,checkItems:[]}}},{kind:"method",key:"updateCalendarCardChecklistAsync",value:async function updateCalendarCardChecklistAsync(e,t,r){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloCheckItem:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let i=this._checklistsUpdateBuffers.get(t);i||(i={changes:{}},this._checklistsUpdateBuffers.set(t,i)),i.changes||(i.changes={});for(let[e,t]of wa()(r))void 0!==t&&(i.changes[e]=t);i.processUpdatePromise||(i.processUpdatePromise=this._processChecklistUpdateBufferAsync(e.id,t,i));try{this._addChecklistToIgnored(t),await i.processUpdatePromise}finally{this._removeChecklistFromIgnored(t)}}},{kind:"method",key:"deleteCalendarCardChecklistAsync",value:async function deleteCalendarCardChecklistAsync(e,t){var r,i;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloCheckItem:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let a=null===(r=this._cardsChecklistsMap.get(e.id))||void 0===r?void 0:c()(r).call(r,(e=>e.id===t));if(a){this._updateChecklistsCache(e.id,S()(i=this._cardsChecklistsMap.get(e.id)).call(i,(e=>e.id!==t)));for(let t of a.checkItems)this._calendarCardsMap.has(t.id)&&this._deleteCheckItemCardAsync(t.id,e);if(!e.isTempCard&&!isIncrementalTempId(t))try{this._addChecklistToIgnored(t),await this._trelloIntegrationSrv.restAsync(x.L.Delete,`/checklists/${t}`,"Delete Trello checklist")}finally{this._removeChecklistFromIgnored(t)}}}},{kind:"method",key:"createCalendarCardCheckItemAsync",value:async function createCalendarCardCheckItemAsync(e,t,r){var i,a,n;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloCheckItem:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let o=null===(i=this._cardsChecklistsMap.get(e.id))||void 0===i?void 0:c()(i).call(i,(e=>e.id===t));if(!o)return;let s,l={id:getIncrementalTempId(),name:r.name,due:null===(a=r.due)||void 0===a?void 0:a.toISOString(),idMember:null===(n=r.memberIds)||void 0===n?void 0:n[0],pos:r.position||Ea()(),state:r.isCompleted?"complete":"incomplete"};if(o.checkItems.push(l),this._updateChecklistsCache(e.id,o),e.isTempCard)s=l;else try{var d,h;this._addChecklistToIgnored(t),s=await this._trelloIntegrationSrv.restAsync(x.L.Post,`/checklists/${t}/checkItems`,"Create Trello check item",{...l,due:l.due,idMember:l.idMember,pos:r.position||"bottom",checked:r.isCompleted});let i=null===(d=this._cardsChecklistsMap.get(e.id))||void 0===d?void 0:c()(d).call(d,(e=>e.id===t));i&&!xe()(h=i.checkItems).call(h,(e=>e.id===s.id))&&(i.checkItems.push(s),this._updateChecklistsCache(e.id,i))}finally{var u;this._removeChecklistFromIgnored(t);let r=null===(u=this._cardsChecklistsMap.get(e.id))||void 0===u?void 0:c()(u).call(u,(e=>e.id===t));var p;if(r)r.checkItems=S()(p=r.checkItems).call(p,(e=>e.id!==l.id)),this._updateChecklistsCache(e.id,r)}return{id:s.id,name:s.name,position:s.pos,due:s.due&&new Date(s.due),memberIds:s.idMember?[s.idMember]:[],isCompleted:"complete"===s.state}}},{kind:"method",key:"updateCalendarCardCheckItemAsync",value:async function updateCalendarCardCheckItemAsync(e,t,r,i){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloCheckItem:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let a=this._checklistsUpdateBuffers.get(t);a||(a={changes:{}},this._checklistsUpdateBuffers.set(t,a)),a.changes||(a.changes={}),a.changes.checkItems||(a.changes.checkItems={}),a.changes.checkItems[r]||(a.changes.checkItems[r]={});for(let[e,t]of wa()(i))void 0!==t&&(a.changes.checkItems[r][e]=t);a.processUpdatePromise||(a.processUpdatePromise=this._processChecklistUpdateBufferAsync(e.id,t,a));try{this._addChecklistToIgnored(t),await a.processUpdatePromise}finally{this._removeChecklistFromIgnored(t)}}},{kind:"method",key:"deleteCalendarCardCheckItemAsync",value:async function deleteCalendarCardCheckItemAsync(e,t,r){var i,a;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloCheckItem:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let n=null===(i=this._cardsChecklistsMap.get(e.id))||void 0===i?void 0:c()(i).call(i,(e=>e.id===t));if(n&&(n.checkItems=S()(a=n.checkItems).call(a,(e=>e.id!==r)),this._updateChecklistsCache(e.id,n),this._calendarCardsMap.has(r)&&this._deleteCheckItemCardAsync(r,e),!e.isTempCard&&!isIncrementalTempId(r)))try{this._addChecklistToIgnored(t),await this._trelloIntegrationSrv.restAsync(x.L.Delete,`/checklists/${t}/checkItems/${r}`,"Delete Trello check item")}finally{this._removeChecklistFromIgnored(t)}}},{kind:"method",key:"getCalendarCardTimeRecords",value:function getCalendarCardTimeRecords(e){var t;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}return R()(t=e.trelloTimeRecordCards).call(t,(t=>{var r;return{id:t.id,memberId:S()(r=re()(t.memberIds)).call(r,(e=>e!==U.k))[0],canBeUpdated:!e.isReadOnly,canBeDeleted:!e.isReadOnly,isDuration:t.isAllDay,from:t.start,to:t.end,durationMinutes:t.durationMinutes}}))}},{kind:"method",key:"createCalendarCardTimeRecordAsync",value:function createCalendarCardTimeRecordAsync(e){switch(e.cardType){case x.h.TrelloCheckItem:case x.h.TrelloCustomField:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}return{id:e.isTempCard?getIncrementalTempId():Ve()(),canBeUpdated:!0,canBeDeleted:!0}}},{kind:"method",key:"updateCalendarCardTimeRecordAsync",value:async function updateCalendarCardTimeRecordAsync(e,t,r){switch(e.cardType){case x.h.TrelloCheckItem:case x.h.TrelloCustomField:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}let i=this._timeRecordsUpdateBuffers.get(t);i||(i={changes:{}},this._timeRecordsUpdateBuffers.set(t,i)),i.changes||(i.changes={});for(let[e,t]of wa()(r))void 0!==t&&(i.changes[e]=t);i.processUpdatePromise||(i.processUpdatePromise=this._processTimeRecordUpdateBufferAsync(e.id,t,i)),await i.processUpdatePromise}},{kind:"method",key:"deleteCalendarCardTimeRecordAsync",value:function deleteCalendarCardTimeRecordAsync(e,t){switch(e.cardType){case x.h.TrelloCheckItem:case x.h.TrelloCustomField:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t;break;case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}if(this._calendarCardsMap.has(t))return this._deleteTimeRecordCardAsync(t,e)}},{kind:"method",key:"getCalendarCardAttachments",value:function getCalendarCardAttachments(e){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}let t=this._cardsAttachmentsMap.get(e.id);if(t)return R()(t).call(t,(e=>{var t;return{id:e.id,type:e.isUpload?x.b.File:x.b.Link,name:e.name,position:e.pos,file:e.file,url:e.url,date:new Date(e.date),mimeType:e.mimeType,previews:R()(t=e.previews).call(t,(e=>({id:e.id,url:e.url,height:e.height,width:e.width})))}}))}},{kind:"method",key:"createCalendarCardAttachmentAsync",value:async function createCalendarCardAttachmentAsync(e,t,r){var i;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}let a,o={id:getIncrementalTempId(),name:t.name,pos:Ea()(),file:t.file,url:t.url,date:new Date,isUpload:t.type===x.b.File,previews:[]};if(this._updateAttachmentsCache(e.id,o),e.isTempCard)a=o;else try{switch(t.type){case x.b.File:a=await this._trelloIntegrationSrv.restAsync(x.L.PostFile,`/cards/${e.id}/attachments`,"Create Trello attachment",{name:o.name,file:await Object(n.ub)(o.file),mimeType:o.file.type},3,(({direction:e,percent:t})=>{"upload"===e&&(null==r||r({id:o.id,isComplete:!1,percent:t}))})),null==r||r({id:o.id,isComplete:!0});break;case x.b.Link:a=await this._trelloIntegrationSrv.restAsync(x.L.Post,`/cards/${e.id}/attachments`,"Create Trello attachment",{name:o.name,url:o.url})}this._updateAttachmentsCache(e.id,a)}finally{var s;this._updateAttachmentsCache(e.id,S()(s=this._cardsAttachmentsMap.get(e.id)||[]).call(s,(e=>e.id!==o.id)))}return{id:a.id,type:a.isUpload?x.b.File:x.b.Link,name:a.name,position:a.pos,url:a.url,date:new Date(a.date),mimeType:a.mimeType,previews:R()(i=a.previews).call(i,(e=>({id:e.id,url:e.url,height:e.height,width:e.width})))}}},{kind:"method",key:"updateCalendarCardAttachmentAsync",value:async function updateCalendarCardAttachmentAsync(e,t,r){var i;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}let a,n=null===(i=this._cardsAttachmentsMap.get(e.id))||void 0===i?void 0:c()(i).call(i,(e=>e.id===t));if(!n)return;if(void 0!==r.name&&n.name!==r.name&&(n.name=r.name,a={...a,name:n.name}),void 0!==r.url&&n.url!==r.url&&(n.url=r.url,a={...a,url:n.url}),!a)return;if(this._updateAttachmentsCache(e.id,n),e.isTempCard)return;let o=await this._trelloIntegrationSrv.restAsync(x.L.Put,`/cards/${e.id}/attachments/${t}`,"Update Trello attachment",a);this._updateAttachmentsCache(e.id,o)}},{kind:"method",key:"deleteCalendarCardAttachmentAsync",value:async function deleteCalendarCardAttachmentAsync(e,t){var r,i;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}(null===(r=this._cardsAttachmentsMap.get(e.id))||void 0===r?void 0:c()(r).call(r,(e=>e.id===t)))&&(this._updateAttachmentsCache(e.id,S()(i=this._cardsAttachmentsMap.get(e.id)).call(i,(e=>e.id!==t))),e.isTempCard||isIncrementalTempId(t)||await this._trelloIntegrationSrv.restAsync(x.L.Delete,`/cards/${e.id}/attachments/${t}`,"Delete Trello attachment"))}},{kind:"method",key:"getCalendarCardComments",value:function getCalendarCardComments(e){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}let t=this._cardsCommentsMap.get(e.id);if(t)return R()(t).call(t,(t=>({id:t.id,comment:t.data.text,memberId:t.idMemberCreator,creationDate:new Date(t.date),lastEditDate:t.data.dateLastEdited&&new Date(t.data.dateLastEdited),canBeUpdated:this._isCalendarCardCommentCanBeUpdated(e,t),canBeDeleted:this._isCalendarCardCommentCanBeDeleted(e,t)})))}},{kind:"method",key:"reloadCalendarCardCommentsAsync",value:async function reloadCalendarCardCommentsAsync(e){try{switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}if(this._cardsCommentsMap.has(e.id))return;let t=await this._trelloIntegrationSrv.restAsync(x.L.Get,`/cards/${e.id}/actions`,"Get Trello comments",{filter:bn,limit:50});this._updateCommentsCache(e.id,t)}catch(e){this._$log.error("Trello load comments error:"),this._$log.error(e),this._telemetrySrv.logError("Trello load comments error",e,{class:this.constructor.name,method:this.reloadCalendarCardCommentsAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.LOAD_TRELLO_COMMENTS_ERROR"),x.A.Error)}}},{kind:"method",key:"createCalendarCardCommentAsync",value:async function createCalendarCardCommentAsync(e,t){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}let r,i={id:getIncrementalTempId(),idMemberCreator:this._currentMemberId,date:(new Date).toISOString(),data:{card:{id:e.id},text:t.comment}};if(this._updateCommentsCache(e.id,i),e.isTempCard)r=i;else try{r=await this._trelloIntegrationSrv.restAsync(x.L.Post,`/cards/${e.id}/actions/comments`,"Add Trello comment",{text:t.comment}),this._updateCommentsCache(e.id,r)}finally{var a;this._updateCommentsCache(e.id,S()(a=this._cardsCommentsMap.get(e.id)||[]).call(a,(e=>e.id!==i.id)))}return{id:r.id,comment:r.data.text,memberId:this._currentMemberId,creationDate:new Date(r.date),canBeUpdated:!0,canBeDeleted:!0}}},{kind:"method",key:"updateCalendarCardCommentAsync",value:async function updateCalendarCardCommentAsync(e,t,r){var i;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}let a,n=null===(i=this._cardsCommentsMap.get(e.id))||void 0===i?void 0:c()(i).call(i,(e=>e.id===t));if(n&&(void 0!==r.comment&&n.data.text!==r.comment&&(n.data.text=r.comment,a={...a,text:n.data.text}),a&&(this._updateCommentsCache(e.id,n),!e.isTempCard)))try{this._addCommentToIgnored(t);let r=await this._trelloIntegrationSrv.restAsync(x.L.Put,`/cards/${e.id}/actions/${t}/comments`,"Update Trello comment",a);this._updateCommentsCache(e.id,r)}finally{this._removeCommentFromIgnored(t)}}},{kind:"method",key:"deleteCalendarCardCommentAsync",value:async function deleteCalendarCardCommentAsync(e,t){var r,i;switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._calendarCardsMap.get(e.parentId);if(!t)return;e=t}if((null===(r=this._cardsCommentsMap.get(e.id))||void 0===r?void 0:c()(r).call(r,(e=>e.id===t)))&&(this._updateCommentsCache(e.id,S()(i=this._cardsCommentsMap.get(e.id)).call(i,(e=>e.id!==t))),!e.isTempCard&&!isIncrementalTempId(t)))try{this._addCommentToIgnored(t),await this._trelloIntegrationSrv.restAsync(x.L.Delete,`/cards/${e.id}/actions/${t}/comments`,"Delete Trello comment")}finally{this._removeCommentFromIgnored(t)}}},{kind:"method",key:"getCalendarCardLinks",value:function getCalendarCardLinks(e){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}if(!this._cardCachedLinksMap.has(e.id)){var t;if(!e.canHaveLinks)return[];let r=R()(t=e.links).call(t,(t=>{var r;let i=this._calendarCardsMap.get(t.cardId),a=null;return i?i.canHaveLinks?e.isTempCard||c()(r=i.links).call(r,(r=>r.type===x.k[t.type]&&r.cardId===e.id))||(a=x.e.NoLink):a=x.e.LinksDisabled:a=x.e.NoCard,{fromCardId:e.id,toCardId:t.cardId,linkType:t.type,linkError:a,linkedCard:i}})),i=this._calendarCardsMap.get(U.k);if(null!=i&&i.links)for(let t of i.links)t.cardId===e.id&&r.push({fromCardId:e.id,toCardId:U.k,linkType:x.k[t.type],linkError:i.canHaveLinks?null:x.e.LinksDisabled,linkedCard:i});this._cardCachedLinksMap.set(e.id,r)}return this._cardCachedLinksMap.get(e.id)}},{kind:"method",key:"createCalendarCardLinkAsync",value:function createCalendarCardLinkAsync(e,t,r){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}return P.a.all([this._linkCalendarCardsAsync(e.id,t,r),this._linkCalendarCardsAsync(t,e.id,x.k[r])])}},{kind:"method",key:"updateCalendarCardLinkAsync",value:function updateCalendarCardLinkAsync(e,t,r,i){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}return P.a.all([this._relinkCalendarCardsAsync(e.id,t,r,i),this._relinkCalendarCardsAsync(t,e.id,x.k[r],x.k[i])])}},{kind:"method",key:"removeCalendarCardLinkAsync",value:function removeCalendarCardLinkAsync(e,t,r){switch(e.cardType){case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:throw new Error(`Unsupported method for card type: ${e.cardType}`)}return P.a.all([this._unlinkCalendarCardsAsync(e.id,t,r),this._unlinkCalendarCardsAsync(t,e.id,x.k[r])])}},{kind:"method",key:"addCalendarCardEventListener",value:function addCalendarCardEventListener(e,t){let r=this._calendarCardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.add(t)}},{kind:"method",key:"removeCalendarCardEventListener",value:function removeCalendarCardEventListener(e,t){let r=this._calendarCardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.delete(t)}},{kind:"method",key:"isCalendarCardVisible",value:function isCalendarCardVisible(e){var t;try{if(e.isTempCard)return!0;if(this._hiddenBoardIds.has(e.boardId))return!1;if(!(!e.isArchived||this._globalBoardSettings.showArchivedCards))return!1;if(e.isMilestone&&(!this._globalBoardSettings.isMilestonesShown||!this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!1)))return!1;if(e.ignoreFilters)return!0;let p=this._globalBoardSettings.multiBoard[e.boardId];if(null!=p&&p.showOnlyMemberCards&&!e.memberIds.has(this._trelloIntegrationSrv.getMemberId()))return!1;switch(e.cardType){case x.h.TrelloCustomField:let r=this._settingsSrv.currentSettings.getGlobalBoardSettings(e.boardId);if(!ze()(t=r.customFieldsAsCards).call(t,e.trelloCustomFieldId))return!1;break;case x.h.TrelloCheckItem:if(!this._globalBoardSettings.isCheckItemCardsShown)return!1;break;case x.h.TrelloTimeRecord:if(!this._globalBoardSettings.isTimeRecordCardsShown)return!1}let m=this._globalBoardSettings.filters;if(m.cardsVisibility===x.j.Completed&&!e.isCompleted)return!1;if(m.cardsVisibility===x.j.Incompleted&&e.isCompleted)return!1;if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!1))return!0;if(m.members.length>0){var r;if(!xe()(r=m.members).call(r,(t=>e.memberIds.has(t))))return!1}if(m.labels.length>0){var i;if(!xe()(i=e.labelIds).call(i,(t=>{var r;if(t===U.k)return ze()(r=m.labels).call(r,U.k);let i=this._trelloIntegrationSrv.getTrelloLabelById(t);var a;return!(!i||e.boardId!==i.boardId)&&ze()(a=m.labels).call(a,Object(n.V)(i))})))return!1}if(m.lists.length>0){var a;if(!ze()(a=m.lists).call(a,e.listId))return!1}if(m.customFields.length>0){let t=!1;if(e.cardType===x.h.TrelloCustomField){let r=this._trelloIntegrationSrv.getTrelloCustomFieldById(e.trelloCustomFieldId);var o;if(r)t=ze()(o=m.customFields).call(o,Object(n.L)(r))}if(!t)return!1}if(m.customFilters.length>0){let t=!1,r=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId);for(let i of m.customFilters){var s;let a=c()(s=r.customFilters).call(s,(e=>e.id===i));if(a)switch(a.targetType){case x.m.CustomField:let r=this._trelloIntegrationSrv.getTrelloCustomFieldById(a.targetId);if(!r)continue;let i=this.getCalendarCardCustomFieldValues(e),n=null==i?void 0:i[a.targetId];switch(r.type){case x.pb.Checkbox:a.value?n&&(t=!0):n||(t=!0);break;case x.pb.List:n===a.value&&(t=!0)}}}if(!t)return!1}if(!this._settingsSrv.currentSettings.global.isTrelloFiltersEnabled)return!0;let f=this._trelloIntegrationSrv.getTrelloFilters();if(!f)return!0;if(f.keywords.length>0){var l,d;let t=et()(l=f.keywords).call(l,0,f.keywords.length-1),r=f.keywords[f.keywords.length-1];if(!xe()(d=e.keywords).call(d,(e=>ce()(e).call(e,r)||ze()(t).call(t,e))))return!1}if(f.labelIds.length>0){var h,u;let t=S()(h=R()(u=re()(e.labelIds)).call(u,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(h,(t=>t&&e.boardId===t.boardId)),r="or"===f.mode?"some":"every";if(!f.labelIds[r]((r=>xe()(t).call(t,(e=>e.id===r))||r===U.k&&e.labelIds.has(r))))return!1}if(f.memberIds.length>0){let t="or"===f.mode?"some":"every";if(!f.memberIds[t]((t=>e.memberIds.has(t))))return!1}if(f.due){let t=!0;switch(f.due){case"day":case"week":case"month":if(e.due&&!e.isCompleted){let r=new Date,i=Object(n.a)(r,Sn[f.due]);t=Object(n.ob)(e.due,r,i)}break;case"overdue":if(e.due&&!e.isCompleted){let r=new Date;t=Object(n.jb)(r,e.due)}break;case"notdue":t=!e.due;break;case"complete":t=e.due&&e.isCompleted;break;case"incomplete":t=e.due&&!e.isCompleted}if(!t)return!1}return!0}catch(e){return this._$log.error("Planyway apply card filters error:"),this._$log.error(e),!0}}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_trelloToken",value:function _trelloToken(){return this._trelloIntegrationSrv.getTrelloToken()}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}},{kind:"method",key:"_requestReloadCalendarCards",value:function _requestReloadCalendarCards(){this._reloadCalendarCardsRequested=!0,this._getCalendarCardsPromise=null}},{kind:"method",key:"_getCalendarCardsAsync",value:async function _getCalendarCardsAsync(e){var t,r;for(let e of Ta()(i=this._calendarCardsMap).call(i)){var i,a;e.isTempCard||(null===(a=this._loadedBoardIdsMap.get(e.boardId))||void 0===a||a)&&this._calendarCardsMap.delete(e)}let n=[];for(let e of Kr()(o=this._loadedBoardIdsMap).call(o)){var o;this._loadedBoardIdsMap.get(e)&&n.push(e)}if(this._subscribeBoardsUpdatesRequested&&(this._subscribeBoardsUpdatesRequested=!1,this._getUpdatedBoardsAsync(n)),this._reloadBoardsDataRequested&&(this._reloadBoardsDataRequested=!1,await this._trelloIntegrationSrv.loadBoardsDataAsync(n)),e.isCanceled())return;let[s]=await P.a.all([this._getBoardsCards(n,e),this._trelloIntegrationSrv.loadBoardsSettingsAsync(S()(n).call(n,(e=>e!==this._currentBoardId)))]);if(e.isCanceled())return;for(let{boardId:t,trelloCards:r}of s){let i=this._trelloIntegrationSrv.getTrelloBoardById(t);for(let e of r){var l;if(this._updateBoardCardsLastModifiedDate(e.idBoard,e.dateLastActivity),e.customFieldItems)if(this._updateCustomFieldItemsCache(e.id,e.customFieldItems),e.customFieldItems.length>0)xe()(l=e.customFieldItems).call(l,(e=>{var t;return!xe()(t=i.customFields).call(t,(t=>t.id===e.idCustomField))}))&&(await this._trelloIntegrationSrv.loadBoardDataAsync(t),i=this._trelloIntegrationSrv.getTrelloBoardById(t));e.checklists&&this._updateChecklistsCache(e.id,e.checklists),e.attachments&&this._updateAttachmentsCache(e.id,e.attachments);let r=this._createCalendarCardFromTrelloCard(e);this._calendarCardsMap.add(r);for(let e of r.trelloCustomFieldCards)this._calendarCardsMap.add(e,{delayed:!0});for(let e of r.trelloCheckItemCards)this._calendarCardsMap.add(e,{delayed:!0});for(let e of r.trelloTimeRecordCards)this._calendarCardsMap.add(e,{delayed:!0})}if(e.isCanceled())return}for(let e of n)this._loadedBoardIdsMap.set(e,!1);this._pollingTimeout&&this._$timeout.cancel(this._pollingTimeout);const pollBoardsAsync=async()=>{try{await this._pollBoardsAsync()}catch(e){this._$log.error("Planyway poll Trello cards error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway poll Trello cards error",e,{class:this.constructor.name,method:this._pollBoardsAsync.name})}this._pollingTimeout=this._$timeout((()=>pollBoardsAsync()),6e4,!1)};return this._pollingTimeout=this._$timeout((()=>pollBoardsAsync()),6e4,!1),S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(e=>!this._hiddenBoardIds.has(e.boardId)))}},{kind:"method",key:"_getBoardsCards",value:async function _getBoardsCards(e,t){let r=new lt.a(R()(e).call(e,(e=>[e,{boardId:e,trelloCards:[]}])));const loadBoardsCards=async i=>{if(i&&!this._globalBoardSettings.showArchivedCards)return;let a=R()(e).call(e,(e=>({url:`/boards/${e}/cards`,page:1})));for(;a.length>0;){let e=y()(a).call(a,0,5),o=R()(e).call(e,(e=>{let t={filter:i?"closed":"visible",sort:"-id",fields:En,customFieldItems:!0,checklists:"all",attachments:!0,limit:500};return e.lastCardId&&(t.before=e.lastCardId),t})),s=await this._trelloIntegrationSrv.batchAsync(R()(e).call(e,(e=>e.url)),`Get Trello board ${i?"archived":"open"} cards`,o,{keepResultPlacement:!0});if(B()(e).call(e,((e,t)=>{let r=s[t];!r||r.length<500||3===e.page||(e.page++,e.lastCardId=r[r.length-1].id,a.push(e))})),t.isCanceled())return;for(let e of b()(n=S()(s).call(s,(e=>e))).call(n)){var n;r.get(e.idBoard).trelloCards.push(e)}}};return await P.a.all([loadBoardsCards(!1),loadBoardsCards(!0)]),re()(Ta()(r).call(r))}},{kind:"method",key:"_createCalendarCardFromTrelloCard",value:function _createCalendarCardFromTrelloCard(e){var t,r;let i=this._trelloIntegrationSrv.getTrelloBoardById(e.idBoard),a=G.a.fromTrelloCard(e,this._currentBoardId,i);if((null===(t=e.customFieldItems)||void 0===t?void 0:t.length)>0)for(let t of e.customFieldItems){var n,o;(null===(n=c()(o=i.customFields).call(o,(e=>e.id===t.idCustomField)))||void 0===n?void 0:n.type)===x.pb.Date&&a.addTrelloCustomFieldCardFromTrello(t)}if((null===(r=e.checklists)||void 0===r?void 0:r.length)>0){var s;let t=ze()(s=i.premiumFeatures).call(s,x.nb.AdvancedChecklists);for(let r of e.checklists)for(let e of r.checkItems)a.addTrelloCheckItemCardFromTrello(e,i,{syncWithTrello:t})}if(a.timeRecordCardsData.length>0)for(let e of a.timeRecordCardsData)a.addTrelloTimeRecordCard(e,i);return a}},{kind:"method",key:"_pollBoardsAsync",value:async function _pollBoardsAsync(){}},{kind:"method",key:"_getUpdatedBoardsAsync",value:async function _getUpdatedBoardsAsync(e){return[]}},{kind:"method",key:"_updateBoardLastModifiedDate",value:function _updateBoardLastModifiedDate(e,t,r=0){"string"==typeof t&&(t=new Date(t));let i=this._boardsLastModifiedDateMap.get(e);return(!i||Object(n.T)(i,t)>r)&&(this._boardsLastModifiedDateMap.set(e,t),!0)}},{kind:"method",key:"_updateBoardCardsLastModifiedDate",value:function _updateBoardCardsLastModifiedDate(e,t,r=0){"string"==typeof t&&(t=new Date(t));let i=this._boardCardsLastModifiedDateMap.get(e);return(!i||Object(n.T)(i,t)>r)&&(this._boardCardsLastModifiedDateMap.set(e,t),!0)}},{kind:"method",key:"_getDefaultListIdAsync",value:async function _getDefaultListIdAsync(e){let t=this._trelloIntegrationSrv.getTrelloBoardById(e),r=t.defaultListId;if(r)try{let t=await this._trelloIntegrationSrv.restAsync(x.L.Get,`/lists/${r}`,"Get Trello list");if(!t.closed&&t.idBoard===e)return r}catch(e){this._$log.error("Trello default list getting error:"),this._$log.error(e)}return r=await this._getFirstListIdAsync(e),t.defaultListId=r,this._settingsSrv.saveBoardSettingsAsync(e,{defaultListId:r}),r}},{kind:"method",key:"_getFirstListIdAsync",value:async function _getFirstListIdAsync(e){try{let t=await this._trelloIntegrationSrv.restAsync(x.L.Get,`/boards/${e}/lists`,"Get Trello lists",{filter:"open",fields:"id,pos"});if(t.length>0)return t[0].id;let r=await this._createNewListAsync(e);if(r)return r.id}catch(e){this._$log.error("Trello first list getting error:"),this._$log.error(e)}}},{kind:"method",key:"_createNewListAsync",value:async function _createNewListAsync(e){try{return await this._trelloIntegrationSrv.restAsync(x.L.Post,"/lists","Create Trello list",{name:this._$translate.instant("MISC.NO_TITLE"),idBoard:e,pos:"top"})}catch(e){this._$log.error("Trello creating list error:"),this._$log.error(e)}}},{kind:"method",key:"_addChangeToIgnored",value:function _addChangeToIgnored(e){e&&("number"==typeof e?this._ignoredChangeIds.add(e):e.dateLastActivity&&this._ignoredChangeIds.add(new Date(e.dateLastActivity).getTime()))}},{kind:"method",key:"_removeChangeFromIgnored",value:function _removeChangeFromIgnored(e){e&&("number"==typeof e?this._ignoredChangeIds.delete(e):e.dateLastActivity&&this._ignoredChangeIds.delete(new Date(e.dateLastActivity).getTime()))}},{kind:"method",key:"_checkChangeIgnored",value:function _checkChangeIgnored(e){if(e){if("number"==typeof e)return this._ignoredChangeIds.has(e);if(e.dateLastActivity)return this._ignoredChangeIds.has(new Date(e.dateLastActivity).getTime())}return!1}},{kind:"method",key:"_addCardToIgnored",value:function _addCardToIgnored(e){let t=this._ignoredCardsCountMap.get(e)||0;this._ignoredCardsCountMap.set(e,t+1)}},{kind:"method",key:"_removeCardFromIgnored",value:function _removeCardFromIgnored(e){let t=this._ignoredCardsCountMap.get(e);t&&(1===t?this._ignoredCardsCountMap.delete(e):this._ignoredCardsCountMap.set(e,t-1))}},{kind:"method",key:"_checkCardIgnored",value:function _checkCardIgnored(e){return(this._ignoredCardsCountMap.get(e)||0)>0}},{kind:"method",key:"_processCardUpdateBufferAsync",value:async function _processCardUpdateBufferAsync(e,t){if(t.processUpdatePromise)return t.processUpdatePromise;try{for(e!==U.k&&await Object(n.x)(200);t.changes;){let r=t.changes;t.changes=null;let i=this.getCalendarCardById(e,{cardType:x.h.TrelloCard});if(!i)return;let a={boardId:"idBoard",listId:"idList",position:"pos",title:"name",isCompleted:"dueComplete",isArchived:"closed",isSubscribed:"subscribed",memberIds:"idMembers",labelIds:"idLabels",description:"desc"},n=[],o=!1,s={};for(let e in r){if(ce()(e).call(e,U.h)){s[et()(e).call(e,U.h.length)]=r[e];continue}let t=a[e];t?n.push(t):o=!0,i[e]=r[e]}o&&n.push("cardData"),(r.start||r.end)&&i.correctRecurrenceDates(),i.isTempCard||(i.ignoreFilters=!1),await this.updateCalendarCardAsync(i,{waitForUpdate:!1,includeTrelloFields:n,customFieldValues:s})}}finally{this._cardsUpdateBuffers.delete(e)}}},{kind:"method",key:"_restAsync",value:async function _restAsync(e,t,r,i={}){let a,n=this._telemetrySrv.logRequest(r,e,t,{...i.query,...i.body}),o=200;try{return await this._platformSrv.restAsync(e,t,i)}catch(e){throw o=e.status,a=e.response,e}finally{this._telemetrySrv.logRequestEnd(n,o,a)}}},{kind:"method",key:"_updateCustomFieldItemsCache",value:function _updateCustomFieldItemsCache(e,t){let r;_n()(t)?r=t:(r=this._cardsCustomFieldItemsMap.get(e),r=r?S()(r).call(r,(e=>e.idCustomField!==t.idCustomField)):[],r.push(t)),this._cardsCustomFieldItemsMap.set(e,r),this._cardsCustomFieldValuesMap.delete(e)}},{kind:"method",key:"_updateCustomFieldValuesAsync",value:async function _updateCustomFieldValuesAsync(e,t,r={}){let{waitForUpdate:i}=r,a=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);for(let[r,i]of wa()(t)){var n,o;let t=c()(n=a.customFields).call(n,(e=>e.id===r));if(!t)continue;let s=(null===(o=this._cardsCustomFieldItemsMap.get(e.id))||void 0===o?void 0:c()(o).call(o,(e=>e.idCustomField===r)))||{idModel:e.id,idCustomField:r};switch(t.type){case x.pb.Checkbox:s.value=i?{checked:"true"}:"";break;case x.pb.Date:s.value=i?{date:i.toISOString()}:"";break;case x.pb.List:s.idValue=i;break;case x.pb.Number:s.value="number"==typeof i?{number:i.toString()}:"";break;case x.pb.Text:s.value=i?{text:i}:""}this._updateCustomFieldItemsCache(e.id,s)}if(!e.isTempCard)for(let r of Fr()(t))try{var s,l,d,h,u;let t=c()(s=this._cardsCustomFieldItemsMap.get(e.id)).call(s,(e=>e.idCustomField===r));t=await this._trelloIntegrationSrv.restAsync(x.L.Put,`/card/${e.id}/customField/${r}/item`,"Update Trello card custom field",{idValue:null!==(l=null===(d=t)||void 0===d?void 0:d.idValue)&&void 0!==l?l:"",value:null!==(h=null===(u=t)||void 0===u?void 0:u.value)&&void 0!==h?h:""},i?3:9),this._updateCustomFieldItemsCache(e.id,t)}catch(e){if(this._telemetrySrv.logError("Trello update custom field error",e,{class:this.constructor.name,method:this._updateCustomFieldValuesAsync.name}),i)throw e;this._$log.error("Trello update custom field error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}}},{kind:"method",key:"_updateCustomFieldCardAsync",value:async function _updateCustomFieldCardAsync(e,t,r){try{var i;let a=null===(i=this._cardsCustomFieldItemsMap.get(t.id))||void 0===i?void 0:c()(i).call(i,(t=>t.id===e));if(!a)return;this._addCardToIgnored(e);let{customFieldCardUpdated:o,customFieldCard:s,customFieldUpdated:l,parentCardUpdated:d}=t.updateTrelloCustomFieldCard(e,r);o&&this._calendarCardsMap.has(e)&&this._calendarCardsMap.update(s),l&&await this._updateCustomFieldValuesAsync(t,{[a.idCustomField]:s.isAllDay?Object(n.W)(r.date):r.date}),d&&await this.updateCalendarCardPropertiesAsync(t,{trelloCustomFieldCards:t.trelloCustomFieldCards,customFieldCardsData:t.customFieldCardsData})}catch(e){this._$log.error("Trello update custom field card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello update custom field card error",e,{class:this.constructor.name,method:this._updateCustomFieldCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e)}}},{kind:"method",key:"_deleteCustomFieldCardAsync",value:async function _deleteCustomFieldCardAsync(e,t){try{var r;let i=null===(r=this._cardsCustomFieldItemsMap.get(t.id))||void 0===r?void 0:c()(r).call(r,(t=>t.id===e));if(!i)return;this._addCardToIgnored(e),t.deleteTrelloCustomFieldCard(e),this._calendarCardsMap.delete(e,{delayed:!0}),await this._updateCustomFieldValuesAsync(t,{[i.idCustomField]:""}),await this.updateCalendarCardPropertiesAsync(t,{trelloCustomFieldCards:t.trelloCustomFieldCards,customFieldCardsData:t.customFieldCardsData})}catch(e){this._$log.error("Trello delete custom field card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello delete custom field card error",e,{class:this.constructor.name,method:this._deleteCustomFieldCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.DELETE_TRELLO_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e)}}},{kind:"method",key:"_updateChecklistsCache",value:function _updateChecklistsCache(e,t){let r;_n()(t)?r=t:(r=this._cardsChecklistsMap.get(e),r=r?S()(r).call(r,(e=>e.id!==t.id)):[],r.push(t)),this._cardsChecklistsMap.set(e,r)}},{kind:"method",key:"_updateCheckItemCardAsync",value:async function _updateCheckItemCardAsync(e,t,r){try{var i;let a=null===(i=this._cardsChecklistsMap.get(t.id))||void 0===i?void 0:c()(i).call(i,(t=>{var r;return xe()(r=t.checkItems).call(r,(t=>t.id===e))}));if(!a)return;this._addCardToIgnored(e),await this.updateCalendarCardCheckItemAsync(t,a.id,e,r)}catch(e){this._$log.error("Trello update check item card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello update check item card error",e,{class:this.constructor.name,method:this._updateCheckItemCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e)}}},{kind:"method",key:"_deleteCheckItemCardAsync",value:async function _deleteCheckItemCardAsync(e,t){try{this._addCardToIgnored(e),t.deleteTrelloCheckItemCard(e),this._calendarCardsMap.delete(e,{delayed:!0}),await this.updateCalendarCardPropertiesAsync(t,{trelloCheckItemCards:t.trelloCheckItemCards,checkItemCardsData:t.checkItemCardsData})}catch(e){this._$log.error("Trello delete check item card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello delete check item card error",e,{class:this.constructor.name,method:this._deleteCheckItemCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e)}}},{kind:"method",key:"_addChecklistToIgnored",value:function _addChecklistToIgnored(e){let t=this._ignoredChecklistsCountMap.get(e)||0;this._ignoredChecklistsCountMap.set(e,t+1)}},{kind:"method",key:"_removeChecklistFromIgnored",value:function _removeChecklistFromIgnored(e){let t=this._ignoredChecklistsCountMap.get(e);t&&(1===t?this._ignoredChecklistsCountMap.delete(e):this._ignoredChecklistsCountMap.set(e,t-1))}},{kind:"method",key:"_checkChecklistIgnored",value:function _checkChecklistIgnored(e){return(this._ignoredChecklistsCountMap.get(e)||0)>0}},{kind:"method",key:"_processChecklistUpdateBufferAsync",value:async function _processChecklistUpdateBufferAsync(e,t,r){if(r.processUpdatePromise)return r.processUpdatePromise;try{for(e!==U.k&&await Object(n.x)(200);r.changes;){var i;let n=r.changes;r.changes=null;let y=null===(i=this._cardsChecklistsMap.get(e))||void 0===i?void 0:c()(i).call(i,(e=>e.id===t));if(!y)return;let v,_,g=this._calendarCardsMap.get(e),C=this._trelloIntegrationSrv.getTrelloBoardById(g.boardId);for(let e in n)switch(e){case"name":y.name!==n.name&&(y.name=n.name,v={...v,name:y.name});break;case"position":y.pos!==n.position&&(y.pos=n.position,v={...v,pos:y.pos});break;case"checkItems":for(let[e,r]of wa()(n.checkItems)){var a;let i,n,u=c()(a=y.checkItems).call(a,(t=>t.id===e));if(u){for(let e in r)switch(e){case"name":u.name!==r.name&&(u.name=r.name,i={...i,name:u.name},n={...n,name:r.name});break;case"isCompleted":"complete"===u.state!==r.isCompleted&&(u.state=r.isCompleted?"complete":"incomplete",i={...i,state:u.state},n={...n,isCompleted:r.isCompleted});break;case"checklistId":t!==r.checklistId&&(i={...i,idChecklist:r.checklistId});break;case"position":u.pos!==r.position&&(u.pos=r.position,i={...i,pos:u.pos},n={...n,position:r.position});break;case"memberIds":u.idMember!==r.memberIds[0]&&(u.idMember=r.memberIds[0]||"",i={...i,idMember:u.idMember},n={...n,memberIds:r.memberIds});break;case"isAllDay":case"start":case"end":case"defaultSortOrder":case"membersSortOrder":case"calendarsSortOrder":case"listsSortOrder":case"labelsSortOrder":n={...n,[e]:r[e]}}if(n){var o,s;let e,t=this._calendarCardsMap.get(U.k);(null==t?void 0:t.cardType)===x.h.TrelloCheckItem&&(e=t,this._calendarCardsMap.delete(e,{delayed:!0}));let r,a=ze()(o=C.premiumFeatures).call(o,x.nb.AdvancedChecklists),c=!1,p=!1,m=!1;if(xe()(s=g.trelloCheckItemCards).call(s,(e=>e.id===u.id))?({checkItemCardUpdated:p,checkItemCard:r,parentCardUpdated:m}=g.updateTrelloCheckItemCard(u.id,n,C,{syncWithTrello:a})):(r=g.addTrelloCheckItemCard({id:u.id,name:u.name,isCompleted:"complete"===u.state,...n},C,{syncWithTrello:a}),c=!0,m=!0),r){if(a){var l;if(void 0!==r.realDue){var d;let e=(null===(d=r.realDue)||void 0===d?void 0:d.toISOString())||"";u.due!==e&&(u.due=e,i={...i,due:u.due})}if(void 0===(null===(l=i)||void 0===l?void 0:l.idMember)){var h;let e=S()(h=re()(r.memberIds)).call(h,(e=>e!==U.k))[0]||"";u.idMember!==e&&(u.idMember=e,i={...i,idMember:u.idMember})}}r.ignoreFilters=!!e&&e.ignoreFilters,c?this._calendarCardsMap.add(r,{delayed:!0}):p&&this._calendarCardsMap.update(r)}m&&await this.updateCalendarCardPropertiesAsync(g,{trelloCheckItemCards:g.trelloCheckItemCards,checkItemCardsData:g.checkItemCardsData})}i&&(_={..._,[e]:i})}}}if(isIncrementalTempId(t))return;if(v){y=await this._trelloIntegrationSrv.restAsync(x.L.Put,`/checklists/${t}`,"Update Trello checklist",v)}if(_)for(let[t,r]of wa()(_)){let i=await this._trelloIntegrationSrv.restAsync(x.L.Put,`/cards/${e}/checkItem/${t}`,"Update Trello check item",r);if(r.idChecklist){var u,p,m;y.checkItems=S()(u=y.checkItems).call(u,(e=>e.id!==t));let a=c()(p=this._cardsChecklistsMap.get(e)).call(p,(e=>e.id===r.idChecklist));a&&!xe()(m=a.checkItems).call(m,(e=>e.id===t))&&(a.checkItems.push(i),this._updateChecklistsCache(e,a))}else{var f;y.checkItems=[...S()(f=y.checkItems).call(f,(e=>e.id!==t)),i]}}(v||_)&&this._updateChecklistsCache(e,y)}}finally{this._checklistsUpdateBuffers.delete(t)}}},{kind:"method",key:"_updateTimeRecordCardAsync",value:async function _updateTimeRecordCardAsync(e,t,r){try{this._addCardToIgnored(e),await this.updateCalendarCardTimeRecordAsync(t,e,r)}catch(e){this._$log.error("Trello update time entry card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello update time entry card error",e,{class:this.constructor.name,method:this._updateTimeRecordCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e)}}},{kind:"method",key:"_deleteTimeRecordCardAsync",value:async function _deleteTimeRecordCardAsync(e,t){try{this._addCardToIgnored(e),t.deleteTrelloTimeRecordCard(e),this._calendarCardsMap.delete(e,{delayed:!0}),await this.updateCalendarCardPropertiesAsync(t,{trelloTimeRecordCards:t.trelloTimeRecordCards,timeRecordCardsData:t.timeRecordCardsData})}catch(e){this._$log.error("Trello delete time entry card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello delete time entry card error",e,{class:this.constructor.name,method:this._deleteTimeRecordCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}finally{this._removeCardFromIgnored(e)}}},{kind:"method",key:"_processTimeRecordUpdateBufferAsync",value:async function _processTimeRecordUpdateBufferAsync(e,t,r){if(r.processUpdatePromise)return r.processUpdatePromise;try{for(e!==U.k&&await Object(n.x)(200);r.changes;){let a=r.changes;r.changes=null;let n,o=this._calendarCardsMap.get(e),s=this._trelloIntegrationSrv.getTrelloBoardById(o.boardId);for(let e in a)switch(e){case"isDuration":case"from":case"to":case"durationMinutes":case"memberId":case"defaultSortOrder":case"membersSortOrder":case"calendarsSortOrder":case"listsSortOrder":case"labelsSortOrder":n={...n,[e]:a[e]}}if(n){var i;let e,r,a=this._calendarCardsMap.get(U.k);(null==a?void 0:a.cardType)===x.h.TrelloTimeRecord&&(e=a,this._calendarCardsMap.delete(a,{delayed:!0}));let l=!1,d=!1,c=!1;xe()(i=o.trelloTimeRecordCards).call(i,(e=>e.id===t))?({timeRecordCardUpdated:d,timeRecordCard:r,parentCardUpdated:c}=o.updateTrelloTimeRecordCard(t,n,s)):(r=o.addTrelloTimeRecordCard({id:t,...n},s),l=!0,c=!0),r&&(r.ignoreFilters=!!e&&e.ignoreFilters,l?this._calendarCardsMap.add(r,{delayed:!0}):d&&this._calendarCardsMap.update(r)),c&&await this.updateCalendarCardPropertiesAsync(o,{trelloTimeRecordCards:o.trelloTimeRecordCards,timeRecordCardsData:o.timeRecordCardsData})}}}finally{this._timeRecordsUpdateBuffers.delete(t)}}},{kind:"method",key:"_updateAttachmentsCache",value:function _updateAttachmentsCache(e,t){let r;_n()(t)?r=t:(r=this._cardsAttachmentsMap.get(e),r=r?S()(r).call(r,(e=>e.id!==t.id)):[],r.push(t)),this._cardsAttachmentsMap.set(e,r)}},{kind:"method",key:"_updateCommentsCache",value:function _updateCommentsCache(e,t){let r;_n()(t)?r=t:(r=this._cardsCommentsMap.get(e),r=r?S()(r).call(r,(e=>e.id!==t.id)):[],r.push(t)),this._cardsCommentsMap.set(e,r)}},{kind:"method",key:"_isCalendarCardCommentCanBeUpdated",value:function _isCalendarCardCommentCanBeUpdated(e,t){return t.idMemberCreator===this._currentMemberId}},{kind:"method",key:"_isCalendarCardCommentCanBeDeleted",value:function _isCalendarCardCommentCanBeDeleted(e,t){if(this._isCalendarCardCommentCanBeUpdated(e,t))return!0;let r=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);return!!r&&(r.memberships.get(this._currentMemberId)===x.rb.Admin&&r.memberships.get(t.idMemberCreator)!==x.rb.Admin)}},{kind:"method",key:"_addCommentToIgnored",value:function _addCommentToIgnored(e){let t=this._ignoredCommentsCountMap.get(e)||0;this._ignoredCommentsCountMap.set(e,t+1)}},{kind:"method",key:"_removeCommentFromIgnored",value:function _removeCommentFromIgnored(e){let t=this._ignoredCommentsCountMap.get(e);t&&(1===t?this._ignoredCommentsCountMap.delete(e):this._ignoredCommentsCountMap.set(e,t-1))}},{kind:"method",key:"_checkCommentIgnored",value:function _checkCommentIgnored(e){return(this._ignoredCommentsCountMap.get(e)||0)>0}},{kind:"method",key:"_linkCalendarCardsAsync",value:function _linkCalendarCardsAsync(e,t,r){var i;if(t===U.k)return;let a=this._calendarCardsMap.get(e);return!a||a.isReadOnly||xe()(i=a.links).call(i,(e=>e.cardId===t&&e.type===r))?void 0:this.updateCalendarCardPropertiesAsync(a,{links:[...a.links,{cardId:t,type:r}]})}},{kind:"method",key:"_relinkCalendarCardsAsync",value:function _relinkCalendarCardsAsync(e,t,r,i){if(t===U.k)return;let a=this._calendarCardsMap.get(e);if(!a)return;if(a.isReadOnly)return;let n=[...a.links],o=c()(n).call(n,(e=>e.cardId===t&&e.type===r));return o?(o.type=i,this.updateCalendarCardPropertiesAsync(a,{links:n})):void 0}},{kind:"method",key:"_unlinkCalendarCardsAsync",value:function _unlinkCalendarCardsAsync(e,t,r){var i,a;if(t===U.k)return;let n=this._calendarCardsMap.get(e);return n&&!n.isReadOnly&&xe()(i=n.links).call(i,(e=>e.cardId===t&&e.type===r))?this.updateCalendarCardPropertiesAsync(n,{links:S()(a=n.links).call(a,(e=>e.cardId!==t||e.type!==r))}):void 0}},{kind:"method",key:"_updateByTrelloCardDeltaAsync",value:async function _updateByTrelloCardDeltaAsync(e){var t,r;if(this._creatingCalendarCardPromise)try{await this._creatingCalendarCardPromise}catch(e){}if(this._checkChangeIgnored(e))return;if(this._checkCardIgnored(e.id))return;let i=this._calendarCardsMap.get(e.id);if(i&&this._removeChangeFromIgnored(i.lastChangeId),this._cardsUpdateBuffers.has(e.id))return;if(e.idBoard&&!this._loadedBoardIdsMap.has(e.idBoard))return void(i&&this._calendarCardsMap.delete(i,{delayed:!0}));let a=!1;if(i){let t=this._trelloIntegrationSrv.getTrelloBoardById(i.boardId);a=i.updateByTrelloCardDelta(e,t)}else{if(await Object(n.x)(1e3),this._calendarCardsMap.has(e.id))return;if(i=await this.getCalendarCardByIdAsync(e.id,{cardType:x.h.TrelloCard}),!i)return;if(this._calendarCardsMap.has(i.id))return;a=!0}let o,s=this._trelloIntegrationSrv.getTrelloBoardById(i.boardId);if(e.customFieldItems)o=e.customFieldItems;else if(o=this._cardsCustomFieldItemsMap.get(e.id),e.idBoard)for(let e of i.trelloCustomFieldCards)e.boardId!==i.boardId&&(e.boardId=i.boardId,e.listId=i.listId,this._calendarCardsMap.has(e.id)&&this._calendarCardsMap.update(e,{delayed:!0}),a=!0);if(o){let t=c()(o).call(o,(e=>e.idCustomField===s.cardDataCustomFieldId));t&&i.updateByTrelloCustomFieldDelta(t,s)&&(a=!0);for(let e of o){var l,d;if(e.idCustomField===s.cardDataCustomFieldId)continue;let t=c()(l=s.customFields).call(l,(t=>t.id===e.idCustomField));if((null==t?void 0:t.type)===x.pb.Date)if(xe()(d=i.trelloCustomFieldCards).call(d,(t=>t.id===e.id))){let{customFieldCardUpdated:t,customFieldCard:r}=i.updateTrelloCustomFieldCardFromTrello(e.id,e);t&&(r.hasDates?this._calendarCardsMap.update(r,{delayed:!0}):(i.deleteTrelloCustomFieldCard(e.id),this._calendarCardsMap.delete(e.id,{delayed:!0})),a=!0)}else{let t=i.addTrelloCustomFieldCardFromTrello(e);t&&(this._calendarCardsMap.add(t,{delayed:!0}),a=!0)}}this._updateCustomFieldItemsCache(e.id,o)}let h=R()(t=i.trelloCheckItemCards).call(t,(e=>e.id)),u=this._cardsChecklistsMap.get(i.id);if(u){var p;let e=ze()(p=s.premiumFeatures).call(p,x.nb.AdvancedChecklists);for(let t of u)for(let r of t.checkItems){var m;if(xe()(m=i.trelloCheckItemCards).call(m,(e=>e.id===r.id))){let{checkItemCardUpdated:t,checkItemCard:a}=i.updateTrelloCheckItemCardFromTrello(r.id,r,s,{syncWithTrello:e});t&&this._calendarCardsMap.update(a,{delayed:!0})}else{let t=i.addTrelloCheckItemCardFromTrello(r,s,{syncWithTrello:e});this._calendarCardsMap.add(t,{delayed:!0}),a=!0}}}for(let e of h){var f;xe()(f=i.trelloCheckItemCards).call(f,(t=>t.id===e))||(i.deleteTrelloCheckItemCard(e),this._calendarCardsMap.delete(e,{delayed:!0}))}let y=R()(r=i.trelloTimeRecordCards).call(r,(e=>e.id)),v=i.customData.timeRecordCardsData;if(v)for(let e of v){var _;if(xe()(_=i.trelloTimeRecordCards).call(_,(t=>t.id===e.id))){let{timeRecordCardUpdated:t,timeRecordCard:r}=i.updateTrelloTimeRecordCard(e.id,e,s);t&&this._calendarCardsMap.update(r,{delayed:!0})}else{let t=i.addTrelloTimeRecordCard(e,s);t&&(this._calendarCardsMap.add(t,{delayed:!0}),a=!0)}}for(let e of y){var g;xe()(g=i.trelloTimeRecordCards).call(g,(t=>t.id===e))||(i.deleteTrelloTimeRecordCard(e),this._calendarCardsMap.delete(e,{delayed:!0}))}e.attachments&&(0===e.attachments.length?this._cardsAttachmentsMap.delete(e.id):this._updateAttachmentsCache(e.id,e.attachments),a=!0),a&&this._calendarCardsMap.update(i,{hasExternalChanges:!0,delayed:!0})}},{kind:"method",key:"_deleteByTrelloCardDelta",value:function _deleteByTrelloCardDelta(e){this._calendarCardsMap.get(e.id)&&this._calendarCardsMap.delete(e.id,{delayed:!0})}},{kind:"method",key:"_updateByTrelloListDelta",value:function _updateByTrelloListDelta(e){if(e.closed)for(let r of Ta()(t=this._calendarCardsMap).call(t)){var t;r.isTempCard||(r.listId!==e.id||r.isArchived||this._calendarCardsMap.delete(r,{delayed:!0}))}}},{kind:"method",key:"_updateByTrelloCustomFieldItemDelta",value:function _updateByTrelloCustomFieldItemDelta(e){var t;if(this._checkCardIgnored(e.id))return;let r=this._trelloIntegrationSrv.getTrelloCustomFieldById(e.idCustomField);if(!r)return;let i=this._calendarCardsMap.get(e.idModel);if(!i)return;let a=null===(t=this._cardsCustomFieldItemsMap.get(i.id))||void 0===t?void 0:c()(t).call(t,(t=>t.id===e.id));if(!!Object(n.Cb)(toEquableCustomFieldItem(a),toEquableCustomFieldItem({...a,...e})))return;this._updateCustomFieldItemsCache(i.id,e);let o=this._trelloIntegrationSrv.getTrelloBoardById(i.boardId);if(e.idCustomField!==o.cardDataCustomFieldId){var s;if(r.type===x.pb.Date)if(xe()(s=i.trelloCustomFieldCards).call(s,(t=>t.id===e.id))){let{customFieldCardUpdated:t,customFieldCard:r}=i.updateTrelloCustomFieldCardFromTrello(e.id,e);t&&(r.hasDates?this._calendarCardsMap.update(r,{delayed:!0}):(i.deleteTrelloCustomFieldCard(e.id),this._calendarCardsMap.delete(e.id,{delayed:!0})))}else{let t=i.addTrelloCustomFieldCardFromTrello(e);t&&this._calendarCardsMap.add(t,{delayed:!0})}this._calendarCardsMap.update(i,{delayed:!0})}else{var l,d;let t=i.updateByTrelloCustomFieldDelta(e,o),r=R()(l=i.trelloCheckItemCards).call(l,(e=>e.id)),a=this._cardsChecklistsMap.get(i.id);if(a){var h;let e=ze()(h=o.premiumFeatures).call(h,x.nb.AdvancedChecklists);for(let r of a)for(let a of r.checkItems){var u;if(xe()(u=i.trelloCheckItemCards).call(u,(e=>e.id===a.id))){let{checkItemCardUpdated:t,checkItemCard:r}=i.updateTrelloCheckItemCardFromTrello(a.id,a,o,{syncWithTrello:e});t&&this._calendarCardsMap.update(r,{delayed:!0})}else{let r=i.addTrelloCheckItemCardFromTrello(a,o,{syncWithTrello:e});this._calendarCardsMap.add(r,{delayed:!0}),t=!0}}}for(let e of r){var p;xe()(p=i.trelloCheckItemCards).call(p,(t=>t.id===e))||(i.deleteTrelloCheckItemCard(e),this._calendarCardsMap.delete(e,{delayed:!0}))}let n=R()(d=i.trelloTimeRecordCards).call(d,(e=>e.id)),s=i.customData.timeRecordCardsData;if(s)for(let e of s){var m;if(xe()(m=i.trelloTimeRecordCards).call(m,(t=>t.id===e.id))){let{timeRecordCardUpdated:t,timeRecordCard:r}=i.updateTrelloTimeRecordCard(e.id,e,o);t&&this._calendarCardsMap.update(r,{delayed:!0})}else{let r=i.addTrelloTimeRecordCard(e,o);r&&(this._calendarCardsMap.add(r,{delayed:!0}),t=!0)}}for(let e of n){var f;xe()(f=i.trelloTimeRecordCards).call(f,(t=>t.id===e))||(i.deleteTrelloTimeRecordCard(e),this._calendarCardsMap.delete(e,{delayed:!0}))}t&&this._calendarCardsMap.update(i,{delayed:!0})}}},{kind:"method",key:"_deleteByTrelloCustomFieldDelta",value:function _deleteByTrelloCustomFieldDelta(e){var t,r;for(let[t,r]of this._cardsCustomFieldItemsMap){let i=this._calendarCardsMap.get(t);i&&this._updateCustomFieldItemsCache(i.id,S()(r).call(r,(t=>t.idCustomField!==e.id)))}let i=S()(t=Ta()(r=this._calendarCardsMap).call(r)).call(t,(t=>t.trelloCustomFieldId===e.id));for(let e of i){let t=this._calendarCardsMap.get(e.parentId);t&&(t.deleteTrelloCustomFieldCard(e.id),this._calendarCardsMap.update(t,{delayed:!0})),this._calendarCardsMap.delete(e,{delayed:!0})}}},{kind:"method",key:"_updateByTrelloChecklistDelta",value:function _updateByTrelloChecklistDelta(e){var t,r,i;if(this._checkCardIgnored(e.idCard))return;if(this._checkChecklistIgnored(e.id))return;if(this._checklistsUpdateBuffers.has(e.idCard))return;let a=this._calendarCardsMap.get(e.idCard);if(!a)return;let o=null===(t=this._cardsChecklistsMap.get(a.id))||void 0===t?void 0:c()(t).call(t,(t=>t.id===e.id));if(!!Object(n.Cb)(toEquableChecklist(o),toEquableChecklist({...o,...e})))return;let s={...o,...e};this._updateChecklistsCache(a.id,s);let l=null==o?void 0:R()(r=o.checkItems).call(r,(e=>e.id)),d=this._trelloIntegrationSrv.getTrelloBoardById(a.boardId),h=ze()(i=d.premiumFeatures).call(i,x.nb.AdvancedChecklists);for(let e of s.checkItems){var u;if(xe()(u=a.trelloCheckItemCards).call(u,(t=>t.id===e.id))){let{checkItemCardUpdated:t,checkItemCard:r}=a.updateTrelloCheckItemCardFromTrello(e.id,e,d,{syncWithTrello:h});t&&this._calendarCardsMap.update(r,{delayed:!0})}else{let t=a.addTrelloCheckItemCardFromTrello(e,d,{syncWithTrello:h});this._calendarCardsMap.add(t,{delayed:!0})}}if(l)for(let e of l){var p;xe()(p=s.checkItems).call(p,(t=>t.id===e))||(a.deleteTrelloCheckItemCard(e),this._calendarCardsMap.delete(e,{delayed:!0}))}this._calendarCardsMap.update(a,{delayed:!0})}},{kind:"method",key:"_deleteByTrelloChecklistDelta",value:function _deleteByTrelloChecklistDelta(e){var t;let r,i;for(let[t,a]of this._cardsChecklistsMap)if(i=c()(a).call(a,(t=>t.id===e.id)),i){r=this._calendarCardsMap.get(t);break}if(r&&!this._checkCardIgnored(r.id)&&!this._checkChecklistIgnored(i.id)){this._updateChecklistsCache(r.id,S()(t=this._cardsChecklistsMap.get(r.id)).call(t,(e=>e.id!==i.id)));for(let e of i.checkItems)r.deleteTrelloCheckItemCard(e.id),this._calendarCardsMap.delete(e.id,{delayed:!0});this._calendarCardsMap.update(r,{delayed:!0})}}},{kind:"method",key:"_updateByTrelloActionDelta",value:function _updateByTrelloActionDelta(e){if(!e.data.card)return;let t=this._calendarCardsMap.get(e.data.card.id);if(!t)return;if(this._checkCardIgnored(t.id))return;let r=this._cardsCommentsMap.get(t.id);if(!r)return;let i=c()(r).call(r,(t=>t.id===e.id));if(!ze()(bn).call(bn,e.type)&&!i)return;if(this._checkCommentIgnored(e.id))return;if(!!Object(n.Cb)(toEquableComment(i),toEquableComment({...i,...e})))return;let a={...i,...e};this._updateCommentsCache(t.id,a),this._calendarCardsMap.update(t,{delayed:!0})}},{kind:"method",key:"_deleteByTrelloActionDelta",value:function _deleteByTrelloActionDelta(e){let t,r;for(let[i,a]of this._cardsCommentsMap)if(r=c()(a).call(a,(t=>t.id===e.id)),r){t=this._calendarCardsMap.get(i);break}if(!t)return;if(this._checkCardIgnored(t.id))return;let i=this._cardsCommentsMap.get(t.id);i&&(this._checkCommentIgnored(r.id)||(this._updateCommentsCache(t.id,S()(i).call(i,(e=>e.id!==r.id))),this._calendarCardsMap.update(t,{delayed:!0})))}},{kind:"method",key:"_getCancellationToken",value:function _getCancellationToken(e){this._cancellationTokens||(this._cancellationTokens={});let t=Ea()(),r={_timestamp:t,isCanceled:()=>this._cancellationTokens[e]._timestamp!==t};return this._cancellationTokens[e]=r,r}}]}}));function isIncrementalTempId(e){return ce()(e).call(e,U.k)}let An=1e4;function getIncrementalTempId(){return`${U.k}_${An++}`}function toEquableCustomFieldItem(e){if(e)return{id:e.id,idValue:e.idValue||null,value:e.value||null}}function toEquableChecklist(e){var t,r,i;if(e)return{id:e.id,name:e.name,pos:e.pos,checkItems:We()(t=R()(r=S()(i=e.checkItems).call(i,(e=>!isIncrementalTempId(e.id)))).call(r,(e=>({id:e.id,name:e.name,due:e.due,idMember:e.idMember,pos:e.pos,state:e.state})))).call(t,((e,t)=>e.pos-t.pos))}}function toEquableComment(e){if(e)return{id:e.id,idMemberCreator:e.idMemberCreator,date:e.date,data:{text:e.data.text,dateLastEdited:e.data.dateLastEdited}}}var In=r(221);function AllCardsReportParametersController_getDecoratorsApi(){AllCardsReportParametersController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AllCardsReportParametersController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AllCardsReportParametersController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AllCardsReportParametersController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AllCardsReportParametersController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AllCardsReportParametersController_createElementDescriptor(e){var t,r=AllCardsReportParametersController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AllCardsReportParametersController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AllCardsReportParametersController_hasDecorators(e){return e.decorators&&e.decorators.length}function AllCardsReportParametersController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AllCardsReportParametersController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AllCardsReportParametersController_toPropertyKey(e){var t=function AllCardsReportParametersController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Rn=function AllCardsReportParametersController_decorate(e,t,r,i){var a,n=AllCardsReportParametersController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AllCardsReportParametersController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AllCardsReportParametersController_isDataDescriptor(a.descriptor)||AllCardsReportParametersController_isDataDescriptor(i.descriptor)){if(AllCardsReportParametersController_hasDecorators(a)||AllCardsReportParametersController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AllCardsReportParametersController_hasDecorators(a)){if(AllCardsReportParametersController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AllCardsReportParametersController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AllCardsReportParametersController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope"])],(function(e){return{F:class AllCardsReportParametersController{constructor(t){e(this),this._$scope=t}},d:[{kind:"field",key:"isDisabled",value:void 0},{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"allCardsReportParametersCtrl"}},{kind:"get",key:"startDate",value:function startDate(){return this._startDate}},{kind:"set",key:"startDate",value:function startDate(e){this._startDate=e}},{kind:"get",key:"endDate",value:function endDate(){return this._endDate}},{kind:"set",key:"endDate",value:function endDate(e){this._endDate=e,this._parametersChanged()}},{kind:"set",key:"parameters",value:function parameters(e){this._$scope.$evalAsync((()=>{this._startDate=e.startDate,this._endDate=e.endDate}))}},{kind:"set",key:"parametersChangedCallback",value:function parametersChangedCallback(e){this._parametersChangedCallback=e}},{kind:"method",key:"_parametersChanged",value:function _parametersChanged(){this._parametersChangedCallback({parameters:{startDate:this.startDate,endDate:this.endDate}})}}]}}));function CalendarIconController_getDecoratorsApi(){CalendarIconController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CalendarIconController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CalendarIconController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CalendarIconController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CalendarIconController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CalendarIconController_createElementDescriptor(e){var t,r=CalendarIconController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CalendarIconController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CalendarIconController_hasDecorators(e){return e.decorators&&e.decorators.length}function CalendarIconController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CalendarIconController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CalendarIconController_toPropertyKey(e){var t=function CalendarIconController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let On=function CalendarIconController_decorate(e,t,r,i){var a,n=CalendarIconController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CalendarIconController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CalendarIconController_isDataDescriptor(a.descriptor)||CalendarIconController_isDataDescriptor(i.descriptor)){if(CalendarIconController_hasDecorators(a)||CalendarIconController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CalendarIconController_hasDecorators(a)){if(CalendarIconController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CalendarIconController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CalendarIconController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","googleIntegrationSrv","iCalIntegrationSrv","trelloIntegrationSrv"])],(function(e){return{F:class CalendarIconController{constructor(t,r,i,a){e(this),this._$scope=t,this._googleIntegrationSrv=r,this._iCalIntegrationSrv=i,this._trelloIntegrationSrv=a,this._hideCalendarImage=!1,this._iconSize="small",this._$scope.$on("$destroy",(()=>{switch(this._calendarType){case x.d.TrelloBoard:this._onTrelloBoardUpdated&&(this._trelloIntegrationSrv.removeTrelloBoardEventListener("updated",this._onTrelloBoardUpdated),this._onTrelloBoardUpdated=null);break;case x.d.GoogleCalendar:this._onGoogleCalendarUpdated&&(this._googleIntegrationSrv.removeGoogleCalendarEventListener("updated",this._onGoogleCalendarUpdated),this._onGoogleCalendarUpdated=null);break;case x.d.ICalCalendar:this._onICalCalendarUpdated&&(this._iCalIntegrationSrv.removeICalCalendarEventListener("updated",this._onICalCalendarUpdated),this._onICalCalendarUpdated=null)}}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"calendarIconCtrl"}},{kind:"get",key:"shouldDisplayCalendarImage",value:function shouldDisplayCalendarImage(){return this.calendarImageUrl&&!this._hideCalendarImage}},{kind:"get",key:"iconSize",value:function iconSize(){return this._iconSize}},{kind:"set",key:"calendarId",value:function calendarId(e){this._calendarId=e,this._loadCalendar()}},{kind:"get",key:"calendarType",value:function calendarType(){return this._calendarType}},{kind:"set",key:"calendarType",value:function calendarType(e){this._calendarType=e,this._loadCalendar()}},{kind:"get",key:"calendarName",value:function calendarName(){return this._calendarName}},{kind:"get",key:"calendarColor",value:function calendarColor(){return this._calendarColor}},{kind:"get",key:"calendarImageUrl",value:function calendarImageUrl(){return this._calendarImageUrl}},{kind:"get",key:"iCalCalendarType",value:function iCalCalendarType(){return this._iCalCalendarType}},{kind:"method",key:"_loadCalendar",value:function _loadCalendar(){if(this._calendarId&&this._calendarType)switch(this._calendarType){case x.d.TrelloBoard:let e=this._trelloIntegrationSrv.getTrelloBoardById(this._calendarId);e&&(this._calendarName=e.name,this._calendarColor=e.color,this._calendarImageUrl=e.imageUrls[x.kb.Small]),this._onTrelloBoardUpdated||(this._onTrelloBoardUpdated=e=>{e.id===this._calendarId&&(this._loadCalendar(),this._$scope.$broadcast("$$rebind::calendar"))},this._trelloIntegrationSrv.addTrelloBoardEventListener("updated",this._onTrelloBoardUpdated));break;case x.d.GoogleCalendar:let t=this._googleIntegrationSrv.getGoogleCalendarById(this._calendarId);t&&(this._calendarName=t.name,this._calendarColor=t.color.base),this._onGoogleCalendarUpdated||(this._onGoogleCalendarUpdated=e=>{e.id===this._calendarId&&(this._loadCalendar(),this._$scope.$broadcast("$$rebind::calendar"))},this._googleIntegrationSrv.addGoogleCalendarEventListener("updated",this._onGoogleCalendarUpdated));break;case x.d.ICalCalendar:let r=this._iCalIntegrationSrv.getICalCalendarById(this._calendarId);r&&(this._calendarName=r.name,this._calendarColor=r.color,this._iCalCalendarType=r.type),this._onICalCalendarUpdated||(this._onICalCalendarUpdated=e=>{e.id===this._calendarId&&(this._loadCalendar(),this._$scope.$broadcast("$$rebind::calendar"))},this._iCalIntegrationSrv.addICalCalendarEventListener("updated",this._onICalCalendarUpdated))}}}]}}));function CardContextMenuController_getDecoratorsApi(){CardContextMenuController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CardContextMenuController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CardContextMenuController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CardContextMenuController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CardContextMenuController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CardContextMenuController_createElementDescriptor(e){var t,r=CardContextMenuController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CardContextMenuController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CardContextMenuController_hasDecorators(e){return e.decorators&&e.decorators.length}function CardContextMenuController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CardContextMenuController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CardContextMenuController_toPropertyKey(e){var t=function CardContextMenuController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Pn={[x.h.TrelloCard]:["priority","labels","members","complete","copyUrl","duplicate","archive","remove","delete"],[x.h.TrelloCustomField]:["labels","members","complete","copyUrl","remove"],[x.h.TrelloCheckItem]:["labels","members","complete","copyUrl","remove","delete"],[x.h.TrelloTimeRecord]:["labels","members","copyUrl","delete"],[x.h.GoogleEvent]:["delete"]};let Ln=function CardContextMenuController_decorate(e,t,r,i){var a,n=CardContextMenuController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CardContextMenuController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CardContextMenuController_isDataDescriptor(a.descriptor)||CardContextMenuController_isDataDescriptor(i.descriptor)){if(CardContextMenuController_hasDecorators(a)||CardContextMenuController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CardContextMenuController_hasDecorators(a)){if(CardContextMenuController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CardContextMenuController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CardContextMenuController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$translate","appCommonSrv","trelloIntegrationSrv"])],(function(e){return{F:class CardContextMenuController{constructor(t,r,i,n){e(this),this._$translate=r,this._appCommonSrv=i,this._trelloIntegrationSrv=n,t.$on(x.n.OpenNestedContextMenuRequested,((e,t)=>{let r,{calendarCard:i,nestedMenu:n,source:o}=t;if(this._source!==o)return;switch(this._source){case"calendar":r=a()(`.k-event[data-uid="${i.uid}"]`);break;case"taskList":let e=a()(`.pw-tasks-list-item__card[data-id="${i.id}"]`);if(e[0]){r=e;break}let t=a()(`.pw-tasks-list-item__check-item[data-id="${i.id}"]`);if(t[0]){r=t;break}return;default:return}let s=new a.a.Event("contextmenu",{target:r}),l=this._getContextMenuScope(`${this.source}-${n}`);l&&(this._cardContextMenu=l.$mdMenu,this.setCardContextMenu(this._cardContextMenu),this.cardContextMenu.open(s,i),l.$once("$pwContextMenuClosed",(()=>{let e=this._getContextMenuScope(`${this.source}-context`);e&&(this._cardContextMenu=e.$mdMenu,this.setCardContextMenu(this._cardContextMenu))})))}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"cardContextMenuCtrl"}},{kind:"get",key:"source",value:function source(){return this._source}},{kind:"set",key:"source",value:function source(e){this._source=e}},{kind:"set",key:"onSetContextMenu",value:function onSetContextMenu(e){this._onSetContextMenu=e}},{kind:"set",key:"onSetPriority",value:function onSetPriority(e){this._onSetPriority=e}},{kind:"set",key:"onToggleLabel",value:function onToggleLabel(e){this._onToggleLabel=e}},{kind:"set",key:"onToggleMember",value:function onToggleMember(e){this._onToggleMember=e}},{kind:"set",key:"onToggleCardIsCompleted",value:function onToggleCardIsCompleted(e){this._onToggleCardIsCompleted=e}},{kind:"set",key:"onCopyCardUrl",value:function onCopyCardUrl(e){this._onCopyCardUrl=e}},{kind:"set",key:"onDuplicateCard",value:function onDuplicateCard(e){this._onDuplicateCard=e}},{kind:"set",key:"onToggleCardIsArchived",value:function onToggleCardIsArchived(e){this._onToggleCardIsArchived=e}},{kind:"set",key:"onRemoveCard",value:function onRemoveCard(e){this._onRemoveCard=e}},{kind:"set",key:"onDeleteCard",value:function onDeleteCard(e){this._onDeleteCard=e}},{kind:"get",key:"cardContextMenu",value:function cardContextMenu(){return this._cardContextMenu}},{kind:"method",key:"setCardContextMenu",value:function setCardContextMenu(e){this._cardContextMenu=e,this._onSetContextMenu({menuController:this._cardContextMenu})}},{kind:"method",key:"isContextMenuItemAvailable",value:function isContextMenuItemAvailable(...e){let t=this.cardContextMenu.pwData;return!!t&&xe()(e).call(e,(e=>{var r;if(!(null===(r=Pn[t.cardType])||void 0===r?void 0:ze()(r).call(r,e)))return!1;switch(e){case"complete":return!t.isReadOnly&&!t.isArchived&&(t.cardType===x.h.TrelloCheckItem||t.hasDates);case"priority":return!t.isReadOnly&&!t.isArchived&&!t.isMilestone&&t.hasDates;case"labels":return!t.isReadOnly&&!t.isArchived&&this.getContextMenuLabels(t).length>0;case"members":return!t.isReadOnly&&!t.isArchived&&this.getContextMenuMembers(t).length>0;case"duplicate":return!t.isReadOnly&&!t.isArchived;case"archive":return!t.isReadOnly;case"remove":return!t.isReadOnly&&!t.isArchived&&t.hasDates;case"delete":return!(t.isReadOnly||t.isArchived&&t.cardType!==x.h.TrelloCard)}return!0}))}},{kind:"get",key:"isMultipleMembersSupported",value:function isMultipleMembersSupported(){return!!this.cardContextMenu.pwData&&Object(G.f)(this.cardContextMenu.pwData)}},{kind:"get",key:"contextMenuPriorities",value:function contextMenuPriorities(){return this._contextMenuPriorities||(this._contextMenuPriorities=[{label:this._$translate.instant("MENU.PRIORITY_HIGH"),value:3},{label:this._$translate.instant("MENU.PRIORITY_MEDIUM"),value:2},{label:this._$translate.instant("MENU.PRIORITY_LOW"),value:1},{label:this._$translate.instant("MENU.PRIORITY_UNSET"),value:0}]),this._contextMenuPriorities}},{kind:"method",key:"getContextMenuLabels",value:function getContextMenuLabels(e){if(!e)return[];if(!this._contextMenuLabels||this._contextMenuLabels.calendarCard!==e){this._contextMenuLabels={calendarCard:e};let a=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);var t,r,i;if(a)this._contextMenuLabels.cardBoardLabels=R()(t=We()(r=S()(i=a.labels).call(i,(e=>e.id!==U.k))).call(r,n.p)).call(t,(e=>({...e,name:e.name||Object(n.i)(e.color)})));else this._contextMenuLabels.cardBoardLabels=[]}return this._contextMenuLabels.cardBoardLabels}},{kind:"method",key:"isContextMenuLabelSelected",value:function isContextMenuLabelSelected(e,t){return!!e&&e.labelIds.has(t.id)}},{kind:"method",key:"getContextMenuMembers",value:function getContextMenuMembers(e){if(!e)return[];if(!this._contextMenuMembers||this._contextMenuMembers.calendarCard!==e){this._contextMenuMembers={calendarCard:e};let i=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);var t,r;if(i)this._contextMenuMembers.cardTrelloMembers=We()(t=S()(r=i.members).call(r,(e=>e.id!==U.k))).call(t,n.r);else this._contextMenuMembers.cardTrelloMembers=[]}return this._contextMenuMembers.cardTrelloMembers}},{kind:"method",key:"isContextMenuMemberSelected",value:function isContextMenuMemberSelected(e,t){return!!e&&e.memberIds.has(t.id)}},{kind:"method",key:"setCardPriority",value:function setCardPriority(e,t){this._onSetPriority({calendarCard:e,priority:t})}},{kind:"method",key:"toggleCardLabel",value:function toggleCardLabel(e,t){this._onToggleLabel({calendarCard:e,label:t})}},{kind:"method",key:"toggleCardMember",value:function toggleCardMember(e,t){this._onToggleMember({calendarCard:e,member:t})}},{kind:"method",key:"toggleCardIsCompleted",value:function toggleCardIsCompleted(e){this._onToggleCardIsCompleted({calendarCard:e})}},{kind:"method",key:"copyCardUrl",value:function copyCardUrl(e){this._onCopyCardUrl({calendarCard:e})}},{kind:"method",key:"duplicateCard",value:function duplicateCard(e){this._onDuplicateCard({calendarCard:e})}},{kind:"method",key:"toggleCardIsArchived",value:function toggleCardIsArchived(e){this._onToggleCardIsArchived({calendarCard:e})}},{kind:"method",key:"removeCard",value:function removeCard(e){this._onRemoveCard({calendarCard:e})}},{kind:"method",key:"deleteCard",value:function deleteCard(e){this._onDeleteCard({calendarCard:e})}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"method",key:"_getContextMenuScope",value:function _getContextMenuScope(e){let t=a()(`md-menu[data-menu='${e}']`);if(0!==t.length)return t.scope()}}]}}));function CardSelectController_getDecoratorsApi(){CardSelectController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CardSelectController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CardSelectController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CardSelectController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CardSelectController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CardSelectController_createElementDescriptor(e){var t,r=CardSelectController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CardSelectController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CardSelectController_hasDecorators(e){return e.decorators&&e.decorators.length}function CardSelectController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CardSelectController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CardSelectController_toPropertyKey(e){var t=function CardSelectController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Mn=function CardSelectController_decorate(e,t,r,i){var a,n=CardSelectController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CardSelectController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CardSelectController_isDataDescriptor(a.descriptor)||CardSelectController_isDataDescriptor(i.descriptor)){if(CardSelectController_hasDecorators(a)||CardSelectController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CardSelectController_hasDecorators(a)){if(CardSelectController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CardSelectController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CardSelectController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","calendarCardsSrv","iCalIntegrationSrv","googleIntegrationSrv","trelloIntegrationSrv"])],(function(e){return{F:class CardSelectController{constructor(t,r,i,a,n){e(this),this._$scope=t,this._calendarCardsSrv=r,this._iCalIntegrationSrv=i,this._googleIntegrationSrv=a,this._trelloIntegrationSrv=n;const loadCardsAsync=async()=>{var e,t;let r=await this._calendarCardsSrv.getCalendarCardsAsync();this._selectableCards=R()(e=We()(t=S()(r).call(r,(e=>this._filter({card:e})))).call(t,((e,t)=>t.lastChangeId-e.lastChangeId))).call(e,(e=>{var t,r;let i,a;switch(e.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:i=x.d.TrelloBoard,a=null===(t=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId))||void 0===t?void 0:t.name;break;case x.h.GoogleEvent:i=x.d.GoogleCalendar,a=null===(r=this._googleIntegrationSrv.getGoogleCalendarById(e.googleCalendarId))||void 0===r?void 0:r.name;break;case x.h.ICalEvent:i=x.d.ICalCalendar,a=this._iCalIntegrationSrv.getICalCalendarById(e.iCalCalendarId)}return{id:e.id,cardType:e.cardType,title:e.title,calendarType:i,calendarName:a}})),this._selectedCard=null};loadCardsAsync(),this._$scope.$on(x.n.CardsReloaded,(()=>loadCardsAsync())),this._$scope.$on(x.n.CardTypeChanged,(()=>loadCardsAsync()))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"cardSelectCtrl"}},{kind:"field",key:"autofocus",value:()=>!1},{kind:"get",key:"calendarCard",value:function calendarCard(){return this._calendarCard}},{kind:"set",key:"calendarCard",value:function calendarCard(e){this._calendarCard=e,this._selectedCard=null}},{kind:"get",key:"onSelect",value:function onSelect(){return this._onSelect}},{kind:"set",key:"onSelect",value:function onSelect(e){this._onSelect=e}},{kind:"set",key:"filter",value:function filter(e){this._filter=e}},{kind:"get",key:"selectableCards",value:function selectableCards(){return this._selectableCards||[]}},{kind:"get",key:"selectedCard",value:function selectedCard(){var e;!this._selectedCard&&this.calendarCard&&(this._selectedCard=c()(e=this.selectableCards).call(e,(e=>e.id===this.calendarCard.id)));return this._selectedCard}},{kind:"set",key:"selectedCard",value:function selectedCard(e){var t;this._selectedCard=e,this._calendarCard=e?this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id):null,null===(t=this.onSelect)||void 0===t||t.call(this,{selectedCard:this._calendarCard})}},{kind:"get",key:"searchCard",value:function searchCard(){var e;return this._searchCard||""===this._searchCard?this._searchCard:null===(e=this._calendarCard)||void 0===e?void 0:e.title}},{kind:"set",key:"searchCard",value:function searchCard(e){e||(this.selectedCard=null),this._searchCard=e}},{kind:"method",key:"onKeydown",value:function onKeydown(e){e.keyCode!==x.t.Escape&&a()(".pw-js-card-select-search-input").trigger("focus")}}]}}));function CardTooltipController_getDecoratorsApi(){CardTooltipController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CardTooltipController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CardTooltipController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CardTooltipController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CardTooltipController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CardTooltipController_createElementDescriptor(e){var t,r=CardTooltipController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CardTooltipController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CardTooltipController_hasDecorators(e){return e.decorators&&e.decorators.length}function CardTooltipController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CardTooltipController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CardTooltipController_toPropertyKey(e){var t=function CardTooltipController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Nn=function CardTooltipController_decorate(e,t,r,i){var a,n=CardTooltipController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CardTooltipController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CardTooltipController_isDataDescriptor(a.descriptor)||CardTooltipController_isDataDescriptor(i.descriptor)){if(CardTooltipController_hasDecorators(a)||CardTooltipController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CardTooltipController_hasDecorators(a)){if(CardTooltipController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CardTooltipController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CardTooltipController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$translate","appCommonSrv","calendarCardsSrv","googleIntegrationSrv","iCalIntegrationSrv","settingsSrv","trelloIntegrationSrv","calendarCard"])],(function(e){return{F:class CardTooltipController{constructor(t,r,i,a,n,o,s,l){var d;switch(e(this),this._$translate=t,this._appCommonSrv=r,this._calendarCardsSrv=i,this._googleIntegrationSrv=a,this._iCalIntegrationSrv=n,this._settingsSrv=o,this._trelloIntegrationSrv=s,this._calendarCard=l,this._showTrelloCardNumber=this._globalBoardSettings.showTrelloCardNumber,this._calendarCard.cardType){case x.h.TrelloCard:this._trelloBoard=this._trelloIntegrationSrv.getTrelloBoardById(this._calendarCard.boardId),this._trelloList=this._trelloIntegrationSrv.getTrelloListById(this._calendarCard.listId);break;case x.h.TrelloCustomField:this._trelloBoard=this._trelloIntegrationSrv.getTrelloBoardById(this._calendarCard.boardId),this._trelloList=this._trelloIntegrationSrv.getTrelloListById(this._calendarCard.listId),this._trelloCustomField=this._trelloIntegrationSrv.getTrelloCustomFieldById(this._calendarCard.trelloCustomFieldId);break;case x.h.TrelloCheckItem:this._trelloBoard=this._trelloIntegrationSrv.getTrelloBoardById(this._calendarCard.boardId),this._trelloList=this._trelloIntegrationSrv.getTrelloListById(this._calendarCard.listId),this._parentCard=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,this._calendarCard.parentId),this._trelloChecklist=null===(d=this._calendarCardsSrv.getCalendarCardChecklists(this._calendarCard))||void 0===d?void 0:c()(d).call(d,(e=>{var t;return xe()(t=e.checkItems).call(t,(e=>e.id===this._calendarCard.id))}));break;case x.h.TrelloTimeRecord:this._trelloBoard=this._trelloIntegrationSrv.getTrelloBoardById(this._calendarCard.boardId),this._trelloList=this._trelloIntegrationSrv.getTrelloListById(this._calendarCard.listId),this._parentCard=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,this._calendarCard.parentId);break;case x.h.GoogleEvent:this._googleCalendar=this._googleIntegrationSrv.getGoogleCalendarById(this._calendarCard.googleCalendarId);break;case x.h.ICalEvent:this._iCalCalendar=this._iCalIntegrationSrv.getICalCalendarById(this._calendarCard.iCalCalendarId)}}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"cardTooltipCtrl"}},{kind:"get",key:"cardLabels",value:function cardLabels(){var e,t,r;this._cardLabels||(x.ob.has(this._calendarCard.cardType)?this._cardLabels=We()(e=S()(t=R()(r=re()(this._calendarCard.labelIds)).call(r,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(t,(e=>e&&this._calendarCard.boardId===e.boardId))).call(e,n.p):this._cardLabels=[]);return this._cardLabels}},{kind:"get",key:"cardPriority",value:function cardPriority(){return this._calendarCard.priority}},{kind:"get",key:"cardTitle",value:function cardTitle(){return this._showTrelloCardNumber&&this._calendarCard.trelloCardNumber?`#${this._calendarCard.trelloCardNumber} ${this._calendarCard.title}`:this._calendarCard.title}},{kind:"get",key:"hasDates",value:function hasDates(){return this._calendarCard.hasDates}},{kind:"get",key:"cardTimesText",value:function cardTimesText(){if(!this._calendarCard.hasDates)return;let e=this._calendarCard.realStart||this._calendarCard.start,t=this._calendarCard.realEnd||this._calendarCard.end,r=Object(n.z)(e,t,!this.isAllDay);if(this._calendarCard.cardType===x.h.TrelloTimeRecord){return`${r} (${Object(n.E)(6e4*this._calendarCard.durationMinutes)||"0m"})`}if(this._calendarCard.isAllDay&&(t=Object(n.a)(t,1)),!this.isMilestone){let i=Object(n.v)(e,t,this._appCommonSrv.getSchedulerWorkWeek()).minutes,a=Object(n.E)(6e4*i);if(a)return`${r} (${a})`}return r}},{kind:"get",key:"isMilestone",value:function isMilestone(){return this._calendarCard.isMilestone}},{kind:"get",key:"isAllDay",value:function isAllDay(){return this._calendarCard.isAllDay}},{kind:"get",key:"isTrelloCard",value:function isTrelloCard(){return this._calendarCard.cardType===x.h.TrelloCard}},{kind:"get",key:"isRecurring",value:function isRecurring(){return this._calendarCard.isRecurring?this._calendarCard.isRecurring():!!this._calendarCard.recurrenceRule||!!this._calendarCard.recurrenceId}},{kind:"get",key:"isException",value:function isException(){return this._calendarCard.isException?this._calendarCard.isException():!!this._calendarCard.recurrenceId}},{kind:"get",key:"cardCalendarId",value:function cardCalendarId(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return this._calendarCard.boardId;case x.h.GoogleEvent:return this._calendarCard.googleCalendarId;case x.h.ICalEvent:return this._calendarCard.iCalCalendarId}}},{kind:"get",key:"cardCalendarType",value:function cardCalendarType(){switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return x.d.TrelloBoard;case x.h.GoogleEvent:return x.d.GoogleCalendar;case x.h.ICalEvent:return x.d.ICalCalendar}}},{kind:"get",key:"cardCalendarName",value:function cardCalendarName(){var e,t,r;switch(this._calendarCard.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return null===(e=this._trelloBoard)||void 0===e?void 0:e.name;case x.h.GoogleEvent:return null===(t=this._googleCalendar)||void 0===t?void 0:t.name;case x.h.ICalEvent:return null===(r=this._iCalCalendar)||void 0===r?void 0:r.name}}},{kind:"get",key:"cardListName",value:function cardListName(){var e;return null===(e=this._trelloList)||void 0===e?void 0:e.name}},{kind:"get",key:"cardMembers",value:function cardMembers(){var e,t,r;this._cardMembers||(x.ob.has(this._calendarCard.cardType)?this._cardMembers=We()(e=S()(t=R()(r=re()(this._calendarCard.memberIds)).call(r,(e=>this._trelloIntegrationSrv.getTrelloMemberById(e)))).call(t,(e=>e))).call(e,n.r):this._cardMembers=[]);return this._cardMembers}},{kind:"get",key:"cardCustomFieldName",value:function cardCustomFieldName(){var e;if(this._calendarCard.cardType===x.h.TrelloCustomField)return null===(e=this._trelloCustomField)||void 0===e?void 0:e.name}},{kind:"get",key:"cardParentTitle",value:function cardParentTitle(){var e;if(this._calendarCard.cardType===x.h.TrelloCheckItem||this._calendarCard.cardType===x.h.TrelloTimeRecord)return null===(e=this._parentCard)||void 0===e?void 0:e.title}},{kind:"get",key:"cardChecklistName",value:function cardChecklistName(){var e;if(this._calendarCard.cardType===x.h.TrelloCheckItem)return null===(e=this._trelloChecklist)||void 0===e?void 0:e.name}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){let e=this._trelloIntegrationSrv.getCurrentBoardId();return this._settingsSrv.currentSettings.getGlobalBoardSettings(e)}}]}}));function DatePickerRangeController_getDecoratorsApi(){DatePickerRangeController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DatePickerRangeController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DatePickerRangeController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DatePickerRangeController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DatePickerRangeController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DatePickerRangeController_createElementDescriptor(e){var t,r=DatePickerRangeController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DatePickerRangeController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DatePickerRangeController_hasDecorators(e){return e.decorators&&e.decorators.length}function DatePickerRangeController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DatePickerRangeController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DatePickerRangeController_toPropertyKey(e){var t=function DatePickerRangeController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Bn=function DatePickerRangeController_decorate(e,t,r,i){var a,n=DatePickerRangeController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DatePickerRangeController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DatePickerRangeController_isDataDescriptor(a.descriptor)||DatePickerRangeController_isDataDescriptor(i.descriptor)){if(DatePickerRangeController_hasDecorators(a)||DatePickerRangeController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DatePickerRangeController_hasDecorators(a)){if(DatePickerRangeController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DatePickerRangeController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DatePickerRangeController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$scope","$timeout","$translate","$mdMenu"])],(function(e){return{F:class DatePickerRangeController{constructor(t,r,i,a,n){e(this),this._$element=t,this._$scope=r,this._$timeout=i,this._$translate=a,this._$mdMenu=n,this._wrapperElement=this._$element.children(".pw-date-picker-range"),this._reopenMenuPromise=P.a.resolve()}},d:[{kind:"field",key:"isDisabled",value:void 0},{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"datePickerRangeCtrl"}},{kind:"get",key:"calendarWidget",value:function calendarWidget(){return this._calendarWidget}},{kind:"set",key:"calendarWidget",value:function calendarWidget(e){this._calendarWidget=e,this.navigateToStart()}},{kind:"get",key:"calendarWidgetOptions",value:function calendarWidgetOptions(){return{selectable:"range",range:{start:this._innerStart,end:this._innerEnd},weekNumber:this.weekNumber,footer:!1,change:e=>{let{start:t,end:r}=e.sender.selectRange();t&&r&&(this._innerStart=Object(n.O)(t),this._innerEnd=Object(n.N)(r),this._setFilterByCurrentDates())},close:()=>{this.closeMenu()},hideCloseBtn:!0}}},{kind:"get",key:"start",value:function start(){return this._start}},{kind:"set",key:"start",value:function start(e){this._$scope.$evalAsync((()=>{this._innerStart=e,this._start=e,this._selectRange()}))}},{kind:"get",key:"end",value:function end(){return this._end}},{kind:"set",key:"end",value:function end(e){this._$scope.$evalAsync((()=>{this._innerEnd=e,this._end=e,this._selectRange()}))}},{kind:"get",key:"quickFilters",value:function quickFilters(){return this._quickFilters||(this._quickFilters=[{title:this._$translate.instant("BUTTONS.LAST_WEEK"),getInterval:()=>{let e=kendo.culture().calendar.firstDay,t=(e+6)%7,r=Object(n.e)(new Date,-1);return{start:Object(n.O)(Object(n.eb)(r,e)),end:Object(n.N)(Object(n.db)(r,t))}}},{title:this._$translate.instant("BUTTONS.LAST_MONTH"),getInterval:()=>{let e=Object(n.d)(new Date,-1);return{start:Object(n.O)(kendo.date.firstDayOfMonth(e)),end:Object(n.N)(kendo.date.lastDayOfMonth(e))}}},{title:this._$translate.instant("BUTTONS.CUSTOM")}],this._setFilterByCurrentDates()),this._quickFilters}},{kind:"get",key:"selectedFilter",value:function selectedFilter(){return this._selectedFilter}},{kind:"set",key:"selectedFilter",value:function selectedFilter(e){this._$scope.$evalAsync((()=>{if(this._selectedFilter=e,!this._selectedFilter.getInterval)return this._innerStart||(this._innerStart=this.start),void(this._innerEnd||(this._innerEnd=this.end));let{start:t,end:r}=this._selectedFilter.getInterval();this._innerStart=t,this._innerEnd=r,this._selectRange(),this.navigateToStart()}))}},{kind:"get",key:"hasDates",value:function hasDates(){return Object(n.rb)(this.start)&&Object(n.rb)(this.end)}},{kind:"get",key:"hasInnerDates",value:function hasInnerDates(){return Object(n.rb)(this._innerStart)&&Object(n.rb)(this._innerEnd)}},{kind:"get",key:"longDate",value:function longDate(){if(this.hasDates)return Object(n.A)(this.start,this.end)}},{kind:"method",key:"navigateToStart",value:function navigateToStart(){var e,t;this._innerStart&&null!==(e=this.calendarWidget)&&void 0!==e&&e._views&&(null===(t=this.calendarWidget)||void 0===t||t.navigate(this._innerStart,"month"))}},{kind:"method",key:"todayClick",value:function todayClick(){let e=new Date;this._innerStart=Object(n.O)(e),this._innerEnd=Object(n.N)(e),this._setFilterByCurrentDates(),this._selectRange(),this.navigateToStart()}},{kind:"method",key:"openMenu",value:function openMenu(e,t){this._reopenMenuPromise=(async()=>{await this._$mdMenu.hide(),e.open(t),this._$timeout((()=>{this._selectRange();let e=(a()(".pw-js-date-picker-range-content").innerWidth()-a()(".pw-js-date-picker-range-btn").innerWidth())/2;a()(".pw-js-date-picker-range-content").css("transform",`translateX(-${e}px)`)}),0,!1)})()}},{kind:"method",key:"applyDates",value:function applyDates(){this.start=this._innerStart,this.end=this._innerEnd}},{kind:"method",key:"closeMenu",value:async function closeMenu(){await this._reopenMenuPromise,this._$mdMenu.hide()}},{kind:"method",key:"_selectRange",value:function _selectRange(){var e,t;this._innerStart||this._innerEnd?null===(e=this.calendarWidget)||void 0===e||e.selectRange({start:this._innerStart,end:this._innerEnd}):null===(t=this.calendarWidget)||void 0===t||t.clearSelection()}},{kind:"method",key:"_setFilterByCurrentDates",value:function _setFilterByCurrentDates(){var e,t;let r=this._innerStart||this._start,i=this._innerEnd||this._end;r&&i&&(this.selectedFilter=null!==(e=c()(t=this.quickFilters).call(t,(e=>{if(!e.getInterval)return!1;let{start:t,end:a}=e.getInterval();return Object(n.w)(r,t)&&Object(n.w)(i,a)})))&&void 0!==e?e:this.quickFilters[2])}}]}}));function DateTimePickerController_getDecoratorsApi(){DateTimePickerController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DateTimePickerController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DateTimePickerController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DateTimePickerController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DateTimePickerController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DateTimePickerController_createElementDescriptor(e){var t,r=DateTimePickerController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DateTimePickerController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DateTimePickerController_hasDecorators(e){return e.decorators&&e.decorators.length}function DateTimePickerController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DateTimePickerController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DateTimePickerController_toPropertyKey(e){var t=function DateTimePickerController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Fn=new Date(1900,0,1,0,0,0),$n=new Date(2099,11,31,23,59,59);let xn=function DateTimePickerController_decorate(e,t,r,i){var a,n=DateTimePickerController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DateTimePickerController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DateTimePickerController_isDataDescriptor(a.descriptor)||DateTimePickerController_isDataDescriptor(i.descriptor)){if(DateTimePickerController_hasDecorators(a)||DateTimePickerController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DateTimePickerController_hasDecorators(a)){if(DateTimePickerController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DateTimePickerController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DateTimePickerController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$scope","$timeout","$mdMenu"])],(function(e){return{F:class DateTimePickerController{constructor(t,r,i,a){var n;e(this),this._$element=t,this._$scope=r,this._$timeout=i,this._$mdMenu=a,this._wrapperElement=this._$element.children(".pw-date-time-picker"),this._dateInputElement=c()(n=this._$element).call(n,".pw-js-date-input"),this._reopenMenuPromise=P.a.resolve()}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"dateTimePickerCtrl"}},{kind:"field",key:"isDisabled",value:void 0},{kind:"field",key:"_minDate",value:void 0},{kind:"field",key:"_maxDate",value:void 0},{kind:"field",key:"isYearShown",value:void 0},{kind:"get",key:"calendarWidgetOptions",value:function calendarWidgetOptions(){return{weekNumber:this.weekNumber,close:()=>{this.closeMenu()}}}},{kind:"get",key:"placeholder",value:function placeholder(){return this._placeholder}},{kind:"set",key:"placeholder",value:function placeholder(e){this.placeholder!==e&&(this._placeholder=e,this.date||this._$timeout((()=>this._dateInputElement.trigger("resize")),0,!1))}},{kind:"get",key:"date",value:function date(){return this._date}},{kind:"set",key:"date",value:function date(e){e?(this._date=Object(n.Eb)(e,this.date||e),this._date<this.minDate&&(this._date=this.minDate),this._date>this.maxDate&&(this._date=this.maxDate)):this._$scope.$evalAsync((()=>this._date=new Date(this._date)))}},{kind:"get",key:"dateFormat",value:function dateFormat(){return this.isYearShown?"D":"Dm"}},{kind:"get",key:"dateString",value:function dateString(){return kendo.toString(this.date,this.dateFormat)}},{kind:"set",key:"dateString",value:function dateString(e){let t=Object(n.Eb)(kendo.parseDate(e,this.dateFormat),this.date);if(t){kendo.toString(t,this.dateFormat)===e&&(this.date=t)}}},{kind:"get",key:"minDate",value:function minDate(){return this._minDate||Fn}},{kind:"get",key:"maxDate",value:function maxDate(){return this._maxDate||$n}},{kind:"get",key:"time",value:function time(){return this._date}},{kind:"set",key:"time",value:function time(e){e?(this._date=e,this._date<this.minDate&&(this._date=this.minDate),this._date>this.maxDate&&(this._date=this.maxDate),Object(n.tb)(this._wrapperElement)):this._$scope.$evalAsync((()=>this._date=new Date(this._date)))}},{kind:"get",key:"showDuration",value:function showDuration(){return this._showDuration}},{kind:"get",key:"minTime",value:function minTime(){return this._minDate&&Object(n.pb)(this.date,this.minDate)?this.minDate:Object(n.O)(this.date)}},{kind:"get",key:"maxTime",value:function maxTime(){return this._showDuration=!1,this._maxDate&&Object(n.pb)(this.date,this.maxDate)?(this._showDuration=!0,this.maxDate):this._minDate&&Object(n.pb)(this.date,this.minDate)?(this._showDuration=!0,Object(n.a)(this.minDate,1)):this.minTime}},{kind:"method",key:"openMenu",value:function openMenu(e,t){this._reopenMenuPromise=(async()=>{await this._$mdMenu.hide(),e.open(t)})()}},{kind:"method",key:"closeMenu",value:async function closeMenu(){await this._reopenMenuPromise,this._$mdMenu.hide()}},{kind:"method",key:"selectDateInputContent",value:function selectDateInputContent(){this.isDisabled||this._dateInputElement[0].selectionEnd-this._dateInputElement[0].selectionStart==0&&this._dateInputElement.trigger("select")}}]}}));function DateTimePickerRangeController_getDecoratorsApi(){DateTimePickerRangeController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DateTimePickerRangeController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DateTimePickerRangeController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DateTimePickerRangeController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DateTimePickerRangeController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DateTimePickerRangeController_createElementDescriptor(e){var t,r=DateTimePickerRangeController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DateTimePickerRangeController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DateTimePickerRangeController_hasDecorators(e){return e.decorators&&e.decorators.length}function DateTimePickerRangeController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DateTimePickerRangeController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DateTimePickerRangeController_toPropertyKey(e){var t=function DateTimePickerRangeController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Gn=function DateTimePickerRangeController_decorate(e,t,r,i){var a,n=DateTimePickerRangeController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DateTimePickerRangeController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DateTimePickerRangeController_isDataDescriptor(a.descriptor)||DateTimePickerRangeController_isDataDescriptor(i.descriptor)){if(DateTimePickerRangeController_hasDecorators(a)||DateTimePickerRangeController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DateTimePickerRangeController_hasDecorators(a)){if(DateTimePickerRangeController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DateTimePickerRangeController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DateTimePickerRangeController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$scope","$timeout","$mdMenu"])],(function(e){return{F:class DateTimePickerRangeController{constructor(t,r,i,a){e(this),this._$element=t,this._$scope=r,this._$timeout=i,this._$mdMenu=a,this._wrapperElement=this._$element.children(".pw-date-time-picker-range"),this._reopenMenuPromise=P.a.resolve()}},d:[{kind:"field",key:"isDisabled",value:void 0},{kind:"field",key:"isRemoveDatesButtonHidden",value:void 0},{kind:"field",key:"isSingleDate",value:void 0},{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"dateTimePickerRangeCtrl"}},{kind:"get",key:"calendarWidget",value:function calendarWidget(){return this._calendarWidget}},{kind:"set",key:"calendarWidget",value:function calendarWidget(e){this._calendarWidget=e,this.navigateToStart()}},{kind:"get",key:"calendarWidgetOptions",value:function calendarWidgetOptions(){return{selectable:this.isSingleDate?"single":"range",range:{start:this.start,end:this.end},weekNumber:this.weekNumber,footer:!1,change:e=>{let t,r;this.isSingleDate?(t=e.sender.value(),r=t):({start:t,end:r}=e.sender.selectRange()),t&&r&&(this.start=t,this.end=r)},close:()=>{this.closeMenu()}}}},{kind:"get",key:"start",value:function start(){return this._start}},{kind:"set",key:"start",value:function start(e){this._$scope.$evalAsync((()=>{this._start=this._start?Object(n.Eb)(e,this._start):e,this.isSingleDate&&(this._end=this._start)}))}},{kind:"get",key:"end",value:function end(){return this._end}},{kind:"set",key:"end",value:function end(e){this.end?this._$scope.$evalAsync((()=>{this._end=new Date(Object(n.Eb)(e,this._end)),this._end<this.minEndTime&&(this._end=new Date(this.minEndTime))})):this._$scope.$evalAsync((()=>this._end=new Date(e)))}},{kind:"get",key:"hasDates",value:function hasDates(){return Object(n.rb)(this.start)&&Object(n.rb)(this.end)}},{kind:"get",key:"shortDate",value:function shortDate(){if(this.hasDates)return Object(n.B)(this.start,this.end)}},{kind:"get",key:"isOnlyDate",value:function isOnlyDate(){return this._isOnlyDate}},{kind:"set",key:"isOnlyDate",value:function isOnlyDate(e){this._$scope.$evalAsync((()=>{if(this._isOnlyDate=e,this.isOnlyDate)this._start=Object(n.O)(this.start),this._end=this.start;else if(this.startTime=Object(n.W)(this.start),this.isSingleDate)this.endTime=this.startTime;else{let e=this._defaultCardIsAllDay?G.b:this._defaultCardDuration;this.endTime=Object(n.c)(this.start,e)}})),this._$timeout((()=>{this._selectRange(),this.navigateToStart()}),0,!1)}},{kind:"get",key:"minStartTime",value:function minStartTime(){return Object(n.O)(this.startTime)}},{kind:"get",key:"maxStartTime",value:function maxStartTime(){return this.minStartTime}},{kind:"get",key:"startTime",value:function startTime(){return this._start}},{kind:"set",key:"startTime",value:function startTime(e){let t=this.isSingleDate?e:this._getCalculatedEndDate(this._start,e);this._start=e,this._end=new Date(t),this._$timeout((()=>this._selectRange()),0,!1),Object(n.tb)(this._wrapperElement)}},{kind:"get",key:"minEndTime",value:function minEndTime(){return Object(n.pb)(this.startTime,this.endTime)?this.startTime:Object(n.O)(this.endTime)}},{kind:"get",key:"maxEndTime",value:function maxEndTime(){return this._showDuration=!1,Object(n.pb)(this.startTime,this.endTime)?(this._showDuration=!0,Object(n.N)(this.startTime)):this.minEndTime}},{kind:"get",key:"endTime",value:function endTime(){return this._end}},{kind:"set",key:"endTime",value:function endTime(e){this._end=new Date(e),this._$timeout((()=>this._selectRange()),0,!1),Object(n.tb)(this._wrapperElement)}},{kind:"get",key:"showDuration",value:function showDuration(){return this._showDuration}},{kind:"method",key:"navigateToStart",value:function navigateToStart(){var e,t;this.start&&null!==(e=this.calendarWidget)&&void 0!==e&&e._views&&(null===(t=this.calendarWidget)||void 0===t||t.navigate(Object(n.O)(this.start),"month"))}},{kind:"method",key:"onRemoveDatesClick",value:function onRemoveDatesClick(){var e;this.removeDates(),null===(e=this.calendarWidget)||void 0===e||e.clearSelection()}},{kind:"method",key:"todayClick",value:function todayClick(){this._$scope.$evalAsync((()=>{let e=this.isOnlyDate?Object(n.O)(new Date):Object(n.W)(new Date),t=this.isSingleDate?e:this._getCalculatedEndDate(this._start,e);this._start=e,this._end=new Date(t)})),this._$timeout((()=>{this._selectRange(),this.navigateToStart()}),0,!1)}},{kind:"method",key:"openMenu",value:function openMenu(e,t){this._reopenMenuPromise=(async()=>{await this._$mdMenu.hide(),e.open(t),this._$timeout((()=>this._selectRange()),0,!1)})()}},{kind:"method",key:"closeMenu",value:async function closeMenu(){await this._reopenMenuPromise,this._$mdMenu.hide()}},{kind:"method",key:"_selectRange",value:function _selectRange(){var e;if(this.start||this.end)if(this.isSingleDate){var t;null===(t=this.calendarWidget)||void 0===t||t.value(this.start)}else{var r;null===(r=this.calendarWidget)||void 0===r||r.selectRange({start:this.start,end:this.end})}else null===(e=this.calendarWidget)||void 0===e||e.clearSelection()}},{kind:"method",key:"_getCalculatedEndDate",value:function _getCalculatedEndDate(e,t){if(!this.end)return t;if(this.isOnlyDate){let r=Object(n.R)(e,this.end);return Object(n.a)(t,r)}let r=Object(n.S)(e,this.end);return Object(n.c)(t,r)}}]}}));function DurationPickerController_getDecoratorsApi(){DurationPickerController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DurationPickerController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DurationPickerController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DurationPickerController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DurationPickerController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DurationPickerController_createElementDescriptor(e){var t,r=DurationPickerController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DurationPickerController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DurationPickerController_hasDecorators(e){return e.decorators&&e.decorators.length}function DurationPickerController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DurationPickerController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DurationPickerController_toPropertyKey(e){var t=function DurationPickerController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const zn=Object(n.O)(new Date("2020-09-03"));let Un=function DurationPickerController_decorate(e,t,r,i){var a,n=DurationPickerController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DurationPickerController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DurationPickerController_isDataDescriptor(a.descriptor)||DurationPickerController_isDataDescriptor(i.descriptor)){if(DurationPickerController_hasDecorators(a)||DurationPickerController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DurationPickerController_hasDecorators(a)){if(DurationPickerController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DurationPickerController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DurationPickerController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element"])],(function(e){return{F:class DurationPickerController{constructor(t){e(this),this._$element=t,this._wrapperElement=this._$element.children(".pw-duration-picker")}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"durationPickerCtrl"}},{kind:"field",key:"minDurationMinutes",value:void 0},{kind:"field",key:"maxDurationMinutes",value:void 0},{kind:"field",key:"isDisabled",value:void 0},{kind:"field",key:"placeholder",value:void 0},{kind:"field",key:"_focusOnCreate",value:void 0},{kind:"get",key:"durationMinutes",value:function durationMinutes(){return this._durationMinutes}},{kind:"set",key:"durationMinutes",value:function durationMinutes(e){this.durationMinutes!==e&&(this._durationMinutes=e,this._durationTime=null)}},{kind:"get",key:"durationTime",value:function durationTime(){return this._durationTime||(this._durationTime=Object(n.c)(zn,this.durationMinutes)),this._durationTime}},{kind:"set",key:"durationTime",value:function durationTime(e){e&&!Object(n.w)(this.durationTime,e)&&(this._durationTime=e,this._durationMinutes=Object(n.S)(zn,e),Object(n.tb)(this._wrapperElement))}},{kind:"get",key:"minDurationTime",value:function minDurationTime(){return this._minDurationTime||(this._minDurationTime=this.minDurationMinutes?Object(n.c)(zn,this.minDurationMinutes):zn),this._minDurationTime}},{kind:"get",key:"maxDurationTime",value:function maxDurationTime(){return this._maxDurationTime||(this._maxDurationTime=this.maxDurationMinutes?Object(n.c)(zn,this.maxDurationMinutes):Object(n.N)(this.minDurationTime)),this._maxDurationTime}},{kind:"get",key:"focusOnCreate",value:function focusOnCreate(){return this._focusOnCreate}}]}}));function FiltersMenuController_getDecoratorsApi(){FiltersMenuController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!FiltersMenuController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=FiltersMenuController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:FiltersMenuController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=FiltersMenuController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function FiltersMenuController_createElementDescriptor(e){var t,r=FiltersMenuController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function FiltersMenuController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function FiltersMenuController_hasDecorators(e){return e.decorators&&e.decorators.length}function FiltersMenuController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function FiltersMenuController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function FiltersMenuController_toPropertyKey(e){var t=function FiltersMenuController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Wn=function FiltersMenuController_decorate(e,t,r,i){var a,n=FiltersMenuController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function FiltersMenuController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(FiltersMenuController_isDataDescriptor(a.descriptor)||FiltersMenuController_isDataDescriptor(i.descriptor)){if(FiltersMenuController_hasDecorators(a)||FiltersMenuController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(FiltersMenuController_hasDecorators(a)){if(FiltersMenuController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}FiltersMenuController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,FiltersMenuController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$log","$scope","$translate","appCommonSrv","dialogSrv","licenseSrv","notificationSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class FiltersMenuController{constructor(t,r,i,a,n,o,s,l,d,c,h){e(this),this._$rootScope=t,this._$log=r,this._$scope=i,this._$translate=a,this._appCommonSrv=n,this._dialogSrv=o,this._licenseSrv=s,this._notificationSrv=l,this._settingsSrv=d,this._telemetrySrv=c,this._trelloIntegrationSrv=h,this._boards=[],this._lists=[],this._members=[],this._labels=[],this._customFields=[],this._customFilters=[],this._filteredMemberIds=new M.a,this._filteredLabelHashes=new M.a,this._filteredListIds=new M.a,this._filteredCustomFieldHashes=new M.a,this._filteredCustomFilterIds=new M.a;const onTrelloBoardChanged=()=>this._$scope.$evalAsync((()=>this._loadBoards()));this._trelloIntegrationSrv.addTrelloBoardEventListener("added",onTrelloBoardChanged),this._trelloIntegrationSrv.addTrelloBoardEventListener("updated",onTrelloBoardChanged),this._trelloIntegrationSrv.addTrelloBoardEventListener("deleted",onTrelloBoardChanged),this._$scope.$on("$destroy",(()=>{this._trelloIntegrationSrv.removeTrelloBoardEventListener("added",onTrelloBoardChanged),this._trelloIntegrationSrv.removeTrelloBoardEventListener("updated",onTrelloBoardChanged),this._trelloIntegrationSrv.removeTrelloBoardEventListener("deleted",onTrelloBoardChanged)}));const loadFilters=()=>{this._currentBoardId&&(this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!1)&&(this._filteredMemberIds=new M.a(this._filtersSettings.members),this._filteredLabelHashes=new M.a(this._filtersSettings.labels),this._filteredListIds=new M.a(this._filtersSettings.lists),this._filteredCustomFieldHashes=new M.a(this._filtersSettings.customFields),this._filteredCustomFilterIds=new M.a(this._filtersSettings.customFilters)),this._loadBoards())};this._appCommonSrv.isSchedulerInPreview()?this._$scope.$on(x.n.BoardInitialized,(()=>loadFilters())):loadFilters(),this._$scope.$on(x.n.FilterByCurrentMemberRequested,(()=>{this._$scope.$evalAsync((()=>this.toggleFilterByCurrentMember()))})),this._$scope.$on(x.n.TrelloBoardSelectionChanged,(()=>this._loadBoards())),this._$scope.$on(x.n.SettingsChanged,(()=>this._loadSelectedBoardsFilters())),this._$scope.$on(x.n.BoardChanged,(()=>loadFilters()))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"filtersMenuCtrl"}},{kind:"field",key:"_boards",value:()=>[]},{kind:"get",key:"isFiltersActive",value:function isFiltersActive(){return this.isMembersSelected||this.isLabelsSelected||this.isListsSelected||this.isCustomFieldsAsCardsSelected||this.isCustomFiltersSelected}},{kind:"get",key:"isAddCustomFiltersAvailable",value:function isAddCustomFiltersAvailable(){var e;return xe()(e=this._customFields).call(e,(e=>{if(e.boardId!==this._currentBoardId)return!1;switch(e.type){case x.pb.Checkbox:return!0;case x.pb.List:return e.options.length>0;default:return!1}}))}},{kind:"method",key:"addCustomFilter",value:function addCustomFilter(e){this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.AddCustomFilterClicked),this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0)&&this._dialogSrv.showCustomFiltersDialogAsync(e)}},{kind:"get",key:"isFilteredByCurrentMember",value:function isFilteredByCurrentMember(){return 1===this._filteredMemberIds.size&&this._filteredMemberIds.has(this._currentMemberId)&&!this.isLabelsSelected&&!this.isListsSelected&&!this.isCustomFieldsAsCardsSelected&&!this.isCustomFiltersSelected}},{kind:"get",key:"isFilterByCurrentMemberAvailable",value:function isFilterByCurrentMemberAvailable(){return!1}},{kind:"method",key:"toggleFilterByCurrentMember",value:function toggleFilterByCurrentMember(){var e;this._currentBoardId&&xe()(e=this.members).call(e,(e=>e.id===this._currentMemberId))&&this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0)&&(this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.FilterByCurrentMemberToggled),this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this.isFilteredByCurrentMember?this._filtersSettings.members=[]:(this._filtersSettings.members=[this._currentMemberId],this._filteredLabelHashes=new M.a,this._filteredListIds=new M.a,this._filteredCustomFieldHashes=new M.a,this._filteredCustomFilterIds=new M.a,this._filtersSettings.labels=[],this._filtersSettings.lists=[],this._filtersSettings.customFields=[],this._filtersSettings.customFilters=[]),this._filteredMemberIds=new M.a(this._filtersSettings.members),this._settingsSrv.saveGlobalAsync(),this._$rootScope.$broadcast(x.n.FiltersChanged))}},{kind:"method",key:"clearAllFilters",value:function clearAllFilters(){this.isFiltersActive&&(this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.Cleared),this._filteredMemberIds=new M.a,this._filteredLabelHashes=new M.a,this._filteredListIds=new M.a,this._filteredCustomFieldHashes=new M.a,this._filteredCustomFilterIds=new M.a,this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this._filtersSettings.members=[],this._filtersSettings.labels=[],this._filtersSettings.lists=[],this._filtersSettings.customFields=[],this._filtersSettings.customFilters=[],this._settingsSrv.saveGlobalAsync(),this._$rootScope.$broadcast(x.n.FiltersChanged))}},{kind:"method",key:"isGroupCollapsed",value:function isGroupCollapsed(e){var t,r;return null!==(t=null===(r=this._settingsSrv.currentSettings.local.filters[e])||void 0===r?void 0:r.isCollapsed)&&void 0!==t&&t}},{kind:"method",key:"toggleGroupCollapsed",value:function toggleGroupCollapsed(e){let t=this._settingsSrv.currentSettings.local.filters,r=t[e];r||(r={isCollapsed:!1},t[e]=r),r.isCollapsed=!r.isCollapsed,this._settingsSrv.saveLocal()}},{kind:"get",key:"isMembersSelected",value:function isMembersSelected(){return 0!==this._filteredMemberIds.size}},{kind:"get",key:"members",value:function members(){return this._members}},{kind:"method",key:"isMemberSelected",value:function isMemberSelected(e){return this._filteredMemberIds.has(e.id)}},{kind:"method",key:"toggleMember",value:function toggleMember(e){this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0)&&(this._filteredMemberIds.has(e.id)?this._filteredMemberIds.delete(e.id):this._filteredMemberIds.add(e.id),this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this._filtersSettings.members=re()(this._filteredMemberIds),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.MembersChanged),this._$rootScope.$broadcast(x.n.FiltersChanged))}},{kind:"get",key:"isLabelsSelected",value:function isLabelsSelected(){return 0!==this._filteredLabelHashes.size}},{kind:"get",key:"labels",value:function labels(){return this._labels}},{kind:"method",key:"isLabelSelected",value:function isLabelSelected(e){return this._filteredLabelHashes.has(e.hash)}},{kind:"method",key:"toggleLabel",value:function toggleLabel(e){this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0)&&(this._filteredLabelHashes.has(e.hash)?this._filteredLabelHashes.delete(e.hash):this._filteredLabelHashes.add(e.hash),this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this._filtersSettings.labels=re()(this._filteredLabelHashes),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.LabelsChanged),this._$rootScope.$broadcast(x.n.FiltersChanged))}},{kind:"get",key:"isListsSelected",value:function isListsSelected(){return 0!==this._filteredListIds.size}},{kind:"get",key:"lists",value:function lists(){return this._lists}},{kind:"method",key:"isListSelected",value:function isListSelected(e){return this._filteredListIds.has(e.id)}},{kind:"method",key:"toggleList",value:function toggleList(e){this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0)&&(this._filteredListIds.has(e.id)?this._filteredListIds.delete(e.id):this._filteredListIds.add(e.id),this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this._filtersSettings.lists=re()(this._filteredListIds),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.ListsChanged),this._$rootScope.$broadcast(x.n.FiltersChanged))}},{kind:"get",key:"isCustomFieldsAsCardsSelected",value:function isCustomFieldsAsCardsSelected(){return 0!==this._filteredCustomFieldHashes.size}},{kind:"get",key:"customFieldsAsCards",value:function customFieldsAsCards(){var e;return S()(e=this._customFields).call(e,(e=>e.type===x.pb.Date))}},{kind:"method",key:"isCustomFieldAsCardsSelected",value:function isCustomFieldAsCardsSelected(e){return this._filteredCustomFieldHashes.has(e.hash)}},{kind:"method",key:"toggleCustomFieldAsCards",value:function toggleCustomFieldAsCards(e){this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0)&&(this._filteredCustomFieldHashes.has(e.hash)?this._filteredCustomFieldHashes.delete(e.hash):this._filteredCustomFieldHashes.add(e.hash),this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this._filtersSettings.customFields=re()(this._filteredCustomFieldHashes),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.CustomFieldsChanged),this._$rootScope.$broadcast(x.n.FiltersChanged))}},{kind:"get",key:"isCustomFiltersSelected",value:function isCustomFiltersSelected(){return 0!==this._filteredCustomFilterIds.size}},{kind:"get",key:"customFilters",value:function customFilters(){return this._customFilters}},{kind:"method",key:"isCustomFilterSelected",value:function isCustomFilterSelected(e){return this._filteredCustomFilterIds.has(e.id)}},{kind:"method",key:"toggleCustomFilter",value:function toggleCustomFilter(e){this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0)&&(this._filteredCustomFilterIds.has(e.id)?this._filteredCustomFilterIds.delete(e.id):this._filteredCustomFilterIds.add(e.id),this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this._filtersSettings.customFilters=re()(this._filteredCustomFilterIds),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.CustomFiltersChanged),this._$rootScope.$broadcast(x.n.FiltersChanged))}},{kind:"method",key:"removeCustomFilterAsync",value:async function removeCustomFilterAsync(e){if(this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0))try{var t;if(!await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.CUSTOM_FILTERS_REMOVE_TITLE"),this._$translate.instant("DIALOGS.CUSTOM_FILTERS_REMOVE_TEXT",{filterName:e.name}),{buttons:[{text:this._$translate.instant("BUTTONS.DELETE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))return;this._appCommonSrv.setSchedulerBusy(!0),this._filteredCustomFilterIds.delete(e.id);let r=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId),i=S()(t=r.customFilters).call(t,(t=>t.id!==e.id));r.customFilters=i,this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters,this._filtersSettings.customFilters=re()(this._filteredCustomFilterIds),await P.a.all([this._settingsSrv.saveGlobalAsync(),this._settingsSrv.saveBoardSettingsAsync(this._currentBoardId,{customFilters:i})]),this._$rootScope.$broadcast(x.n.SettingsChanged),this._$rootScope.$broadcast(x.n.FiltersChanged);let a={customFilterType:e.targetType};switch(e.targetType){case x.m.CustomField:let t=this._trelloIntegrationSrv.getTrelloCustomFieldById(e.targetId);if(!t)break;a.customFieldType=t.type}this._telemetrySrv.logSessionEvent(x.X.FiltersEvents.CustomFilterRemoved,a)}catch(e){this._$log.error("Planyway failed to remove custom filter:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.REMOVE_CUSTOM_FILTER_ERROR"),x.A.Error)}finally{this._appCommonSrv.setSchedulerBusy(!1)}}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"method",key:"_loadBoards",value:function _loadBoards(){if(this._currentBoardId){this._boards=[{...this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId),isCurrentBoard:!0,isSelected:!0,isFavorite:!0}];for(let e of this._trelloIntegrationSrv.getCurrentBoardConnectedBoards())this._boards.push({...this._trelloIntegrationSrv.getTrelloBoardById(e.id),...e,isCurrentBoard:!1});this._loadSelectedBoardsFilters()}}},{kind:"method",key:"_loadSelectedBoardsFilters",value:function _loadSelectedBoardsFilters(){var e,t,r,i,a,o,s,l;if(!this._currentBoardId)return;let d=new lt.a,h=new lt.a,u=new lt.a,p=new lt.a,m=new lt.a,f=S()(e=this._boards).call(e,(e=>e.isCurrentBoard||e.isFavorite));for(let e of f){let r=this._trelloIntegrationSrv.getTrelloBoardById(e.id);if(!r)continue;for(let e of r.members)d.set(e.id,{...e,isCurrentMember:e.id===this._currentMemberId});for(let e of r.labels){let t=Object(n.V)(e);h.set(t,{...e,hash:t})}for(let e of r.lists)u.set(e.id,{id:e.id,name:e.name,boardId:r.id,boardName:r.name});let i=this._settingsSrv.currentSettings.getGlobalBoardSettings(r.id);for(let e of r.customFields){var y;if(e.type===x.pb.Date&&!ze()(y=i.customFieldsAsCards).call(y,e.id))continue;let t=Object(n.L)(e);p.set(t,{hash:t,name:e.name,type:e.type,options:e.options,boardId:r.id})}for(let e of r.customFilters){let i;switch(e.targetType){case x.m.CustomField:let r=this._trelloIntegrationSrv.getTrelloCustomFieldById(e.targetId);if(!r)continue;switch(r.type){case x.pb.List:let a=c()(t=r.options).call(t,(t=>t.id===e.value));if(!a)continue;i=e.name||this._$translate.instant("DIALOGS.CUSTOM_FILTERS_FILTER_NAME",{filterName:r.name,filterValue:a.name});break;case x.pb.Checkbox:i=e.name||this._$translate.instant("DIALOGS.CUSTOM_FILTERS_FILTER_NAME",{filterName:r.name,filterValue:e.value?this._$translate.instant("DIALOGS.CUSTOM_FILTERS_CHECKED"):this._$translate.instant("DIALOGS.CUSTOM_FILTERS_NOT_CHECKED")})}}m.set(e.id,{...e,name:i,boardId:r.id})}}this._members=We()(r=re()(Ta()(d).call(d))).call(r,n.r),this._members.unshift({id:U.k,fullName:this._$translate.instant("MISC.UNASSIGNED_MEMBER_FULL_NAME"),initials:this._$translate.instant("MISC.UNASSIGNED_MEMBER_INITIALS"),isCurrentMember:!1}),this._labels=R()(i=We()(a=re()(Ta()(h).call(h))).call(a,n.p)).call(i,(e=>({hash:e.hash,name:e.name||Object(n.i)(e.color),color:e.color}))),this._labels.unshift({hash:U.k,name:this._$translate.instant("MISC.NO_LABEL"),color:"no-labels"}),this._lists=R()(o=We()(s=re()(Ta()(u).call(u))).call(s,n.q)).call(o,(e=>({id:e.id,name:e.name,boardId:e.boardId}))),this._customFields=We()(l=re()(Ta()(p).call(p))).call(l,n.o),this._customFilters=re()(Ta()(m).call(m)),this._filtersSettings=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).filters;let v=!1;for(let e of this._filteredMemberIds)e===U.k||d.has(e)||(this._filteredMemberIds.delete(e),v=!0);for(let e of this._filteredLabelHashes)e===U.k||h.has(e)||(this._filteredLabelHashes.delete(e),v=!0);for(let e of this._filteredListIds)u.has(e)||(this._filteredListIds.delete(e),v=!0);for(let e of this._filteredCustomFieldHashes)p.has(e)||(this._filteredCustomFieldHashes.delete(e),v=!0);this._filteredCustomFilterIds=new M.a(this._filtersSettings.customFilters);for(let e of this._filteredCustomFilterIds)m.has(e)||(this._filteredCustomFilterIds.delete(e),v=!0);v&&(this._filtersSettings.members=re()(this._filteredMemberIds),this._filtersSettings.labels=re()(this._filteredLabelHashes),this._filtersSettings.lists=re()(this._filteredListIds),this._filtersSettings.customFields=re()(this._filteredCustomFieldHashes),this._filtersSettings.customFilters=re()(this._filteredCustomFilterIds),this._settingsSrv.saveGlobalAsync(),this._$rootScope.$broadcast(x.n.FiltersChanged))}}]}}));function MemberAvatarController_getDecoratorsApi(){MemberAvatarController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!MemberAvatarController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=MemberAvatarController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:MemberAvatarController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=MemberAvatarController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function MemberAvatarController_createElementDescriptor(e){var t,r=MemberAvatarController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function MemberAvatarController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function MemberAvatarController_hasDecorators(e){return e.decorators&&e.decorators.length}function MemberAvatarController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function MemberAvatarController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function MemberAvatarController_toPropertyKey(e){var t=function MemberAvatarController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let jn=function MemberAvatarController_decorate(e,t,r,i){var a,n=MemberAvatarController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function MemberAvatarController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(MemberAvatarController_isDataDescriptor(a.descriptor)||MemberAvatarController_isDataDescriptor(i.descriptor)){if(MemberAvatarController_hasDecorators(a)||MemberAvatarController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(MemberAvatarController_hasDecorators(a)){if(MemberAvatarController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}MemberAvatarController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,MemberAvatarController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$translate","trelloIntegrationSrv"])],(function(e){return{F:class MemberAvatarController{constructor(t,r,i){e(this),this._$scope=t,this._trelloIntegrationSrv=i,this._avatarSize="small",this._showNameTooltip=!1,this._member={id:U.k,fullName:r.instant("MISC.UNASSIGNED_MEMBER_FULL_NAME"),initials:r.instant("MISC.UNASSIGNED_MEMBER_INITIALS")}}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"memberAvatarCtrl"}},{kind:"field",key:"_member",value:void 0},{kind:"set",key:"member",value:function member(e){e&&this._member.id!==e.id&&(this._member=e,this._$scope.$broadcast("$$rebind::member"))}},{kind:"set",key:"memberId",value:function memberId(e){this.member=this._trelloIntegrationSrv.getTrelloMemberById(e)}},{kind:"get",key:"showNameTooltip",value:function showNameTooltip(){return this._showNameTooltip}},{kind:"get",key:"isUnassigned",value:function isUnassigned(){return this._member.id===U.k}},{kind:"get",key:"avatarUrl",value:function avatarUrl(){switch(this._avatarSize){case"small":return this._member.avatarUrlSmall;case"normal":return this._member.avatarUrlNormal}}},{kind:"get",key:"fullName",value:function fullName(){return this._member.fullName}},{kind:"get",key:"initials",value:function initials(){return this._member.initials}}]}}));var Hn=r(720),Vn=r.n(Hn);function OnboardingGuyController_getDecoratorsApi(){OnboardingGuyController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!OnboardingGuyController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=OnboardingGuyController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:OnboardingGuyController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=OnboardingGuyController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function OnboardingGuyController_createElementDescriptor(e){var t,r=OnboardingGuyController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function OnboardingGuyController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function OnboardingGuyController_hasDecorators(e){return e.decorators&&e.decorators.length}function OnboardingGuyController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function OnboardingGuyController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function OnboardingGuyController_toPropertyKey(e){var t=function OnboardingGuyController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Yn=function OnboardingGuyController_decorate(e,t,r,i){var a,n=OnboardingGuyController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function OnboardingGuyController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(OnboardingGuyController_isDataDescriptor(a.descriptor)||OnboardingGuyController_isDataDescriptor(i.descriptor)){if(OnboardingGuyController_hasDecorators(a)||OnboardingGuyController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(OnboardingGuyController_hasDecorators(a)){if(OnboardingGuyController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}OnboardingGuyController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,OnboardingGuyController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$sce","$translate","platformSrv","telemetrySrv"])],(function(e){return{F:class OnboardingGuyController{constructor(t,r,i,a){e(this),this._$sce=t,this._$translate=r,this._telemetrySrv=a,this._onboardingGuyUrl=i.getPlatformUrl(Vn.a)}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"onboardingGuyCtrl"}},{kind:"get",key:"onboardingGuyUrl",value:function onboardingGuyUrl(){return this._onboardingGuyUrl}},{kind:"set",key:"loadType",value:function loadType(e){if(this._content)return;let t;switch(e){case"signIn":t="MISC.ONBOARDING_SIGN_IN",this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.SignInStepShown);break;case"openBoard":t="MISC.ONBOARDING_OPEN_BOARD",this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.OpenBoardStepShown);break;default:return}this._content=this._$sce.trustAsHtml(this._$translate.instant(t))}},{kind:"get",key:"content",value:function content(){return this._content}}]}}));function PrioritySelectController_getDecoratorsApi(){PrioritySelectController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!PrioritySelectController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PrioritySelectController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PrioritySelectController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PrioritySelectController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PrioritySelectController_createElementDescriptor(e){var t,r=PrioritySelectController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PrioritySelectController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PrioritySelectController_hasDecorators(e){return e.decorators&&e.decorators.length}function PrioritySelectController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PrioritySelectController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PrioritySelectController_toPropertyKey(e){var t=function PrioritySelectController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Kn=function PrioritySelectController_decorate(e,t,r,i){var a,n=PrioritySelectController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PrioritySelectController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(PrioritySelectController_isDataDescriptor(a.descriptor)||PrioritySelectController_isDataDescriptor(i.descriptor)){if(PrioritySelectController_hasDecorators(a)||PrioritySelectController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PrioritySelectController_hasDecorators(a)){if(PrioritySelectController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PrioritySelectController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,PrioritySelectController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$translate"])],(function(e){return{F:class PrioritySelectController{constructor(t){e(this),this._$translate=t,this._priorities=[{label:this._$translate.instant("MENU.PRIORITY_HIGH"),value:3},{label:this._$translate.instant("MENU.PRIORITY_MEDIUM"),value:2},{label:this._$translate.instant("MENU.PRIORITY_LOW"),value:1},{label:this._$translate.instant("MENU.PRIORITY_UNSET"),value:0}],this._selectedPriority=this.priorities[0]}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"prioritySelectCtrl"}},{kind:"get",key:"priorities",value:function priorities(){return this.delayRender?[]:this._priorities}},{kind:"get",key:"selectedPriority",value:function selectedPriority(){return this._selectedPriority}},{kind:"set",key:"selectedPriority",value:function selectedPriority(e){this._selectedPriority=e,this._selectedPriorityValue=e.value}},{kind:"get",key:"selectedPriorityValue",value:function selectedPriorityValue(){return this._selectedPriorityValue}},{kind:"set",key:"selectedPriorityValue",value:function selectedPriorityValue(e){var t;let r=c()(t=this.priorities).call(t,(t=>t.value===e));r?(this._selectedPriority=r,this._selectedPriorityValue=e):(this._selectedPriority=this.priorities[this.priorities.length-1],this._selectedPriorityValue=this._selectedPriority.value)}}]}}));function PushNotificationsEnableBannerController_getDecoratorsApi(){PushNotificationsEnableBannerController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!PushNotificationsEnableBannerController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PushNotificationsEnableBannerController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PushNotificationsEnableBannerController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PushNotificationsEnableBannerController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PushNotificationsEnableBannerController_createElementDescriptor(e){var t,r=PushNotificationsEnableBannerController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PushNotificationsEnableBannerController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PushNotificationsEnableBannerController_hasDecorators(e){return e.decorators&&e.decorators.length}function PushNotificationsEnableBannerController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PushNotificationsEnableBannerController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PushNotificationsEnableBannerController_toPropertyKey(e){var t=function PushNotificationsEnableBannerController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Xn=function PushNotificationsEnableBannerController_decorate(e,t,r,i){var a,n=PushNotificationsEnableBannerController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PushNotificationsEnableBannerController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(PushNotificationsEnableBannerController_isDataDescriptor(a.descriptor)||PushNotificationsEnableBannerController_isDataDescriptor(i.descriptor)){if(PushNotificationsEnableBannerController_hasDecorators(a)||PushNotificationsEnableBannerController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PushNotificationsEnableBannerController_hasDecorators(a)){if(PushNotificationsEnableBannerController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PushNotificationsEnableBannerController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,PushNotificationsEnableBannerController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","pushNotificationsSrv","settingsSrv","telemetrySrv"])],(function(e){return{F:class PushNotificationsEnableBannerController{constructor(t,r,i,a){e(this),this._pushNotificationsSrv=r,this._settingsSrv=i,this._telemetrySrv=a,t.$on(x.n.CardsLoaded,(()=>this._cardsLoaded=!0));const n=t.$watch((()=>this.isShown),(()=>{this.isShown&&(n(),this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.PushNotificationsBannerShown))}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"pushNotificationsEnableBannerCtrl"}},{kind:"get",key:"isShown",value:function isShown(){return!(!this._pushNotificationsSrv.notificationStatus||!this._cardsLoaded)&&(void 0===this._isShown&&(this._globalSettings.isPushNotificationsRequestShown?this._isShown=!this._nextNotificationsRequestDate||this._nextNotificationsRequestDate<Ea()():(this._isShown=!0,this._globalSettings.isPushNotificationsRequestShown=!0,this._settingsSrv.saveGlobalAsync()),this._isShown=this._isShown&&this._pushNotificationsSrv.isNotificationsSupported&&!this._pushNotificationsSrv.isNotificationsEnabled),this._isShown)}},{kind:"method",key:"enablePushNotificationsAsync",value:async function enablePushNotificationsAsync(){this._isShown=!1,await this._pushNotificationsSrv.enableNotificationsAsync()&&this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.PushNotificationsEnabled,{where:x.bb.Banner})}},{kind:"method",key:"hidePanel",value:function hidePanel(){this._isShown=!1,this._nextNotificationsRequestDate=Object(n.a)(new Date,30),this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.PushNotificationsBannerClosed)}},{kind:"get",key:"_nextNotificationsRequestDate",value:function _nextNotificationsRequestDate(){try{let e=localStorage.planywayNotificationsRequestNextDate;if(e)return new Date(e)}catch(e){}}},{kind:"set",key:"_nextNotificationsRequestDate",value:function _nextNotificationsRequestDate(e){try{localStorage.planywayNotificationsRequestNextDate=e.toISOString()}catch(e){}}},{kind:"get",key:"_globalSettings",value:function _globalSettings(){return this._settingsSrv.currentSettings.global}}]}}));function RecurrentSelectController_getDecoratorsApi(){RecurrentSelectController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!RecurrentSelectController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=RecurrentSelectController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:RecurrentSelectController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=RecurrentSelectController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function RecurrentSelectController_createElementDescriptor(e){var t,r=RecurrentSelectController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function RecurrentSelectController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function RecurrentSelectController_hasDecorators(e){return e.decorators&&e.decorators.length}function RecurrentSelectController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function RecurrentSelectController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function RecurrentSelectController_toPropertyKey(e){var t=function RecurrentSelectController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const qn=Ar.a.RRule,Qn=[qn.MO,qn.TU,qn.WE,qn.TH,qn.FR,qn.SA,qn.SU],Jn=[1,2,3,4,-1];let Zn=function RecurrentSelectController_decorate(e,t,r,i){var a,n=RecurrentSelectController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function RecurrentSelectController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(RecurrentSelectController_isDataDescriptor(a.descriptor)||RecurrentSelectController_isDataDescriptor(i.descriptor)){if(RecurrentSelectController_hasDecorators(a)||RecurrentSelectController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(RecurrentSelectController_hasDecorators(a)){if(RecurrentSelectController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}RecurrentSelectController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,RecurrentSelectController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","$translate","dialogSrv","licenseSrv"])],(function(e){return{F:class RecurrentSelectController{constructor(t,r,i,a){e(this),this._$scope=t,this._$translate=r,this._dialogSrv=i,this._licenseSrv=a,this._ruleText=this._$translate.instant("DIALOGS.DEFAULT_RULE_TEXT")}},d:[{kind:"field",key:"_rulePresets",value:()=>[]},{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"recurrentSelectCtrl"}},{kind:"get",key:"presets",value:function presets(){return this.delayRender?[]:this._rulePresets}},{kind:"get",key:"recurrenceRule",value:function recurrenceRule(){return this._recurrenceRule}},{kind:"set",key:"recurrenceRule",value:function recurrenceRule(e){this._recurrenceRule!==e&&(this._recurrenceRule=e,void 0!==this.startDate&&void 0!==this.isAllDay&&this._initPresets())}},{kind:"get",key:"startDate",value:function startDate(){return this._startDate}},{kind:"set",key:"startDate",value:function startDate(e){this._startDate!==e&&(this._startDate=e,void 0!==this.isAllDay&&this._initPresets())}},{kind:"get",key:"isAllDay",value:function isAllDay(){return this._isAllDay}},{kind:"set",key:"isAllDay",value:function isAllDay(e){this._isAllDay!==e&&(this._isAllDay=e,void 0!==this.startDate&&this._initPresets())}},{kind:"get",key:"ruleText",value:function ruleText(){return this._ruleText}},{kind:"set",key:"ruleText",value:function ruleText(e){this._$scope.$evalAsync((()=>this._ruleText=e))}},{kind:"method",key:"showRecurringEditorAsync",value:async function showRecurringEditorAsync(){var e;if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.RecurringCards,!0))return;this.recurrenceRule=await this._dialogSrv.showRecurringEditorAsync(this.recurrenceRule,this.startDate,this.isAllDay);let t=A()(e=this._defaultPresets).call(e,(e=>e.string!==(this.recurrenceRule||null)));this._reloadPresets(t)}},{kind:"method",key:"isPresetSelected",value:function isPresetSelected(e){return!e.string&&!this.recurrenceRule||e.string===(this._normalizedRule||this.recurrenceRule||null)}},{kind:"method",key:"selectPreset",value:function selectPreset(e){e.string&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.RecurringCards,!0)||(this.recurrenceRule=e.string,e.isCustom||this._reloadPresets(!1))}},{kind:"method",key:"_initPresets",value:function _initPresets(){var e;if(this.recurrenceRule){let e=qn.fromString(this.recurrenceRule);this._normalizedRule=e.toString({onlyDate:this.isAllDay}),this.ruleText=Object(n.i)(e.toText())}else this._normalizedRule=null,this.ruleText=this._$translate.instant("DIALOGS.DEFAULT_RULE_TEXT");let t=c()(Qn).call(Qn,(e=>e.getJsWeekday()===this.startDate.getDay())),r=Math.floor(this.startDate.getDate()/7),i=[new qn({freq:qn.DAILY}),new qn({freq:qn.WEEKLY,byweekday:t}),new qn({freq:qn.MONTHLY,byweekday:t.nth(Jn[r])}),new qn({freq:qn.YEARLY,bymonth:this.startDate.getMonth()+1,bymonthday:this.startDate.getDate()}),new qn({freq:qn.WEEKLY,byweekday:[qn.MO,qn.TU,qn.WE,qn.TH,qn.FR]})];this._defaultPresets=[{text:this._$translate.instant("DIALOGS.DEFAULT_RULE_TEXT"),string:null},...R()(i).call(i,(e=>{let t=e.toString({onlyDate:this.isAllDay});return{text:Object(n.i)(e.toText()),string:t===this._normalizedRule?this.recurrenceRule:t}}))];let a=this.recurrenceRule&&A()(e=this._defaultPresets).call(e,(e=>e.string!==this.recurrenceRule));this._reloadPresets(a)}},{kind:"method",key:"_reloadPresets",value:function _reloadPresets(e){if((e||this._rulePresets.length!==this._defaultPresets.length)&&(this._rulePresets=re()(this._defaultPresets),e)){let e=qn.fromString(this.recurrenceRule);this._rulePresets.push({text:Object(n.i)(e.toText()),string:e.toString({onlyDate:this.isAllDay}),isCustom:!0})}}}]}}));function ResourcesMenuController_getDecoratorsApi(){ResourcesMenuController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ResourcesMenuController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ResourcesMenuController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ResourcesMenuController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ResourcesMenuController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ResourcesMenuController_createElementDescriptor(e){var t,r=ResourcesMenuController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ResourcesMenuController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ResourcesMenuController_hasDecorators(e){return e.decorators&&e.decorators.length}function ResourcesMenuController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ResourcesMenuController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ResourcesMenuController_toPropertyKey(e){var t=function ResourcesMenuController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let eo=function ResourcesMenuController_decorate(e,t,r,i){var a,n=ResourcesMenuController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ResourcesMenuController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ResourcesMenuController_isDataDescriptor(a.descriptor)||ResourcesMenuController_isDataDescriptor(i.descriptor)){if(ResourcesMenuController_hasDecorators(a)||ResourcesMenuController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ResourcesMenuController_hasDecorators(a)){if(ResourcesMenuController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ResourcesMenuController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ResourcesMenuController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$translate","$timeout","$mdMenu","appCommonSrv","licenseSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class ResourcesMenuController{constructor(t,r,i,a,n,o,s,l,d,h){e(this),this._$rootScope=t,this._$scope=r,this._$translate=i,this._$timeout=a,this._$mdMenu=n,this._appCommonSrv=o,this._licenseSrv=s,this._settingsSrv=l,this._telemetrySrv=d,this._trelloIntegrationSrv=h;this._appCommonSrv.isSchedulerInPreview()?(this._isMilestonesSelected=!1,this._resources=[],this._$scope.$on(x.n.BoardInitialized,(()=>this._loadResources()))):this._loadResources(),this._$scope.$on(x.n.BoardChanged,(()=>this._loadResources())),this._$scope.$on(x.n.ChangeSchedulerViewRequested,(()=>{let e=this._appCommonSrv.getTimelineResourcesType();this._loadedResourcesType!==e&&this._loadResources(e)})),this._$scope.$on(x.n.TimelineResourcesReloaded,((e,t)=>{t.eventSource!==this&&t.resourcesType===this._appCommonSrv.getTimelineResourcesType()&&this._loadResources()})),this._$scope.$on(x.n.TimelineResourcesReordered,((e,t)=>{this._loadResources()})),this._$scope.$on(x.n.TimelineResourceRemoveRequested,((e,t)=>{var r;if(t.isMilestones)return void(this.isMilestonesSelected&&this.switchMilestonesSelection());let i=c()(r=this.resources).call(r,(e=>e.id===t.resource.id));null!=i&&i.isSelected&&this.switchResourceSelection(i)})),this._isMilestonesSelectionChanged=!1,this._isResourcesSelectionChanged=!1,this._selectionStarted=!1}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"resourcesMenuCtrl"}},{kind:"get",key:"resourcesTypes",value:function resourcesTypes(){return this._resourcesTypes||(this._resourcesTypes=[{type:x.fb.NoResources},{type:x.fb.Members,title:this._$translate.instant("BUTTONS.MEMBERS"),addResourcesText:this._$translate.instant("MENU.INVITE_MEMBERS"),showAllText:this._$translate.instant("MENU.SHOW_ALL_MEMBERS"),showOnlyCurrentText:this._$translate.instant("MENU.SHOW_ONLY_CURRENT_MEMBER")},{type:x.fb.Calendars,title:this._$translate.instant("BUTTONS.BOARDS"),addResourcesText:this._$translate.instant("MENU.ADD_BOARDS"),showAllText:this._$translate.instant("MENU.SHOW_ALL_CALENDARS"),showOnlyCurrentText:this._$translate.instant("MENU.SHOW_ONLY_CURRENT_CALENDAR")},{type:x.fb.Lists,title:this._$translate.instant("BUTTONS.LISTS"),showAllText:this._$translate.instant("MENU.SHOW_ALL_LISTS"),showOnlyCurrentText:this._$translate.instant("MENU.SHOW_ONLY_DEFAULT_LIST")},{type:x.fb.Labels,title:this._$translate.instant("BUTTONS.LABELS"),showAllText:this._$translate.instant("MENU.SHOW_ALL_LABELS"),showOnlyCurrentText:this._$translate.instant("MENU.SHOW_ONLY_WITHOUT_LABELS")}]),this._resourcesTypes}},{kind:"get",key:"isResourcesTypesDisabled",value:function isResourcesTypesDisabled(){return this._selectionStarted}},{kind:"get",key:"selectedResourcesType",value:function selectedResourcesType(){var e;return c()(e=this.resourcesTypes).call(e,(e=>e.type===this._appCommonSrv.getTimelineResourcesType()))}},{kind:"get",key:"canAddResources",value:function canAddResources(){switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.NoResources:case x.fb.Lists:case x.fb.Labels:return!1;case x.fb.Members:let e=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId);return e&&!e.isReadOnly&&(e.memberships.get(this._currentMemberId)===x.rb.Admin||e.invitationLevel===x.lb.Members);case x.fb.Calendars:return!0}}},{kind:"method",key:"addResources",value:function addResources(){if(this.canAddResources)switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.Members:this._$rootScope.$broadcast(x.n.OpenMemberInviteDialogRequested),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineInviteMembersClicked);break;case x.fb.Calendars:this._$rootScope.$broadcast(x.n.OpenBoardsMenuRequested),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineAddBoardsClicked)}}},{kind:"get",key:"isSelectAllAvailable",value:function isSelectAllAvailable(){return this.selectedResourcesType.type!==x.fb.NoResources}},{kind:"get",key:"isSelectAllDisabled",value:function isSelectAllDisabled(){var e;return!!this.isMilestonesSelected&&A()(e=this.resources).call(e,(e=>e.isSelected))}},{kind:"method",key:"selectAll",value:function selectAll(){var e,t,r,i;if(!this.isSelectAllDisabled)if(this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0)){switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.Members:let a=S()(e=this.resources).call(e,(e=>e.id!==U.k)).length;if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimelineMember,!0,{paidLanesCount:a}))return void this._$mdMenu.hide();for(let e of this.resources)e.isSelected||(e.isSelected=!0,this._isResourcesSelectionChanged=!0);this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineMembersSelectedAll,{timelineMembersCount:this.resources.length});break;case x.fb.Calendars:for(let e of this.resources)e.isSelected||(e.isSelected=!0,this._isResourcesSelectionChanged=!0);this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineCalendarsSelectedAll,{timelineBoardsCount:S()(t=this.resources).call(t,(e=>e.resourceData.calendarType===x.d.TrelloBoard)).length,timelineGoogleCalendarsCount:S()(r=this.resources).call(r,(e=>e.resourceData.calendarType===x.d.GoogleCalendar)).length,timelineICalsCount:S()(i=this.resources).call(i,(e=>e.resourceData.calendarType===x.d.ICalCalendar)).length});break;case x.fb.Lists:for(let e of this.resources)e.isSelected||(e.isSelected=!0,this._isResourcesSelectionChanged=!0);this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineListsSelectedAll,{timelineListsCount:this.resources.length});break;case x.fb.Labels:for(let e of this.resources)e.isSelected||(e.isSelected=!0,this._isResourcesSelectionChanged=!0);this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineLabelsSelectedAll,{timelineLabelsCount:this.resources.length})}this._isMilestonesSelected=!0,this._isMilestonesSelectionChanged=!0,this._selectionStarted||this._processSelectionAsync()}else this._$mdMenu.hide()}},{kind:"get",key:"isSelectOnlyCurrentAvailable",value:function isSelectOnlyCurrentAvailable(){return this.selectedResourcesType.type!==x.fb.NoResources}},{kind:"get",key:"isSelectOnlyCurrentDisabled",value:function isSelectOnlyCurrentDisabled(){var e;if(this.isMilestonesSelected)return!1;let t=S()(e=this.resources).call(e,(e=>e.isSelected));if(1!==t.length)return!1;switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.Members:return t[0].id===this._currentMemberId;case x.fb.Calendars:return t[0].id===this._currentBoardId;case x.fb.Lists:return t[0].isDefaultList;case x.fb.Labels:return t[0].id===U.k}}},{kind:"method",key:"selectOnlyCurrent",value:function selectOnlyCurrent(){var e,t;if(!this.isSelectOnlyCurrentDisabled){switch(this._isMilestonesSelected=!1,this._isMilestonesSelectionChanged=!0,this._appCommonSrv.getTimelineResourcesType()){case x.fb.Members:for(let e of this.resources){let t=e.id===this._currentMemberId;e.isSelected!==t&&(e.isSelected=t,this._isResourcesSelectionChanged=!0)}this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineMembersSelectedOnlyCurrent);break;case x.fb.Calendars:for(let e of this.resources){let t=e.resourceData.calendarType===x.d.TrelloBoard&&e.id===this._currentBoardId;e.isSelected!==t&&(e.isSelected=t,this._isResourcesSelectionChanged=!0)}this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineCalendarsSelectedOnlyCurrent);break;case x.fb.Lists:for(let e of this.resources){let t=e.isDefaultList;e.isSelected!==t&&(e.isSelected=t,this._isResourcesSelectionChanged=!0)}this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineListsSelectedOnlyDefault,{timelineListsCount:S()(e=this.resources).call(e,(e=>e.isDefaultList)).length});break;case x.fb.Labels:for(let e of this.resources){let t=e.id===U.k;e.isSelected!==t&&(e.isSelected=t,this._isResourcesSelectionChanged=!0)}this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineLabelsSelectedOnlyDefault,{timelineLabelsCount:S()(t=this.resources).call(t,(e=>e.id===U.k)).length})}this._selectionStarted||this._processSelectionAsync()}}},{kind:"get",key:"isMilestonesSelected",value:function isMilestonesSelected(){return this._isMilestonesSelected}},{kind:"method",key:"switchMilestonesSelection",value:function switchMilestonesSelection(){this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0)?(this._isMilestonesSelected=!this._isMilestonesSelected,this._isMilestonesSelectionChanged=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineMilestoneLaneChanged,{isMilestonesShown:this._isMilestonesSelected}),this._selectionStarted||this._processSelectionAsync()):this._$mdMenu.hide()}},{kind:"get",key:"searchPlaceholder",value:function searchPlaceholder(){switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.Members:return this._$translate.instant("MENU.MEMBERS_SEARCH_PLACEHOLDER");case x.fb.Calendars:return this._$translate.instant("MENU.BOARDS_SEARCH_PLACEHOLDER");case x.fb.Lists:return this._$translate.instant("MENU.LISTS_SEARCH_PLACEHOLDER");case x.fb.Labels:return this._$translate.instant("MENU.LABELS_SEARCH_PLACEHOLDER");default:return""}}},{kind:"get",key:"resources",value:function resources(){return this._resources}},{kind:"method",key:"switchResourceSelection",value:function switchResourceSelection(e){var t,r,i,a,n,o;switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.Members:if(e.id!==U.k){var s;let t=S()(s=this.resources).call(s,(e=>e.id!==U.k&&e.isSelected)).length;if(e.isSelected?t-=1:(t+=1,e.id!==this._currentMemberId&&1===this._licenseSrv.getMaxMemberLanes()&&(t+=1)),!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimelineMember,!0,{paidLanesCount:t}))return void this._$mdMenu.hide()}e.isSelected=!e.isSelected,this._isResourcesSelectionChanged=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineMembersChanged,{timelineMembersCount:S()(t=this.resources).call(t,(e=>e.isSelected)).length});break;case x.fb.Calendars:e.isSelected=!e.isSelected,this._isResourcesSelectionChanged=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineCalendarsChanged,{timelineBoardsCount:S()(r=this.resources).call(r,(e=>e.isSelected&&e.resourceData.calendarType===x.d.TrelloBoard)).length,timelineGoogleCalendarsCount:S()(i=this.resources).call(i,(e=>e.isSelected&&e.resourceData.calendarType===x.d.GoogleCalendar)).length,timelineICalsCount:S()(a=this.resources).call(a,(e=>e.isSelected&&e.resourceData.calendarType===x.d.ICalCalendar)).length});break;case x.fb.Lists:e.isSelected=!e.isSelected,this._isResourcesSelectionChanged=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineListsChanged,{timelineListsCount:S()(n=this.resources).call(n,(e=>e.isSelected)).length});break;case x.fb.Labels:e.isSelected=!e.isSelected,this._isResourcesSelectionChanged=!0,this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineLabelsChanged,{timelineLabelsCount:S()(o=this.resources).call(o,(e=>e.isSelected)).length})}this._selectionStarted||this._processSelectionAsync()}},{kind:"get",key:"isInDebug",value:function isInDebug(){return!1}},{kind:"method",key:"resetSort",value:function resetSort(){}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}},{kind:"method",key:"_loadResources",value:function _loadResources(e=this._appCommonSrv.getTimelineResourcesType()){this._loadedResourcesType=e;let t=this._appCommonSrv.getTimelineResources(e);switch(e){case x.fb.Lists:this._resources=R()(t).call(t,(e=>{var t;let r=this._trelloIntegrationSrv.getTrelloListById(e.id),i=this._trelloIntegrationSrv.getTrelloBoardById(r.boardId);return{...e,boardId:r.boardId,isDefaultList:r.id===(i.defaultListId||(null===(t=i.lists[0])||void 0===t?void 0:t.id))}}));break;default:this._resources=t}this._isMilestonesSelectionChanged||(this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!1)?this._isMilestonesSelected=this._globalBoardSettings.isMilestonesShown:this._isMilestonesSelected=!1)}},{kind:"method",key:"_processSelectionAsync",value:async function _processSelectionAsync(){if(this._appCommonSrv.isSchedulerUnavailable())return;let e=this._isMilestonesSelectionChanged||this._isResourcesSelectionChanged;this._isMilestonesSelectionChanged&&(this._globalBoardSettings.isMilestonesShown=this.isMilestonesSelected,this._isMilestonesSelectionChanged=!1);let t=this._appCommonSrv.getTimelineResourcesType();if(this._isResourcesSelectionChanged){var r,i;let e=R()(r=S()(i=this.resources).call(i,(e=>!e.isSelected))).call(r,(e=>e.id));this._globalBoardSettings.timelineHiddenResources[t]=e,this._isResourcesSelectionChanged=!1}if(e){this._selectionStarted=!0;try{this._appCommonSrv.setSchedulerBusy(!0),await this._settingsSrv.saveGlobalAsync()}finally{this._appCommonSrv.setSchedulerBusy(!1)}return this._processSelectionAsync()}this._selectionStarted&&(this._selectionStarted=!1,this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:t,eventSource:this}))}}]}}));function ScalesMenuController_getDecoratorsApi(){ScalesMenuController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ScalesMenuController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ScalesMenuController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ScalesMenuController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ScalesMenuController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ScalesMenuController_createElementDescriptor(e){var t,r=ScalesMenuController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ScalesMenuController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ScalesMenuController_hasDecorators(e){return e.decorators&&e.decorators.length}function ScalesMenuController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ScalesMenuController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ScalesMenuController_toPropertyKey(e){var t=function ScalesMenuController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let to=function ScalesMenuController_decorate(e,t,r,i){var a,n=ScalesMenuController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ScalesMenuController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ScalesMenuController_isDataDescriptor(a.descriptor)||ScalesMenuController_isDataDescriptor(i.descriptor)){if(ScalesMenuController_hasDecorators(a)||ScalesMenuController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ScalesMenuController_hasDecorators(a)){if(ScalesMenuController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ScalesMenuController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ScalesMenuController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["appCommonSrv"])],(function(e){return{F:class ScalesMenuController{constructor(t){e(this),this._appCommonSrv=t}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"scalesMenuCtrl"}},{kind:"get",key:"schedulerWidget",value:function schedulerWidget(){return this._schedulerWidget}},{kind:"get",key:"isScaleAvailable",value:function isScaleAvailable(){let e=this.schedulerWidget.view();return!!e&&e.isScaleAvailable}},{kind:"get",key:"isScaleOutEnabled",value:function isScaleOutEnabled(){return this.schedulerWidget.view().getScale()<x.gb.Max}},{kind:"get",key:"isScaleInEnabled",value:function isScaleInEnabled(){return this.schedulerWidget.view().getScale()>x.gb.Min}},{kind:"method",key:"changeScale",value:function changeScale(e){this._appCommonSrv.isSchedulerUnavailable()||this.schedulerWidget.view().changeScale(e)}}]}}));var ro=r(183),io=r.n(ro),ao=r(79),no=r.n(ao),oo=r(163),so=r.n(oo);class CardDragHelper_CardDragHelper{constructor(e){this._isDragging=!1,this._checkDrag=e.checkDrag,this._processDragAsync=e.processDragAsync,this._getSortOrderField=e.getSortOrderField}get _appCommonSrv(){return this._appCommonSrvLazy||(this._appCommonSrvLazy=CustomScheduler_CustomScheduler.$injector.get("appCommonSrv")),this._appCommonSrvLazy}get _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=CustomScheduler_CustomScheduler.$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}get _googleIntegrationSrv(){return this._googleIntegrationSrvLazy||(this._googleIntegrationSrvLazy=CustomScheduler_CustomScheduler.$injector.get("googleIntegrationSrv")),this._googleIntegrationSrvLazy}startDragging(e,t,r,i,a){this._originCards=a,this._originCard=e,this._workWeek=r,this._sortOrderField=this._getSortOrderField(),this._startSlotTime=i.time,this._startSlotIsDaySlot=i.isDaySlot,this._startSlotResourceId=i.resourceId,this._targetSlotTime=i.time,this._targetSlotIsDaySlot=i.isDaySlot,this._targetSlotResourceId=i.resourceId,this._lastTypeSlotTime=i.time,this._lastTypeSlotIsDaySlot=i.isDaySlot,this._cards={};for(let i of t){let t=this._trelloIntegrationSrv.getTrelloBoardById(i.boardId),a=!t||t.defaultCardIsAllDay?G.b:t.defaultCardDuration,o=Object(n.v)(i.realStart,i.realEnd,r);switch(i.cardType){case x.h.TrelloTimeRecord:i.isAllDay&&(a=i.durationMinutes,o.ms=1e3*i.durationMinutes,o.minutes=i.durationMinutes)}let s={isOriginCard:i.uid===e.uid,isMilestone:i.isMilestone,isRecurring:i.isRecurring(),start:i.realStart,originStart:i.realStart,newStart:i.realStart,end:i.realEnd,originEnd:i.realEnd,newEnd:i.realEnd,isAllDay:i.realIsAllDay,originIsAllDay:i.realIsAllDay,isSingleDate:i.isSingleDate,isMultiDay:()=>i.isMultiDay(),defaultDuration:a,durations:o,cardType:i.cardType,boardId:i.boardId};this._sortOrderField&&(s.sortOrder=i[this._sortOrderField]),s.originDurations={...s.durations},this._cards[i.uid]=s}this._isDragging=!0,this._cardTypesByResourceId={}}drag(e){if(this._isDragging&&(!Object(n.w)(e.time,this._targetSlotTime)||e.isDaySlot!==this._targetSlotIsDaySlot||e.resourceId!==this._targetSlotResourceId))if(this._targetSlotTime=e.time,this._targetSlotIsDaySlot=e.isDaySlot,this._canDrag(e.resourceId)&&(this._targetSlotResourceId=e.resourceId),e.isDaySlot!==this._lastTypeSlotIsDaySlot)if(e.isDaySlot!==this._startSlotIsDaySlot){this._lastTypeSlotTime=e.time,this._lastTypeSlotIsDaySlot=e.isDaySlot;let t=Object(n.v)(Object(n.O)(this._originCard.start),Object(n.O)(e.time),this._workWeek);for(let r in this._cards){let i=this._cards[r],a=this._getWorkTimeStart(i.originStart),o=!1;if(e.isDaySlot)i.isMultiDay()!==e.isDaySlot?(o=!0,i.isAllDay=!0,i.newStart=this._addWorkDays(Object(n.O)(a),t.days,!0)):i.newStart=this._addWorkDays(a,t.days,!0),i.newEnd=this._addWorkDays(i.newStart,i.durations.days,!0);else if(i.isMultiDay()!==e.isDaySlot){o=!0,i.isAllDay=e.isDaySlot,i.newStart=this._addWorkDays(Object(n.Eb)(a,e.time),t.days,!0);let r=i.durations.minutes;(r<0||r>=1440||i.originIsAllDay)&&(r=i.isSingleDate?0:i.defaultDuration),i.newEnd=this._addWorkMinutes(i.newStart,r)}else i.newStart=this._addWorkDays(a,t.days,!0),i.newEnd=this._addWorkDays(i.newStart,i.durations.days);i.start=i.newStart,i.end=i.newEnd,o&&(i.durations=Object(n.v)(i.start,i.end,this._workWeek))}}else{this._targetSlotTime=this._startSlotTime,this._targetSlotIsDaySlot=this._startSlotIsDaySlot,this._lastTypeSlotTime=this._startSlotTime,this._lastTypeSlotIsDaySlot=this._startSlotIsDaySlot;for(let e in this._cards){let t=this._cards[e];t.start=t.originStart,t.newStart=t.start,t.end=t.originEnd,t.newEnd=t.end,t.isAllDay=t.originIsAllDay,t.durations=t.originDurations}this.drag(e)}else{let t=Object(n.v)(this._lastTypeSlotTime,e.time,this._workWeek);for(let r in this._cards){let i=this._cards[r],a=this._getWorkTimeStart(i.start);if(e.isDaySlot)t.days?i.isAllDay?(i.newStart=this._addWorkDays(a,t.days,!0),i.newEnd=this._addWorkDays(i.newStart,i.durations.days,!0)):(i.newStart=this._addWorkDays(a,t.days,!0),i.newEnd=this._addWorkMinutes(i.newStart,i.durations.minutes)):(i.newStart=i.start,i.newEnd=i.end);else if(i.isAllDay)t.days?(i.newStart=this._addWorkDays(a,t.days,!0),i.newEnd=this._addWorkDays(i.newStart,i.durations.days,!0)):(i.newStart=i.start,i.newEnd=i.end);else if(t.minutes){let e=i.durations.minutes;this._targetSlotResourceId!==this._startSlotResourceId&&i.isMilestone&&(e=i.defaultDuration),i.newStart=this._addWorkMinutes(a,t.minutes,!0),i.newEnd=this._addWorkMinutes(i.newStart,e)}else i.newStart=i.start,i.newEnd=i.end}}}getDraggedCard(e){var t;if(!this._isDragging)return null;let r=this._cards[e],i=this._targetSlotResourceId!==this._startSlotResourceId?this._targetSlotResourceId:void 0,a={isOriginCard:r.isOriginCard,start:r.newStart,end:r.newEnd,isAllDay:r.isAllDay};return i&&null!==(t=this._cardTypesByResourceId[i])&&void 0!==t&&t.has(r.cardType)&&(i===U.v?r.cardType!==x.h.TrelloCard||r.isRecurring||(a.cardRole=me.c.Milestone,a.end=a.start):r.cardType===x.h.GoogleEvent&&r.isRecurring||(a.cardRole=me.c.Card,a.resourceId=i)),a}async stopDraggingAsync(e){if(!this._isDragging)return;if(!e)return void(this._isDragging=!1);let t=[];for(let e in this._cards)t.push({uid:e,...this.getDraggedCard(e)});if(this._isDragging=!1,Object(n.w)(this._startSlotTime,this._targetSlotTime)&&this._startSlotIsDaySlot===this._targetSlotIsDaySlot&&this._startSlotResourceId===this._targetSlotResourceId)return;let r=new P.a(((e,r)=>{this._checkDrag(t,e,r)&&r()}));try{let e=await r;return this._processDragAsync(e),R()(e).call(e,(e=>e.event))}catch(e){}}async stopDraggingTimelineAsync(e,t,r){var i;if(!this._isDragging)return[];if(!e)return this._isDragging=!1,[];let a=R()(i=S()(t).call(t,(e=>{var t;let r=c()(t=this._originCards).call(t,(t=>t.uid===e.uid));return!!r&&((!this._sortOrderField||e[this._sortOrderField]!==r[this._sortOrderField])&&!(e.isRecurring&&e.isRecurring()&&!e.isException()))}))).call(i,(e=>{let t={uid:e.uid,title:e.title,start:e.realStart,end:e.realEnd,isAllDay:e.isAllDay};return this._sortOrderField&&(t[this._sortOrderField]=e[this._sortOrderField]),t})),n=[];for(let e in this._cards){let t={uid:e,...this.getDraggedCard(e)};this._sortOrderField&&(t[this._sortOrderField]=c()(r).call(r,(t=>t.item.data.uid===e)).item.data[this._sortOrderField]),n.push(t)}const o=[...n,...a];this._isDragging=!1;const s=new P.a(((e,t)=>{this._checkDrag(o,e,t)&&t()}));try{let e=await s;return this._processDragAsync(e),R()(e).call(e,(e=>e.event))}catch(e){}return[]}_canDrag(e){if(!e)return!0;let t,r=J()(this._cards);if(xe()(r).call(r,(t=>(t.cardType===x.h.TrelloCustomField||t.cardType===x.h.TrelloCheckItem)&&e===U.v)))return!1;if(e===U.v)return this._cardTypesByResourceId[e]=new M.a([x.h.TrelloCard]),!0;switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.NoResources:case x.fb.Members:return this._cardTypesByResourceId[e]=new M.a([x.h.TrelloCard]),xe()(r).call(r,(e=>e.cardType===x.h.TrelloCustomField))&&this._cardTypesByResourceId[e].add(x.h.TrelloCustomField),xe()(r).call(r,(e=>e.cardType===x.h.TrelloCheckItem))&&this._cardTypesByResourceId[e].add(x.h.TrelloCheckItem),xe()(r).call(r,(e=>e.cardType===x.h.TrelloTimeRecord))&&e!==U.k&&this._cardTypesByResourceId[e].add(x.h.TrelloTimeRecord),!0;case x.fb.Calendars:if(t=this._trelloIntegrationSrv.getTrelloBoardById(e),t)return this._cardTypesByResourceId[e]=new M.a([x.h.TrelloCard]),xe()(r).call(r,(e=>e.cardType===x.h.TrelloCustomField))&&this._cardTypesByResourceId[e].add(x.h.TrelloCustomField),!t.isReadOnly;let i=this._googleIntegrationSrv.getGoogleCalendarById(e);return!!i&&(this._cardTypesByResourceId[e]=new M.a([x.h.GoogleEvent]),!i.isReadOnly);case x.fb.Lists:this._cardTypesByResourceId[e]=new M.a([x.h.TrelloCard]),xe()(r).call(r,(e=>e.cardType===x.h.TrelloCustomField))&&this._cardTypesByResourceId[e].add(x.h.TrelloCustomField);let a=this._trelloIntegrationSrv.getTrelloListById(e);return t=this._trelloIntegrationSrv.getTrelloBoardById(null==a?void 0:a.boardId),t&&!t.isReadOnly;case x.fb.Labels:return this._cardTypesByResourceId[e]=new M.a([x.h.TrelloCard]),xe()(r).call(r,(e=>e.cardType===x.h.TrelloCustomField))&&this._cardTypesByResourceId[e].add(x.h.TrelloCustomField),xe()(r).call(r,(e=>e.cardType===x.h.TrelloCheckItem))&&this._cardTypesByResourceId[e].add(x.h.TrelloCheckItem),xe()(r).call(r,(e=>e.cardType===x.h.TrelloTimeRecord))&&this._cardTypesByResourceId[e].add(x.h.TrelloTimeRecord),!0}}_addWorkDays(e,t,r=!1){if(!this._workWeek)return Object(n.a)(e,t);let i=e.getDay(),a=Object(n.sb)(i,this._workWeek);r=r||!Object(n.lb)(e);let o=0;for(;t>0||!a&&r;)o++,a&&t--,i===this._workWeek.end&&(a=!1),i++,7===i&&(i=0),i===this._workWeek.start&&(a=!0);for(;t<0;)o--,i===this._workWeek.start&&(a=!1),i--,-1===i&&(i=6),i===this._workWeek.end&&(a=!0),a&&t++;return Object(n.a)(e,o)}_addWorkMinutes(e,t,r){let i=jr()(t/1440),a=t%1440,o=Object(n.c)(this._addWorkDays(e,i,r||!!a),a);return this._findNearestWorkDay(o,t>0)}_getWorkTimeStart(e){return Object(n.sb)(e.getDay(),this._workWeek)?e:this._findNearestWorkDay(Object(n.O)(e),!0)}_findNearestWorkDay(e,t){let r=e.getDay();if(Object(n.sb)(r,this._workWeek))return e;if(t&&Object(n.lb)(e)){let t=r>0?r-1:6;if(Object(n.sb)(t,this._workWeek))return e}let i=0;if(t)for(;r!==this._workWeek.start;)i++,r++,7===r&&(r=0);else for(;r!==this._workWeek.end;)i--,r--,-1===r&&(r=6);return Object(n.a)(e,i)}}kendo.ui.Scheduler.fn.events.push("selectionStart");class CustomScheduler_CustomScheduler extends kendo.ui.Scheduler{constructor(e,t){const r=CustomScheduler_CustomScheduler.$injector.get("$translate");kendo.data.ObservableObject.prototype.init=function(e){kendo.Observable.fn.init.call(this),this._handlers={};for(let t in e)"_"!==t.charAt(0)&&(this[t]=e[t]);void 0!==e.cardType&&(e.id?this.uid=e.id:e.recurrenceId&&(this.uid=`${e.recurrenceId}-${e.start-e.previousStart}`),e.title||(this.title=r.instant("MISC.NO_TITLE"))),this.uid||(this.uid=kendo.guid())},kendo.data.ObservableObject.prototype.toJSON=function(){let e={};for(let t in this)if(this.shouldSerialize(t)){let r=this[t];r instanceof kendo.data.ObservableObject||r instanceof kendo.data.ObservableArray?r=r.toJSON():r instanceof M.a?r=new M.a(r):_n()(r)&&(r=[...r]),e[t]=r}return e},kendo.data.ObservableArray.prototype.includes=function(e){return xe()(this).call(this,(t=>t===e))},kendo.data.Model.prototype.init=function(e){if((!e||!(e instanceof G.a)&&a.a.isEmptyObject(e))&&(e=a.a.extend({},this.defaults,e),this._initializers))for(let t=0;t<this._initializers.length;t++){let r=this._initializers[t];e[r]=this.defaults[r]()}kendo.data.ObservableObject.prototype.init.call(this,e),this.dirty=!1,this.idField&&(this.id=this.get(this.idField),void 0===this.id&&(this.id=this._defaultId))};const i=kendo.data.Model.prototype.accept;kendo.data.Model.prototype.accept=function(e){i.call(this,e),void 0!==e.cardType&&(e.id?this.uid=e.id:e.recurrenceId&&(this.uid=`${e.recurrenceId}-${e.start-e.previousStart}`),e.title||(this.title=r.instant("MISC.NO_TITLE")))},kendo.data.SchedulerEvent.prototype.clone=function(e,t){let i={__proto__:this.__proto__,...this,...e};return t?i.id?i.uid=i.id:i.recurrenceId&&(i.uid=`${i.recurrenceId}-${i.start-i.previousStart}`):i.uid=this.uid,i.title||(i.title=r.instant("MISC.NO_TITLE")),i},kendo.data.SchedulerEvent.prototype.deepClone=function(){let e=this.clone();for(let t in e){let r=e[t];r instanceof M.a?e[t]=new M.a(r):_n()(r)&&(e[t]=[...r])}return e},kendo.data.SchedulerDataSource.prototype.pushUpdate=function(e){_n()(e)||(e=[e]);let t=[];for(let r of e){if(!(r instanceof G.a))continue;let e=this._createNewModel(r),i=this.get(e.id);i?(i._startTime&&(i._startTime=kendo.date.toUtcTime(r.start)),i._endTime&&(i._endTime=kendo.date.toUtcTime(r.end)),t.push(i),i.accept(r),i.trigger("change"),this._updatePristineForModel(i,r)):this.pushCreate(r)}t.length>0&&this.trigger("push",{type:"update",items:t})},kendo.data.SchedulerDataSource.prototype._addExceptionDate=function(){},kendo.data.SchedulerDataSource.prototype._removeExceptionDate=function(){},kendo.data.SchedulerDataSource.prototype._removeExceptions=function(){},kendo.data.SchedulerDataSource.prototype.expand=function(e,t){var r,i;let a=this.view();if(!e||!t)return a;let o=t.getTimezoneOffset();(t=new Date(t.getTime()+kendo.date.MS_PER_DAY-1)).getTimezoneOffset()!==o&&(t=kendo.timezone.apply(t,o));let s={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+kendo.date.MS_PER_DAY-1)},{field:"end",operator:"gte",value:e}]}]},l=new Array(a.length),d=!1;for(let r=0;r<a.length;r++){let i=a[r];if(i.recurrenceRule){l[r]=i.customExpand?i.customExpand(e,t):i.expand(e,t,this.reader.timezone);for(let e of l[r])e.recurrenceHeadRule=i.recurrenceRule;d=!0}else l[r]=i}var c;d&&(l=so()(c=[]).call(c,...l));for(let e of l)e.realStart=e.start,e.realEnd=e.end,e.realIsAllDay=e.isAllDay;return We()(r=S()(i=new kendo.data.Query(l)).call(i,s)).call(r,Object(n.U)()).toArray()},kendo.ui.SchedulerView.prototype._shouldInverseResourceColor=function(){return!1},kendo.support.isRtl=function(){return!1},kendo.ui.SchedulerView.prototype.current=function(e){if(void 0===e)return this._current;this._current=e},super(e,t)}view(e){let t,r,i=super.view();if(!e)return i;if(i.name===e){let e=a()(".k-scheduler-content",this.element);t=e.scrollTop(),r=e.scrollLeft()}super.view(e);let n=a()(".k-scheduler-content",this.element);t&&n.scrollTop(t),r&&n.scrollLeft(r)}refresh(e={}){let t=this.view();t&&("itemchange"===e.action&&this._preventRefresh||this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(this._data=this.dataSource.expand(t.startDate(),t.visibleEndDate()),t.render(this._data),this.trigger("dataBound")))}removeEvent(e){let t="string"==typeof e?this.occurrenceByUid(e):e;t&&this.options.remove({event:t})}isEventsSelected(){return this._selection&&this._selection.events.length>0}getSelectedEvents(){var e,t;return this.isEventsSelected()?S()(e=R()(t=this._selection.events).call(t,(e=>this.occurrenceByUid(e)))).call(e,(e=>e)):[]}slotByElement(e){var t;let r=null===(t=a()(e)[0])||void 0===t?void 0:t.getBoundingClientRect();if(r)return this.slotByPosition(r.left+r.width/2,r.top+r.height/2)}_initModel(){var e;this._model=kendo.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""}),no()(e=this._model).call(e,"change",(e=>{"selectedDate"===e.field&&this.view().name!==x.O.Timeline&&this.view(this._selectedViewName)}))}_progress(){}_toolbar(){this.toolbar=a()()}_initializeView(e){let t=this.views[e],r=a.a.extend(!0,{},this.options,t,{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode});return delete r.name,delete r.prefix,delete r.remove,delete r.edit,delete r.add,delete r.navigate,t.type(this.wrapper,r)}_resources(){let e=this.options.resources;for(let t=0;t<e.length;t++){let r=e[t],i=r.field;if(!i||!r.dataSource)throw new Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');let a=kendo.data.DataSource.create(r.dataSource);this.resources.push({field:i,name:r.name||i,title:r.title||i,dataTextField:r.dataTextField||"text",dataValueField:r.dataValueField||"value",dataColorField:r.dataColorField||"color",valuePrimitive:null===r.valuePrimitive||r.valuePrimitive,multiple:r.multiple||!1,dataSource:a}),a.fetch()}}_selectView(e){if(e&&this.views[e]){var t,r,i,a;this._selectedView&&this._unbindView(this._selectedView);let n=this._selectedView;this._selectedView=this._renderView(e),null===(t=(r=this._selectedView).setCardDragHelper)||void 0===t||t.call(r,this._cardDragHelper),null===(i=(a=this._selectedView).applyPreviousViewOptions)||void 0===i||i.call(a,n),this._selectedViewName=e}}get _selection(){let e=this.view();if(e)return e.name===x.O.Timeline?{events:e.getSelection()}:this._kendoSelection}set _selection(e){this._kendoSelection=e}_mouseDownSelection(e){0===e.button&&(this._ctrlKey=e.ctrlKey,this._shiftKey=e.shiftKey,this._commandKey=e.metaKey,this._createSelection(e.currentTarget)),this._selection||this._userTouched||this._selectFirstSlot(),this._select()}_createSelection(e){this._ctrlKey=this._ctrlKey||this._shiftKey||this._commandKey;let t=a()(e).data("uid");if(t){let e=this.occurrenceByUid(t);if(!e||e.isRecurring()&&!e.isException())return void(this._ctrlKey||this.select(null))}super._createSelection(e),this.trigger("selectionStart",{isMultiselect:this._ctrlKey,selectedCount:this._selection.events.length})}_updateSelection(e,t,r){super._updateSelection(e,t,r);let i=this.view();i.name===x.O.Timeline&&i.select({events:t})}_adjustSelectedDate(){}_keydown(){}_tabIndex(){}_movable(){var e,t,r,i;const n=a()("body");let o,s,l,d,c,h,u,p=[];this._moveDraggable=new kendo.ui.Draggable(this.element,{distance:0,filter:".k-event",ignore:".k-resize-handle",holdToDrag:!1,autoScroll:!0}),this._cardDragHelper=new CardDragHelper_CardDragHelper({checkDrag:(e,t,r)=>this.trigger("moveEnd",{success:t,failure:r,eventsToMove:R()(e).call(e,(e=>{let t={event:this.occurrenceByUid(e.uid).deepClone(),isOriginCard:e.isOriginCard,isAllDay:e.isAllDay,start:e.start,end:e.end},r=this._getCardSortOrderField();return r&&(t[r]=e[r]),e.cardRole&&(t.cardRole=e.cardRole),e.resourceId&&(t.resourceId=e.resourceId),t}))}),processDragAsync:async e=>{let t=e.length>1;t&&this.options.$scope.$emit(x.n.CardsReloadRequested),await P.a.all(R()(e).call(e,(e=>this._updateEvent(null,e.event,e)))),t&&this.options.$scope.$emit(x.n.CardsReloaded)},getSortOrderField:()=>this._getCardSortOrderField()}),no()(e=this._moveDraggable).call(e,"dragstart",(e=>{if(o=this.view(),o.name===x.O.Timeline)return;let t=o.showWorkDays?{start:this.options.workWeekStart,end:this.options.workWeekEnd}:void 0;var r;(s=this.occurrenceByUid(e.currentTarget.data("uid")),l=s.deepClone(),this.isEventsSelected())?p=R()(r=this._selection.events).call(r,(e=>this.occurrenceByUid(e).clone())):p=[l];if(d=o._slotByPosition(e.x.startLocation,e.y.startLocation),c=d.startOffset(e.x.startLocation,e.y.startLocation,this.options.snap),h=d,!d||this.trigger("moveStart",{event:s}))return void e.preventDefault();let i,a=o.groupedResources[0];a&&(i=o._resourceBySlot(d)[a.field],a.multiple&&(i=i[0])),this._cardDragHelper.startDragging(s,p,t,{time:kendo.timezone.toLocalDate(c),isDaySlot:d.isDaySlot,resourceId:i}),n.addClass("pw--moving-calendar-card")})),no()(t=this._moveDraggable).call(t,"drag",(e=>{if(o.name===x.O.Timeline)return;let t=o._slotByPosition(e.x.location,e.y.location);if(!t)return;u=t.startOffset(e.x.location,e.y.location,this.options.snap);let r,i,a=o.groupedResources[0];a&&(r=o._resourceBySlot(t)[a.field],a.multiple&&(r=r[0])),this._cardDragHelper.drag({time:kendo.timezone.toLocalDate(u),isDaySlot:t.isDaySlot,resourceId:r});for(let e of p){let t,r=this._cardDragHelper.getDraggedCard(e.uid);if(e.start=r.start,e.end=r.end,e.isAllDay=r.isAllDay,r.resourceId){var n;if(!i)i=R()(n=a.dataSource.view()).call(n,(e=>e[a.dataValueField]));t=[_()(i).call(i,r.resourceId)]}else{var s,l;let r=R()(s=S()(l=o.groups).call(l,(t=>{var r;return xe()(r=t._continuousEvents).call(r,(t=>e.uid===t.uid))}))).call(s,(e=>e._index));r.length>0&&(t=r)}o._updateMoveHint(e,t)}h=t})),no()(r=this._moveDraggable).call(r,"dragend",(async e=>{o.name!==x.O.Timeline&&(n.removeClass("pw--moving-calendar-card"),o._removeMoveHint(),await this._cardDragHelper.stopDraggingAsync(!0),p=[])})),no()(i=this._moveDraggable).call(i,"dragcancel",(async()=>{o.name!==x.O.Timeline&&(n.removeClass("pw--moving-calendar-card"),this.view()._removeMoveHint(),await this._cardDragHelper.stopDraggingAsync(!1),p=[])}))}_updateEvent(e,t,r){e&&(r=this.view().adjustUpdateEventData(e,t,r));if((()=>{var e,i;if(r.cardRole&&t.cardRole!==r.cardRole)return!0;if(t.isAllDay!==r.isAllDay)return!0;if(!Object(n.w)(t.start,r.start)||!Object(n.w)(t.end,r.end))return!0;let a=this._getCardSortOrderField();return!(!a||t[a]===r[a])||(!(!r.calendarId||r.calendarId===t.boardId)||(!(!r.listId||r.listId===t.listId)||(!(!r.members||r.members.length===t.memberIds.size&&!xe()(e=r.members).call(e,(e=>!t.memberIds.has(e))))||!(!r.labelIds||r.labelIds.size===t.labelIds.size&&!xe()(i=[...r.labelIds]).call(i,(e=>!t.labelIds.has(e)))))))})())return this.options.update({event:t,updateData:r,isResize:!!e})}_getCardSortOrderField(){var e;return null===(e=this.view().groupedResources[0])||void 0===e?void 0:e.cardSortOrderField}}const lo=17,co="pw-scheduler-range-highlight",ho=30;class SchedulerWeekView_SchedulerWeekView extends kendo.ui.MultiDayView{constructor(e,t){t.dateHeaderTemplate=kendo.template('\n    <div class="k-scheduler-header-date-and-duration">\n        <div class="k-scheduler-header-date">\n            <div>#=kendo.toString(data.date, "ddd")#</div>\n            <div>#=kendo.toString(data.date, "dd")#</div>\n        </div>\n\n        <div\n            class="k-scheduler-header-duration"\n            data-dt="#=kendo.toString(data.date, \'u\')#"\n        ></div>\n    </div>\n',{useWithBlock:!1}),t.majorTimeHeaderTemplate=kendo.template('\n    <span>#=kendo.toString(data.date, "ts1")#</span>\n',{useWithBlock:!1}),t.$translate=CustomScheduler_CustomScheduler.$injector.get("$translate"),t.minorTickCount=2,t.eventHeight=22,t.visibleDayCount=t.visibleDayCount||1,t.currentTimeMarker={updateInterval:6e4},super(e,t),this.name=this.options.viewName,this._allDayEventHeight=this.options.eventHeight,this._allDayEventIndent=this._allDayEventHeight,this._allDayContainerHeight=0,this._workWeek=this._appCommonSrv.getSchedulerWorkWeek()}get _appCommonSrv(){return this._appCommonSrvLazy||(this._appCommonSrvLazy=CustomScheduler_CustomScheduler.$injector.get("appCommonSrv")),this._appCommonSrvLazy}get _calendarCardsSrv(){return this._calendarCardsSrvLazy||(this._calendarCardsSrvLazy=CustomScheduler_CustomScheduler.$injector.get("calendarCardsSrv")),this._calendarCardsSrvLazy}get isTimeAvailable(){return!0}get isHideWeekendsAvailable(){return this.options.viewName===x.O.Week}get isScaleAvailable(){return!1}get selectedDate(){var e;return(null===(e=this._schedulerWidget)||void 0===e?void 0:e.date())||this.options.date}isVisibleDate(e){return Object(n.ob)(e,this.startDate(),this.endDate())}get navigationActions(){if(!this._navigationActions)switch(this.options.viewName){case x.O.OneDay:case x.O.ThreeDay:this._navigationActions={leftActions:[{type:x.x.PreviousDay,icon:"mdi-chevron-left",tooltip:"TOOLTIPS.DAY_BACKWARD"}],rightActions:[{type:x.x.NextDay,icon:"mdi-chevron-right",tooltip:"TOOLTIPS.DAY_FORWARD"}]};break;case x.O.Week:this._navigationActions={leftActions:[{type:x.x.PreviousWeek,icon:"mdi-chevron-double-left",tooltip:"TOOLTIPS.WEEK_BACKWARD"},{type:x.x.PreviousDay,icon:"mdi-chevron-left",tooltip:"TOOLTIPS.DAY_BACKWARD"}],rightActions:[{type:x.x.NextDay,icon:"mdi-chevron-right",tooltip:"TOOLTIPS.DAY_FORWARD"},{type:x.x.NextWeek,icon:"mdi-chevron-double-right",tooltip:"TOOLTIPS.WEEK_FORWARD"}]}}return this._navigationActions}get showWorkDays(){return this.isHideWeekendsAvailable&&this.options.showWorkDays}calculateDateRange(){var e,t;let r=[],i=this.options.viewName,o=null===(e=this._schedulerWidget)||void 0===e?void 0:e.navigationMode,s=(null===(t=this._schedulerWidget)||void 0===t?void 0:t.weekOffset)||0;if(o!==x.y.DayScroll&&i===x.O.Week){s=0;let e=Object(n.eb)(this.selectedDate,this.calendarInfo().firstDay);for(;!Object(n.pb)(e,this.selectedDate)&&!Object(n.jb)(e,this.selectedDate);)this.showWorkDays&&!this._isWorkDay(e)||s++,e=this.nextDate(e);this._schedulerWidget&&(this._schedulerWidget.weekOffset=s)}this._schedulerWidget&&(this._schedulerWidget.navigationMode=null);let l=this._previousDateShifted(this.selectedDate,s);for(let e=0;e<this.options.visibleDayCount;e++)this.showWorkDays&&!this._isWorkDay(l)||r.push(l),l=kendo.date.nextDay(l);if(this._render(r),!this.showWorkDays){a()("table.k-scheduler-header-all-day > tbody > tr > td",this.element).each(((e,t)=>{this._isWorkDay(this._dates[e])||a()(t).addClass("pw-weekend")}))}}createLayout(e){this.name="week",super.createLayout(e);try{let e=`pw-card-${this.options.cardTheme}`,t=a()(this.eventTemplate({cardType:x.h.TrelloCard,$ctrl:{isCardResizeAvailable:()=>!1,isCardContextMenuAvailable:()=>!1,getCardMembers:()=>[],getCardCalendarImage:()=>{},getCardLabelsColors:()=>[],hiddenCardElements:{},getCardExtraClasses:()=>`${e} pw-card--label_default pw-card--board_default pw-card--priority_0`}}));t.css("visibility","hidden").appendTo(this.content),this._cardTitleFirstLineGap=Math.max(c()(t).call(t,`.${e}__title`).height()-lo,0),t.remove()}catch(e){this._cardTitleFirstLineGap=0}}render(e){var t;this._headerColumnCount=0;let r=[];for(let t of this._dates)r.push({eventCount:0,eventStart:Object(n.O)(t),eventEnd:Object(n.a)(Object(n.O)(t),1)}),this._updateHeader(t,e);for(let t of e){if(!t.isMultiDay())continue;let e=t.start,i=t.end;(t.isAllDay||Object(n.w)(e,i))&&(i=Object(n.N)(i));let a=!1;for(let t of r)if(e<t.eventEnd&&i>t.eventStart)a=!0,t.eventCount+=1;else if(a)break}let i=0;for(let e of r)i=Math.max(i,e.eventCount);let o=0===i?2*this._allDayEventIndent+3:this._allDayEventIndent;this._updateAllDayHeaderHeight(this._allDayEventHeight*i+3*(i-1)+o),this._groups(),this.refreshLayout(),c()(t=this.element).call(t,".k-event").detach(),this._renderEvents(e,0);let s=this._isTimeTracking?"addClass":"removeClass";a()(".k-scheduler-header-all-day-label")[s]("k-scheduler-header-all-day-label--time-tracking"),this._currentTime(!1),this.trigger("activate")}nextDate(e=this.selectedDate){if(this.showWorkDays){let t=kendo.date.nextDay(e);for(let e=0;e<7;e++){if(this._isWorkDay(t))return t;t=kendo.date.nextDay(t)}return t}return kendo.date.nextDay(e)}previousDate(e=this.selectedDate){if(this.showWorkDays){let t=kendo.date.previousDay(e);for(let e=0;e<7;e++){if(this._isWorkDay(t))return t;t=kendo.date.previousDay(t)}return t}return kendo.date.previousDay(e)}getDateToNavigate(e){switch(e){case x.x.Today:return new Date;case x.x.PreviousDay:return this.previousDate();case x.x.NextDay:return this.nextDate();case x.x.PreviousWeek:return kendo.date.addDays(this.selectedDate,-this.options.visibleDayCount);case x.x.NextWeek:return kendo.date.addDays(this.selectedDate,this.options.visibleDayCount)}throw new Error(`Navigation action ${e} unsupported by view ${this.options.viewName}`)}resize(e){e&&this._schedulerWidget?this._schedulerWidget.resize():(this._updateAllDayHeaderHeight(this._height),this.refreshLayout())}scrollTo(e){if(!this._schedulerWidget)return;let{date:t,time:r,navigationMode:i}=e,o=a()(".k-scheduler-content",this.element).scrollTop(),s=a()("table.k-scheduler-header-all-day",this.element).height();if(this._schedulerWidget.navigationMode=i,t&&(Object(n.pb)(t,this.selectedDate)||this._schedulerWidget.date(t)),r){let e=a()(".k-scheduler-content",this.element),t=a()("table.k-scheduler-table > tbody > tr",e),i=t[0];this._scrollTo(a()("> td:first",i)[0],e[0]);let n,o=e.height()/a()(i).height(),s=r.getHours()+r.getMinutes()/60+o/3;for(let e=0;e<t.length;e++){var l;let r=null===(l=this._schedulerWidget.slotByElement(t[e]))||void 0===l?void 0:l.startDate;if(!r||r.getHours()+r.getMinutes()/60>=s)break;n=t[e]}n&&this._scrollTo(a()("> td:first",n)[0],e[0])}else{let e=a()("table.k-scheduler-header-all-day",this.element).height()-s;a()(".k-scheduler-content",this.element).scrollTop(o+e)}}getCardTargetCells(e,t){if(!this._schedulerWidget)return;let r=this._schedulerWidget.slotByElement(e);if(!r)return;let i=r.isDaySlot?1:Math.ceil(t/Object(n.S)(r.startDate,r.endDate)),a=[];function takeCell(e){i--,a.push(e)}takeCell(e);let o=e.parent(),s=o.children().index(e),l=o;for(;i>0&&(l=l.next(),l[0]);)takeCell(l.children().eq(s));return a}getClosestVisibleSlot(e,t=!1){let r;t&&(e=Object(n.O)(e));let i={start:this.options.workWeekStart,end:this.options.workWeekEnd};if(r=Object(n.ob)(e,this.startDate(),this.endDate())?this.showWorkDays&&!Object(n.sb)(e.getDay(),i)?Object(n.Y)(e,i):new Date(e):this.endDate()<e?new Date(this.endDate()):new Date(this.startDate()),t)return{start:r,end:new Date(r)};e.getMinutes()>ho?r.setHours(e.getHours()+1,0,0,0):r.setHours(e.getHours(),ho,0,0);let a=Object(n.Eb)(r,this.options.workDayStart),o=Object(n.Eb)(r,this.options.workDayEnd);if(this.options.showWorkHours&&!Object(n.ob)(r,a,o))if(r<a)r=Object(n.Eb)(r,a);else{let e=Object(n.Eb)(r,o);r=Object(n.b)(e,-1)}return{start:r,end:Object(n.b)(r,1)}}adjustUpdateEventData(e,t,r){if(e){if(Object(n.R)(t.start,t.end)>0){let e=Object(n.O)(r.start);return{start:e,end:Object(n.a)(e,Object(n.R)(r.start,r.end)),isAllDay:!0}}}return r}createMouseTargetHighlight(e,t){var r;let i=null,a=null,n=rt()(r=t.targetCells).call(r,((e,t)=>{let r=this._schedulerWidget.slotByElement(t);return r&&(i=i&&i<=r.startDate?i:r.startDate,a=a&&a>=r.endDate?a:r.endDate,e.push(r),t.addClass(co)),e}),[]);0!==n.length&&(this._pageY=e.pageY,this._selectedRange={startDate:i,endDate:a,slots:n},this._selectionChanged=!1)}updateMouseTargetHighlight(e,t){if(!this._selectedRange)return;let r=this._schedulerWidget.slotByPosition(e.pageX,e.pageY);if(!r)return;if(this._isSlotsEqual(r,this._lastHandledSlot))return;let moveSelectionToAnotherDate=e=>{let r=Object(n.R)(Object(n.O)(this._selectedRange.startDate),e),i=[],o=[];for(let e of this._selectedRange.slots){a()(e.element).removeClass(co);let t=this._slotByDate(Object(n.a)(e.startDate,r));if(!t)continue;i.push(t);let s=a()(t.element);s.addClass(co),o.push(s)}t.targetCells=o,this._selectedRange={startDate:Object(n.a)(this._selectedRange.startDate,r),endDate:Object(n.a)(this._selectedRange.endDate,r),slots:i},this._selectionChanged=!0},insertSlotsToSelection=(e,r)=>{let i=this._slotsInRange(e,r);for(let e of i){var n;if(at()(n=this._selectedRange.slots).call(n,(t=>this._isSlotsEqual(e,t)))>-1)continue;let r=a()(e.element);r.addClass(co),this._selectedRange.slots.push(e),t.targetCells.push(r)}this._selectionChanged=!0},removeSlotsFromSelection=(e,r)=>{let i=this._slotsInRange(e,r);for(let e of i){var n,o;let r=a()(e.element);r.removeClass(co);let i=at()(n=this._selectedRange.slots).call(n,(t=>this._isSlotsEqual(e,t)));var s;if(i>-1)y()(s=this._selectedRange.slots).call(s,i,1);let d=at()(o=t.targetCells).call(o,(e=>e[0]===r[0]));var l;if(d>-1)y()(l=t.targetCells).call(l,d,1)}this._selectionChanged=!0};r.startDate.getDate()!==this._selectedRange.startDate.getDate()?moveSelectionToAnotherDate(Object(n.O)(r.startDate)):e.pageY>this._pageY?r.endDate>this._selectedRange.endDate?(insertSlotsToSelection(this._selectedRange.endDate,r.startDate),this._selectedRange.endDate=r.endDate):(r.endDate<this._selectedRange.endDate&&this._selectionChanged||r.startDate>this._selectedRange.startDate&&Object(n.S)(r.startDate,this._selectedRange)>=t.defaultCardDuration||this._selectionChanged)&&(removeSlotsFromSelection(this._selectedRange.startDate,Object(n.c)(r.startDate,-30)),this._selectedRange.startDate=r.startDate):e.pageY<this._pageY&&(r.startDate<this._selectedRange.startDate?(insertSlotsToSelection(r.startDate,this._selectedRange.startDate),this._selectedRange.startDate=r.startDate):(r.startDate>this._selectedRange.startDate||r.endDate<this._selectedRange.endDate)&&(removeSlotsFromSelection(r.endDate,this._selectedRange.endDate),this._selectedRange.endDate=r.endDate)),this._pageY=e.pageY,this._lastHandledSlot=r}removeRangeHighlight(){this._pageY=null;for(let e of this._selectedRange.slots)a()(e.element).removeClass("pw-scheduler-range-highlight");this._selectedRange=null}getRangeHighlightDates(){if(!this._selectedRange)return;let e=1===this._selectedRange.slots.length&&this._selectedRange.slots[0].isDaySlot;return{start:this._selectedRange.startDate,end:e?this._selectedRange.startDate:this._selectedRange.endDate}}refreshLayout(){var e;let t=this.element.innerHeight(),r=0;if(this.datesHeader&&(r=this.datesHeader.outerHeight()),this.timesHeader&&this.timesHeader.outerHeight()>r&&(r=this.timesHeader.outerHeight()),r&&(t-=r),this.datesHeader&&this.timesHeader){var i,n;let e=c()(i=this.datesHeader).call(i,"table:first tr");c()(n=this.timesHeader).call(n,"tr").height((function(t){a()(this).height(e.eq(t).height())}))}t>2*this._scrollbar?this.content.height(t):this.content.height(2*this._scrollbar+1);const o=this.content[0];this.times.height(o.clientHeight);const s=c()(e=this.times).call(e,"table");var l;s.length&&s.height(c()(l=this.content).call(l,"table")[0].clientHeight);o.offsetWidth-o.clientWidth>0?this.datesHeader.css("padding-right",this._scrollbar-io()(this.datesHeader.children().css("border-right-width"),10)):this.datesHeader.css("padding-right",""),this._schedulerWidget&&(this._schedulerWidget._size=this._schedulerWidget.getSize()),this.table.addClass("k-scrollbar-v")}get _isTimeTracking(){return this._appCommonSrv.getSchedulerMode()===x.M.TimeTracking}get _schedulerWidget(){return this.options.$ctrl.schedulerWidget}_templates(){super._templates(),this.eventTemplate=this._eventTmpl(this.options.eventTemplate,ye),this.allDayEventTemplate=this._eventTmpl(this.options.allDayEventTemplate,ve)}_layout(e){var t;let r=super._layout(e);B()(t=r.columns).call(t,((t,r)=>{this._isWorkDay(e[r])||(t.className=`${t.className||""} pw-weekend`),this.showWorkDays&&e[r].getDay()===this.options.workWeekStart&&(t.className=`${t.className||""} pw-work-week-start`)}));let i=1;return this._forTimeRange(this.startTime(),this.endTime(),((e,t,a,n)=>{if(t&&(e<this.options.workDayStart||e>=this.options.workDayEnd)){let e=r.rows[i];e&&(e.className=`${e.className||""} pw-nonwork-hour`)}i+=1})),r}_topSection(e,t,r){var i;let a=super._topSection(e,t,r);if(this.timesHeader.empty(),this.options.showWeekNumbers){let e=kendo.date.weekInYear(this.selectedDate,kendo.culture().calendar.firstDay);this.timesHeader.append(`<span>${e}</span>`)}this.timesHeader.append(`<span class="k-scheduler-header-all-day-label">${this.options.$translate.instant("MISC.ALL_DAY_SECTION")}</span>`);let n=c()(i=this.datesHeader).call(i,".k-scheduler-header-wrap > div");return n.addClass("k-scheduler-content--scrollable"),n.before('<span class="k-scheduler-content-border-top"></span>'),n.after('<span class="k-scheduler-content-border-bottom"></span>'),c()(n).call(n,".k-scheduler-table").addClass("pw-selectable-items-container"),a}_bottomSection(e,t,r){var i;let a=super._bottomSection(e,t,r);return this.content.addClass("k-scheduler-content--scrollable"),this.content.before('<span class="k-scheduler-content-border-top"></span>'),c()(i=this.content).call(i,".k-scheduler-table").addClass("pw-selectable-items-container"),a}_updateAllDayHeaderHeight(e){let t=Math.max(Math.min(e,this.element.height()/2-10),this._allDayEventHeight);if(this._allDayContainerHeight!==t||this._height!==e){var r;this._height=e,this._allDayContainerHeight=t;let a=c()(r=this.element).call(r,".k-scheduler-header-all-day td");if(a.length>0){var i;a.parent().height(e),a.closest("div").add(c()(i=this.element).call(i,".k-scheduler-times-all-day").parent()).height(this._allDayContainerHeight);for(let e of this.groups)e.refresh()}}}_groups(){if(super._groups(),this.showWorkDays){var e;let t=c()(e=this._dates).call(e,(e=>e.getDay()===this.options.workWeekStart)),r=Object(n.Eb)(t,this.options.workDayStart),i=this.groups[0].ranges(r,r,!1,!1);for(let e of i)for(let t of e.collection._slots)a()(t.element).addClass("pw-work-week-start")}else for(let e of S()(t=this._dates).call(t,(e=>!this._isWorkDay(e)))){var t;e=kendo.date.toUtcTime(e);let r=Object(n.a)(e,1),i=this.groups[0].timeSlotRanges(e,r);for(let e of i)for(let t of e.collection._slots)a()(t.element).addClass("pw-weekend")}}_updateCurrentTimeMarker(e){let t=e,r=this.isVisibleDate(e);r||(t=new Date(this.startDate()),t.setHours(e.getHours(),e.getMinutes(),e.getSeconds())),a()(".k-current-time-container",this.content).remove();let i=this.groups[0];if(!i)return;let n=kendo.date.toUtcTime(t),o=i.timeSlotRanges(n,n+1);if(!o||o.length<=0)return;if(o[0].collection.slotByStartDate(t)){let e=Math.round(o[0].innerRect(t,new Date(t.getTime()+1),!1).top),i=o[0].start.offsetLeft,n=o[0].start.clientWidth,s=a()('<div class="k-current-time-container"></div>');if(s.css({top:e}),r){let e=a()('<div class="k-current-time"></div>');e.css({left:i,width:n+2}),e.appendTo(s)}s.appendTo(this.content)}let s=e.getDay();if(void 0===this._lastDay)this._lastDay=s;else if(this._lastDay!==s){var l;this._lastDay=s,null===(l=this._schedulerWidget)||void 0===l||l.view(this.options.viewName)}}_createEventElement(e,t,r,i){e.$ctrl=this.options.$ctrl,e.timeText=null,e.timeTextShort=null;let a=e.tail?e.previousStart:e.start,o=e.head?e.previousEnd:e.end;switch(e.cardType){case x.h.TrelloTimeRecord:e.timeText=Object(n.E)(6e4*e.durationMinutes)||"0m";break;default:if(!e.isAllDay){if(e.timeText=Object(n.C)(a,o),e.timeText){let t=Object(n.v)(a,o,this._workWeek).minutes,r=Object(n.E)(6e4*t);r&&(e.timeText=`${e.timeText} (${r})`)}e.timeTextShort=Object(n.D)(a,o)}}return super._createEventElement(e,t,r,i)}_addResourceView(){let e=super._addResourceView();return e.slotRanges=function(e,t=e.isMultiDay()){let r=e.start,i=e.end,a=Object(n.c)(r,ho);i<a&&(i=a);let o=kendo.date.toUtcTime(r),s=kendo.date.toUtcTime(i);return t?this.daySlotRanges(o,s,e.isAllDay):this.timeSlotRanges(o,s)},e}_positionEvent(e,t,r){let i=e.start,a=e.end,o=Object(n.c)(i,ho);a<o&&(a=o);let s=r.startSlot(),l=r.outerRect(i,a,!1),d=l.bottom-l.top-3+(0===s.index?0:1);d<0&&(d=0),t[0].style.top=l.top-(0===s.index?0:1)+"px",t[0].style.height=`${d}px`;let h={element:t,slotIndex:s.index,start:l.top,end:l.top+d},u=kendo.ui.SchedulerView.collidingEvents(r.events(),h.start,h.end);r.addEvent(h),u.push(h);let p=s.clientWidth-8+1,m=kendo.ui.SchedulerView.createColumns(u),f=(p-3*(m.length-1))/m.length;for(let e=0;e<m.length;e++){let t,r=m[e].events;t=e===m.length-1?p-f*(m.length-1)-3*(m.length-1):f;for(let i=0;i<r.length;i++)r[i].element[0].style.left=`${s.offsetLeft+e*(f+3)}px`,r[i].element[0].style.width=`${t}px`,t<fe&&r[i].element.addClass("pw-card--narrow")}let y=Math.floor((d-25)/lo)*lo;y>0?c()(t).call(t,".pw-js-card-title").css({maxHeight:y+this._cardTitleFirstLineGap,whiteSpace:y<=lo+this._cardTitleFirstLineGap?"nowrap":"pre-line"}):t.addClass("pw-card--small")}_positionAllDayEvent(e,t){let r=t.startSlot(),i=t.endSlot(),a=r.index,n=i.index,o=i.offsetLeft-r.offsetLeft+i.offsetWidth-4;e[0].style.left=`${r.offsetLeft}px`,e[0].style.width=`${o}px`;let s={element:e,slotIndex:a,start:a,end:n},l=kendo.ui.SchedulerView.collidingEvents(t.events(),a,n);t.addEvent(s),l.push(s);let d=kendo.ui.SchedulerView.createRows(l),c=this._headerColumnCount||0;d.length&&d.length>c&&(this._headerColumnCount=d.length);for(let e=0;e<d.length;e++){let t=r.offsetTop+(this._allDayEventHeight+3)*e,i=d[e].events;for(let e=0;e<i.length;e++)i[e].element[0].style.top=`${t}px`,i[e].element[0].style.height=`${this._allDayEventHeight}px`}e.addClass("pw-card--small"),o<fe&&e.addClass("pw-card--narrow")}_slotByPosition(e,t){var r,i;let a=c()(r=c()(i=this.element).call(i,".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)")).call(r,">div");if(t<=a.offset().top+this._allDayContainerHeight){let r=e+a[0].scrollLeft,i=t+a[0].scrollTop,n=a.offset();r-=n.left,i-=n.top,r=Math.ceil(r),i=Math.ceil(i);for(let e of this.groups){let t=e.daySlotByPosition(r,i,this._isGroupedByDate());if(t)return t}}else{let r=e+this.content[0].scrollLeft,i=t+this.content[0].scrollTop,a=this.content.offset();r-=a.left,i-=a.top,r=Math.ceil(r),i=Math.ceil(i);for(let e of this.groups){let t=e.timeSlotByPosition(r,i);if(t)return t}}}_slotByDate(e){let t=kendo.date.toUtcTime(e),r=this.groups[0].timeSlotRanges(t,t);if(0===r.length)return;let i=r[0].collection.slotByStartDate(t);return this._schedulerWidget.slotByElement(i.element)}_slotsInRange(e,t){let r=[],i=e;for(;i<=t;){let e=this._slotByDate(i);e&&r.push(e),i=Object(n.c)(i,ho)}return r}_isSlotsEqual(e,t){return!(!e||!t)&&(Object(n.w)(e.startDate,t.startDate)&&Object(n.w)(e.endDate,t.endDate))}_updateMoveHint(e,t){if(e.isReadOnly||e.isArchived)return;this._removeMoveHint(e.uid);let r=_n()(t)?t[0]:t,i=e.isMultiDay(),n=this.groups[r].ranges(e.start,e.end,i,e.isAllDay);!i&&(0===kendo.date.getMilliseconds(e.end)||kendo.date.getMilliseconds(e.end)<kendo.date.getMilliseconds(this.startTime()))&&n.length>1&&n.pop();let o=a()();for(let t of n){let r=t.startSlot(),a={top:r.offsetTop,left:r.offsetLeft};if(i)a.width=t.innerWidth()-4+1,i&&(a.height=this._allDayEventHeight);else{let i=t.outerRect(e.start,e.end,!1);a.top=i.top-(0===r.index?0:1),a.height=Math.max(i.bottom-i.top-3+(0===r.index?0:1),this.options.eventHeight),a.width=r.clientWidth-8+1}let n=this._createEventElement(e.clone({start:e.start,end:e.end}),!i),s=i?0:Math.floor((a.height-25)/lo)*lo;s>0?c()(n).call(n,".pw-js-card-title").css({maxHeight:s+this._cardTitleFirstLineGap,whiteSpace:s<=lo+this._cardTitleFirstLineGap?"nowrap":""}):n.addClass("pw-card--small"),a.width<fe&&n.addClass("pw-card--narrow"),n.addClass("k-state-selected"),this._appendMoveHint(n,a),o=o.add(n)}let s=this.content;var l;i&&(s=c()(l=this.element).call(l,".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),s.length||(s=this.content));o.appendTo(s)}_updateEventForResize(e){if(!e.isAllDay&&e.isMultiDay()){let t=Object(n.O)(e.start),r=Object(n.a)(t,Object(n.R)(e.start,e.end));e.start=t,e.end=r,e.isAllDay=!0}}_previousDateShifted(e=this.selectedDate,t=0){let r;switch(this.options.viewName){case x.O.OneDay:case x.O.ThreeDay:r=Math.min(0,this.options.visibleDayCount-1);break;case x.O.Week:r=t}for(let t=0;t<r;t++)e=this.previousDate(e);return e}_selectSlots(e){}_updateHeader(e,t){let r=a()(`.k-scheduler-header-duration[data-dt="${kendo.toString(e,"u")}"]`);if(0===r.length)return;let i="";if(this._isTimeTracking){let r=Object(n.O)(e),a=Object(n.N)(e),o=Object(n.a)(r,1),s=rt()(t).call(t,((e,t)=>((Object(n.ob)(t.start,r,a)||Object(n.ob)(t.end,r,a))&&(e+=t.isAllDay?t.durationMinutes:Object(n.S)(Object(n.wb)(r,t.start),Object(n.zb)(o,t.end))),e)),0);i=Object(n.E)(60*s*1e3,"hours")||"0h"}r.text(i)}}var uo=r(721),po=r.n(uo);class SchedulerMonthView_SchedulerMonthView extends kendo.ui.MonthView{constructor(e,t){t.dayTemplate=kendo.template('<div class="k-link k-nav-day"><span>#=kendo.toString(data.date,"Dd")#</span><span>#= data.date.getDate() === 1 ? kendo.toString(data.date, "MMM") : ""#</span></div>',{useWithBlock:!1}),t.eventHeight=t.isDetailedView?42:22,t.currentTimeMarker={updateInterval:6e4},super(e,t),this._isDetailedView=t.isDetailedView,this.name=this.options.viewName,this._eventHeight=this.options.eventHeight,this._cellTopPadding=28,this._cellBottomPadding=22,this._currentTimeUpdateTimer=po()((()=>this._updateCurrentTimeMarker(new Date)),this.options.currentTimeMarker.updateInterval)}get isTimeAvailable(){return!1}get isHideWeekendsAvailable(){return!1}get isScaleAvailable(){return!1}get selectedDate(){var e;return(null===(e=this.options.$ctrl.schedulerWidget)||void 0===e?void 0:e.date())||this.options.date}isVisibleDate(e){return Object(n.ob)(e,this.startDate(),this.endDate())}get navigationActions(){return this._navigationActions||(this._navigationActions={leftActions:[{type:x.x.PreviousMonth,icon:"mdi-chevron-double-left",tooltip:"TOOLTIPS.MONTH_BACKWARD"},{type:x.x.PreviousWeek,icon:"mdi-chevron-left",tooltip:"TOOLTIPS.WEEK_BACKWARD"}],rightActions:[{type:x.x.NextWeek,icon:"mdi-chevron-right",tooltip:"TOOLTIPS.WEEK_FORWARD"},{type:x.x.NextMonth,icon:"mdi-chevron-double-right",tooltip:"TOOLTIPS.MONTH_FORWARD"}]}),this._navigationActions}get showWorkDays(){return!1}createLayout(e){this.name="month",super.createLayout(e)}render(e){var t,r,i;let a=[];for(let e of this.groups)for(let t of e._daySlotCollections)for(let e of t._slots)a.push({...e,eventCount:0,eventStart:e.startDate(),eventEnd:e.endDate()});for(let t of e){let e=t.start,r=t.end;(t.isAllDay||Object(n.w)(e,r))&&(r=Object(n.N)(r));let i=!1;for(let t of a)if(e<t.eventEnd&&r>t.eventStart)i=!0,t.eventCount+=1;else if(i)break}let o=[];for(let e of a)o[e.collectionIndex]=Math.max(o[e.collectionIndex]||0,e.eventCount);let s=c()(t=this.times).call(t,"th"),l=c()(r=this.content).call(r,"tr");for(let e=0;e<o.length;e++){let t=this._eventHeight*o[e]+3*(o[e]-1),r=`${this._cellTopPadding+Math.max(t,97)+this._cellBottomPadding}px`;s[e]&&(s[e].style.height=r),l[e].style.height=r}this._groups(),this.refreshLayout(),c()(i=this.element).call(i,".k-event").detach(),this._renderEvents(e,0),this.trigger("activate")}getDateToNavigate(e){switch(e){case x.x.Today:return new Date;case x.x.PreviousWeek:return Object(n.a)(this.selectedDate,-7);case x.x.NextWeek:return Object(n.a)(this.selectedDate,7);case x.x.PreviousMonth:let e=super.previousDate();return new Date(e.getFullYear(),e.getMonth(),1);case x.x.NextMonth:return super.nextDate()}throw new Error(`Navigation action ${e} unsupported by view ${this.options.viewName}`)}resize(e){e&&this.options.$ctrl.schedulerWidget?this.options.$ctrl.schedulerWidget.resize():this.refreshLayout()}scrollTo(e){if(!this.options.$ctrl.schedulerWidget)return;let{date:t,time:r,navigationMode:i}=e,o=a()(".k-scheduler-content",this.element).scrollTop();if(t){if(i===x.y.ClosestVisible&&Object(n.ob)(t,this.startDate(),this.endDate())){let e,r=a()(".k-scheduler-content",this.element),i=a()("table.k-scheduler-table > tbody > tr > td",r);for(let r=0;r<i.length;r++){var s;let a=null===(s=this.options.$ctrl.schedulerWidget.slotByElement(i[r]))||void 0===s?void 0:s.startDate;if(!a||a>t)break;e=i[r]}return void(e&&this._scrollTo(e,r[0]))}Object(n.pb)(t,this.selectedDate)||this.options.$ctrl.schedulerWidget.date(t)}r?a()(".k-scheduler-content",this.element).scrollTop(0):a()(".k-scheduler-content",this.element).scrollTop(o)}getCardTargetCells(e){return[e]}getClosestVisibleSlot(e){let t;return e=Object(n.O)(e),t=Object(n.ob)(e,this.startDate(),this.endDate())?Object(n.O)(e):this.endDate()<e?new Date(this.endDate()):new Date(this.startDate()),{start:t,end:new Date(t)}}adjustUpdateEventData(e,t,r){if(e){let e=Object(n.O)(r.start);return{start:e,end:Object(n.a)(e,Object(n.R)(r.start,r.end)),isAllDay:!0}}return r}createMouseTargetHighlight(e,t){var r;B()(r=t.targetCells).call(r,(e=>e.addClass("pw-scheduler-range-highlight")))}removeRangeHighlight(){var e;c()(e=a()("#pwScheduler")).call(e,".pw-scheduler-range-highlight").removeClass("pw-scheduler-range-highlight")}refreshLayout(){var e;let t=this.element.innerHeight(),r=0;if(this.datesHeader&&(r=this.datesHeader.outerHeight()),this.timesHeader&&this.timesHeader.outerHeight()>r&&(r=this.timesHeader.outerHeight()),this.datesHeader&&this.timesHeader){var i,n;let e=c()(i=this.datesHeader).call(i,"table:first tr");c()(n=this.timesHeader).call(n,"tr").height((function(t){a()(this).height(e.eq(t).height())}))}r&&(t-=r),this.times.height(t),t>2*this._scrollbar?this.content.height(t):this.content.height(2*this._scrollbar+1);let o=c()(e=this.times).call(e,"table");var s;o.length&&o.height(c()(s=this.content).call(s,"table")[0].clientHeight);let l=this.content[0];l.offsetWidth-l.clientWidth>0?this.datesHeader.css("padding-right",this._scrollbar-io()(this.datesHeader.children().css("border-right-width"),10)):this.datesHeader.css("padding-right",""),this.options.$ctrl.schedulerWidget&&(this.options.$ctrl.schedulerWidget._size=this.options.$ctrl.schedulerWidget.getSize()),this.table.addClass("k-scrollbar-v")}destroy(){this._currentTimeUpdateTimer&&clearInterval(this._currentTimeUpdateTimer),super.destroy()}_templates(){super._templates(),this.eventTemplate=this._eventTmpl(this.options.eventTemplate,ve)}_renderLayout(e){this._firstDayOfMonth=kendo.date.firstDayOfMonth(e),this._lastDayOfMonth=kendo.date.lastDayOfMonth(e),this._startDate=Object(n.eb)(e,this.calendarInfo().firstDay),this.createLayout(this._layout()),this._content(),this.refreshLayout()}_layout(){var e;let t=this.calendarInfo(),r=t.days.namesAbbr;if(r=so()(e=et()(r).call(r,t.firstDay)).call(e,et()(r).call(r,0,t.firstDay)),this.options.showWeekNumbers){let e=[],t=this.startDate();for(let r=0;r<6;r++)e.push(kendo.date.weekInYear(t,kendo.culture().calendar.firstDay)),t=this._groupedView._adjustStartDate(t);return{columns:R()(r).call(r,(e=>({text:`<span>${e}</span>`}))),rows:R()(e).call(e,(e=>({text:`<span>${e}</span>`})))}}return{columns:R()(r).call(r,(e=>({text:`<span>${e}</span>`})))}}_topSection(e,t,r){let i=super._topSection(e,t,r);return this.timesHeader.empty(),i}_bottomSection(e,t,r){var i;let a=super._bottomSection(e,t,r);return this.content.addClass("k-scheduler-content--scrollable"),this.content.before('<span class="k-scheduler-content-border-top"></span>'),c()(i=this.content).call(i,".k-scheduler-table").addClass("pw-selectable-items-container"),a}_updateCurrentTimeMarker(e){let t=e.getDay();if(void 0===this._lastDay)this._lastDay=t;else if(this._lastDay!==t){var r;this._lastDay=t,null===(r=this.options.$ctrl.schedulerWidget)||void 0===r||r.view(this.options.viewName)}}_createEventElement(e){e.$ctrl=this.options.$ctrl,e.timeText=null,e.timeTextShort=null;let t=e.tail?e.previousStart:e.start,r=e.head?e.previousEnd:e.end;switch(e.cardType){case x.h.TrelloTimeRecord:e.timeText=Object(n.E)(6e4*e.durationMinutes),this._isDetailedView&&!e.isAllDay&&(e.timeText=e.timeText||"0m");break;default:if(this._isDetailedView){if(e.isAllDay){if(Object(n.R)(t,r)>=1&&(e.timeText=Object(n.B)(t,r),e.timeText)){r=Object(n.a)(r,1);let i=Object(n.v)(t,r).days,a=i&&`${i}d`;a&&(e.timeText=`${e.timeText} (${a})`)}}else if(e.timeText=Object(n.C)(t,r),e.timeText){let i=Object(n.v)(t,r).minutes,a=Object(n.E)(6e4*i);a&&(e.timeText=`${e.timeText} (${a})`)}}else e.isAllDay||(e.timeText=Object(n.D)(t),e.timeTextShort=e.timeText)}return super._createEventElement(e)}_positionEvent(e,t,r){let i=e.startSlot(),a=e.endSlot(),n=i.index,o=a.index,s=kendo.ui.SchedulerView.collidingEvents(e.events(),n,o);s.push({element:t,start:n,end:o});let l=kendo.ui.SchedulerView.createRows(s);for(let e=0;e<l.length;e++){let t=i.offsetTop+this._cellTopPadding+(this._eventHeight+3)*e,r=l[e].events;for(let e=0;e<r.length;e++)r[e].element[0].style.top=`${t}px`}let d=a.offsetLeft-i.offsetLeft+a.offsetWidth-4;t[0].style.left=`${i.offsetLeft}px`,t[0].style.width=`${d}px`,t[0].style.height=`${this._eventHeight}px`,e.addEvent({element:t,start:n,end:o,groupIndex:i.groupIndex}),r._continuousEvents.push({element:t,uid:t.attr(kendo.attr("uid")),start:i,end:a}),this._isDetailedView||t.addClass("pw-card--small"),d<fe&&t.addClass("pw-card--narrow"),t.appendTo(this.content)}_updateMoveHint(e,t){if(e.isReadOnly||e.isArchived)return;this._removeMoveHint(e.uid);let r=_n()(t)?t[0]:t,i=this.groups[r].ranges(e.start,e.end,!0,e.isAllDay);for(let t of i){let r=t.startSlot(),i=t.endSlot(),a=this._createEventElement(e.clone({start:e.start,end:e.end,head:t.head,tail:t.tail})),n=i.offsetLeft-r.offsetLeft+i.offsetWidth-4;a.css({left:r.offsetLeft,top:r.offsetTop+this._cellTopPadding,height:this._eventHeight,width:n}),a.addClass("k-event-drag-hint k-state-selected"),this._isDetailedView||a.addClass("pw-card--small"),n<fe&&a.addClass("pw-card--narrow"),this._appendMoveHint(a)}}_updateEventForResize(e){let t=Object(n.O)(e.start),r=Object(n.a)(t,Object(n.R)(e.start,e.end));e.start=t,e.end=r,e.isAllDay=!0}}var mo=r(465),fo=r.n(mo),yo=r(96),vo=r.n(yo),_o=r(269),go=r.n(_o),Co=r(18),ko=r(127),Do=r.n(ko);const Eo="http://www.w3.org/2000/svg";class LinkPlotter_LinkPlotter{constructor(e){Do()(this,"_links",new lt.a),this._targetElement=document.createElementNS(Eo,"svg"),this._targetElement.classList.add(e)}get targetElement(){return this._targetElement}addLink(e,t){if(!e||!t)return;let r=`${e.id}|${t.id}`,i=this._links.get(r);if(!i){i={id:r,element:document.createElementNS(Eo,"path"),isInvalid:!1,isVisible:!1},this._links.set(r,i)}i.leftCard=e,i.rightCard=t,i.isDeleted=!1}clear(){for(let t of Ta()(e=this._links).call(e)){var e;t.isDeleted=!0}}redraw(e,t,r){let i=this._targetElement.clientWidth,a=this._targetElement.clientHeight;this._targetElement.setAttribute("viewBox",`0 0 ${i} ${a}`);const getCardCenterY=e=>e.top+e.height/2+e.parent.top+e.parent.props.pwYOffset;let o={},s=(r?42:22)/2+10,l=r?60:30;for(let r of Ta()(d=this._links).call(d)){var d;if(r.isDeleted)this._hideLink(r),this._links.delete(r.id);else if((r.leftCard.displayed||r.rightCard.displayed)&&r.leftCard.parent&&r.rightCard.parent){let d,c=r.leftCard.pwRawLeft+r.leftCard.pwRawWidth-4||0,h=getCardCenterY(r.leftCard),u=r.rightCard.pwRawLeft||0,p=getCardCenterY(r.rightCard);if(!r.leftCard.displayed||r.leftCard.pwRawLeft+r.leftCard.pwRawWidth<0){if(!r.leftCard.pwIsVisibleByDuration()){this._hideLink(r);continue}if(o[r.rightCard.id]||(o[r.rightCard.id]={}),r.leftCard.data.start>t){if(o[r.rightCard.id].rightFuture){this._hideLink(r);continue}o[r.rightCard.id].rightFuture=!0;let e=p+s<a?s:-s;d=`M${u},${p}q${-getProtrusionOffset(i-u,l)},${e} ${i-u},${e}`}else{if(!(r.leftCard.data.end<e)){this._hideLink(r);continue}if(o[r.rightCard.id].rightPast){this._hideLink(r);continue}o[r.rightCard.id].rightPast=!0,d=`M${u},${p}H0`}}else if(!r.rightCard.displayed||r.rightCard.pwRawLeft+r.rightCard.pwRawWidth<0){if(!r.rightCard.pwIsVisibleByDuration()){this._hideLink(r);continue}if(o[r.leftCard.id]||(o[r.leftCard.id]={}),r.rightCard.data.end<e){if(o[r.leftCard.id].leftPast){this._hideLink(r);continue}o[r.leftCard.id].leftPast=!0;let e=h+s<a?s:-s;d=`M${c},${h}q${getProtrusionOffset(c,l)},${e} ${-c},${e}`}else{if(!(r.rightCard.data.start>t)){this._hideLink(r);continue}if(o[r.leftCard.id].leftFuture){this._hideLink(r);continue}o[r.leftCard.id].leftFuture=!0,d=`M${c},${h}H${i}`}}else if(h===p)if(c>u){let e=h+s>a?-s:s;d=`M${c},${h}q${getProtrusionOffset((c-u)/2,l)},${e} ${(u-c)/2},${e}T${u},${p}`}else d=`M${c},${h}H${u}`;else{let e=(u-c)/3;e<0?e=getProtrusionOffset((c-u)/2,l):e<15&&(e=15),d=`M${c},${h}q${e},0 ${(u-c)/2},${(p-h)/2}T${u},${p}`}r.element.setAttributeNS(null,"d",d),(r.leftCard.data.realIsAllDay&&!r.leftCard.data.isMilestone?Object(n.a)(r.leftCard.data.realEnd,1):r.leftCard.data.realEnd)>r.rightCard.data.realStart?r.isInvalid||(r.element.setAttributeNS(null,"stroke","#ff0000"),r.isInvalid=!0):r.isInvalid&&(r.element.removeAttributeNS(null,"stroke"),r.isInvalid=!1),r.isVisible||(this._targetElement.appendChild(r.element),r.isVisible=!0)}else this._hideLink(r)}}_hideLink(e){e.isVisible&&(this._targetElement.removeChild(e.element),e.isVisible=!1)}}function getProtrusionOffset(e,t){return t+Math.sqrt(Math.pow(t,2)+e*t)}var bo,wo,So,To,Ao;const Io=pe()('\n<div\n    class="mdi mdi-close pw-timeline-resource__hide-btn pw-js-remove-resource"\n    style="display: none;"\n    ng-if="isAdditionalElementsShown"\n>\n    <md-tooltip\n        ng-if="isAdditionalElementsShown"\n        md-autohide\n        md-direction="right"\n    >\n        {pw{::\'TOOLTIPS.HIDE\' | translate}pw}\n    </md-tooltip>\n</div>\n').call('\n<div\n    class="mdi mdi-close pw-timeline-resource__hide-btn pw-js-remove-resource"\n    style="display: none;"\n    ng-if="isAdditionalElementsShown"\n>\n    <md-tooltip\n        ng-if="isAdditionalElementsShown"\n        md-autohide\n        md-direction="right"\n    >\n        {pw{::\'TOOLTIPS.HIDE\' | translate}pw}\n    </md-tooltip>\n</div>\n'),Ro=pe()(bo=`\n<div class="pw-timeline-resource">\n    <div class="mdi mdi-flag pw-timeline-resource__milestone"></div>\n    ${Io}\n</div>\n`).call(bo),Oo=pe()(wo=`\n<div class="pw-timeline-resource">\n    # if (data.id !== '${U.k}') { #\n    <div class="pw-timeline-resource__member">\n        <div class="pw-member-avatar">\n            # if (data.resourceData.avatarUrl) { #\n            <img\n                class="pw-member-avatar__image"\n                src="#= data.resourceData.avatarUrl #"\n            >\n            # } else { #\n            <svg\n                class="pw-member-avatar__initials"\n                viewBox="0 0 26 26"\n            >\n                <text\n                    x="13"\n                    y="18"\n                    text-anchor="middle"\n                >\n                    #: data.resourceData.initials #\n                </text>\n            </svg>\n            # } #\n        </div>\n    </div>\n    <div class="pw-timeline-resource__name">\n        #: data.name #\n    </div>\n    # } else { #\n        <div class="pw-timeline-resource__name pw-timeline-resource--unassigned">\n            #: data.name #\n        </div>\n    # } #\n    ${Io}\n</div>\n`).call(wo),Po=pe()(So=`\n<div class="pw-timeline-resource">\n    <div class="pw-timeline-resource__calendar">\n        # if (data.resourceData.calendarType === '${x.d.TrelloBoard}') { #\n        <div class="pw-calendar-icon pw-calendar-icon--trello-board pw-calendar-icon--trello-board_#= data.resourceData.calendarColor #">\n            # if (data.resourceData.calendarIcon) { #\n            <img\n                class="pw-calendar-icon__image"\n                src="#= data.resourceData.calendarIcon #"\n            >\n            # } #\n        </div>\n        # } else if (data.resourceData.calendarType === '${x.d.GoogleCalendar}') { #\n        <div\n            class="pw-calendar-icon pw-calendar-icon--google-calendar pw-calendar-icon--google-calendar_normal mdi mdi-google"\n            style="background-color: #= data.resourceData.calendarColor #;"\n        >\n        </div>\n        # } else if (data.resourceData.calendarType === '${x.d.ICalCalendar}') { #\n        <div\n            class="pw-calendar-icon pw-calendar-icon--ical-calendar\n                pw-calendar-icon--ical-calendar_normal\n                pw-calendar-icon--ical-calendar_#= data.resourceData.calendarColor #\n                pw-calendar-icon--ical-calendar_#= data.resourceData.iCalCalendarType #\n                mdi mdi-calendar"\n        >\n        </div>\n        # } #\n    </div>\n    <div class="pw-timeline-resource__name">\n        #: data.name #\n    </div>\n    ${Io}\n</div>\n`).call(So),Lo=pe()(To=`\n<div class="pw-timeline-resource pw-timeline-resource__list">\n    <div class="pw-timeline-resource__list-back">\n        # if (data.resourceData.boardIcon) { #\n        <img\n            class="pw-calendar-icon__image"\n            src="#= data.resourceData.boardIcon #"\n        >\n        # } else { #\n        <div class="pw-calendar-icon pw-calendar-icon--trello-board pw-calendar-icon--trello-board_#= data.resourceData.boardColor #"></div>\n        # } #\n\n        <div class="pw-timeline-resource__name pw-timeline-resource__list-name">\n            #: data.name #\n        </div>\n    </div>\n    ${Io}\n</div>\n`).call(To),Mo=pe()(Ao=`\n<div class="pw-timeline-resource pw-timeline-resource__label">\n    <div class="pw-timeline-resource__label-point pw-timeline-resource__label-point--color_#= data.resourceData.color #"></div>\n    <div class="pw-timeline-resource__name pw-timeline-resource__label-name pw-timeline-resource__label-name--color_#= data.resourceData.color #">\n        #: data.name #\n    </div>\n    ${Io}\n</div>\n`).call(Ao),No=(x.gb.Max/1e3+x.gb.Min)/2,Bo=1e3,Fo=1728e3,$o=6912e3,xo=20736e3,Go=82944e3,zo=x.gb.Min/Bo,Uo=x.gb.Max/Bo,Wo=6911999,jo=10,Ho=5184e6,Vo="pwDateRangeHighlight",Yo={[x.fb.NoResources]:{width:0,height:64},[x.fb.Members]:{width:90,height:64},[x.fb.Calendars]:{width:90,height:64},[x.fb.Lists]:{width:90,height:64},[x.fb.Labels]:{width:90,height:64}};Co.util.getScrollBarWidth=()=>{let e=document.createElement("p");e.style.width="100%",e.style.height="200px";let t=document.createElement("div");t.classList.add("timeline-panel","timeline-right"),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);let r=e.offsetWidth;t.style.overflow="scroll";let i=e.offsetWidth;return r===i&&(i=t.clientWidth),document.body.removeChild(t),r-i},Co.DataSet.prototype._addItem=function(e){let t=e[this._fieldId];return this._data[t]=e,this.length++,t},Co.DataSet.prototype._getItem=function(e){return this._data[e]},Co.DataSet.prototype._updateItem=function(e){let t=e[this._fieldId];if(void 0===t)throw new Error(`Cannot update item: item has no id (item: ${qr()(e)})`);if(!this._data[t])throw new Error(`Cannot update item: no item with id ${t} found`);return this._data[t]=e,t},Co.DataSet.prototype.update=function(e,t){let r=[],i=[],a=[],n=[],o=this._fieldId;const addOrUpdate=e=>{var t;let s=e[o];if(e.isReadOnly||!e.isRecurring||e.isRecurring()&&!e.isException()||(e.selectable=!0),e.className=(null===(t=e.$ctrl)||void 0===t?void 0:t.getCardPreviewExtraClasses(e,"timeline-item"))||e.className,this._data[s]){let t="function"==typeof this._data[s].clone?this._data[s].clone():u()({},this._data[s]);s=this._updateItem(e),i.push(s),n.push(e),a.push(t)}else s=this._addItem(e),r.push(s)};if(_n()(e))for(let t of e)t&&"object"==typeof t&&addOrUpdate(t);else{if(!e||"object"!=typeof e)throw new Error("Unknown dataType");addOrUpdate(e)}if(r.length&&this._trigger("add",{items:r},t),i.length){let e={items:i,oldData:a,data:n};this._trigger("update",e,t)}return so()(r).call(r,i)},Co.timeline.DateUtil.stepOverHiddenDates=function(e,t,r){let i,a=!1,n=t.current.valueOf();for(let e=0;e<t.hiddenDates.length;e++){const r=t.hiddenDates[e].start;if(i=t.hiddenDates[e].end,n>=r&&n<i){a=!0;break}}if(a&&n<t._end.valueOf()&&n!==r){let a=e(r),n=e(i);a.year()!==n.year()?t.switchedYear=!0:a.quarter()!==n.quarter()?t.switchedQuarter=!0:a.month()!==n.month()?t.switchedMonth=!0:a.dayOfYear()!==n.dayOfYear()&&(t.switchedDay=!0),t.current=n}},Co.timeline.components.ItemSet.prototype.redraw=function(){const e="__background__";let t=this.options.margin,r=this.body.range,i=Co.util.option.asSize,a=this.options,n=a.orientation.item,o=!1,s=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,s.className="timeline-itemset",o=this._orderGroups()||o;let l=r.end-r.start,d=l!==this.lastVisibleInterval||this.props.width!==this.props.lastWidth,c=r.start!==this.lastRangeStart,h=a.stack!==this.lastStack,u=a.stackSubgroups!==this.lastStackSubgroups,p=this.pwIsItemsHeightDirty||d||c||h||u;this.lastVisibleInterval=l,this.lastRangeStart=r.start,this.lastStack=a.stack,this.lastStackSubgroups=a.stackSubgroups,this.pwIsItemsHeightDirty=!1,this.props.lastWidth=this.props.width;let m=this._firstGroup(),f={item:t.item,axis:t.axis},y={item:t.item,axis:-1},v=0,_=t.axis+t.item.vertical;this.groups[e].redraw(r,f,p);let g={},C=0;if(B()(Co.util).call(Co.util,this.groups,((t,i)=>{if(i===e)return;let a=t===m?f:y;g[i]=t.redraw(r,a,p,!0),C=g[i].length})),C>0){let t={};for(let e=0;e<C;e++)B()(Co.util).call(Co.util,g,((r,i)=>{t[i]=r[e]()}));B()(Co.util).call(Co.util,this.groups,((r,i)=>{if(i===e)return;let a=t[i];o=a||o,v+=Math.max(r.height,r.props.pwHeightToBottom)}))}return v=Math.max(v,_),this.props.width=s.offsetWidth,this.props.height=v,s.style.height=i(v),this.dom.axis.style.top=i("top"===n?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.initialItemSetDrawn=!0,o=this._isResized()||o,o};const Ko=Co.timeline.components.ItemSet.prototype._onGroupDragStart;Co.timeline.components.ItemSet.prototype._onGroupDragStart=e=>e.stopPropagation();const Xo=Co.timeline.components.ItemSet.prototype._onGroupDrag;Co.timeline.components.ItemSet.prototype._onGroupDrag=e=>e.stopPropagation();const qo=Co.timeline.components.ItemSet.prototype._onGroupDragEnd;Co.timeline.components.ItemSet.prototype._onGroupDragEnd=e=>e.stopPropagation();const Qo=Co.timeline.components.ItemSet.prototype._create;Co.timeline.components.ItemSet.prototype._create=function(){Qo.call(this),this.pwLinkPlotter=new LinkPlotter_LinkPlotter("pw-timeline-links-container"),this.dom.frame.appendChild(this.pwLinkPlotter.targetElement),this.hammer.get("pan").set({direction:Co.Hammer.DIRECTION_ALL});const dragHandler=e=>{e.stopPropagation();let t=this.groupFromTarget(e);t&&canDragGroup(t.groupId)&&Xo.call(this,e)},dragStopHandler=e=>{e.stopPropagation(),this.groupTouchParams.group&&canDragGroup(this.groupTouchParams.group.groupId)&&(this.body.emitter.emit("pwGroupDragEnded"),this._pwGroupDragRegisterers.stopDragging()),qo.call(this,e)};this.dom.labelSet.addEventListener(window.PointerEvent?"pointerdown":"mousedown",(e=>{e.target.classList.contains("pw-js-remove-resource")||(e.stopPropagation(),Ko.call(this,e),this.groupTouchParams.group&&(canDragGroup(this.groupTouchParams.group.groupId)?(this.body.emitter.emit("pwGroupDragStarted"),this._pwGroupDragRegisterers.startDragging()):(this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.isDragging=!1,this.groupTouchParams.group=null)))})),this._pwGroupDragRegisterers={startDragging:()=>{window.addEventListener(window.PointerEvent?"pointermove":"mousemove",dragHandler,!0),window.addEventListener(window.PointerEvent?"pointerup":"mouseup",dragStopHandler,!0)},stopDragging:()=>{window.removeEventListener(window.PointerEvent?"pointermove":"mousemove",dragHandler,!0),window.removeEventListener(window.PointerEvent?"pointerup":"mouseup",dragStopHandler,!0)}}},Co.timeline.components.ItemSet.prototype._cloneItemData=e=>e.clone();const Jo=Co.timeline.components.ItemSet.prototype._addItem;Co.timeline.components.ItemSet.prototype._addItem=function(e,...t){Jo.call(this,e,...t),e.pwDuration=this.pwOptions.getDateDistance(e.data.start,e.data.end)};const Zo=Co.timeline.components.ItemSet.prototype._updateItem;Co.timeline.components.ItemSet.prototype._updateItem=function(e,t){this.pwIsItemDragged(e)?(this._pwDraggedItemsToUpdate||(this._pwDraggedItemsToUpdate=new lt.a),this._pwDraggedItemsToUpdate.set(e,t)):Zo.call(this,e,t)};const es=Co.timeline.components.ItemSet.prototype._removeItem;Co.timeline.components.ItemSet.prototype._removeItem=function(e){this.pwIsItemDragged(e)?(this._pwDraggedItemsToUpdate&&this._pwDraggedItemsToUpdate.delete(e),this._pwDraggedItemsToRemove?this._pwDraggedItemsToRemove.push(e):this._pwDraggedItemsToRemove=[e]):es.call(this,e)};const ts=Co.timeline.components.ItemSet.prototype.setSelection;Co.timeline.components.ItemSet.prototype.setSelection=function(e,t){ts.call(this,e),t||(this.pwSelectedUids=new M.a(R()(e).call(e,(e=>this.items[e].data.uid)))),this.body.emitter.emit("pwSelect",{uids:this.pwSelectedUids?[...this.pwSelectedUids]:[]})},Co.timeline.components.ItemSet.prototype._onSelectItem=function(e){if(!this.options.selectable)return;let t=this.itemFromTarget(e);if(t&&!t.data.selectable)return;let r=this.getSelection(),i=[];if(e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey||e.srcEvent.shiftKey)){if(!t)return;let e=t.data.uid;this.pwSelectedUids||(this.pwSelectedUids=new M.a(R()(r).call(r,(e=>this.items[e].data.uid)))),this.pwSelectedUids.has(e)?this.pwSelectedUids.delete(e):this.pwSelectedUids.add(e),i=[];for(let e in this.items)this.pwSelectedUids.has(this.items[e].data.uid)&&i.push(e)}else if(t){let e=t.data.uid;this.pwSelectedUids=new M.a([e]);for(let t in this.items)this.items[t].data.uid===e&&i.push(t)}this.setSelection(i,!0);let a=this.getSelection();(a.length>0||r.length>0)&&this.body.emitter.emit("select",{items:a,event:e})},Co.timeline.components.ItemSet.prototype._onMultiSelectItem=()=>{};const rs=Co.timeline.components.ItemSet.prototype._onDragStart;Co.timeline.components.ItemSet.prototype._onDragStart=function(e){if(this.touchParams.itemIsDragging)return void e.stopPropagation();const t=a()("body");let r,i=!1,o=this.touchParams.item;if(o){if(o.data.isReadOnly||o.data.isArchived)return void e.stopPropagation();i=this.touchParams.dragLeftItem||this.touchParams.dragRightItem,o.selected&&!i||(this.pwSelectedUids=new M.a([o.data.uid]),this.pwUpdateSelection())}let s=this.pwOptions.sortOrderField;if(o){let a=e.center.x-e.deltaX,s=this.body.dom.center.getBoundingClientRect();this.touchParams.pwOriginalGroup=o.data.group,this.touchParams.pwLastGroup=this.touchParams.pwOriginalGroup,this.touchParams.pwOffsetX=this.options.rtl?s.right:s.left,this.touchParams.pwDragStartTime=Object(n.O)(this.body.util.toTime(a-this.touchParams.pwOffsetX)),this._pwDragStopHandler=e=>{var a;if(e&&e.which!==x.t.Escape)return;t.removeClass("pw--moving-calendar-card"),null===(a=this.touchParams.autoScrollData)||void 0===a||a.stop(),this._pwDraggedItemUids=null;let n=this.touchParams.itemProps;if(e){this.hammer.stop(!0);for(let e of this.touchParams.itemProps)this._moveToGroup(e.item,e.data.group),e.item.setData(e.data);this.touchParams.itemProps=[],this.setSelection([]),this.body.emitter.emit("_change")}if(this._pwDraggedItemsToUpdate){for(let[e,t]of this._pwDraggedItemsToUpdate)Zo.call(this,e,t);this._pwDraggedItemsToUpdate=null}if(this._pwDraggedItemsToRemove){for(let e of this._pwDraggedItemsToRemove)es.call(this,e);this._pwDraggedItemsToRemove=null}(async()=>{var t,a;let n=this.touchParams.itemProps,o=R()(t=S()(a=Fr()(this.items)).call(a,(e=>!r.has(this.items[e].data.uid)))).call(t,(e=>this.items[e].data));if(i)return;let s=await this.pwCardDragHelper.stopDraggingTimelineAsync(!e,o,n),l=new M.a(R()(s).call(s,(e=>e.uid))),d=!1;for(let e of n)l.has(e.data.uid)||(d=!0,this._moveToGroup(e.item,e.data.group),e.item.setData(e.data));d&&this.body.emitter.emit("_change")})();for(let e of n)this.pwSelectedUids.has(e.data.uid)&&e.data.isRecurring()&&!e.data.isException()&&this.pwSelectedUids.delete(e.data.uid);this.pwUpdateSelection(),document.removeEventListener("keydown",this._pwDragStopHandler,!0),this._pwDragStopHandler=null},document.addEventListener("keydown",this._pwDragStopHandler,!0)}if(rs.call(this,e),!this.touchParams.itemProps)return;r=new M.a([o.data.uid]);let l=[];this._pwDraggedItemUids=new M.a;for(let e of this.touchParams.itemProps)this._pwDraggedItemUids.add(e.item.data.uid),e.item.data.isResize=e.dragLeft||e.dragRight,e.item.data.isResize||r.has(e.data.uid)&&e.item.id!==(null==o?void 0:o.id)||(r.add(e.data.uid),l.push(e.data),e.pwIsFirstByUid=!0);if(l.length>0){var d;let e=R()(d=J()(this.items)).call(d,(e=>({id:e.data.id,uid:e.data.uid,title:e.data.title,[s]:e.data[s],recurrenceId:e.data.recurrenceId})));this.pwCardDragHelper.startDragging(o.data,l,this.pwWorkWeek,{time:this.touchParams.pwDragStartTime,isDaySlot:!1,resourceId:this.touchParams.pwOriginalGroup},e),t.addClass("pw--moving-calendar-card")}this.touchParams.autoScrollData=this.body.range.pwStartAutoScroll(),this.body.emitter.emit("pwCardDragStarted")},Co.timeline.components.ItemSet.prototype._onDrag=function(e){var t,r;if(!this.touchParams.itemProps||this.touchParams.item.data.isArchived)return;if(e.stopPropagation(),this.hammer.session.stopped)return;let i,a,o,s=this.touchParams.selectedItem;if(this.options.editable.overrideItems||!s.editable?(i=this.options.editable.updateGroup,a=this.options.editable.updateTime):(i=s.editable.updateGroup,a=s.editable.updateTime),i&&s&&s.data.group){let t=this.groupFromTarget(e);t&&(o=t.groupId,o!==this.touchParams.pwLastGroup&&(this.touchParams.pwLastGroup=o))}let l=this.body.util.toTime(e.center.x-this.touchParams.pwOffsetX),d=Object(n.O)(l),c=this.touchParams.pwDragStartTime;null===(t=this.touchParams.autoScrollData)||void 0===t||t.updateTarget(l,e.center.y-this.body.dom.top.getBoundingClientRect().bottom),this.touchParams.pwDragCurrentTime=d,this.pwCardDragHelper.drag({time:d,isDaySlot:!1,resourceId:o||this.touchParams.pwLastGroup}),B()(r=this.touchParams.itemProps).call(r,(t=>{let r=this._cloneItemData(t.item.data);if(t.item.editable&&!t.item.editable.updateTime&&!t.item.editable.updateGroup&&!this.options.editable.overrideItems)return;a&&(t.dragLeft?Object(n.w)(d,c)?(r.start=t.data.start,r.isAllDay=t.data.isAllDay):(r.start=d,r.isAllDay=!0):t.dragRight&&(Object(n.w)(d,c)?(r.end=t.data.end,r.isAllDay=t.data.isAllDay):(r.end=d,r.isAllDay=!0)));let o=this.pwCardDragHelper.getDraggedCard(r.uid);if(!o||t.dragLeft||t.dragRight||(r.start=o.start,r.end=o.end,r.realStart=o.start,r.realEnd=o.end,r.cardRole=o.cardRole||t.data.cardRole),i&&!t.dragLeft&&!t.dragRight)if(o.resourceId||o.cardRole){let e=o.cardRole===me.c.Milestone?U.v:o.resourceId;r.group=t.pwIsFirstByUid?e:null}else r.group=t.data.group;let s=this.touchParams.selectedItem.parent,l=this.body.dom.center.offsetTop,h=e.center.y-this.body.dom.top.getBoundingClientRect().bottom-s.top-l;h<0?r.positionY=0:h>s.height?r.positionY=Number.POSITIVE_INFINITY:r.positionY=h,this.options.onMoving(r,(e=>{e&&t.item.setData(e)}))})),this.body.emitter.emit("_change")};const is=Co.timeline.components.ItemSet.prototype._onDragEnd;Co.timeline.components.ItemSet.prototype._onDragEnd=function(e){this._pwDragStopHandler&&this._pwDragStopHandler(),is.call(this,e)},Co.timeline.components.ItemSet.prototype._moveToGroup=function(e,t){let r=t&&this.groups[t];if(!r||r.groupId!==e.data.group){let t=e.parent;t&&(e.pwOldParent=t,t.remove(e),t.order()),r?(e.data.group=r.groupId,r.add(e),r.order(),e.pwOldParent&&e.pwOldParent.groupId===U.v!=(r.groupId===U.v)&&(e.dirty=!0,e.pwForceRedraw=!0)):e.data.group=null}},Co.timeline.components.ItemSet.prototype.pwUpdateSelection=function(){if(this.pwSelectedUids){let e=[];for(let t in this.items)this.pwSelectedUids.has(this.items[t].data.uid)&&e.push(t);this.setSelection(e,!0)}},Co.timeline.components.ItemSet.prototype.pwIsItemDragged=function(e){var t;return(null===(t=this._pwDraggedItemUids)||void 0===t?void 0:t.has(e.data.uid))||!1},Co.timeline.components.ItemSet.prototype.pwIsDragging=function(){return this._pwDraggedItemUids&&this._pwDraggedItemUids.size>0||!1};const as=Co.timeline.components.items.Item.prototype.setData;Co.timeline.components.items.Item.prototype.setData=function(e){let t=this.parent||this.pwOldParent;if(t&&void 0!==e.group&&t.itemSet._moveToGroup(this,e.group),this.dom&&this.dom.times){var r;this.pwOptions.updateDateTexts(e);let t=this.pwOptions.isDetailedView?e.timeText:e.timeTextShort,i=c()(r=re()(this.dom.times.childNodes)).call(r,(e=>e.nodeType===Node.TEXT_NODE));i&&(i.textContent=t),this.dom.times.classList.toggle(`pw-card__${this.pwOptions.isDetailedView?"time":"time-short"}--hidden`,!t)}adjustEventForView(e),this.pwDuration=this.pwOptions.getDateDistance(e.start,e.end),as.call(this,e)},Co.timeline.components.items.Item.prototype.pwIsVisibleByDuration=()=>!0;const ns=Co.timeline.components.items.RangeItem.prototype.hide;Co.timeline.components.items.RangeItem.prototype.hide=function(){this.displayed&&this.dom.line&&this.dom.line.parentNode&&this.dom.line.parentNode.removeChild(this.dom.line),ns.call(this)},Co.timeline.components.items.RangeItem.prototype.pwCalculateWidth=function(){0!==this.pwDuration?this.pwRawWidth=this.data.isMilestone?this.pwOptions.getMilestoneWidth(this):Math.floor(this.pwDuration/this.pwOptions.getCurrentRange()):this.pwRawWidth=-1},Co.timeline.components.items.RangeItem.prototype.pwIsVisibleByDuration=function(){return this.data.isMilestone?this.pwDuration>0:this.pwDuration/this.pwOptions.getCurrentRange()>=9};const os=Co.timeline.components.items.RangeItem.prototype.isVisible;Co.timeline.components.items.RangeItem.prototype.isVisible=function(e){return this.pwCalculateWidth(),!!os.call(this,e)&&this.pwRawWidth>=9},Co.timeline.components.items.RangeItem.prototype.repositionX=function(e){if(this.pwRawWidth<0)this.width=0;else{let e=this.parent.width,t=Math.max(this.pwRawLeft,0),r=Math.min(this.pwRawLeft+this.pwRawWidth-4,e);this.left=t,this.width=Math.max(r-t,0),this.dom.box.style.left=`${this.left}px`,this.dom.box.style.height=`${this.height}px`}this.dom.box.style.width=`${this.width}px`,this.width>0&&this._updateDomComponentsSizes(this._getDomComponentsSizes()),this.dom.line&&(this.dom.line.style.left=`${this.pwRawLeft}px`,this.dom.line.classList.toggle("pw-milestone-line--hidden",0===this.width)),this.data.isMilestone||this.dom.content.classList.toggle("pw-card--narrow",this.width<fe)},Co.timeline.components.items.RangeItem.prototype.repositionY=function(){const e=this.options.orientation.item,t=this.dom.box;t.style.top="top"===e?`${this.top+this.parent.props.pwYOffset}px`:this.parent.height+this.parent.props.pwYOffset-this.top-this.height+"px",this.dom.line&&(this.dom.line.style.top=`${this.top+this.parent.props.pwYOffset}px`)},Co.timeline.components.items.RangeItem.prototype._repaintDomAdditionals=()=>{},Co.timeline.components.items.RangeItem.prototype._createDomElement=function(){if(this.dom)return;let e=document.createElement("div");e["timeline-item"]=this,this.dom={box:e,frame:e},this.data.isMilestone&&this._pwCreateMilestoneLine(),this.dirty=!0};const ss=Co.timeline.components.items.RangeItem.prototype._appendDomElement;Co.timeline.components.items.RangeItem.prototype._appendDomElement=function(){if(ss.call(this),this.dom.line&&!this.dom.line.parentNode){let e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}},Co.timeline.components.items.RangeItem.prototype._updateDirtyDomComponents=function(){if(!this.dirty)return;let e=this.parent.itemSet.pwIsItemDragged(this);if(this.pwForceRedraw||!this.dom.content||!e){var t,r;this.pwForceRedraw=!1,this.data.isMilestone=this.data.cardRole===me.c.Milestone,this.data.className=null===(t=this.data.$ctrl)||void 0===t?void 0:t.getCardPreviewExtraClasses(this.data,"timeline-item"),this._updateContents(this.dom.frame);let e=a()(this.dom.frame).children(".pw-card");this.dom.content=e[0],this.dom.times=c()(e).call(e,`${this.pwOptions.cardBaseClass}__${this.pwOptions.isDetailedView?"time":"time-short"}`)[0],null!==(r=this.data.$ctrl)&&void 0!==r&&r.isCardResizeAvailable(this.data)&&(this.dom.dragLeft=e.children(".k-resize-w")[0],this.dom.dragLeft.dragLeftItem=this,this.dom.dragRight=e.children(".k-resize-e")[0],this.dom.dragRight.dragRightItem=this)}this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);let i=[this.editable.updateTime||this.editable.updateGroup?"timeline-editable":"timeline-readonly"];var n,o;(this.baseClassName&&i.push(this.baseClassName),this.data.className&&i.push(this.data.className),this.selected&&i.push("timeline-selected"),e&&i.push("k-event-drag-hint"),this.dom.box.className=i.join(" "),this.dom.content.classList.toggle("k-event-drag-hint",e),this.dom.content.style.maxWidth="none",this.data.isMilestone)?(this._pwCreateMilestoneLine(),this.dom.line&&!this.dom.line.parentNode&&this.parent.dom.background.appendChild(this.dom.line),i=["pw-milestone-line"],this.selected&&i.push("pw-milestone-line--selected"),0===this.width&&i.push("pw-milestone-line--hidden"),this.dom.line.className=i.join(" ")):(null===(n=this.dom.line)||void 0===n||null===(o=n.parentNode)||void 0===o||o.removeChild(this.dom.line),this.dom.line=null)},Co.timeline.components.items.RangeItem.prototype._getDomComponentsSizes=function(){let e;return this.overflow=!1,this.dirty&&(this.pwOptions.isDetailedView?this.dom.content.classList.remove("pw-card--small"):this.dom.content.classList.add("pw-card--small")),this.data.isMilestone?(this.pwCalculateWidth(),e=this.pwOptions.isDetailedView?42:22):e=this.pwOptions.isDetailedView?42:22,{content:{width:this.width},box:{height:e}}},Co.timeline.components.items.RangeItem.prototype._pwCreateMilestoneLine=function(){if(!this.dom.line){let e=document.createElement("div");e.className="pw-milestone-line",this.dom.line=e}},Co.timeline.components.items.BackgroundItem.prototype.repositionY=function(){this.dom.box.style.top=`${this.parent.top}px`,this.dom.box.style.height=`${Math.max(this.parent.height,this.parent.props.pwHeightToBottom)}px`};const ls=Co.timeline.TimeStep.prototype.setRange;Co.timeline.TimeStep.prototype.setRange=function(e,t,r){var i;ls.call(this,e,t,r),this._pwFirstWeekDay=kendo.culture().calendar.firstDay;let a=this._pwFirstWeekDay-1;a<0&&(a+=7),this._pwIsLastWeekDayWeekend=!ze()(i=this.pwOptions.workDays).call(i,a)};const ds=Co.timeline.TimeStep.prototype.roundToMinor;Co.timeline.TimeStep.prototype.roundToMinor=function(){this.scale===x.hb.Quarter?(this.current.subtract(this.current.month()%3,"month"),this.current.date(1),this.current.hours(0),this.current.minutes(0),this.current.seconds(0),this.current.milliseconds(0)):(ds.call(this),this.scale===x.hb.Week&&(this.current.weekday(this._pwFirstWeekDay),this.current>this._start&&this.current.subtract(1,"week")))};Co.timeline.TimeStep.prototype.next;Co.timeline.TimeStep.prototype.next=function(){let e=this.scale;e!==x.hb.Month&&e!==x.hb.Quarter&&e!==x.hb.Year||this.current.date(1);const t=this.current.valueOf();switch(this._pwHidden=!1,this.scale!==x.hb.Week&&(this._pwWasInterrupt=!1),this.scale){case x.hb.Day:this.current.add(this.step,"day");break;case x.hb.Week:if(this._pwWasInterrupt){this._pwWasInterrupt=!1;let e=this.current.weekday()>=this._pwFirstWeekDay;this.current.weekday(this._pwFirstWeekDay),this.current.add(e?this.step:this.step-1,"week")}else if(!1===this.options.showMajorLabels)this.current.add(this.step,"week");else{const e=this.current.clone();e.add(1,"week"),e.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),1!==this.current.date()&&(this.current.date(1),this._pwWasInterrupt=!0,this._pwHidden=!0))}break;case x.hb.Month:this.current.add(this.step,"month");break;case x.hb.Quarter:this.current.add(3*this.step,"month");break;case x.hb.Year:this.current.add(this.step,"year")}if(1!==this.step)switch(this.scale){case x.hb.Day:this.current.date()<this.step+1&&this.current.date(1);break;case x.hb.Week:this.current.week()<this.step&&this.current.week(1);break;case x.hb.Month:this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()===t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedQuarter=!1,this.switchedYear=!1,Co.timeline.DateUtil.stepOverHiddenDates(this.moment,this,t),e===x.hb.Week&&(this.switchedMonth||this.switchedYear)&&(this.current.date(1),this._pwHidden=!1)},Co.timeline.TimeStep.prototype.setMinimumStep=function(e){this._start&&this._end&&(this.scale=timelineScaleToScaleUnit(e),this.step=1)},Co.timeline.TimeStep.prototype.isMajor=function(){let e=getMajorScale(this.scale);switch(this.pwNewWeek=!1,this.pwNewMonth=e!==x.hb.Week,e){case x.hb.Week:return(this.switchedMonth||this.switchedYear)&&(this.pwNewWeek=!0,this.pwNewMonth=!0),!this.pwNewWeek&&(this.switchedDay&&this._pwIsLastWeekDayWeekend||this.current.weekday()===kendo.culture().calendar.firstDay)&&(this.pwNewWeek=!0),this.pwNewMonth||1!==this.current.date()||(this.pwNewMonth=!0),this.pwNewWeek||this.pwNewMonth;case x.hb.Month:return this.switchedMonth||1===this.current.date();case x.hb.Quarter:return this.switchedQuarter||this.current.month()%3==0;case x.hb.Year:return this.switchedYear||0===this.current.month();default:return!1}};Co.timeline.TimeStep.prototype.getClassName;Co.timeline.TimeStep.prototype.getClassName=function(){var e;let t=[],r=!1;this._pwHidden&&(t.push("pw--hidden"),r=!0);let i=new Date;this.step;switch(this.scale){case x.hb.Day:this.current.isSame(i,"day")&&t.push("timeline-today");let r=this.current.day();ze()(e=this.pwOptions.workDays).call(e,r)||t.push("pw--non-working"),this.pwOptions.isWeekendsHidden&&r===this.pwOptions.workWeekStart&&t.push("pw--work-week-start");break;case x.hb.Week:this.current.isSame(i,"week")&&t.push("timeline-current-week");break;case x.hb.Month:this.current.isSame(i,"month")&&t.push("timeline-current-month");break;case x.hb.Quarter:this.current.isSame(i,"quarter")&&t.push("timeline-current-quarter");break;case x.hb.Year:this.current.isSame(i,"year")&&t.push("timeline-current-year")}return{className:t.join(" "),expandPreviousLabel:r}},Co.timeline.TimeStep.prototype.getLabelMajor=function(e){return e||(e=this.current),e instanceof Date&&(e=this.moment(e)),this.format.majorLabels(e,this)},Co.timeline.Range.prototype.pwScrollByRelativeUnit=function(e,t){let r=new Date(this.start),i=new Date(this.end),a=this.pwOptions.getDateDistance(r,i)*e,n=this.pwOptions.getShiftedDate(r,a),o=this.pwOptions.getShiftedDate(i,a);this._applyRange(n,o),this.body.emitter.emit("rangechange",{...t,start:new Date(this.start),end:new Date(this.end)})},Co.timeline.Range.prototype.setRange=function(e,t,r,i,a){r||(r={}),!0!==r.byUser&&(r.byUser=!1),r.scaleMethod&&(this._pwLastScaleMethod=r.scaleMethod);let n=e?Co.util.convert(e,"Date").valueOf():null,o=t?Co.util.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,r.animation){let s=Co.util.convert(this.start,"Date"),l=Co.util.convert(this.end,"Date"),d="object"==typeof r.animation&&"duration"in r.animation?r.animation.duration:500,c="object"==typeof r.animation&&"easingFunction"in r.animation?r.animation.easingFunction:"easeInOutQuad",h=Co.util.easingFunctions[c];if(!h)throw new Error(`Unknown easing function ${qr()(c)}. Choose from: ${Fr()(Co.util.easingFunctions).join(", ")}`);let u=null,p=!1,m=e?this.pwOptions.getDateDistance(s,e):null,f=t?this.pwOptions.getDateDistance(l,t):null;const next=e=>{if(null===u&&(u=e),!this.props.touch.dragging){let t=e-u,c=h(t/d),y=t>d,v=y||null===n?n:this.pwOptions.getShiftedDate(s,m*c),_=y||null===o?o:this.pwOptions.getShiftedDate(l,f*c),g=this._applyRange(v,_);Co.timeline.DateUtil.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),p=p||g;let C={start:new Date(this.start),end:new Date(this.end),byUser:r.byUser,byNavigation:r.byNavigation,scaleMethod:r.scaleMethod||this._pwLastScaleMethod,event:r.event};a&&a(c,g,y),g&&this.body.emitter.emit("rangechange",C),y?(this.animationTimer=null,p?(this.body.emitter.emit("rangechanged",C),i&&i()):r.onNotChanged&&r.onNotChanged()):this.animationTimer=requestAnimationFrame(next)}};this.animationTimer=requestAnimationFrame(next)}else{let e=this._applyRange(n,o);if(Co.timeline.DateUtil.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),e){let e={start:new Date(this.start),end:new Date(this.end),byUser:r.byUser,byNavigation:r.byNavigation,scaleMethod:r.scaleMethod||this._pwLastScaleMethod,event:r.event};if(this.body.emitter.emit("rangechange",e),clearTimeout(this.timeoutID),r.sendEventImmediately?this.body.emitter.emit("rangechanged",e):this.timeoutID=vo()((()=>{this.body.emitter.emit("rangechanged",e)}),200),i)return i()}else r.onNotChanged&&r.onNotChanged()}},Co.timeline.Range.prototype.zoom=function(e,t,r,i){null===t&&(t=(this.start+this.end)/2);let a=new Date(this.start),n=new Date(this.end),o=new Date(t),s=this.pwOptions.getDateDistance(a,n),l=this.pwOptions.getDateDistance(o,a),d=this.pwOptions.getShiftedDate(o,l*e),c=this.pwOptions.getShiftedDate(o,(s+l)*e);this.startToFront=r<0,this.endToFront=r>0,this.setRange(d,c,{animation:!1,byUser:!0,scaleMethod:"zoomByWheel",sendEventImmediately:!0,event:i}),this.startToFront=!1,this.endToFront=!0},Co.timeline.Range.prototype._cancelAnimation=function(){this.animationTimer&&(cancelAnimationFrame(this.animationTimer),this.animationTimer=null)};const cs=Co.timeline.Range.prototype._onDragStart;Co.timeline.Range.prototype._onDragStart=function(e){e.srcEvent.ctrlKey||e.srcEvent.metaKey||(cs.call(this,e),this.props.touch.pwVisibleRange=this.pwOptions.getDateDistance(new Date(this.start),new Date(this.end)),a()(this.body.dom.center).addClass("timeline-content--scrolling"))},Co.timeline.Range.prototype._onDrag=function(e){if(!e||!this.props.touch.dragging||e.srcEvent.ctrlKey||e.srcEvent.metaKey||!this.props.touch.allowDragging)return;let t=this.options.direction;if("horizontal"!==t&&"vertical"!==t)throw new TypeError(`Unknown direction "${t}". Choose "horizontal" or "vertical".`);let r="horizontal"===t?e.deltaX:e.deltaY;r-=this.deltaDifference;let i,a="horizontal"===t?this.body.domProps.center.width:this.body.domProps.center.height,n=this.props.touch.pwVisibleRange;i=this.options.rtl?r/a*n:-r/a*n;let o=this.pwOptions.getShiftedDate(new Date(this.props.touch.start),i),s=this.pwOptions.getShiftedDate(o,n);this.previousDelta=r,this._applyRange(o,s);let l=new Date(this.start),d=new Date(this.end);this.body.emitter.emit("rangechange",{start:l,end:d,byUser:!0,event:e}),this.body.emitter.emit("panmove")};const hs=Co.timeline.Range.prototype._onDragEnd;Co.timeline.Range.prototype._onDragEnd=function(e){this.props.touch.needFinalDrag&&(this.props.touch.needFinalDrag=!1,this._onDrag(e)),a()(this.body.dom.center).removeClass("timeline-content--scrolling"),hs.call(this,e),this.body.emitter.emit("pwScrolledByDrag")};Co.timeline.Range.prototype.pwStartAutoScroll=function(e=0,t=1){let r,i,n,o,s=null,l=!1,d=a()(this.body.dom.center),c=null,h=null;const processFrame=a=>{if(l)return void((r||n)&&d.removeClass("timeline-content--scrolling"));if(requestAnimationFrame(processFrame),null===s)return void(s=a);let u=a-s;s=a;let p=new Date(this.start),m=new Date(this.end);if(null!==h){i=r,r=0;let a=this.body.domProps;h<e&&a.scrollTop<0&&(r=(h-e)*t),h+e/2>a.centerContainer.height&&a.scrollTop>a.scrollTopMin&&(r=(h+e/2-a.centerContainer.height)*t)}if(c){let e=this.pwOptions.getDateDistance(p,m);o=n,n=0;let r=this.pwOptions.getDateDistance(p,c)-.1*e;r<0?n=r*t:(r=.1*e-this.pwOptions.getDateDistance(c,m),r>0&&(n=r*t)),c=null}if(r||n){if(i||o||d.addClass("timeline-content--scrolling"),r){let e=jr()(r*u/100);this.body.emitter.emit("_pwVerticalScroll",{delta:e})}if(n){let e=jr()(n*u/1e3),t=this.pwOptions.getShiftedDate(p,e),r=this.pwOptions.getShiftedDate(m,e);this._applyRange(t,r),this.body.emitter.emit("rangechange",{start:new Date(this.start),end:new Date(this.end),byUser:!0})}}else(i||o)&&d.removeClass("timeline-content--scrolling")};return requestAnimationFrame(processFrame),{stop:()=>{l=!0},updateTarget:(e,t)=>{c=e,h=t}}},Co.timeline.Range.prototype._applyRange=function(e,t){let r=null!==e?Co.util.convert(e,"Date").valueOf():this.start,i=null!==t?Co.util.convert(t,"Date").valueOf():this.end,a=null!==this.options.max?Co.util.convert(this.options.max,"Date").valueOf():null,n=null!==this.options.min?Co.util.convert(this.options.min,"Date").valueOf():null;if(isNaN(r)||null===r||isNaN(i)||null===i)return!1;const getDateDistance=(e,t)=>this.pwOptions.getDateDistance(new Date(e),new Date(t)),getShiftedDate=(e,t)=>this.pwOptions.getShiftedDate(new Date(e),t).valueOf();let o=getDateDistance(this.start,this.end),s=getDateDistance(r,i),l=null;if(null!==this.options.zoomMin){let e=fo()(this.options.zoomMin);e<0&&(e=0),s<e&&(l=e)}if(null!==this.options.zoomMax){let e=fo()(this.options.zoomMax);e<0&&(e=0),s>e&&(l=e,this.body.emitter.emit("pwOutOfScale"))}if(l){let e=(l-s)/(o-s);r=getShiftedDate(r,Math.floor(getDateDistance(r,this.start)*e)),i=getShiftedDate(r,l)}if(i<r&&(i=r),null!==n&&r<n){let e=getDateDistance(r,n);r=getShiftedDate(r,e),i=getShiftedDate(i,e),null!==a&&i>a&&(i=a)}if(null!==a&&i>a){let e=getDateDistance(i,a);r=getShiftedDate(r,e),i=getShiftedDate(i,e),null!==n&&r<n&&(r=n)}let d=this.start!==r||this.end!==i;return r>=this.start&&r<=this.end||i>=this.start&&i<=this.end||this.start>=r&&this.start<=i||this.end>=r&&this.end<=i||this.body.emitter.emit("checkRangedItems"),this.start=r,this.end=i,d};const us=Co.timeline.components.Group.prototype.add;Co.timeline.components.Group.prototype.add=function(e,t){let r=this.itemSet.body.range;r.start>e.data.start&&r.end<e.data.end&&(this.checkRangedItems=!0),us.call(this,e,t)},Co.timeline.components.Group.prototype.setData=function(e){if(this.itemSet.groupTouchParams.isDragging)return;let t,r;var i;this.itemSet.options&&this.itemSet.options.groupTemplate?(r=no()(i=this.itemSet.options.groupTemplate).call(i,this),t=r(e,this.dom.inner)):t=e&&e.content;if(t instanceof Element){const redrawGroups=()=>{for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t);const toggleHiddenClass=()=>{this.dom.inner.firstChild?Co.util.removeClassName(this.dom.inner,"timeline-hidden"):Co.util.addClassName(this.dom.inner,"timeline-hidden")};e.$scope?e.$scope.$evalAsync((()=>toggleHiddenClass())):toggleHiddenClass()};this.dom.inner.firstChild?vo()((()=>redrawGroups())):redrawGroups()}else t instanceof Object&&t.isReactComponent||(t instanceof Object?r(e,this.dom.inner):this.dom.inner.innerHTML=null!=t?t:this.groupId||"");if(this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?Co.util.removeClassName(this.dom.inner,"timeline-hidden"):Co.util.addClassName(this.dom.inner,"timeline-hidden"),e&&e.nestedGroups){this.nestedGroups&&this.nestedGroups===e.nestedGroups||(this.nestedGroups=e.nestedGroups),void 0===e.showNested&&void 0!==this.showNested||(!1===e.showNested?this.showNested=!1:this.showNested=!0),Co.util.addClassName(this.dom.label,"timeline-nesting-group");let t=this.itemSet.options.rtl?"collapsed-rtl":"collapsed";this.showNested?(Co.util.removeClassName(this.dom.label,t),Co.util.addClassName(this.dom.label,"expanded")):(Co.util.removeClassName(this.dom.label,"expanded"),Co.util.addClassName(this.dom.label,t))}else if(this.nestedGroups){this.nestedGroups=null;let e=this.itemSet.options.rtl?"collapsed-rtl":"collapsed";Co.util.removeClassName(this.dom.label,e),Co.util.removeClassName(this.dom.label,"expanded"),Co.util.removeClassName(this.dom.label,"timeline-nesting-group")}if(e&&(e.treeLevel||e.nestedInGroup)){let t=15*(e.treeLevel||2);e.nestedGroups||(t+=15),Co.util.addClassName(this.dom.label,"vis-nested-group"),this.itemSet.options&&this.itemSet.options.rtl?this.dom.inner.style.paddingRight=t+"px":this.dom.inner.style.paddingLeft=t+"px"}const a=e&&e.className||null;a!==this.className&&(this.className&&(Co.util.removeClassName(this.dom.label,this.className),Co.util.removeClassName(this.dom.foreground,this.className),Co.util.removeClassName(this.dom.background,this.className),Co.util.removeClassName(this.dom.axis,this.className)),Co.util.addClassName(this.dom.label,a),Co.util.addClassName(this.dom.foreground,a),Co.util.addClassName(this.dom.background,a),Co.util.addClassName(this.dom.axis,a),this.className=a),this.style&&(Co.util.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(Co.util.addCssText(this.dom.label,e.style),this.style=e.style),this.props.label.width=-1},Co.timeline.components.Group.prototype._updateItemsInRange=function(e,t,r){var i;let a=[],n={},o=r.start,s=this.pwOptions.getShiftedDate(o,200*-this.pwOptions.getCurrentRange()).getTime(),l=r.end;const endSearchFunction=e=>e<o?-1:e>l?1:0;for(let t of e.byStart)(this.itemSet.pwIsItemDragged(t)||t.data.isTempCard)&&(t.pwCalculateWidth(),a.push(t),n[t.id]=!0);if(t.length>0)for(let e of t)this.itemSet.pwIsItemDragged(e)||this._checkIfVisibleWithReference(e,a,n,r);let d=Co.util.binarySearchCustom(e.byStart,(e=>e<s?-1:e>l?1:0),"data","start");if(this._traceVisible(d,e.byStart,a,n,(e=>e.data.start<s||e.data.start>l),r),this.checkRangedItems){this.checkRangedItems=!1;for(let t of e.byEnd)this.itemSet.pwIsItemDragged(t)||this._checkIfVisibleWithReference(t,a,n,r)}else{let t=Co.util.binarySearchCustom(e.byEnd,endSearchFunction,"data","end");this._traceVisible(t,e.byEnd,a,n,(e=>e.data.end<o||e.data.end>l),r)}a=S()(a).call(a,(e=>e.pwIsVisibleByDuration()));let c=this.pwOptions.getCurrentRange(),h=new Date(r.start),u=0;for(let t of e.byStart)n[t.id]&&t.data.id!==Vo&&(u+=this.pwOptions.getDateDistance(h,t.data.start),t.pwRawLeft=Math.floor(u/c),h=t.data.start);let p=R()(i=S()(a).call(a,(e=>!e.displayed))).call(i,(e=>e.redraw(!0))),m=p[0]?p[0].length:0;if(a.length>0&&m>0)for(let e=0;e<m;e++)B()(Co.util).call(Co.util,p,(t=>t[e]()));for(let e of a)e.repositionX();return a},Co.timeline.components.Group.prototype._traceVisible=function(e,t,r,i,a,n){if(-1===e)return;const shouldAddItem=e=>!i[e.id]&&(e.isVisible(n)||e.data.isMilestone)&&!(e.isCluster&&!e.hasItems())&&!e.cluster;for(let n=e;n>=0;n--){let e=t[n];if(a(e))break;shouldAddItem(e)&&(i[e.id]=!0,r.unshift(e))}for(let n=e+1;n<t.length;n++){let e=t[n];if(a(e))break;shouldAddItem(e)&&(i[e.id]=!0,r.push(e))}},Co.timeline.components.Group.prototype._calculateHeight=function(e){let t=0,r=this.visibleItems;if(r.length>0){let i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,n=!1;if(B()(Co.util).call(Co.util,r,(e=>{"background"!==e.data.type&&(i=Math.min(i,e.top),a=Math.max(a,e.top+e.height),n=!0)})),n&&i>e.axis){let t=i-e.axis;a-=t,B()(Co.util).call(Co.util,r,(e=>{e.top-=t}))}t=a+22}return t=Math.max(t,this.props.label.height),this.props.pwContentHeight=t,Math.max(t+this.props.pwYOffset,0)};const ps=Co.timeline.components.Group.prototype._applyGroupHeight;Co.timeline.components.Group.prototype._applyGroupHeight=function(e){if(ps.call(this,Math.max(e,this.props.pwHeightToBottom)),0===this.height)this.groupId===U.v?this.dom.foreground.style.borderWidth="0":(this.dom.foreground.style.display="none",this.dom.background.style.display="none");else if(this.dom.foreground.style.display="block",this.dom.background.style.display="block",this.groupId===U.v&&(this.dom.foreground.style.borderWidth="1px"),this.dom.foreground.classList.toggle("timeline-group--first-visible",this.props.pwIsFirstVisible),this.groupId!==U.v||!this.pwOptions.holdMilestones){let e;switch(this.groupId){case U.v:e=64;break;default:e=Yo[this.pwOptions.resourceType].height}this.dom.inner.style.marginTop=`${Math.min(this.height-e,0)}px`}},Co.timeline.components.Group.prototype._calculateGroupSizeAndPosition=function(){let e=this.itemSet,t=0;for(let r=0;e.groupIds[r]!==this.groupId;r++)t+=e.groups[e.groupIds[r]].height||0;this.top=t,this.right=0,this.width=e.props.width},Co.timeline.components.Group.prototype._didResize=function(e,t){e=Co.util.updateProperty(this,"height",t)||e,this._pwOldHeightToBottom!==this.props.pwHeightToBottom&&(e=!0,this._pwOldHeightToBottom=this.props.pwHeightToBottom);let r,i=Yo[this.pwOptions.resourceType];switch(Co.util.updateProperty(this.props.label,"width",i.width)&&(this.dom.label.style.width=`${this.props.label.width}px`,e=!0),this.groupId){case U.v:r=64;break;default:r=i.height}return e=Co.util.updateProperty(this.props.label,"height",r)||e},Co.timeline.components.Group.prototype._isGroupVisible=function(e,t){return!0},Co.timeline.components.Group.prototype.order=function(){let e=Co.util.toArray(this.items);this.orderedItems={byStart:e,byEnd:S()(e).call(e,(e=>void 0!==e.data.end))}},Co.timeline.components.Group.prototype._redrawItems=function(e,t,r,i){if(this.pwOptions.isRedraw&&(e||this.stackDirty||this.isVisible&&!t)){var a,n,o,s,l,d;let e={byStart:We()(a=S()(n=this.orderedItems.byStart).call(n,(e=>!e.isCluster))).call(a,((e,t)=>e.data.start.getTime()-t.data.start.getTime())),byEnd:We()(o=S()(s=this.orderedItems.byEnd).call(s,(e=>!e.isCluster))).call(o,((e,t)=>e.data.end.getTime()-t.data.end.getTime()))},t=this.pwOptions.sortOrderField;this.visibleItems=this._updateItemsInRange(e,S()(l=this.visibleItems).call(l,(e=>!e.isCluster)),i),this.visibleItems=We()(d=this.visibleItems).call(d,((e,r)=>e.data[t]-r.data[t]));let c=this._pwCustomSort(this.visibleItems);this._pwSetItemsTopBySortOrder(c,r);for(let e=0;e<this.visibleItems.length;e++)this.visibleItems[e].repositionX();this.itemSet.options.cluster&&B()(Co.util).call(Co.util,this.items,(e=>{e.cluster&&e.displayed&&e.hide()})),this.stackDirty=!1}},Co.timeline.components.Group.prototype._pwSetItemsTopBySortOrder=function(e,t){let r=[];for(let i of e){let e=S()(r).call(r,(e=>{return e.data.id!==Vo&&(r=e,(t=i).pwRawWidth>=0&&r.pwRawWidth>=0&&t.pwRawLeft<r.pwRawLeft+r.pwRawWidth&&r.pwRawLeft<t.pwRawLeft+t.pwRawWidth);var t,r}));e.length>0?i.top=Math.max(...R()(e).call(e,(e=>e.top+e.height+t.item.vertical))):i.top=0,r.push(i)}},Co.timeline.components.Group.prototype._pwCustomSort=function(e){var t,r,i;if(e.length<=1)return e;let a=[],o=this.pwOptions.sortOrderField;function updateItemsSortOrder(e,t){let r=new M.a(t);function isCollide(e,t){return e.pwRawWidth>=0&&t.pwRawWidth>=0&&e.pwRawLeft<t.pwRawLeft+t.pwRawWidth&&t.pwRawLeft<e.pwRawLeft+e.pwRawWidth}function checkCollision(t,i){if(!r.has(i)&&isCollide(t,i)){r.add(i);for(let t of e)checkCollision(i,t)}}for(let r of t)for(let t of e)checkCollision(r,t);let i=[];for(let t of e){if(r.has(t)){let e=S()(i).call(i,(e=>isCollide(e,t)));if(e.length>0){let r=Math.max(...R()(e).call(e,(e=>e.data[o])));t.data[o]=r+1}else t.data[o]=0}i.push(t)}}function getSortedItems(e){var t;return We()(t=new kendo.data.Query(e)).call(t,Object(n.U)("data")).toArray()}e=S()(e).call(e,(e=>!(e.data.cardType===x.h.ICalEvent||e.data.cardType===x.h.GoogleEvent||e.data.isRecurring&&e.data.isRecurring()&&!e.data.isException()||!e.data.isAllDay||e.data.isReadOnly)||(e.data[o]=Number.POSITIVE_INFINITY,a.push(e),!1)));let s=S()(e).call(e,(e=>e.selected&&e.data.positionY));if(1===s.length){if(this.itemSet.touchParams.dragLeftItem||this.itemSet.touchParams.dragRightItem)s[0].data[o]!==Number.POSITIVE_INFINITY&&updateItemsSortOrder(e,s);else{let t=s[0],r=function getItemPosition(e){return Math.max(Math.round(e.data.positionY/(e.height+e.options.margin.item.vertical)),0)}(t);if(t.data[o]!==r){let i=at()(e).call(e,(e=>e.id===t.id));y()(e).call(e,i,1),updateItemsSortOrder(e,s);let a=at()(e).call(e,(e=>e.data[o]===r));y()(e).call(e,-1!==a?a:e.length,0,t),updateItemsSortOrder(e,s)}}}else if(s.length>1){let t=this.pwDragStartTime&&this.pwDragStartTime!==this.itemSet.touchParams.pwDragCurrentTime.getTime(),r=this.itemSet.touchParams.pwLastGroup!==this.itemSet.touchParams.pwOriginalGroup;var l;if(t||r)updateItemsSortOrder(e=so()(l=S()(e).call(e,(e=>!e.selected||!e.data.positionY))).call(l,s),s);this.pwDragStartTime=this.itemSet.touchParams.pwDragCurrentTime.getTime()}let d=[],c=[],h=[];for(let t of e)t.data.isTempCard?d.push(t):t.data[o]===Number.POSITIVE_INFINITY?h.push(t):c.push(t);return[...b()(t=R()(r=re()(Ta()(i=lt.a.groupBy(c,(e=>e.data[o]))).call(i))).call(r,(e=>getSortedItems(e)))).call(t),...getSortedItems(h),...getSortedItems(a),...d]},Co.timeline.components.TimeAxis.prototype.redraw=function(){var e,t;this._pwPreviousFloatingLabelWidth||(this._pwPreviousFloatingLabelWidth=0);let r=this.props,i=this.dom.foreground,a=this.dom.background,n="top"===this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,o=i.parentNode!==n,s=Co.util.convert(this.body.range.start,"Date"),l=Co.util.convert(this.body.range.end,"Date");this.step=new Co.timeline.TimeStep(s,l,this.pwOptions.getCurrentRange(),this.body.hiddenDates,this.options),this.body.emitter.emit("pwUpdateScale",{scale:this.step.scale}),this.options.showMajorLabels=null!==getMajorScale(this.step.scale);let d=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,c=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;r.minorLabelHeight=d?28:0,r.majorLabelHeight=c?21:0,c||this.step.scale===x.hb.Day?i.classList.remove("timeline-foreground--high-minor-labels"):(r.minorLabelHeight+=21,i.classList.add("timeline-foreground--high-minor-labels"));let h=r.height;r.height=r.minorLabelHeight+r.majorLabelHeight,r.width=i.offsetWidth,r.minorLineHeight=this.body.domProps.left.height,r.minorLineWidth=1,r.majorLineHeight=r.minorLineHeight,r.majorLineWidth=1;let u=i.nextSibling,p=a.nextSibling;if(null===(e=i.parentNode)||void 0===e||e.removeChild(i),null===(t=a.parentNode)||void 0===t||t.removeChild(a),i.style.height=`${this.props.height}px`,this._repaintLabels(),u?n.insertBefore(i,u):n.appendChild(i),p?this.body.dom.backgroundVertical.insertBefore(a,p):this.body.dom.backgroundVertical.appendChild(a),this._pwFloatingLabel){let e=this._pwFloatingLabel.offsetWidth;this._pwIsFloatingLabelChanged=e!==this._pwPreviousFloatingLabelWidth,this._pwPreviousFloatingLabelWidth=e}else this._pwIsFloatingLabelChanged=!1;return this._isResized()||this._pwIsFloatingLabelChanged||o||r.height!==h};Co.timeline.components.TimeAxis.prototype._repaintLabels=function(){let e=this.options.orientation.axis,t=this.step;t.setMoment(this.options.moment),this.options.format&&t.setFormat(this.options.format),this.options.timeAxis&&t.setScale(this.options.timeAxis);let r,i,a,n=this.dom;n.redundant.lines=n.lines,n.redundant.majorTexts=n.majorTexts,n.redundant.minorTexts=n.minorTexts,n.lines=[],n.majorTexts=[],n.minorTexts=[];let o,s,l=0,d=null,c=0;t.start();let h=t.getCurrent();for(a=this.body.util.toScreen(h),t.pwIsFloatingLabel=!1;t.hasNext()&&c<1e3;){c++;let n=t.isMajor();s=t.getClassName(),r=h,i=a,t.next(),h=t.getCurrent(),a=this.body.util.toScreen(h);let u,p,m=l;switch(l=a-i,t.scale){case x.hb.Week:u=!0;break;default:u=l>=.4*m}this.options.showMinorLabels&&u&&(p=this._repaintMinorText(i,t.getLabelMinor(r),e,s),p.style.width=`${l}px`),n&&this.options.showMajorLabels?(i>0&&(null===d&&t.pwNewMonth&&(d=i),p=this._repaintMajorText(i,t.getLabelMajor(r),e,s)),o=this._repaintMajorLine(i,l,e,s)):u?o=this._repaintMinorLine(i,l,e,s):o&&(o.style.width=`${io()(o.style.width)+l}px`)}if(this.options.showMajorLabels){t.pwIsFloatingLabel=!0;let r=t.getLabelMajor(this.body.util.toTime(0)),i=0;null!==d&&(i=Math.min(d-this._pwPreviousFloatingLabelWidth,0)),this._pwFloatingLabel=this._repaintMajorText(i,r,e,s)}B()(Co.util).call(Co.util,this.dom.redundant,(e=>{for(;e.length;){var t;let r=e.pop();null==r||null===(t=r.parentNode)||void 0===t||t.removeChild(r)}}))};const ms=Co.timeline.components.TimeAxis.prototype._repaintMajorLine;Co.timeline.components.TimeAxis.prototype._repaintMajorLine=function(e,t,r,i){i.expandPreviousLabel&&this._pwPreviousLabel&&(this._pwPreviousLabel.style.width=`${t+this._pwPreviousWidth}px`);let a=ms.call(this,e,t,r,i.className);return a.style.top=`${this.props.height}px`,a};const fs=Co.timeline.components.TimeAxis.prototype._repaintMajorText;Co.timeline.components.TimeAxis.prototype._repaintMajorText=function(e,t,r,i){return fs.call(this,e,t,r,i.className)};const ys=Co.timeline.components.TimeAxis.prototype._repaintMinorLine;Co.timeline.components.TimeAxis.prototype._repaintMinorLine=function(e,t,r,i){this._pwPreviousLabel=this._pwCurrentLabel,this._pwPreviousWidth=t;let a=ys.call(this,e,t,r,i.className);return a.style.top=`${this.props.height}px`,a};const vs=Co.timeline.components.TimeAxis.prototype._repaintMinorText;Co.timeline.components.TimeAxis.prototype._repaintMinorText=function(e,t,r,i){let a=vs.call(this,e,t.html,r,i.className);return this._pwCurrentLabel=a,t.tooltip&&(a.title=t.tooltip),a};const _s=Co.timeline.Core.prototype._create;Co.timeline.Core.prototype._create=function(e){_s.call(this,e),this.dom.pwLeftTop=document.createElement("div"),this.dom.root.appendChild(this.dom.pwLeftTop),this.dom.pwLeftTop.className="timeline-left-top";let t=document.createElement("div");t.className="timeline-left-top-content",this.pwOptions.leftTopContent&&(t.appendChild(this.pwOptions.leftTopContent),this.dom.pwLeftTop.style.minWidth=`${this.pwOptions.leftPanelMinWidth}px`),this.dom.pwLeftTop.appendChild(t),this.dom.pwLeftTopShadow=document.createElement("div"),this.dom.pwLeftTop.appendChild(this.dom.pwLeftTopShadow),this.dom.pwLeftTopShadow.className="timeline-left-top-shadow",this.dom.pwShadowLeft=document.createElement("div"),this.dom.root.appendChild(this.dom.pwShadowLeft),this.dom.pwShadowLeft.className="timeline-shadow-left",this.dom.pwLeftTop.addEventListener(window.PointerEvent?"pointerdown":"mousedown",(e=>e.stopPropagation()),!0),this.dom.pwRightTop=document.createElement("div"),this.dom.root.appendChild(this.dom.pwRightTop),this.dom.pwRightTop.className="timeline-right-top";let r=document.createElement("div");r.className="timeline-right-top-content",this.pwOptions.rightTopContent&&r.appendChild(this.pwOptions.rightTopContent),this.dom.pwRightTop.appendChild(r),this.dom.pwRightTop.addEventListener(window.PointerEvent?"pointerdown":"mousedown",(e=>e.stopPropagation()),!0),this.on("_pwVerticalScroll",(e=>{this._setScrollTop(this.props.scrollTop-e.delta)}));const i=go()((()=>this.body.emitter.emit("pwScrolledByWheel")),200);this.dom.centerContainer.addEventListener("wheel",(e=>{let t;if(e.shiftKey)t=e.deltaY;else{if(Math.abs(e.deltaY)>=Math.abs(e.deltaX))return;t=e.deltaX}0!==t&&(e.stopPropagation(),e.preventDefault(),i(),this.range.pwScrollByRelativeUnit(t/1500,{byUser:!0,event:e}))}),!0),this.dom.leftContainer.addEventListener("wheel",(e=>{let t=new WheelEvent(e.type,e);this.dom.centerContainer.dispatchEvent(t),t.defaultPrevented&&e.preventDefault(),e.stopPropagation()}),!0),this._pwSavedScrollTop=this.pwOptions.scrollTop.load()},Co.timeline.Core.prototype._redraw=function(){var e;this.redrawCount++;let t=!1,r={},i=this.props,a=this.dom;if(!a||!a.container||0===a.root.offsetWidth)return void(this.redrawCount=0);let n=this.pwOptions.getOrientation();r=n===x.N.Top||n===x.N.Bottom?{...this.options,verticalScroll:!1}:{...this.options,verticalScroll:!0,height:"100%",maxHeight:"100%"},Co.timeline.DateUtil.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"===r.orientation?(Co.util.addClassName(a.root,"timeline-top"),Co.util.removeClassName(a.root,"timeline-bottom")):(Co.util.removeClassName(a.root,"timeline-top"),Co.util.addClassName(a.root,"timeline-bottom")),a.root.style.maxHeight=Co.util.option.asSize(r.maxHeight,""),a.root.style.minHeight=Co.util.option.asSize(r.minHeight,""),a.root.style.width=Co.util.option.asSize(r.width,""),i.border.left=0,i.border.right=0,i.border.top=0,i.border.bottom=0,i.borderRootHeight=a.root.offsetHeight-a.root.clientHeight,i.borderRootWidth=a.root.offsetWidth-a.root.clientWidth,0===a.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===a.root.clientHeight&&(i.borderRootWidth=i.borderRootHeight),i.center.height=a.center.offsetHeight,i.left.height=a.left.offsetHeight,i.right.height=a.right.offsetHeight,i.top.height=a.top.clientHeight||-i.border.top,i.bottom.height=a.bottom.clientHeight||-i.border.bottom;let o=i.pwContentHeight||Math.max(i.left.height,i.center.height,i.right.height),s=i.top.height+o+i.bottom.height+i.borderRootHeight+i.border.top+i.border.bottom;a.root.style.height=Co.util.option.asSize(r.height,`${s}px`),i.root.height=a.root.offsetHeight,i.background.height=i.root.height-i.borderRootHeight;let l=i.root.height-i.top.height-i.bottom.height-i.borderRootHeight;i.centerContainer.height=l,i.leftContainer.height=l,i.rightContainer.height=i.leftContainer.height,i.root.width=a.root.offsetWidth,i.background.width=i.root.width-i.borderRootWidth,this.initialDrawDone||(i.scrollbarWidth=Co.util.getScrollBarWidth()),r.verticalScroll?r.rtl?(i.left.width=a.leftContainer.clientWidth+i.scrollbarWidth||-i.border.left,i.right.width=a.rightContainer.clientWidth||-i.border.right):(i.left.width=a.leftContainer.clientWidth||-i.border.left,i.right.width=a.rightContainer.clientWidth+i.scrollbarWidth||-i.border.right):(i.left.width=a.leftContainer.clientWidth||-i.border.left,i.right.width=a.rightContainer.clientWidth||-i.border.right),this._setDOM();let d=this._updateScrollTop();if("top"!==r.orientation.item&&(d+=Math.max(i.centerContainer.height-i.center.height-i.border.top-i.border.bottom,0)),a.shadowTop.style.visibility="hidden",a.shadowBottom.style.visibility="hidden",a.shadowTopLeft.style.visibility="hidden",a.shadowBottomLeft.style.visibility="hidden",a.shadowTopRight.style.visibility="hidden",a.shadowBottomRight.style.visibility="hidden",a.pwLeftTop.style.width=`${i.left.width}px`,a.pwLeftTop.style.height=`${i.top.height}px`,a.pwLeftTopShadow&&(this.pwOptions.resourceType!==x.fb.NoResources?a.pwLeftTopShadow.style.display="none":a.pwLeftTopShadow.style.display=""),a.pwShadowLeft&&(this.pwOptions.resourceType!==x.fb.NoResources?(a.pwShadowLeft.style.display="",a.pwShadowLeft.style.width=`${i.left.width+8}px`,a.pwShadowLeft.style.height=`${i.root.height}px`):a.pwShadowLeft.style.display="none"),a.pwRightTop.style.height=`${i.top.height}px`,r.verticalScroll&&(a.rightContainer.className="timeline-panel timeline-right timeline-vertical-scroll",a.leftContainer.className="timeline-panel timeline-left",a.left.style.top="0px",a.right.style.top="0px"),(!r.verticalScroll||i.center.height<i.centerContainer.height)&&(a.left.style.top=`${d}px`,a.right.style.top=`${d}px`,a.rightContainer.className=a.rightContainer.className.replace(new RegExp("(?:^|\\s)timeline-vertical-scroll(?:\\s|$)")," "),a.leftContainer.className=a.leftContainer.className.replace(new RegExp("(?:^|\\s)timeline-vertical-scroll(?:\\s|$)")," "),i.left.width=a.leftContainer.clientWidth||-i.border.left,i.right.width=a.rightContainer.clientWidth||-i.border.right,this._setDOM()),!this.range.animationTimer){let e=this.pwOptions.getNewRange();e&&(this.range.props.touch.dragging?(this.range.props.touch.pwVisibleRange=e.scale,this.range.props.touch.needFinalDrag=!0):this.range.setRange(e.start,e.end,{animation:!1,byUser:!1}))}let c=i.center.height>i.centerContainer.height;if(this.hammer.get("pan").set({direction:c?Co.Hammer.DIRECTION_ALL:Co.Hammer.DIRECTION_HORIZONTAL}),this.itemSet.groupIds.length){i.pwContentHeight=0;let e=this.itemSet.groupIds[this.itemSet.groupIds.length-1],t=-d;for(let r of this.itemSet.groupIds){let a=this.itemSet.groups[r];a.props.pwHeightToBottom=r===e?i.centerContainer.height-i.pwContentHeight-1:0,i.pwContentHeight+=a.props.pwContentHeight,this.pwOptions.holdMilestones&&r===U.v?a.props.pwYOffset=0:(a.props.pwYOffset=-t,a.props.pwContentHeight>t?(a.props.pwIsFirstVisible=t>0,t=0):(a.props.pwIsFirstVisible=!1,t-=a.props.pwContentHeight))}r.verticalScroll&&(a.right.style.height=`${i.pwContentHeight}px`)}if(B()(e=this.components).call(e,(e=>{t=e.redraw()||t})),!t&&this._pwSavedScrollTop&&(this._setScrollTop(this._pwSavedScrollTop),this._pwSavedScrollTop=null,t=!0),t){if(this.redrawCount<10)return void this.body.emitter.emit("_change")}else this.redrawCount=0,this.itemSet.pwLinkPlotter.redraw(this.range.start,this.range.end,this.pwOptions.isDetailedView);this.pwMinorTicks=[];let h=Co.util.convert(this.body.range.start,"Date"),u=Co.util.convert(this.body.range.end,"Date"),p=new Co.timeline.TimeStep(h,u,this.pwOptions.getCurrentRange(),[],{showMajorLabels:!1}),m=!0;for(p.start();m;)m=p.hasNext(),this.pwMinorTicks.push(p.getCurrent().toDate()),p.next();this.initialRangeChangeDone=!0,this.body.emitter.emit("changed")},Co.timeline.Core.prototype._updateScrollTop=function(){let e=Math.min(Math.ceil(this.props.centerContainer.height-(this.props.pwContentHeight||0)),0);return e!==this.props.scrollTopMin&&("top"!==this.options.orientation.item&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.pwOptions.scrollTop.save(this.props.scrollTop),this.props.scrollTop},Co.timeline.Core.prototype._onDrag=function(e){if(!e||!this.touch.allowDragging)return;const t=this._getScrollTop();this._setScrollTop(this.touch.initialScrollTop+e.deltaY)!==t&&this.emit("verticalDrag")},Co.Timeline.prototype.fit=()=>{};const gs={autoResize:!1,orientation:"top",align:"left",rtl:!1,clickToUse:!1,showMajorLabels:!0,groupEditable:{order:!0},itemsAlwaysDraggable:{item:!0,range:!0},selectable:!0,multiselect:!0,showCurrentTime:!1,showTooltips:!1,type:"range",verticalScroll:!0,horizontalScroll:!1,zoomKey:"ctrlKey",margin:{item:{horizontal:4,vertical:3},axis:0}},Cs=!1,ks=pe()('\n<div class="timeline-label-text">\n    <div class="timeline-label-text__weekday">\n        #= data.weekDay #\n    </div>\n    <div class="timeline-label-text__date">\n        #= data.date #\n    </div>\n</div>\n').call('\n<div class="timeline-label-text">\n    <div class="timeline-label-text__weekday">\n        #= data.weekDay #\n    </div>\n    <div class="timeline-label-text__date">\n        #= data.date #\n    </div>\n</div>\n'),Ds=pe()('\n<div class="timeline-label-text timeline-label-text--high">\n    # if (data.weekNumber) { #\n    <div class="timeline-label-text__week-number">\n        #= data.weekNumber #\n    </div>\n    # } #\n    # if (data.month) { #\n    <div class="timeline-label-text__month #= data.monthClass #">\n        #= data.month #\n    </div>\n    # } #\n</div>\n').call('\n<div class="timeline-label-text timeline-label-text--high">\n    # if (data.weekNumber) { #\n    <div class="timeline-label-text__week-number">\n        #= data.weekNumber #\n    </div>\n    # } #\n    # if (data.month) { #\n    <div class="timeline-label-text__month #= data.monthClass #">\n        #= data.month #\n    </div>\n    # } #\n</div>\n'),Es=pe()('\n<div class="timeline-label-text">\n    #= data.week #\n    <div class="timeline-label-text__week">\n        #= data.weekNumber #\n    </div>\n</div>\n').call('\n<div class="timeline-label-text">\n    #= data.week #\n    <div class="timeline-label-text__week">\n        #= data.weekNumber #\n    </div>\n</div>\n'),bs=pe()('\n<div class="timeline-label-text">\n    <div class="timeline-label-text__month">\n        #= data.month #\n    </div>\n</div>\n').call('\n<div class="timeline-label-text">\n    <div class="timeline-label-text__month">\n        #= data.month #\n    </div>\n</div>\n'),ws=pe()('\n<div class="timeline-label-text">\n    #= data.quarter #\n    <div class="timeline-label-text__quarter">\n        #= data.quarterNumber #\n    </div>\n</div>\n').call('\n<div class="timeline-label-text">\n    #= data.quarter #\n    <div class="timeline-label-text__quarter">\n        #= data.quarterNumber #\n    </div>\n</div>\n'),Ss=pe()('\n<div class="timeline-label-text">\n    <div class="timeline-label-text__year">\n        #= data.year #\n    </div>\n</div>\n').call('\n<div class="timeline-label-text">\n    <div class="timeline-label-text__year">\n        #= data.year #\n    </div>\n</div>\n'),Ts=kendo.template(ks,{useWithBlock:!1}),As=kendo.template(Ds,{useWithBlock:!1}),Is=kendo.template(Es,{useWithBlock:!1}),Rs=kendo.template(bs,{useWithBlock:!1}),Os=kendo.template(ws,{useWithBlock:!1}),Ps=kendo.template(Ss,{useWithBlock:!1});class SchedulerTimelineView_SchedulerTimelineView extends kendo.ui.TimelineView{constructor(e,t){var r,i,o,s;if(super(e,t),this.name=this.options.viewName,this._isDetailedView=this.options.isDetailedView,this._groupsResourceName=this.options.group.resources[0],this._groupsResource=c()(r=this.options.resources).call(r,(e=>e.name===this._groupsResourceName)),!this._groupsResource)throw new Error(`Cannot find ${this._groupsResourceName} resources description`);let l=null,d=this._licenseSrv.checkPaidFeatureAvailable(x.B.TimelineScales,!1),h=this.getScale();h>No&&(h=Math.floor(h/Bo)),this._currentTimelineScale=h,this._workWeek=this._appCommonSrv.getSchedulerWorkWeek();let u={},p=document.createElement("div");p.style.position="absolute",p.style.left=0,p.style.top=0,p.style.width=0,p.style.height=0,p.style.overflow="hidden";let m={leftTopContent:this.options.leftTopContent[this._groupsResourceName],leftPanelMinWidth:90,rightTopContent:this.options.rightTopContent[this._groupsResourceName],holdMilestones:!1,workWeekStart:this.options.workWeekStart,workDays:this._workDays,isWorkDay:no()(i=this._isWorkDay).call(i,this),workDayStart:this.options.workDayStart,workDayEnd:this.options.workDayEnd,resourceType:this._groupsResourceName,sortOrderField:this._groupsResource.cardSortOrderField,cardBaseClass:`.pw-card-${this.options.cardTheme}`,isDetailedView:this._isDetailedView,showWeekNumbers:this.options.showWeekNumbers,isWeekendsHidden:this.options.showWorkDays,updateDateTexts:no()(o=this._setEventTimes).call(o,this),getMilestoneWidth:e=>{let t=u[e.data.id];if(!t||t.content!==e.content||t.isDetailedView!==this._isDetailedView){var r;let o=null===(r=t)||void 0===r?void 0:r.element[0];var i,n;if(o||(o=document.createElement("div"),o.className="timeline-item timeline-range pw-milestone",o.style.width=0),o.innerHTML=e.content,this._isDetailedView)null===(i=o.firstElementChild)||void 0===i||i.classList.remove("pw-card--small");else null===(n=o.firstElementChild)||void 0===n||n.classList.add("pw-card--small");p.appendChild(o),t={content:e.content,element:a()(o),isDetailedView:this._isDetailedView},u[e.data.id]=t}if(!t.width){let r,i=t.element.children(".k-event");if(!i[0])return 0;let a=`pw-card-${this.options.cardTheme}`;if(!i.hasClass(a))return 0;let n=i.children(`.${a}__title`)[0],o=i.children(`.${a}__icons`)[0];if(this._isDetailedView){let e=i.children(`.${a}__details`)[0];r=n.scrollWidth;let t=e.scrollWidth;o&&(t+=o.scrollWidth+2),r=Math.max(r,t)+16}else{let t=i.children(`.${a}__time-short`)[0];r=n.scrollWidth+16,t&&e.data.timeTextShort&&(r+=t.scrollWidth+3),o&&(r+=o.scrollWidth+2)}t.width=Math.max(100,Math.min(200,r))}return t.width},getShiftedDate:(e,t)=>Object(n.f)(e,t,this._workWeek),getDateDistance:(e,t)=>Object(n.v)(e,t,this._workWeek).ms,getCurrentRange:()=>this._currentTimelineScale,getNewRange:()=>{let e=this._visTimeline.props.centerContainer.width;return e===l?null:(l=e,this._visTimeline.range.options.zoomMin=this._transformScale(zo),this._visTimeline.range.options.zoomMax=this._transformScale(d?Uo:Wo),this._getRangeBySelectedDate(this.selectedDate,this._currentTimelineScale))},scrollTop:{save:e=>this.options.$scope._timelineScrollTop=e,load:()=>this.options.$scope._timelineScrollTop},getOrientation:()=>this.options.$ctrl.schedulerOrientation};Co.timeline.Core.prototype.pwOptions=m,Co.timeline.TimeStep.prototype.pwOptions=m,Co.timeline.components.items.Item.prototype.pwOptions=m,Co.timeline.Range.prototype.pwOptions=m,Co.timeline.components.TimeAxis.prototype.pwOptions=m,Co.timeline.components.Group.prototype.pwOptions=m,Co.timeline.components.ItemSet.prototype.pwOptions=m;const f=kendo.template(Ro,{useWithBlock:!1});let y,v=new lt.a;switch(this._groupsResourceName){case x.fb.NoResources:y="<div></div>";break;case x.fb.Members:y=Oo;break;case x.fb.Calendars:y=Po;break;case x.fb.Lists:y=Lo;break;case x.fb.Labels:y=Mo}const _=kendo.template(y,{useWithBlock:!1}),g=kendo.template(kendo.format(ve,this.options.allDayEventTemplate),{useWithBlock:!1});this._workWeek=this.options.showWorkDays?{start:this.options.workWeekStart,end:this.options.workWeekEnd}:null,this.selectedDate=Object(n.O)(this.selectedDate||new Date);let C=kendo.culture();if(this._timelineOptions={...gs,locale:C.name,format:{minorLabels:(e,t)=>({html:timeLabelFormat(e,t,C),tooltip:t===x.hb.Day?kendo.toString(e.toDate(),"D"):null}),majorLabels:(e,t)=>{if(t.scale!==x.hb.Day){let r=getMajorScale(t.scale);return r?timeLabelFormat(e,r,C):""}let r=null,i=null;return t.pwIsFloatingLabel?i=kendo.toString(e.toDate(),"MMMM"):(this.options.showWeekNumbers&&t.pwNewWeek&&(r=kendo.date.weekInYear(e.toDate(),C.calendar.firstDay)),t.pwNewMonth&&(i=kendo.toString(e.toDate(),"MMMM"))),As({weekNumber:r,month:i,monthClass:this.options.showWeekNumbers?"timeline-label-text__month--high":""})}},groupTemplate:e=>{if(!e)return;let t=e[this._groupsResource.dataValueField],r=t===U.v&&this._groupsResourceName!==x.fb.NoResources,i=r?f:_,n=a()(i(e));return n.one("mouseenter",(()=>{n.on("click",".pw-js-remove-resource",(()=>{let t={};r?t.isMilestones=!0:t.resource=e,this.options.$scope.$broadcast(x.n.TimelineResourceRemoveRequested,t)}));let i=c()(n).call(n,".pw-timeline-resource__hide-btn");i.removeAttr("style");let a=v.get(t);a&&a.$destroy(),a=this._htmlHelperSrv.compileElement(n,this.options.$scope,!0),a.$evalAsync(),v.set(t,a),e.$scope=a,vo()((()=>{i.is(":hover")&&i.trigger("mouseenter")}))})),n[0]},template:(e,t,r)=>{if(r)return"background"===r.type?"":g(r)},editable:{updateTime:!0,updateGroup:!0},onMoving:(e,t)=>{e.isReadOnly||e.isArchived||e.start>e.end?t(null):t(e)},onMove:(e,t)=>{e.className="",t(e)},maxMinorChars:10},this.options.showWorkDays){let e=Object(n.a)(Object(n.db)(new Date,this.options.workWeekEnd),1),t=Object(n.eb)(e,this.options.workWeekStart);Object(n.w)(e,t)||(this._timelineOptions.hiddenDates={start:e,end:Object(n.a)(t,7),repeat:"weekly"})}this._initTimelineDataSource(),this._initTimeline(),this.content=c()(e).call(e,".timeline-content"),this._isDetailedView&&c()(e).call(e,".timeline-timeline").addClass("timeline-timeline--detailed-card-view"),this._visTimeline.dom.root.appendChild(p),this._rangeHighlight={id:Vo,type:"background",className:"pw-scheduler-range-highlight",style:"pointer-events: none;",clone:function(){return{...this}}};let k=R()(s=[x.n.ResizeListenerWindowResized,x.n.ResizeListenerElementResized]).call(s,(e=>this.options.$scope.$on(e,(()=>{this._appCommonSrv.isSchedulerShown()&&this._visTimeline.redraw()}))));this._cleanListeners=()=>{for(let e of k)e();for(let e of Ta()(v).call(v))e.$destroy()}}get _appCommonSrv(){return this._appCommonSrvLazy||(this._appCommonSrvLazy=CustomScheduler_CustomScheduler.$injector.get("appCommonSrv")),this._appCommonSrvLazy}get _htmlHelperSrv(){return this._htmlHelperSrvLazy||(this._htmlHelperSrvLazy=CustomScheduler_CustomScheduler.$injector.get("htmlHelperSrv")),this._htmlHelperSrvLazy}get _licenseSrv(){return this._licenseSrvLazy||(this._licenseSrvLazy=CustomScheduler_CustomScheduler.$injector.get("licenseSrv")),this._licenseSrvLazy}get _platformSrv(){return this._platformSrvLazy||(this._platformSrvLazy=CustomScheduler_CustomScheduler.$injector.get("platformSrv")),this._platformSrvLazy}get _settingsSrv(){return this._settingsSrvLazy||(this._settingsSrvLazy=CustomScheduler_CustomScheduler.$injector.get("settingsSrv")),this._settingsSrvLazy}get _telemetrySrv(){return this._telemetrySrvLazy||(this._telemetrySrvLazy=CustomScheduler_CustomScheduler.$injector.get("telemetrySrv")),this._telemetrySrvLazy}get _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=CustomScheduler_CustomScheduler.$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}get _calendarCardsSrv(){return this._calendarCardsSrvLazy||(this._calendarCardsSrvLazy=CustomScheduler_CustomScheduler.$injector.get("calendarCardsSrv")),this._calendarCardsSrvLazy}get isTimeAvailable(){return!1}get isScaleAvailable(){return!0}get isHideWeekendsAvailable(){return!0}get selectedDate(){var e;return(null===(e=this.options.$ctrl.schedulerWidget)||void 0===e?void 0:e.date())||this._selectedDate}set selectedDate(e){Object(n.w)(this.selectedDate,e)||(this.options.$scope.$emit(x.n.ScrollSchedulerViewRequested,{scrollToDate:e,navigationMode:x.y.Internal}),this._selectedDate=e,this.options.$scope.$evalAsync((()=>{this.options.$ctrl.schedulerWidget.date(e),this._selectedDate=null})))}isVisibleDate(e){let{start:t,end:r}=this._visTimeline.getWindow();return Object(n.ob)(e,t,r)}get navigationActions(){if(!this._navigationActions)switch(this.currentScaleUnit){case x.hb.Day:this._navigationActions={leftActions:[{type:x.x.PreviousDay,icon:"mdi-chevron-left",tooltip:"TOOLTIPS.DAY_BACKWARD"}],rightActions:[{type:x.x.NextDay,icon:"mdi-chevron-right",tooltip:"TOOLTIPS.DAY_FORWARD"}]};break;case x.hb.Week:this._navigationActions={leftActions:[{type:x.x.PreviousWeek,icon:"mdi-chevron-left",tooltip:"TOOLTIPS.WEEK_BACKWARD"}],rightActions:[{type:x.x.NextWeek,icon:"mdi-chevron-right",tooltip:"TOOLTIPS.WEEK_FORWARD"}]};break;case x.hb.Month:this._navigationActions={leftActions:[{type:x.x.PreviousMonth,icon:"mdi-chevron-left",tooltip:"TOOLTIPS.MONTH_BACKWARD"}],rightActions:[{type:x.x.NextMonth,icon:"mdi-chevron-right",tooltip:"TOOLTIPS.MONTH_FORWARD"}]};break;case x.hb.Quarter:this._navigationActions={leftActions:[{type:x.x.PreviousQuarter,icon:"mdi-chevron-left",tooltip:"TOOLTIPS.QUARTER_BACKWARD"}],rightActions:[{type:x.x.NextQuarter,icon:"mdi-chevron-right",tooltip:"TOOLTIPS.QUARTER_FORWARD"}]};break;case x.hb.Year:this._navigationActions={leftActions:[{type:x.x.PreviousYear,icon:"mdi-chevron-left",tooltip:"TOOLTIPS.YEAR_BACKWARD"}],rightActions:[{type:x.x.NextYear,icon:"mdi-chevron-right",tooltip:"TOOLTIPS.YEAR_FORWARD"}]}}return this._navigationActions}get currentScaleUnit(){return this._currentScaleUnit}set currentScaleUnit(e){var t;let r,i=null===(t=this._visTimeline)||void 0===t?void 0:t.range;if(!i)return;switch(e){case x.hb.Day:r=zo;break;case x.hb.Week:r=Fo;break;case x.hb.Month:r=$o;break;case x.hb.Quarter:r=xo;break;case x.hb.Year:r=Go;break;default:throw new Error(`Timeline scale unit ${e} is not supported`)}if(r>Wo&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimelineScales,!0))return;this._currentTimelineScale=r;let a=this._getRangeBySelectedDate(this.selectedDate,this._currentTimelineScale);i.setRange(a.start,a.end,{animation:Cs,byUser:!0,byNavigation:!0,scaleMethod:"selectPredefined"}),this._saveScale()}get contentHeight(){let e=this._visTimeline.body.domProps;return e.top.height+e.center.height}get pwContentHeight(){let e=this._visTimeline.body.domProps;return e.top.height+e.pwContentHeight}getClosestVisibleSlot(e){e=Object(n.O)(e);let t,{start:r,end:i}=this._visTimeline.getWindow(),a={start:this.options.workWeekStart,end:this.options.workWeekEnd};t=Object(n.ob)(e,r,i)?!Object(n.sb)(e.getDay(),a)&&this.options.showWorkDays?Object(n.Y)(e,a):Object(n.O)(e):i<e?Object(n.O)(i):new Date(r);let o=this.getSlotByDate(t);if(!o)return{start:e,end:e};const shiftSlotInView=(e,t)=>r>t?this.getSlotByDate(Object(n.a)(e.endDate,1)):i<t?this.getSlotByDate(Object(n.a)(e.startDate,-1)):e;switch(this.currentScaleUnit){case x.hb.Day:return o=shiftSlotInView(o,Object(n.W)(o.startDate)),{start:o.startDate,end:o.startDate};case x.hb.Week:case x.hb.Month:case x.hb.Quarter:case x.hb.Year:let e=o.startDate.getTime()+(o.endDate.getTime()-o.startDate.getTime())/2;return o=shiftSlotInView(o,new Date(e)),{start:o.startDate,end:o.endDate};default:throw new Error(`Unsupported view scale: ${this.currentScaleUnit}`)}}setCardDragHelper(e){this._visTimeline.itemSet.pwCardDragHelper=e,this._visTimeline.itemSet.pwWorkWeek=this._workWeek}applyPreviousViewOptions(e){(null==e?void 0:e.name)===x.O.Timeline&&(this._currentScaleUnit=e.currentScaleUnit)}addEventListener(e,t){this._visTimeline.on(e,(e=>t(e.event)))}startDate(){let e=this._getRangeBySelectedDate(this.selectedDate,this._currentTimelineScale),t=Math.max(400*this._currentTimelineScale,Ho);return new Date(e.start.getTime()-t)}endDate(){let e=this._getRangeBySelectedDate(this.selectedDate,this._currentTimelineScale),t=Math.max(400*this._currentTimelineScale,Ho);return new Date(e.end.getTime()+t)}getCardTargetCells(e){if(e.hasClass("timeline-group"))return[e]}getCardTargetSortOrder(e,t){let r=t.children().toArray(),i=S()(r).call(r,(t=>e.offsetX>t.offsetLeft&&e.offsetX<t.offsetLeft+t.offsetWidth));if(0===i.length)return 0;let a=Math.max(...R()(i).call(i,(e=>Math.abs(e.offsetTop)))),n=r[r.length-1];return Math.round(a/n.offsetHeight+1)}getCardSortOrderField(){return this._groupsResource.cardSortOrderField}getResourceIdByCell(e){if(e.hasClass("timeline-group"))return e[0]["timeline-group"].groupId}createMouseTargetHighlight(e){let t=this.getSlotByEvent(e);if(!t)return;if(this._visCardsDataSource.get(this._rangeHighlight.id))return;let r=t.resources[this._groupsResource.field],i=this._groupsResource.multiple?r[0]:r,a=this._rangeHighlight.clone();a[this._cardIdField]=a.id,a.start=t.startDate,a.originalStart=t.startDate,a.end=t.endDate,a.originalEnd=t.endDate,a.isAllDay=!0,a[this._groupsResource.cardSortOrderField]=Number.POSITIVE_INFINITY,a[this._groupsResource.field]=r,a.group=i,adjustEventForView(a),this._visCardsDataSource.add([a],"ignore")}updateMouseTargetHighlight(e){let t=this.getSlotByEvent(e);if(!t)return;let r=this._visCardsDataSource.get(this._rangeHighlight.id);if(!r)return;let i=t.resources[this._groupsResource.field],a=this._groupsResource.multiple?i[0]:i,n=r.clone();n[this._groupsResource.field]=i,n.group=a,t.endDate<=r.originalStart&&(n.start=t.startDate),t.endDate>=r.originalEnd&&(n.end=t.endDate),adjustEventForView(n),this._visCardsDataSource.update([n],"ignore")}startAutoScroll(){this._visTimeline.touch.autoScrollData=this._visTimeline.body.range.pwStartAutoScroll(40,3)}updateAutoScroll(e){var t;let r=this._visTimeline.getEventProperties(e),{time:i,y:a}=r;null===(t=this._visTimeline.touch.autoScrollData)||void 0===t||t.updateTarget(i,a)}stopAutoScroll(){var e;null===(e=this._visTimeline.touch.autoScrollData)||void 0===e||e.stop()}getRangeHighlightDates(){const e=this._visCardsDataSource.get(this._rangeHighlight.id);if(e)return{start:e.start,end:e.end}}removeRangeHighlight(){this._visCardsDataSource.remove(this._rangeHighlight.id)}getSlotByEvent(e){let t=this._visTimeline.getEventProperties(e),r=this.getSlotByDate(t.time);if(r){if(this._groupsResourceName===x.fb.Labels){let e=this._visGroupsDataSource.get(t.group);r.labelName=e.resourceData.name,r.labelColor=e.resourceData.color}return{...r,resources:{[this._groupsResource.field]:this._groupsResource.multiple?[t.group]:t.group}}}}getSlotByDate(e){let t={isDaySlot:!0},r=this._getCellRange(e);if(r){t.startDate=Object(n.f)(r.start,0,this._workWeek);let e=Object(n.f)(r.end,0,this._workWeek);return t.endDate=Object(n.f)(e,-864e5,this._workWeek),t}}adjustUpdateEventData(e,t,r){return r.isAllDay?{...r,start:Object(n.O)(r.start),end:Object(n.O)(r.end)}:{...r,start:Object(n.Eb)(r.start,t.previousStart),end:Object(n.Eb)(r.end,t.previousEnd)}}changeScale(e){if(this._isScaling)return;let t;switch(e){case"in":if(this._currentTimelineScale<=zo)return;t=Math.round(this._currentTimelineScale/1.5),t<zo+jo&&(t=zo);break;case"out":if(this._currentTimelineScale>=Uo)return;t=Math.round(1.5*this._currentTimelineScale),t>Uo-jo&&(t=Uo)}this._isScaling=!0,this._currentTimelineScale=t;let{start:r,end:i}=this._getRangeBySelectedDate(this.selectedDate,this._currentTimelineScale);this._visTimeline.range.setRange(r,i,{scaleMethod:"zoomByButtons",animation:Cs,onNotChanged:()=>this._isScaling=!1},(()=>this._isScaling=!1)),this._saveScale()}getScale(){let e=this._settingsSrv.currentSettings.global;if(this._appCommonSrv.isSchedulerInPreview())return e.defaultTimelineScale;let t=this._trelloIntegrationSrv.getCurrentBoardId();return this._settingsSrv.currentSettings.getGlobalBoardSettings(t).timelineScale}redraw(e){e!==this._isDetailedView&&(this._isDetailedView=newIsDetailedView,this._visTimeline.itemSet.pwIsItemsHeightDirty=!0);let t=this._visTimeline.itemSet.items;for(let e in t){let r=t[e].data;this._setEventTimes(r)}this._visTimeline.redraw()}getDateToNavigate(e){switch(e){case x.x.Today:return roundDateToScaleUnit(new Date,this.currentScaleUnit);case x.x.PreviousDay:let e=this.selectedDate;do{e=Object(n.a)(e,-1)}while(!Object(n.sb)(e.getDay(),this._workWeek));return e;case x.x.NextDay:return Object(n.a)(this.selectedDate,1);case x.x.PreviousWeek:return Object(n.a)(roundDateToScaleUnit(this.selectedDate,x.hb.Week),-7);case x.x.NextWeek:return Object(n.a)(roundDateToScaleUnit(this.selectedDate,x.hb.Week),7);case x.x.PreviousMonth:return Object(n.d)(roundDateToScaleUnit(this.selectedDate,x.hb.Month),-1);case x.x.NextMonth:return Object(n.d)(roundDateToScaleUnit(this.selectedDate,x.hb.Month),1);case x.x.PreviousQuarter:return Object(n.d)(roundDateToScaleUnit(this.selectedDate,x.hb.Quarter),-3);case x.x.NextQuarter:return Object(n.d)(roundDateToScaleUnit(this.selectedDate,x.hb.Quarter),3);case x.x.PreviousYear:return Object(n.g)(roundDateToScaleUnit(this.selectedDate,x.hb.Year),-1);case x.x.NextYear:return Object(n.g)(roundDateToScaleUnit(this.selectedDate,x.hb.Year),1)}throw new Error(`Navigation action ${e} unsupported by view ${this.options.viewName}`)}scrollTo(e){let{date:t,navigationMode:r}=e;if(r===x.y.ClosestVisible)return;if(Object(n.sb)(t.getDay(),this._workWeek)||(t=Object(n.f)(t,0,this._workWeek)),Object(n.w)(t,this.selectedDate))return;if(this.options.$ctrl.schedulerWidget.date(t),!this._visTimeline)return;let{start:i,end:a}=this._getRangeBySelectedDate(t,this._currentTimelineScale);this._visTimeline.range.setRange(i,a,{animation:Cs,byUser:!0,byNavigation:!0})}scrollToResource(e){let t=this._visTimeline.itemSet.groups[e];if(!t||t.isVisible)return;let r=t.top;void 0!==r&&(-1*this._visTimeline._getScrollTop()>r?this._visTimeline._setScrollTop(r):this._visTimeline._setScrollTop(-r))}destroy(){this._visTimeline&&(this._cleanListeners(),this._visTimeline.destroy(),this._visTimeline=null),super.destroy()}render(e){var t;let r=this._defineEventsWithResource(e),i=new M.a(R()(r).call(r,(e=>e[this._cardIdField]))),n=this._visTimeline.itemSet;this._visTimeline.redrawCount=0;let o=S()(t=this._visCardsDataSource.getIds()).call(t,(e=>!i.has(e)&&!n.pwIsItemDragged(n.items[e])));this._visTimeline.pwOptions.isRedraw=void 0===this._visTimeline.pwOptions.isRedraw,this._visCardsDataSource.remove(o,"ignore"),this._visCardsDataSource.update(r,"ignore");let s={};for(let e of this._visCardsDataSource.getIds()){let t=n.items[e];if(!t.data.canHaveLinks)continue;let r=s[t.data.id];r?r.push(t):s[t.data.id]=[t]}n.pwLinkPlotter.clear();for(let e of J()(s))for(let t of e){let e=this._calendarCardsSrv.getCalendarCardLinks(t.data);if(e)for(let r of e)if(!r.linkError&&s[r.toCardId])for(let e of s[r.toCardId])switch(r.linkType){case x.f.Blocks:n.pwLinkPlotter.addLink(t,e);break;case x.f.IsBlockedBy:n.pwLinkPlotter.addLink(e,t)}}this._visTimeline.pwOptions.isRedraw=!0,n.pwIsDragging()||n.pwUpdateSelection(),a()(".k-event:hover").trigger("mouseleave").trigger("mouseenter"),this._renderedCardsRange={start:this.startDate(),end:this.visibleEndDate()},this.options.$ctrl.schedulerWidget._select()}refreshLayout(){}get _currentTimelineScale(){return this._currentTimelineScaleRaw||0}set _currentTimelineScale(e){e>Wo&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimelineScales,this._currentTimelineScale>6911989)?this._currentTimelineScaleRaw=Wo:this._currentTimelineScaleRaw=e}_defineEventsWithResource(e){var t;let r=[];const addInstance=(e,t)=>{if(!this._visGroupsDataSource.get(t))return;let i=e.clone();this._groupsResourceName===x.fb.NoResources&&(i[this._groupsResource.field]=U.j),t?(i[this._cardIdField]=this._groupsResource.multiple?`${i.uid}_${t}`:i.uid,i.group=t):i[this._cardIdField]=i.uid,i.uid===U.k&&(this._createdCardId=i[this._cardIdField]),this._setEventTimes(i),adjustEventForView(i),i.$ctrl=this.options.$ctrl,r.push(i)};let i=R()(t=this._visGroupsDataSource).call(t,(e=>e)),a=this._groupsResource.field;if(i.length){for(let t of e)if(t.isMilestone)addInstance(t,U.v);else if(this._groupsResourceName===x.fb.NoResources)addInstance(t,U.j);else if(this._groupsResourceName===x.fb.Labels)if(t[a])for(let e of t[a]){if(e===U.k){addInstance(t,U.k);continue}let r=this._trelloIntegrationSrv.getTrelloLabelById(e);r&&addInstance(t,Object(n.V)(r))}else addInstance(t,U.k);else if(this._groupsResource.multiple)for(let e of t[a])addInstance(t,e);else addInstance(t,t[a]);return r}for(let t of e)addInstance(t,null)}_getRangeBySelectedDate(e,t){let r=this._transformScale(t),i=Object(n.f)(e,r,this._workWeek),a=this._getSelectedDateByRange({start:e,end:i}),o=-Object(n.v)(e,a,this._workWeek).ms;return{start:Object(n.f)(e,o,this._workWeek),end:Object(n.f)(i,o,this._workWeek),scale:r}}_getSelectedDateByRange(e){let{start:t,end:r}=e,i=Object(n.f)(t,0*Object(n.v)(t,r,this._workWeek).ms,this._workWeek);return Object(n.sb)(i,this._workWeek)||(i=Object(n.f)(i,0,this._workWeek)),i}_initTimeline(){this.table=a()('<div class="k-scheduler-layout timeline-pw-layout"></div>'),this._visTimeline=new Co.Timeline(this.table[0],this._visCardsDataSource,this._visGroupsDataSource,this._timelineOptions),this.element.append(this.table);let e,t,r={click:"pwClick",mouseDown:"pwMouseDown",mouseMove:"pwMouseMove",mouseLeave:"pwMouseLeave",mouseUp:"pwMouseUp"},i=!1;this._visTimeline.on("changed",(()=>{this.pwContentHeight!==e&&(this.options.$rootScope.$evalAsync(),e=this.pwContentHeight)})),this._visTimeline.on("pwCardDragStarted",(()=>{i=!0}));for(let e in r)this._visTimeline.on(e,(t=>{if(i&&"click"===e)return void t.event.stopPropagation();"mouseDown"===e&&(i=!1);let a=t.event.srcEvent||t.event,n=new MouseEvent(r[e],a);a.target.dispatchEvent(n)}));this._visTimeline.dom.root.addEventListener("pointerdown",(e=>{if(!e.target.classList.contains("timeline-item")&&!e.target.classList.contains("k-resize-handle")){let t=a()(e.target).closest(".timeline-item")[0];if(!t)return;let r=new PointerEvent(e.type,e);e.stopPropagation(),t.dispatchEvent(r)}}),!0),this._visTimeline.dom.root.addEventListener("mousedown",(e=>e.stopPropagation())),this._visTimeline.dom.center.addEventListener("mouseleave",(e=>{this._visTimeline.emit("pwMouseLeave",{event:e}),this.removeRangeHighlight()})),this._visTimeline.on("rangechange",(e=>{this.selectedDate=this._getSelectedDateByRange(e),(!this._renderedCardsRange||e.start<this._renderedCardsRange.start||e.end>this._renderedCardsRange.end)&&(this._renderedCardsRange&&this.options.$scope.$evalAsync((()=>this.options.$ctrl.schedulerWidget.refresh())),this._renderedCardsRange={start:this.startDate(),end:this.visibleEndDate()})}));const o=go()(((e,t)=>{t&&this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineScaleChanged,{timelineScale:e,scaleMethod:t})}),200);let s;this._visTimeline.on("rangechanged",(e=>{if(e.byUser&&!e.byNavigation){let t=this._visTimeline.props.centerContainer.width,r=Math.round(Object(n.v)(e.start,e.end,this._workWeek).ms/t);r>Uo-jo&&(r=Uo),r<zo+jo&&(r=zo),r!==this._currentTimelineScale&&(this._currentTimelineScale=r,this._saveScale())}t?o(this.currentScaleUnit,e.scaleMethod):t=this.currentScaleUnit,e.scaleMethod||this.options.$rootScope.$broadcast(x.n.TimelineScrolled)})),this._visTimeline.on("pwOutOfScale",(()=>{this._currentTimelineScale>6911989&&this._licenseSrv.checkPaidFeatureAvailable(x.B.TimelineScales,!0)})),this._visTimeline.on("pwScrolledByWheel",(()=>{this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineNavigated,{navigateAction:"scrollByWheel"})})),this._visTimeline.on("pwScrolledByDrag",(()=>{this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineNavigated,{navigateAction:"scrollByDrag"})})),this._visTimeline.on("pwSelect",(e=>{this._selectedUids=e.uids})),this.options.$scope.isAdditionalElementsShown=!0,this._visTimeline.on("pwGroupDragStarted",(()=>{this.options.$scope.isAdditionalElementsShown=!1,this.options.$scope.$evalAsync((()=>{var e;s=S()(e=this._visTimeline.groupsData.getIds({order:"order"})).call(e,canDragGroup)}))})),this._visTimeline.on("pwGroupDragEnded",(()=>{this.options.$scope.isAdditionalElementsShown=!0,this.options.$scope.$evalAsync((()=>{var e;let t=S()(e=this._visTimeline.groupsData.getIds({order:"order"})).call(e,canDragGroup);A()(t).call(t,((e,t)=>e===s[t]))||this.options.$scope.$broadcast(x.n.TimelineResourcesReordered,{newResourcesOrder:t})}))})),this._visTimeline.on("pwUpdateScale",(e=>{this.currentScaleUnit!==e.scale&&(this._currentScaleUnit=e.scale,this._navigationActions=null)}))}_initTimelineDataSource(){let e,t=this._groupsResource.dataSource,r="",i=this._trelloIntegrationSrv.getCurrentBoardId(),a=this._trelloIntegrationSrv.getTrelloBoardById(i);this._groupsResourceName===x.fb.NoResources?(r=" pw-group-no-resources",e=[{[this._groupsResource.dataValueField]:U.j,className:"pw-group-fixed"+r,order:Number.POSITIVE_INFINITY,canCreateCard:a&&!a.isReadOnly,resourceData:{}}]):e=re()(t.view());let{isMilestonesShown:o}=this._settingsSrv.currentSettings.getGlobalBoardSettings(i);o&&this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!1)&&e.push({[this._groupsResource.dataValueField]:U.v,className:"pw-group-fixed pw-milestone-group"+r,order:Number.NEGATIVE_INFINITY,canCreateCard:a&&!a.isReadOnly,resourceData:{}}),this._visGroupsDataSource=new Co.DataSet(e,{fieldId:this._groupsResource.dataValueField}),no()(t).call(t,"change",(e=>{switch(e.action){case"add":case"itemchange":this._visGroupsDataSource.update(re()(e.items));break;case"remove":this._visGroupsDataSource.remove(re()(e.items))}})),this._cardIdField="visEventId",this._visCardsDataSource=new Co.DataSet({fieldId:this._cardIdField}),this._visCardsDataSource.on("*",((e,t,r)=>{var i;switch(e){case"add":let e,a=this._visCardsDataSource.get(t.items),o=this._groupsResource.field;e=this._groupsResourceName===x.fb.Labels?e=>{if(e.id===Vo)return!0;if(!e[o])return e.group===U.k;for(let t of e[o]){if(t===U.k)return e.group===U.k;let r=this._trelloIntegrationSrv.getTrelloLabelById(t);if(r&&Object(n.V)(r)===e.group)return!0}return!1}:this._groupsResource.multiple?e=>{var t;return ze()(t=e[o]).call(t,e.group)}:e=>e[o]===e.group;let s=new M.a(R()(i=S()(a).call(a,(t=>!t.isMilestone&&!e(t)))).call(i,(e=>e.uid)));if(s.size>0){let e=this._visCardsDataSource.getIds({filter:e=>s.has(e.uid)});this._visCardsDataSource.remove(e,"ignore")}break;case"update":if("ignore"===r)break;let l={};for(let e=0;e<t.data.length;e++){let r=t.oldData[e],i=t.data[e];if(!r||!i||!Object(n.w)(r.start,i.start)&&!Object(n.w)(r.end,i.end)||Object(n.w)(r.start,i.start)&&Object(n.w)(r.end,i.end)||r.isMilestone!==i.isMilestone)continue;let a=i.start,o=i.end,s=i.isAllDay,d=this._groupsResource.cardSortOrderField;s?(a=Object(n.O)(a),o=Object(n.O)(o)):(a=Object(n.Eb)(a,r.previousStart),o=Object(n.Eb)(o,r.previousEnd)),l[i.uid]||(l[i.uid]={event:r,updateData:{start:a,end:o,isAllDay:s},isResize:i.isResize,[d]:i[d]})}for(let e in l)this.options.update(l[e])}}))}_setEventTimes(e){e.timeText=null,e.timeTextShort=null;let t=Object(n.Eb)(e.start,e.realStart),r=Object(n.Eb)(e.end,e.realEnd);switch(e.cardType){case x.h.TrelloTimeRecord:e.timeText=Object(n.E)(6e4*e.durationMinutes),this._isDetailedView&&!e.isAllDay&&(e.timeText=e.timeText||"0m");break;default:if(this._isDetailedView){if(e.isAllDay){if(Object(n.R)(t,r)>=1&&(e.timeText=Object(n.B)(t,r),e.timeText)){r=Object(n.a)(r,1);let i=Object(n.v)(t,r,this._workWeek).minutes,a=i&&Object(n.E)(6e4*i);a&&(e.timeText=`${e.timeText} (${a})`)}}else if(e.timeText=Object(n.C)(t,r),e.timeText){let i=Object(n.v)(t,r,this._workWeek).minutes,a=Object(n.E)(6e4*i);a&&(e.timeText=`${e.timeText} (${a})`)}}else e.isAllDay||(e.timeTextShort=Object(n.D)(t))}}_transformScale(e){return this._visTimeline&&this._visTimeline.props.centerContainer.width?Math.floor(e*this._visTimeline.props.centerContainer.width):1e3*e}_saveScale(){let e=this._trelloIntegrationSrv.getCurrentBoardId();this._settingsSrv.currentSettings.getGlobalBoardSettings(e).timelineScale=this._currentTimelineScale*Bo,this._debounceSaveGlobalSettings||(this._debounceSaveGlobalSettings=go()((()=>{this._settingsSrv.saveGlobalAsync()}),1e3)),this._debounceSaveGlobalSettings()}_resourceBySlot(){}_addResourceView(){}_createRowsLayout(){}_groups(){}_render(){}_updateCurrentTimeMarker(){}getSelection(){return this._selectedUids||[]}select(e){if(this._visTimeline.itemSet.pwSelectedUids)for(let t of e.events)this._visTimeline.itemSet.pwSelectedUids.add(t);else this._visTimeline.itemSet.pwSelectedUids=new M.a(e.events);let t=[],r=this._visTimeline.itemSet.items;for(let e in r)this._visTimeline.itemSet.pwSelectedUids.has(r[e].data.uid)&&t.push(e);this._visTimeline.itemSet.setSelection(t,!1)}clearSelection(){this._visTimeline.itemSet.pwSelectedUids=new M.a,this._visTimeline.itemSet.setSelection([],!0)}selectionByElement(e){return null}_updateEventForSelection(e){return e}_getCellRange(e){let t=this._visTimeline.pwMinorTicks;if(!t)return;let r=0,i=t.length-1;if(!(e<t[r]||e>t[i])){for(;r+1!==i;){let a=Math.floor((r+i)/2);e<t[a]?i=a:r=a}return{start:t[r],end:t[i]}}}}function timelineScaleToScaleUnit(e){return e>No&&(e=Math.floor(e/Bo)),e<Fo?x.hb.Day:e<$o?x.hb.Week:e<xo?x.hb.Month:e<Go?x.hb.Quarter:x.hb.Year}function roundDateToScaleUnit(e,t){switch(t){case x.hb.Day:return Object(n.O)(e);case x.hb.Week:return Object(n.eb)(e,kendo.culture().calendar.firstDay);case x.hb.Month:return kendo.date.firstDayOfMonth(e);case x.hb.Quarter:let t=(e=kendo.date.firstDayOfMonth(e)).getMonth();return e.setMonth(t-t%3),e;case x.hb.Year:return e.setMonth(0,1),e}throw new Error(`Invalid timeline scale: ${t}`)}function adjustEventForView(e){e.isMilestone?e.end=new Date(e.start.getTime()+1):e.isAllDay?e.end=Object(n.N)(e.end):(Object(n.lb)(e.end)&&!Object(n.w)(e.start,e.end)||(e.end=Object(n.N)(e.end)),e.start=Object(n.O)(e.start))}function canDragGroup(e){return e!==U.v}function timeLabelFormat(e,t,r){switch(t!==x.hb.Quarter&&(e=e.toDate()),t){case x.hb.Day:return Ts({weekDay:r.calendar.days.namesShort[e.getDay()],date:e.getDate()});case x.hb.Week:return Is({week:"W",weekNumber:kendo.date.weekInYear(e,kendo.culture().calendar.firstDay)});case x.hb.Month:return Rs({month:kendo.toString(e,"MMMM")});case x.hb.Quarter:return Os({quarter:"Q",quarterNumber:e.quarter()});case x.hb.Year:return Ps({year:kendo.toString(e,"yyyy")})}}function getMajorScale(e){switch(e){case x.hb.Day:return x.hb.Week;case x.hb.Week:return x.hb.Month;case x.hb.Month:return x.hb.Quarter;case x.hb.Quarter:return x.hb.Year;default:return null}}function SchedulerContainerController_getDecoratorsApi(){SchedulerContainerController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SchedulerContainerController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SchedulerContainerController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SchedulerContainerController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SchedulerContainerController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SchedulerContainerController_createElementDescriptor(e){var t,r=SchedulerContainerController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SchedulerContainerController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SchedulerContainerController_hasDecorators(e){return e.decorators&&e.decorators.length}function SchedulerContainerController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SchedulerContainerController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SchedulerContainerController_toPropertyKey(e){var t=function SchedulerContainerController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Ls=Ar.a.RRule,Ms=[x.h.TrelloCard,x.h.TrelloCheckItem,x.h.TrelloCustomField],Ns={[x.h.TrelloCard]:{title:"DIALOGS.REMOVE_TRELLO_CARD_DATES_TITLE",confirm:"DIALOGS.REMOVE_TRELLO_CARD_DATES_CONFIRM",confirmMultiple:"DIALOGS.REMOVE_TRELLO_CARD_DATES_CONFIRM_MULTIPLE",error:"NOTIFICATIONS.REMOVE_TRELLO_CARD_ERROR"},[x.h.TrelloCustomField]:{title:"DIALOGS.REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_TITLE",confirm:"DIALOGS.REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_CONFIRM",confirmMultiple:"DIALOGS.REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_CONFIRM_MULTIPLE",error:"NOTIFICATIONS.REMOVE_TRELLO_CUSTOM_FIELD_CARD_ERROR"},[x.h.TrelloCheckItem]:{title:"DIALOGS.REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_TITLE",confirm:"DIALOGS.REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_CONFIRM",confirmMultiple:"DIALOGS.REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_CONFIRM_MULTIPLE",error:"NOTIFICATIONS.REMOVE_TRELLO_CHECK_ITEM_CARD_ERROR"}},Bs=[x.h.TrelloCard,x.h.TrelloCheckItem,x.h.TrelloTimeRecord,x.h.GoogleEvent],Fs={[x.h.TrelloCard]:{title:"DIALOGS.DELETE_TRELLO_CARD_TITLE",confirm:"DIALOGS.DELETE_TRELLO_CARD_CONFIRM",confirmMultiple:"DIALOGS.DELETE_TRELLO_CARD_CONFIRM_MULTIPLE",error:"NOTIFICATIONS.DELETE_TRELLO_CARD_ERROR"},[x.h.TrelloCheckItem]:{title:"DIALOGS.DELETE_TRELLO_CHECK_ITEM_CARD_TITLE",confirm:"DIALOGS.DELETE_TRELLO_CHECK_ITEM_CARD_CONFIRM",confirmMultiple:"DIALOGS.DELETE_TRELLO_CHECK_ITEM_CARD_CONFIRM_MULTIPLE",error:"NOTIFICATIONS.DELETE_TRELLO_CHECK_ITEM_CARD_ERROR"},[x.h.TrelloTimeRecord]:{title:"DIALOGS.DELETE_TRELLO_TIME_RECORD_CARD_TITLE",confirm:"DIALOGS.DELETE_TRELLO_TIME_RECORD_CARD_CONFIRM",confirmMultiple:"DIALOGS.DELETE_TRELLO_TIME_RECORDS_CARD_CONFIRM_MULTIPLE",error:"NOTIFICATIONS.DELETE_TRELLO_TIME_RECORD_CARD_ERROR"},[x.h.GoogleEvent]:{title:"DIALOGS.DELETE_GOOGLE_EVENT_TITLE",confirm:"DIALOGS.DELETE_GOOGLE_EVENT_CONFIRM",confirmMultiple:"DIALOGS.DELETE_GOOGLE_EVENT_CONFIRM_MULTIPLE",error:"NOTIFICATIONS.DELETE_GOOGLE_EVENT_ERROR"}};let $s=function SchedulerContainerController_decorate(e,t,r,i){var a,n=SchedulerContainerController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SchedulerContainerController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SchedulerContainerController_isDataDescriptor(a.descriptor)||SchedulerContainerController_isDataDescriptor(i.descriptor)){if(SchedulerContainerController_hasDecorators(a)||SchedulerContainerController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SchedulerContainerController_hasDecorators(a)){if(SchedulerContainerController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SchedulerContainerController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SchedulerContainerController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$log","$window","$timeout","$translate","appCommonSrv","calendarCardsSrv","dialogSrv","googleIntegrationSrv","htmlHelperSrv","iCalIntegrationSrv","licenseSrv","notificationSrv","platformSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class SchedulerContainerController{constructor(t,r,i,o,s,l,d,c,h,u,p,m,f,y,v,_,g,C){e(this),this._$rootScope=t,this._$scope=r,this._$log=i,this._$window=o,this._$timeout=s,this._$translate=l,this._appCommonSrv=d,this._calendarCardsSrv=c,this._dialogSrv=h,this._googleIntegrationSrv=u,this._htmlHelperSrv=p,this._iCalIntegrationSrv=m,this._licenseSrv=f,this._notificationSrv=y,this._platformSrv=v,this._settingsSrv=_,this._telemetrySrv=g,this._trelloIntegrationSrv=C,this.isSchedulerInPreview&&this._$scope.$on(x.n.BoardInitialized,(async()=>{await this._schedulerCardsDataSource.data([]),this._schedulerCardsDataSource.read(),this._schedulerResourcesDataSource.read(),this.applySchedulerSettings()})),this._$scope.$on(x.n.SettingsChanged,(()=>{this.applySchedulerSettings()})),this._$scope.$on(x.n.CardsFieldsSettingsChanged,(()=>{this._applyCardsFieldsSettings()})),this._$scope.$on(x.n.BoardChanged,(()=>{this._schedulerResourcesDataSource.read()}));const updateContextMenu=()=>{if(!this.cardContextMenu||!this.cardContextMenu.pwData)return;let e=this.schedulerWidget.occurrenceByUid(this.cardContextMenu.pwData.uid);e?(this._$scope.$evalAsync((()=>this.cardContextMenu.pwData=e)),(e.isReadOnly||e.isArchived)&&this.cardContextMenu.closeNested()):this.cardContextMenu.close()},delayedCardsRefresh=()=>{this._isCardsRefreshRequested&&(this._isCardsRefreshRequested=!1,this._schedulerCardsDataSource.read().then(updateContextMenu)),this._cardsPushTimeout=null};this._onAddOrUpdateCard=(e,t)=>{e.hasDates?(this._cardsPushTimeout||t.delayed?(this._$timeout.cancel(this._cardsPushTimeout),this._isCardsRefreshRequested=!0):(this._schedulerCardsDataSource.pushUpdate(e),updateContextMenu()),this._cardsPushTimeout=this._$timeout((()=>delayedCardsRefresh()),100,!1)):this._onDeleteCard(e,t)},this._onDeleteCard=(e,t)=>{(e.hasDates||this._schedulerCardsDataSource.get(e.id))&&(this._cardsPushTimeout||t.delayed?(this._$timeout.cancel(this._cardsPushTimeout),this._isCardsRefreshRequested=!0):(this._schedulerCardsDataSource.pushDestroy(e),updateContextMenu()),this._cardsPushTimeout=this._$timeout((()=>delayedCardsRefresh()),100,!1))},this._$scope.$on(x.n.ScrollSchedulerViewRequested,((e,t={})=>{let{scrollToDate:r,navigationMode:i,restoreOffset:o,resourceId:s,cardElement:l}=t;if(r){if(i===x.y.Internal)return void this._appCommonSrv.setSchedulerSelectedDate(r);this._appCommonSrv.getSchedulerView()===x.O.Timeline&&(r=Object(n.O)(r)),this.scrollView(r,o,i)}if(s&&this.scrollViewToResource(s),l){let e;if(Object(ht.a)(l[0],{scrollMode:"if-needed",block:"nearest",inline:"nearest",behavior:"smooth"}),this._appCommonSrv.getSchedulerOrientation()!==x.N.Top&&this._appCommonSrv.getSchedulerOrientation()!==x.N.Bottom||(e=a()("#pwBodyWrapper")),e){var d;let t=null===(d=l[0])||void 0===d?void 0:d.getBoundingClientRect();t&&(t.top<100?e.scrollTop(e.scrollTop()+t.top-100):t.bottom>this._$window.innerHeight-100&&e.scrollTop(e.scrollTop()+t.bottom-this._$window.innerHeight+100))}}})),this._$scope.$on(x.n.ChangeSchedulerViewRequested,((e,t={})=>{let r,i=this._appCommonSrv.getSchedulerView(),a=!1;switch(this.schedulerWidget.options.showWorkDays!==this._globalBoardSettings.showWorkDays&&(this.schedulerWidget.options.showWorkDays=this._globalBoardSettings.showWorkDays,a=!0),this.schedulerWidget.options.showWorkHours!==this._globalBoardSettings.showWorkHours&&(this.schedulerWidget.options.showWorkHours=this._globalBoardSettings.showWorkHours,a=!0),this.schedulerWidget.options.showWeekNumbers!==this._globalBoardSettings.showWeekNumbers&&(this.schedulerWidget.options.showWeekNumbers=this._globalBoardSettings.showWeekNumbers,a=!0),i){case x.O.Timeline:r=[this._appCommonSrv.getTimelineResourcesType()];break;default:r=[]}(this.schedulerWidget.view()&&this.schedulerWidget.viewName()!==i||!Object(n.h)(this.schedulerWidget.options.group.resources,r))&&(this.schedulerWidget.options.group.resources=r,this._schedulerResourcesDataSource.read(),a=!0),t.forceUpdate&&(a=!0),a&&this.schedulerWidget.view()&&(this._setupEventTemplate(),this.schedulerWidget.view(i),this.scrollView(this._appCommonSrv.getSchedulerSelectedDate(),!0))})),this._$scope.$on(x.n.CardsReloadRequested,(()=>this._removeServiceListeners())),this._$scope.$on(x.n.CardsReloaded,(()=>{this._schedulerCardsDataSource.read().then(updateContextMenu)})),this._$scope.$on(x.n.TimelineResourcesReloaded,((e,t)=>{if(this._appCommonSrv.getSchedulerView()===x.O.Timeline&&(t.reloadAllResources||t.resourcesType===this._appCommonSrv.getTimelineResourcesType())){this._schedulerResourcesDataSource.read();let e=this.schedulerWidget.view();if(!e)return;this.schedulerWidget.view(e.name)}})),this._$scope.$on(x.n.TimelineResourcesReordered,((e,t)=>{if(this._appCommonSrv.getSchedulerView()!==x.O.Timeline)return;let r=this._appCommonSrv.getTimelineResourcesType();switch(this._globalBoardSettings.timelineResourcesOrder[r]=t.newResourcesOrder,this._settingsSrv.saveGlobalAsync(),this._schedulerResourcesDataSource.read(),r){case x.fb.Members:this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineMembersReordered);break;case x.fb.Calendars:this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineCalendarsReordered);break;case x.fb.Lists:this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineListsReordered);break;case x.fb.Labels:this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.TimelineLabelsReordered)}})),this._$scope.$on(x.n.FiltersChanged,(()=>this._applySchedulerFilters())),this._$scope.$on(x.n.PrintRequested,(()=>this._printScheduler())),this._$scope.$on(x.n.CardKeydown,(async(e,t)=>{var r;this.cardContextMenu.close();let{keyCode:i,keyModifiers:a}=t,n=S()(r=t.selectedCards).call(r,(e=>{var t;if(e.isTempCard)return!1;if(!(null===(t=x.i[e.cardType])||void 0===t?void 0:ze()(t).call(t,i)))return!1;switch(e.cardType){case x.h.TrelloCard:if(e.isReadOnly)return!1;if(!e.isArchived)break;if((i===x.t.Delete||i===x.t.Backspace)&&(a.shiftKey||a.metaKey))break;if(i===x.t.C)break;return!1;case x.h.TrelloCustomField:if(e.isReadOnly)return!1;if(!e.isArchived){if(!(i!==x.t.Delete&&i!==x.t.Backspace||a.shiftKey||a.metaKey))break;if(i>=x.t.Key0&&i<=x.t.Key9||i===x.t.L)break;if(i===x.t.Space||i===x.t.M)break;if(i===x.t.S)break}return!1;case x.h.TrelloCheckItem:if(e.isReadOnly)return!1;if(!e.isArchived){if(!(i!==x.t.Delete&&i!==x.t.Backspace||a.shiftKey||a.metaKey))break;if(i>=x.t.Key0&&i<=x.t.Key9||i===x.t.L)break;if(i===x.t.Space||i===x.t.M)break;if((i===x.t.Delete||i===x.t.Backspace)&&(a.shiftKey||a.metaKey))break}return!1;case x.h.TrelloTimeRecord:if(!e.isArchived){if(i===x.t.Space&&!e.memberIds.has(this._trelloIntegrationSrv.getMemberId()))break;if(i>=x.t.Key0&&i<=x.t.Key9||i===x.t.L)break;if(i===x.t.M)break;if((i===x.t.Delete||i===x.t.Backspace)&&(a.shiftKey||a.metaKey)){if(e.isReadOnly)return!1;break}}return!1;case x.h.GoogleEvent:if(e.isReadOnly)return!1;if((i===x.t.Delete||i===x.t.Backspace)&&(a.shiftKey||a.metaKey))break;return!1;default:return!1}return!0}));if(0===n.length)return;let o=n.length>1;o&&this._$scope.$emit(x.n.CardsReloadRequested),await this._updateCardsByHotkey(n,i,a),o&&this._$scope.$emit(x.n.CardsReloaded)}));const onDocumentMouseDown=e=>{if(this.schedulerWidget&&this.schedulerWidget.isEventsSelected()){let t=a()(e.target);if(t.closest(".k-resize-handle")[0])return void this.schedulerWidget.select(null);0!==e.button||e.shiftKey||e.ctrlKey||t.closest(".window, .pop-over, md-dialog, md-menu-content, .pw-dialog-edit-card, .k-event, .timeline-item, .k-popup, .pw-selectable-items-container")[0]||this.schedulerWidget.select(null)}};this._$window.document.addEventListener("mousedown",onDocumentMouseDown,!0),this._$window.document.addEventListener("pointerdown",onDocumentMouseDown),this._currentCardFormat={cardTheme:x.g.Colorful},this._$scope.$on("$destroy",(()=>{this._removeServiceListeners(),this._$window.document.removeEventListener("mousedown",onDocumentMouseDown,!0),this._$window.document.removeEventListener("pointerdown",onDocumentMouseDown)}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"schedulerContainerCtrl"}},{kind:"get",key:"schedulerWidget",value:function schedulerWidget(){return this._schedulerWidget}},{kind:"set",key:"schedulerWidget",value:function schedulerWidget(e){this._schedulerWidget=e}},{kind:"get",key:"schedulerOptions",value:function schedulerOptions(){if(!this._schedulerOptions){let e=new Date;this._appCommonSrv.getSchedulerView()===x.O.Timeline&&(e=roundDateToScaleUnit(e,timelineScaleToScaleUnit(this._globalBoardSettings.timelineScale)));const t=this._htmlHelperSrv.compileHtml("<pw-resources-menu></pw-resources-menu>",this._$scope,!0),r=this._htmlHelperSrv.compileHtml('<pw-scales-menu scheduler="$ctrl.schedulerWidget"></pw-scales-menu>',this._$scope,!0);this._schedulerOptions={$rootScope:this._$rootScope,$scope:this._$scope,$ctrl:this,views:[{name:x.O.OneDay,type:(e,t)=>new SchedulerWeekView_SchedulerWeekView(e,t),viewName:x.O.OneDay,title:this._$translate.instant("MENU.ONE_DAY"),visibleDayCount:1},{name:x.O.ThreeDay,type:(e,t)=>new SchedulerWeekView_SchedulerWeekView(e,t),viewName:x.O.ThreeDay,title:this._$translate.instant("MENU.THREE_DAY"),visibleDayCount:3},{name:x.O.Week,type:(e,t)=>new SchedulerWeekView_SchedulerWeekView(e,t),viewName:x.O.Week,title:this._$translate.instant("MENU.WEEK"),visibleDayCount:7},{name:x.O.Month,type:(e,t)=>new SchedulerMonthView_SchedulerMonthView(e,t),viewName:x.O.Month,title:this._$translate.instant("MENU.MONTH")},{name:x.O.Timeline,type:(e,t)=>new SchedulerTimelineView_SchedulerTimelineView(e,t),viewName:x.O.Timeline,title:this._$translate.instant("MENU.TIMELINE"),leftTopContent:{[x.fb.NoResources]:null,[x.fb.Members]:t,[x.fb.Calendars]:t,[x.fb.Lists]:t,[x.fb.Labels]:t},rightTopContent:{[x.fb.NoResources]:r,[x.fb.Members]:r,[x.fb.Calendars]:r,[x.fb.Lists]:r,[x.fb.Labels]:r}}],date:e,dataSource:this._schedulerCardsDataSource,resources:[{name:x.fb.NoResources,field:"dummyField",cardSortOrderField:"defaultSortOrder",dataSource:this._schedulerResourcesDataSource,dataValueField:"id",multiple:!1},{name:x.fb.Members,field:"members",cardSortOrderField:"membersSortOrder",dataSource:this._schedulerResourcesDataSource,dataValueField:"id",multiple:!0},{name:x.fb.Calendars,field:"calendarId",cardSortOrderField:"calendarsSortOrder",dataSource:this._schedulerResourcesDataSource,dataValueField:"id",multiple:!1},{name:x.fb.Lists,field:"listId",cardSortOrderField:"listsSortOrder",dataSource:this._schedulerResourcesDataSource,dataValueField:"id",multiple:!1},{name:x.fb.Labels,field:"labelIds",cardSortOrderField:"labelsSortOrder",dataSource:this._schedulerResourcesDataSource,dataValueField:"id",multiple:!0}],selectionStart:e=>{e.isMultiselect&&this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.Multiselected,{cardCount:e.selectedCount})},moveStart:e=>{(e.event.isReadOnly||e.event.isArchived)&&e.preventDefault()},moveEnd:e=>{var t,r,i;if(xe()(t=e.eventsToMove).call(t,(e=>e.event.isMilestone))&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0))return void e.success([]);if(xe()(r=e.eventsToMove).call(r,(e=>e.event.isRecurring()&&!e.event.isException()))&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.RecurringCards,!0))return void e.success([]);let a=[];for(let t of e.eventsToMove)if(t.resourceId&&this._appCommonSrv.getSchedulerView()===x.O.Timeline)switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.NoResources:a.push(t);break;case x.fb.Members:let e=this._trelloIntegrationSrv.getTrelloBoardById(t.event.boardId),r=t.resourceId;t.event.isCurrentBoardCard||r===U.k||xe()(i=e.members).call(i,(e=>e.id===r))?(t.members=[r],a.push(t)):this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.TEAMPLANNER_DROP_MEMBER_NOT_EXIST_WARNING",{boardName:ct()(e.name,36)}),x.A.Warning);break;case x.fb.Calendars:t.calendarId=t.resourceId,a.push(t);break;case x.fb.Lists:t.listId=t.resourceId,a.push(t);break;case x.fb.Labels:if(t.resourceId===U.k)t.labelIds=new M.a;else{let e=this._schedulerResourcesDataSource.get(t.resourceId).resourceData,r=this._trelloIntegrationSrv.getOrCreateTrelloLabel(t.event.boardId,e.color,e.name);t.labelIds=new M.a([r.id])}a.push(t)}else a.push(t);e.success(a)},resize:e=>{switch(e.event.cardType){case x.h.TrelloTimeRecord:Object(n.R)(e.start,e.end)>=1&&e.preventDefault()}},update:e=>{if(!e.event.isReadOnly)return this.updateCardByMouseAsync(e.event,e.updateData,e.isResize)}}}return this._schedulerOptions}},{kind:"get",key:"schedulerOrientation",value:function schedulerOrientation(){if(this._appCommonSrv.isSchedulerShown())return this._appCommonSrv.getSchedulerOrientation()}},{kind:"get",key:"schedulerWidth",value:function schedulerWidth(){return this._localBoardSettings.schedulerWidth}},{kind:"set",key:"schedulerWidth",value:function schedulerWidth(e){this._schedulerWidth=e,this._localBoardSettings.schedulerWidth=this._schedulerWidth,this._settingsSrv.saveLocal()}},{kind:"get",key:"schedulerHeight",value:function schedulerHeight(){return this._localBoardSettings.schedulerHeight}},{kind:"set",key:"schedulerHeight",value:function schedulerHeight(e){this._schedulerHeight=e,this._localBoardSettings.schedulerHeight=this._schedulerHeight,this._settingsSrv.saveLocal()}},{kind:"get",key:"trelloBoardHeight",value:function trelloBoardHeight(){return this._localBoardSettings.trelloBoardHeight}},{kind:"set",key:"trelloBoardHeight",value:function trelloBoardHeight(e){this._localBoardSettings.trelloBoardHeight=e,this._settingsSrv.saveLocal()}},{kind:"set",key:"taskListsWidth",value:function taskListsWidth(e){}},{kind:"get",key:"isSchedulerBusy",value:function isSchedulerBusy(){return this._appCommonSrv.isSchedulerBusy()}},{kind:"get",key:"isSchedulerInPreview",value:function isSchedulerInPreview(){return this._appCommonSrv.isSchedulerInPreview()}},{kind:"get",key:"isSchedulerLoading",value:function isSchedulerLoading(){return this._appCommonSrv.isSchedulerLoading()}},{kind:"get",key:"isAuthorized",value:function isAuthorized(){return this._trelloIntegrationSrv.isAuthorized()}},{kind:"get",key:"isMemberUnavailable",value:function isMemberUnavailable(){return this.isAuthorized&&!this._trelloIntegrationSrv.isMemberInitializing()&&this._trelloIntegrationSrv.isMemberUnavailable()}},{kind:"get",key:"isCurrentBoardUnavailable",value:function isCurrentBoardUnavailable(){return this._trelloIntegrationSrv.isCurrentBoardUnavailable()}},{kind:"method",key:"onHelpClick",value:function onHelpClick(){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.HelpClicked)}},{kind:"method",key:"showFeedbackDialog",value:function showFeedbackDialog(e){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.FeedbackOpened,{where:x.Y.Scheduler}),this._dialogSrv.showFeedbackDialogAsync()}},{kind:"method",key:"reload",value:function reload(){this._platformSrv.reloadAppAsync()}},{kind:"get",key:"isSchedulerMini",value:function isSchedulerMini(){return this._appCommonSrv.isSchedulerMini()}},{kind:"set",key:"isSchedulerMini",value:function isSchedulerMini(e){this.isSchedulerMini!==e&&this._appCommonSrv.setSchedulerMini(e)}},{kind:"get",key:"cardTooltipOptions",value:function cardTooltipOptions(){return this._cardTooltipOptions||(this._cardTooltipOptions={getCardForTooltip:e=>{let t=this.schedulerWidget.occurrenceByUid(e);if(t&&!t.isContextMenuOpened)return t}}),this._cardTooltipOptions}},{kind:"get",key:"cardContextMenu",value:function cardContextMenu(){return this._cardContextMenu}},{kind:"method",key:"setCardContextMenu",value:function setCardContextMenu(e){this._cardContextMenu=e}},{kind:"method",key:"openContextMenu",value:function openContextMenu(e,t){this._$rootScope.$broadcast(x.n.CloseDialogsRequested),this.schedulerWidget.select(null);let r=this.schedulerWidget.occurrenceByUid(e);r&&this.isCardContextMenuAvailable(r)&&(this._schedulerWidget.select([e]),this._logCardEvent(r,{event:x.X.CardEvents.ContextMenuOpened,data:{by:x.U.RightClick}}),this.cardContextMenu.open(t,r))}},{kind:"method",key:"applySchedulerSettings",value:function applySchedulerSettings(){null!==this._globalSettings.firstWeekDay&&(kendo.culture().calendar.firstDay=this._globalSettings.firstWeekDay),this.schedulerWidget.options.workDayStart=Object(n.J)(this._globalSettings.workDayStart),this.schedulerWidget.options.workDayEnd=Object(n.J)(this._globalSettings.workDayEnd),this.schedulerWidget.options.workWeekStart=this._globalSettings.workWeekStart,this.schedulerWidget.options.workWeekEnd=this._globalSettings.workWeekEnd,this.schedulerWidget.options.showWeekNumbers=this._globalBoardSettings.showWeekNumbers,this.schedulerWidget.options.showWorkDays=this._globalBoardSettings.showWorkDays,this.schedulerWidget.options.showWorkHours=this._globalBoardSettings.showWorkHours,this.schedulerWidget.options.showDateTime=this._globalBoardSettings.showDateTime,this.schedulerWidget.options.showTrelloBoard=this._globalBoardSettings.showTrelloBoard,this.schedulerWidget.options.isDetailedView=this._globalBoardSettings.showDateTime||this._globalBoardSettings.showTrelloBoard,this.schedulerWidget.options.cardTheme=this._globalBoardSettings.cardTheme,this._setupEventTemplate(),this._applySchedulerFilters(!0),this._recreateSchedulerWidget(),this._schedulerCardsDataSource.read()}},{kind:"method",key:"createCardByDropAsync",value:function createCardByDropAsync(e){try{if(this._appCommonSrv.setSchedulerBusy(!0),e.isMilestone&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0))return;switch(this._schedulerMode){case x.M.TimeTracking:return this._createTimeEntryCardByDropAsync(e);default:return this._createCardByDropAsync(e)}}catch(e){this._$log.error("Trello create card by drop error:"),this._$log.error(e),this._telemetrySrv.logError("Trello create card by drop error",e,{class:this.constructor.name,method:this.createCardByDropAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.TRELLO_CARD_DROP_ERROR"),x.A.Error)}finally{this._appCommonSrv.setSchedulerBusy(!1)}}},{kind:"method",key:"createCardByClickAsync",value:async function createCardByClickAsync(e,t){var r;let i,a;try{if(e.labels){var n;let t=0===e.labels.length?[U.k]:R()(n=e.labels).call(n,(e=>this._trelloIntegrationSrv.getOrCreateTrelloLabel(this._currentBoardId,e.color,e.name).id));e.labelIds=new M.a(t)}switch(this._schedulerMode){case x.M.TimeTracking:i=await this._createTimeEntryCardByClickAsync(e);break;default:i=this._createCardByClick(e)}a=await this._htmlHelperSrv.elementAddedOnceAsync(this.schedulerWidget.element,`.k-event[data-uid="${i.id}"]`),this._logCardEvent(i,{event:x.X.CardEvents.CreateDialogOpened,data:{isDetailed:this._localSettings.editCardDialog.isDetailed}});let o={cardElement:a,schedulerWidget:this.schedulerWidget};if(this._schedulerMode===x.M.TimeTracking&&(o.allowedCardTypes=[x.h.TrelloTimeRecord]),await this._dialogSrv.showEditCardDialogAsync(i,o)){let e;switch(this._appCommonSrv.getSchedulerView()){case x.O.OneDay:case x.O.ThreeDay:case x.O.Week:e=i.isAllDay?x.V.AllDay:x.V.NonAllDay;break;case x.O.Month:e=x.V.AllDay;break;case x.O.Timeline:if(i.cardRole===me.c.Milestone){e=x.V.Milestone;break}switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.NoResources:e=x.V.NoLane;break;case x.fb.Members:e=ze()(r=i.members).call(r,this._trelloIntegrationSrv.getMemberId())?x.V.MemberLaneSelf:x.V.MemberLane;break;case x.fb.Calendars:e=x.V.BoardLane;break;case x.fb.Lists:e=x.V.ListLane;break;case x.fb.Labels:e=x.V.LabelLane}}switch(t){case"single":this._logCardEvent(i,{event:x.X.CardEvents.Scheduled,data:{by:x.U.Click,destination:e}});break;case"stretching":this._logCardEvent(i,{event:x.X.CardEvents.Scheduled,data:{by:x.U.Stretching,destination:e}})}}else this._logCardEvent(i,{event:x.X.CardEvents.CreateDialogClosed}),this._calendarCardsSrv.deleteCalendarCardAsync(i)}catch(e){i&&this._calendarCardsSrv.deleteCalendarCardAsync(i),this._$log.error("Trello create card by click error:"),this._$log.error(e),this._telemetrySrv.logError("Trello create card by click error",e,{class:this.constructor.name,method:this.createCardByClickAsync.name})}}},{kind:"method",key:"updateCardByMouseAsync",value:function updateCardByMouseAsync(e,t,r){if(!this._ignoreCalendarCardClick){this._ignoreCalendarCardClick=!0;const enableNextClick=()=>{this._ignoreCalendarCardClick=!1,a()(this._$window.document).off(".pwIgnoreClick",enableNextClick)};a()(this._$window.document).on("mousedown.pwIgnoreClick pwMouseDown.pwIgnoreClick",enableNextClick)}let i;var o;if(r)i={event:x.X.CardEvents.Resized,data:{isAllDay:null!==(o=t.isAllDay)&&void 0!==o?o:e.isAllDay,start:t.start,end:t.end}};else if(t.cardRole&&t.cardRole!==e.cardRole||t.isAllDay!==e.isAllDay||!Object(n.w)(t.start,e.realStart||e.start)||!Object(n.w)(t.end,e.realEnd||e.end)||t.members&&!Object(n.h)(t.members,e.members)||t.calendarId&&t.calendarId!==e.calendarId||t.listId&&t.listId!==e.listId||t.labelIds&&!Object(n.h)([...t.labelIds],[...e.labelIds])||void 0!==t.defaultSortOrder&&t.defaultSortOrder===e.defaultSortOrder||void 0!==t.membersSortOrder&&t.membersSortOrder===e.membersSortOrder||void 0!==t.calendarsSortOrder&&t.calendarsSortOrder===e.calendarsSortOrder||void 0!==t.listsSortOrder&&t.listsSortOrder===e.listsSortOrder||void 0!==t.labelsSortOrder&&t.labelsSortOrder===e.labelsSortOrder)if(t.cardRole&&t.cardRole!==e.cardRole)i={event:x.X.CardEvents.TypeChanged,data:{cardRole:t.cardRole}};else if(t.members&&!Object(n.h)(t.members,e.members)){var s,l;let r=t.members.length>1||!ze()(s=t.members).call(s,U.k);if(r&&(e.members.length>1||!ze()(l=e.members).call(l,U.k)))i={event:x.X.CardEvents.MemberChanged};else{var d,c;let a=ze()(d=t.members).call(d,this._currentMemberId)!==ze()(c=e.members).call(c,this._currentMemberId);i={event:r?a?x.X.CardEvents.MemberAssignedSelf:x.X.CardEvents.MemberAssigned:a?x.X.CardEvents.MemberUnassignedSelf:x.X.CardEvents.MemberUnassigned}}}else if(t.calendarId&&t.calendarId!==e.calendarId)switch(e.cardType){case x.h.TrelloCard:i={event:x.X.CardEvents.BoardChanged,data:{isCurrentBoardCard:t.calendarId===this._currentBoardId}};break;case x.h.GoogleEvent:i={event:x.X.CardEvents.GoogleCalendarChanged}}else if(t.listId&&t.listId!==e.listId){let e=this._trelloIntegrationSrv.getTrelloListById(t.listId);i={event:x.X.CardEvents.ListChanged,data:{isCurrentBoardCard:(null==e?void 0:e.boardId)===this._currentBoardId}}}else if(t.labelIds&&!Object(n.h)([...t.labelIds],[...e.labelIds])){let r=t.labelIds.size>0;i=r&&(e.labelIds.size>1||!e.labelIds.has(U.k))?{event:x.X.CardEvents.LabelChanged}:{event:r?x.X.CardEvents.LabelAdded:x.X.CardEvents.LabelRemoved}}else t.isAllDay!==e.isAllDay?i={event:t.isAllDay?x.X.CardEvents.IsAllDaySet:x.X.CardEvents.IsAllDayUnset}:Object(n.w)(t.start,e.realStart||e.start)&&Object(n.w)(t.start,e.realStart||e.start)||(i={event:x.X.CardEvents.Moved});else t.isOriginCard&&(void 0===t.defaultSortOrder&&void 0===t.membersSortOrder&&void 0===t.calendarsSortOrder&&void 0===t.listsSortOrder&&void 0===t.labelsSortOrder||(i={event:x.X.CardEvents.Reordered}));let h={updateData:new lt.a([[e.uid,t]]),beforeAllSeriesAsync:async(r,i)=>{let a=r.realStart||r.start,o=r.realEnd||r.end,s=i.realStart||i.start,l=i.realEnd||i.end;if(void 0!==t.isAllDay&&t.isAllDay!==i.isAllDay)if(t.isAllDay){let e=Object(n.R)(Object(n.O)(a),t.start);t.start=Object(n.a)(Object(n.O)(s),e),t.end=t.start}else{let e=Object(n.R)(a,Object(n.O)(t.start));t.start=Object(n.a)(Object(n.Eb)(s,t.start),e);let r=Object(n.R)(a,Object(n.O)(t.end));t.end=Object(n.a)(Object(n.Eb)(s,t.end),r)}else if(i.isAllDay){let e=Object(n.R)(a,t.start);t.start=Object(n.a)(s,e);let r=Object(n.R)(o,t.end);t.end=Object(n.a)(l,r)}else{let e=Object(n.S)(a,t.start);t.start=Object(n.c)(s,e);let r=Object(n.S)(o,t.end);t.end=Object(n.c)(l,r)}return t.end<t.start&&(t.end=new Date(t.start)),(void 0!==t.isAllDay&&t.isAllDay!==e.isAllDay||t.start&&!Object(n.w)(t.start,a))&&await this._deleteRecurrenceExceptionsAsync(i),!1},waitForAction:!0};return this._modifyCalendarCardsAsync([e],x.v.Edit,(e=>(u()(e,t),this._calendarCardsSrv.updateCalendarCardBySchedulerAsync(e.cardType,e))),{forLog:"Planyway card updating error",forNotification:"NOTIFICATIONS.UPDATE_CARD_ERROR"},i,h)}},{kind:"method",key:"toggleCardIsCompletedByIcon",value:function toggleCardIsCompletedByIcon(e){this._toggleCardsIsCompleted([e],{getCardSpecificEvent:e=>e.isCompleted?x.X.CardEvents.MarkedIncompleted:x.X.CardEvents.MarkedCompleted})}},{kind:"method",key:"showEditCardDialogAsync",value:async function showEditCardDialogAsync(e,t){if(this._ignoreCalendarCardClick)return;if(e.isReadOnly){if(e.recurrenceId&&!e.id){let t=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.recurrenceId);t=t.clone(),t.start=e.start,t.end=e.end,e=t}else e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id);return this._logCardEvent(e,{event:x.X.CardEvents.EditDialogOpened,data:{isDetailed:this._localSettings.editCardDialog.isDetailed}}),await this._dialogSrv.showEditCardDialogAsync(e,{cardElement:t,schedulerWidget:this.schedulerWidget}),void this._logCardEvent(e,{event:x.X.CardEvents.EditDialogClosed})}let r={event:x.X.CardEvents.EditDialogOpened,data:{isDetailed:this._localSettings.editCardDialog.isDetailed}};return this._modifyCalendarCardsAsync([e],x.v.Open,(async r=>{(r=this._calendarCardsSrv.getCalendarCardById(r.cardType,r.id)).id!==(e.id||e.recurrenceId)&&(t=await this._htmlHelperSrv.elementAddedOnceAsync(this.schedulerWidget.element,`.k-event[data-uid="${r.id}"]`)),await this._dialogSrv.showEditCardDialogAsync(r,{cardElement:t,schedulerWidget:this.schedulerWidget})||this._logCardEvent(r,{event:x.X.CardEvents.EditDialogClosed})}),{forLog:"Planyway open card error",forNotification:"NOTIFICATIONS.OPEN_CARD_ERROR"},r,{beforeOnlyOccurrenceAsync:()=>!1,beforeThisAndFollowingAsync:()=>!1,waitForAction:!0})}},{kind:"method",key:"setCardsPriorityByMenu",value:function setCardsPriorityByMenu(e,t){if(0===(e=S()(e).call(e,(e=>!e.isReadOnly&&!e.isArchived&&e.priority!==t))).length)return;let r={event:x.X.CardEvents.PriorityChanged,data:{by:x.U.ContextMenu,priority:t}},i={beforeOnlyOccurrenceAsync:(e,r)=>(r.priority=t,!0),beforeThisAndFollowingAsync:(e,r)=>(r.priority=t,!0),beforeAllSeriesAsync:(e,r)=>(e.priority=t,!1)};this._modifyCalendarCardsAsync(e,x.v.Edit,(e=>(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id),this._calendarCardsSrv.updateCalendarCardPropertiesAsync(e,{priority:t}))),{forLog:"Planyway card updating error",forNotification:"NOTIFICATIONS.UPDATE_CARD_ERROR"},r,i)}},{kind:"method",key:"toggleCardsLabelByMenu",value:function toggleCardsLabelByMenu(e,t){this._toggleCardsLabelAsync(e,t.id,{getCardSpecificEvent:e=>!e.labelIds.has(t.id)?x.X.CardEvents.LabelAdded:x.X.CardEvents.LabelRemoved,data:{by:x.U.ContextMenu}})}},{kind:"method",key:"toggleCardsMemberByMenu",value:function toggleCardsMemberByMenu(e,t){this._toggleCardsMemberAsync(e,t,{getCardSpecificEvent:e=>{let r=!e.memberIds.has(t.id),i=t.id===this._currentMemberId;return r?i?x.X.CardEvents.MemberAssignedSelf:x.X.CardEvents.MemberAssigned:i?x.X.CardEvents.MemberUnassignedSelf:x.X.CardEvents.MemberUnassigned},data:{by:x.U.ContextMenu}})}},{kind:"method",key:"toggleCardsIsCompletedByMenu",value:function toggleCardsIsCompletedByMenu(e){this._toggleCardsIsCompleted(e,{getCardSpecificEvent:e=>e.isCompleted?x.X.CardEvents.MarkedIncompleted:x.X.CardEvents.MarkedCompleted,data:{by:x.U.ContextMenu}})}},{kind:"method",key:"copyCardUrlByMenu",value:function copyCardUrlByMenu(e){this._copyCardUrlAsync(e,{event:x.X.CardEvents.UrlCopied,data:{by:x.U.ContextMenu}})}},{kind:"method",key:"duplicateCardsByMenu",value:function duplicateCardsByMenu(e){this._duplicateCardsAsync(e,{event:x.X.CardEvents.Duplicated,data:{by:x.U.ContextMenu}})}},{kind:"method",key:"toggleCardsIsArchivedByMenu",value:function toggleCardsIsArchivedByMenu(e){this._toggleCardsIsArchivedAsync(e,{getCardSpecificEvent:e=>e.isArchived?x.X.CardEvents.Unarchived:x.X.CardEvents.Archived,data:{by:x.U.ContextMenu}})}},{kind:"method",key:"removeCardsDatesByMenu",value:function removeCardsDatesByMenu(e){this._removeCardsDatesAsync(e,{event:x.X.CardEvents.DatesRemoved,data:{by:x.U.ContextMenu}})}},{kind:"method",key:"deleteCardsByMenu",value:function deleteCardsByMenu(e){this._deleteCardsAsync(e,{event:x.X.CardEvents.Deleted,data:{by:x.U.ContextMenu}})}},{kind:"get",key:"hiddenCardElements",value:function hiddenCardElements(){if(this._appCommonSrv.getSchedulerView()!==x.O.Timeline)return{calendar:!this._globalBoardSettings.showTrelloBoard,dateTime:!this._globalBoardSettings.showDateTime};switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.NoResources:case x.fb.Calendars:case x.fb.Lists:case x.fb.Labels:return{calendar:!this._globalBoardSettings.showTrelloBoard,dateTime:!this._globalBoardSettings.showDateTime};case x.fb.Members:return{membersIcon:!0,calendar:!this._globalBoardSettings.showTrelloBoard,dateTime:!this._globalBoardSettings.showDateTime}}}},{kind:"get",key:"showTrelloCardNumber",value:function showTrelloCardNumber(){return this._globalBoardSettings.showTrelloCardNumber}},{kind:"method",key:"getCardExtraClasses",value:function getCardExtraClasses(e){var t,r,i,a;if(!e)return;let o=`pw-card-${this._currentCardFormat.cardTheme}`,s=[o];switch(e.isReadOnly&&s.push("pw-card--readonly"),e.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:if(e.isMilestone)s.push(`${o}--milestone`);else if(this._currentCardFormat.cardTheme===x.g.Colorful)if(this.isSchedulerInPreview)s.push(`pw-card--label_${re()(e.labelIds)[0]||"default"}`);else{var l,d,c,h;let t=We()(l=S()(d=R()(c=re()(e.labelIds)).call(c,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(d,(t=>t&&e.boardId===t.boardId))).call(l,n.p);s.push(`pw-card--label_${(null===(h=t[0])||void 0===h?void 0:h.color)||"default"}`)}if(!this.isSchedulerInPreview){let t=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);null!=t&&t.color&&s.push(`pw-card--board_${t.color}`)}e.isTempCard&&s.push("pw-card--temp"),e.isArchived&&s.push("pw-card--archived"),e.isCompleted&&s.push("pw-card--completed"),s.push(`pw-card--priority_${e.priority}`);break;case x.h.TrelloTimeRecord:s.push(`${o}--time-record`);let u=We()(t=S()(r=R()(i=re()(e.labelIds)).call(i,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(r,(t=>t&&e.boardId===t.boardId))).call(t,n.p);s.push(`pw-card--label_${(null===(a=u[0])||void 0===a?void 0:a.color)||"default"}`),e.isArchived&&s.push("pw-card--archived");break;case x.h.GoogleEvent:let p=this._googleIntegrationSrv.getGoogleCalendarById(e.googleCalendarId);p&&(s.push(`${o}--google`),s.push(`${o}--google_${p.shortId}`));break;case x.h.ICalEvent:let m=this._iCalIntegrationSrv.getICalCalendarById(e.iCalCalendarId);m&&(s.push("pw-card--ical"),s.push(`pw-card--ical_${m.type}`),s.push(`pw-card--ical_${m.color}`))}return s.join(" ")}},{kind:"method",key:"getCardPreviewExtraClasses",value:function getCardPreviewExtraClasses(e,t){let r=[];if(e.isMilestone)r.push("pw-milestone"),e.isArchived&&r.push("pw-milestone--archived"),e.isCompleted&&r.push("pw-milestone--completed");else switch(e.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:if(this._currentCardFormat.cardTheme===x.g.Colorful){var i,a,o,s;let l=We()(i=S()(a=R()(o=re()(e.labelIds)).call(o,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(a,(t=>t&&e.boardId===t.boardId))).call(i,n.p);r.push(`${t}--label_${(null===(s=l[0])||void 0===s?void 0:s.color)||"default"}`)}else{let i=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);null!=i&&i.color&&r.push(`${t}--board_${i.color}`)}break;case x.h.GoogleEvent:let l=this._googleIntegrationSrv.getGoogleCalendarById(e.googleCalendarId);l&&(r.push(`${t}--google`),r.push(`${t}--google_${l.shortId}`));break;case x.h.ICalEvent:let d=this._iCalIntegrationSrv.getICalCalendarById(e.iCalCalendarId);d&&r.push(`${t}--ical_${d.color}`)}return r.join(" ")}},{kind:"method",key:"isCardResizeAvailable",value:function isCardResizeAvailable(e){if(e.isReadOnly)return!1;switch(e.cardType){case x.h.TrelloCard:return!e.isArchived&&!e.isMilestone;case x.h.TrelloCheckItem:return!e.isArchived;case x.h.TrelloTimeRecord:return!e.isArchived&&this.schedulerWidget.view().isTimeAvailable&&!e.isAllDay;case x.h.GoogleEvent:return!0;default:return!1}}},{kind:"method",key:"isCardContextMenuAvailable",value:function isCardContextMenuAvailable(e){if(e.isTempCard)return!1;switch(e.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:return!0;case x.h.GoogleEvent:return!e.isReadOnly;default:return!1}}},{kind:"method",key:"getCardCalendarImage",value:function getCardCalendarImage(e){if(!this.isSchedulerInPreview&&e)switch(e.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);return null==t?void 0:t.imageUrls[x.kb.Small]}}},{kind:"method",key:"getCardCalendarName",value:function getCardCalendarName(e){if(!this.isSchedulerInPreview&&e)switch(e.cardType){case x.h.TrelloCard:case x.h.TrelloCustomField:case x.h.TrelloCheckItem:case x.h.TrelloTimeRecord:let t=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId);return null==t?void 0:t.name;case x.h.GoogleEvent:let r=this._googleIntegrationSrv.getGoogleCalendarById(e.googleCalendarId);return null==r?void 0:r.name;case x.h.ICalEvent:let i=this._iCalIntegrationSrv.getICalCalendarById(e.iCalCalendarId);return null==i?void 0:i.name}}},{kind:"method",key:"getCardCustomFieldName",value:function getCardCustomFieldName(e){var t;if(!this.isSchedulerInPreview&&e.cardType===x.h.TrelloCustomField)return null===(t=this._trelloIntegrationSrv.getTrelloCustomFieldById(e.trelloCustomFieldId))||void 0===t?void 0:t.name}},{kind:"method",key:"getCardParentTitle",value:function getCardParentTitle(e){var t;if(!this.isSchedulerInPreview&&(e.cardType===x.h.TrelloCheckItem||e.cardType===x.h.TrelloTimeRecord))return(null===(t=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,e.parentId))||void 0===t?void 0:t.title)||""}},{kind:"method",key:"getCardLabelsColors",value:function getCardLabelsColors(e){var t,r,i,a,o,s,l,d;return this.isSchedulerInPreview?R()(t=We()(r=R()(i=S()(a=re()(e.labelIds)).call(a,(e=>e!==U.k))).call(i,(e=>({color:e})))).call(r,n.p)).call(t,(e=>e.color)):e&&x.ob.has(e.cardType)?R()(o=We()(s=S()(l=R()(d=re()(e.labelIds)).call(d,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(l,(t=>t&&e.boardId===t.boardId))).call(s,n.p)).call(o,(e=>e.color)):void 0}},{kind:"method",key:"getCardMembers",value:function getCardMembers(e){return this.isSchedulerInPreview?[]:e&&x.ob.has(e.cardType)?We()(t=S()(r=R()(i=re()(e.memberIds)).call(i,(e=>this._trelloIntegrationSrv.getTrelloMemberById(e)))).call(r,(e=>e))).call(t,n.r):[];var t,r,i}},{kind:"method",key:"scrollView",value:function scrollView(e=Object(n.O)(new Date),t=!1,r){this._appCommonSrv.setSchedulerSelectedDate(e),this.schedulerWidget.view().scrollTo({date:e,time:t?null:new Date,navigationMode:r})}},{kind:"method",key:"scrollViewToResource",value:function scrollViewToResource(e){var t,r;null===(t=(r=this.schedulerWidget.view()).scrollToResource)||void 0===t||t.call(r,e)}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_localSettings",value:function _localSettings(){return this._settingsSrv.currentSettings.local}},{kind:"get",key:"_localBoardSettings",value:function _localBoardSettings(){return this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId)}},{kind:"get",key:"_globalSettings",value:function _globalSettings(){return this._settingsSrv.currentSettings.global}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}},{kind:"get",key:"_schedulerMode",value:function _schedulerMode(){return this._appCommonSrv.getSchedulerMode()}},{kind:"get",key:"_schedulerCardsDataSource",value:function _schedulerCardsDataSource(){return this._schedulerCardsDataSourceLazy||(this._schedulerCardsDataSourceLazy=new kendo.data.SchedulerDataSource({schema:{model:{id:"id",fields:{id:{from:"id"},title:{from:"title"},start:{from:"start",type:"date"},end:{from:"end",type:"date"},description:{from:"description"},members:{from:"members"},recurrenceRule:{from:"recurrenceRule"},recurrenceException:{from:"recurrenceException"},recurrenceId:{from:"recurrenceId"}}}},transport:{read:e=>this._onKendoReadCardsAsync(e),create:e=>{},update:e=>{},destroy:e=>{}},error:e=>{this._schedulerCardsDataSource.cancelChanges(),this._$log.error("Planyway scheduler cards data source error:"),this._$log.error(e.errorThrown),this._telemetrySrv.logError("Planyway scheduler cards data source error",e.errorThrown,{class:this.constructor.name,method:this._schedulerCardsDataSource.name})}})),this._schedulerCardsDataSourceLazy}},{kind:"get",key:"_schedulerResourcesDataSource",value:function _schedulerResourcesDataSource(){return this._schedulerResourcesDataSourceLazy||(this._schedulerResourcesDataSourceLazy=new kendo.data.DataSource({sort:[{field:"order",dir:"asc"}],transport:{read:e=>this._onKendoReadResources(e)},error:e=>{this._schedulerResourcesDataSource.cancelChanges(),this._$log.error("Planyway scheduler resources data source error:"),this._$log.error(e.errorThrown),this._telemetrySrv.logError("Planyway resources data source error",e.errorThrown,{class:this.constructor.name,method:this._schedulerResourcesDataSource.name})}})),this._schedulerResourcesDataSourceLazy}},{kind:"method",key:"_setupEventTemplate",value:function _setupEventTemplate(e={}){let t=e.cardTheme||this._globalBoardSettings.cardTheme;switch(t){case x.g.Light:this.schedulerWidget.options.eventTemplate=Ee,this.schedulerWidget.options.allDayEventTemplate=Ee;break;case x.g.Colorful:this.schedulerWidget.options.eventTemplate=ke,this.schedulerWidget.options.allDayEventTemplate=ke}this._currentCardFormat={cardTheme:t}}},{kind:"method",key:"_logExternalLinkTypeAsync",value:async function _logExternalLinkTypeAsync(){}},{kind:"method",key:"_tryOpenCardAsync",value:async function _tryOpenCardAsync(){}},{kind:"method",key:"_setDatesAsync",value:async function _setDatesAsync(e){if(e.hasDates)return e;try{let t,r=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId),i=this.schedulerWidget.view(),a=r.defaultCardIsAllDay||!i.isTimeAvailable,o=i.getClosestVisibleSlot(new Date,a),s=o.start;switch(i.name){case x.O.OneDay:case x.O.ThreeDay:case x.O.Week:let e=a?0:r.defaultCardDuration;t=Object(n.c)(s,e);break;case x.O.Month:case x.O.Timeline:t=o.end;break;default:throw new Error(`Unsupported scheduler view: ${i.name}`)}return await this._calendarCardsSrv.updateCalendarCardPropertiesAsync(e,{isAllDay:a,start:s,end:t}),this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id)}catch(e){this._$log.error("Trello card set dates error:"),this._$log.error(e),this._telemetrySrv.logError("Trello card set dates error",e,{class:this.constructor.name,method:this._setDatesAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}}},{kind:"method",key:"_openCardByUrlAsync",value:async function _openCardByUrlAsync(e){var t,r,i,a,o,s;try{let l,d,c=null,h=this._appCommonSrv.getSchedulerView(),u=!1;if(e.isMilestone&&!this._globalBoardSettings.isMilestonesShown&&(this._globalBoardSettings.isMilestonesShown=!0,u=!0),h===x.O.Timeline)if(d=this._appCommonSrv.getTimelineResourcesType(),e.isMilestone)l=U.v;else{let c=this._globalBoardSettings.timelineHiddenResources[d];switch(d){case x.fb.Members:let d=We()(t=S()(r=R()(i=re()(e.memberIds)).call(i,(e=>this._trelloIntegrationSrv.getTrelloMemberById(e)))).call(r,(e=>e))).call(t,n.r);for(let e of d)ze()(c).call(c,e.id)&&(c=S()(c).call(c,(t=>t!==e.id)),u=!0);0===d.length&&ze()(c).call(c,U.k)&&(c=S()(c).call(c,(e=>e!==U.k)),u=!0),l=0!==d.length?d[0].id:U.k;break;case x.fb.Calendars:ze()(c).call(c,e.boardId)&&(c=S()(c).call(c,(t=>t!==e.boardId)),u=!0),l=e.boardId;break;case x.fb.Lists:ze()(c).call(c,e.listId)&&(c=S()(c).call(c,(t=>t!==e.listId)),u=!0),l=e.listId;break;case x.fb.Labels:let h=We()(a=S()(o=R()(s=re()(e.labelIds)).call(s,(e=>this._trelloIntegrationSrv.getTrelloLabelById(e)))).call(o,(e=>e))).call(a,n.p);for(let e of h){let t=Object(n.V)(e);ze()(c).call(c,t)&&(c=S()(c).call(c,(e=>e!==t)),u=!0)}0===h.length&&ze()(c).call(c,U.k)&&(c=S()(c).call(c,(e=>e!==U.k)),u=!0),l=0!==h.length?Object(n.V)(h[0]):U.k;break;case x.fb.NoResources:l=U.j}l!==U.j&&(this._globalBoardSettings.timelineHiddenResources[d]=c)}u&&(this._settingsSrv.saveGlobalAsync(),d&&this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:d})),this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{scrollToDate:e.start,navigationMode:x.y.DateSelect,resourceId:l}),e.cardType===x.h.TrelloCard&&(e.ignoreFilters=!0,this._calendarCardsSrv.updateCalendarCardAsync(e));try{this._appCommonSrv.setSchedulerBusy(!0),c=await this._htmlHelperSrv.elementAddedOnceAsync(this.schedulerWidget.element,`.k-event[data-uid="${e.id}"]`,3e3),c&&(this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{cardElement:c}),this.schedulerWidget.select(null),this.schedulerWidget.select([c.data("uid")]))}finally{this._appCommonSrv.setSchedulerBusy(!1)}Object(n.y)(this._$window,[U.f],{saveInHistory:!1}),this._logCardEvent(e,{event:x.X.CardEvents.EditDialogOpened,data:{isDetailed:!0}}),await this._dialogSrv.showEditCardDialogAsync(e,{cardElement:c,schedulerWidget:this.schedulerWidget})||this._logCardEvent(e,{event:x.X.CardEvents.EditDialogClosed})}catch(e){this._$log.error("Trello card open by url error:"),this._$log.error(e),this._telemetrySrv.logError("Trello card open by url error",e,{class:this.constructor.name,method:this._openCardByUrlAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.OPEN_CARD_ERROR"),x.A.Error)}}},{kind:"method",key:"_createTimeEntryCardByClickAsync",value:function _createTimeEntryCardByClickAsync(e){let t=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId),r=e.isAllDay?t.defaultCardIsAllDay?G.b:t.defaultCardDuration:Object(n.S)(e.start,e.end);return this._calendarCardsSrv.createTempCalendarCardByTimeTrackingAsync(x.h.TrelloCard,{isDuration:e.isAllDay,from:e.start,to:e.end,durationMinutes:r,memberId:this._currentMemberId})}},{kind:"method",key:"_createCardByClick",value:function _createCardByClick(e){return this._calendarCardsSrv.createTempCalendarCardByScheduler(e.cardType,e)}},{kind:"method",key:"_createTimeEntryCardByDropAsync",value:async function _createTimeEntryCardByDropAsync(e){let t=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,e.id||e.shortId);if(!t)return;let r=this._trelloIntegrationSrv.getTrelloBoardById(t.boardId),i=e.isAllDay?r.defaultCardIsAllDay?G.b:r.defaultCardDuration:Object(n.S)(e.start,e.end);await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(t,Ve()(),{isDuration:e.isAllDay,from:e.start,to:e.end,durationMinutes:i,memberId:this._currentMemberId}),this._logCardEvent(e,{event:x.X.CardEvents.Scheduled,data:{cardType:x.h.TrelloTimeRecord,durationMinutes:i,by:x.U.Drop,destination:e.isAllDay?x.V.AllDay:x.V.NonAllDay}})}},{kind:"method",key:"_createCardByDropAsync",value:async function _createCardByDropAsync(e){var t;let r,i=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,e.id||e.shortId);if(i){if(i.recurrenceRule){if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.RecurringCards,!0))return;e.isAllDay===i.isAllDay&&Object(n.w)(e.realStart||e.start,i.start)||await this._deleteRecurrenceExceptionsAsync(i)}var a;if(e.members)xe()(a=e.members).call(a,(e=>i.memberIds.has(e)))&&(e.members=re()(i.memberIds))}if(e.labels){var o;let t=(null==i?void 0:i.boardId)||this._currentBoardId,r=0===e.labels.length?[U.k]:R()(o=e.labels).call(o,(e=>this._trelloIntegrationSrv.getOrCreateTrelloLabel(t,e.color,e.name).id));e.labelIds=new M.a(r)}switch(this._appCommonSrv.getSchedulerView()){case x.O.OneDay:case x.O.ThreeDay:case x.O.Week:r=e.isAllDay?x.V.AllDay:x.V.NonAllDay;break;case x.O.Month:r=x.V.AllDay;break;case x.O.Timeline:if(e.cardRole===me.c.Milestone){r=x.V.Milestone;break}switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.NoResources:r=x.V.NoLane;break;case x.fb.Members:r=ze()(t=e.members).call(t,this._trelloIntegrationSrv.getMemberId())?x.V.MemberLaneSelf:x.V.MemberLane;break;case x.fb.Calendars:r=x.V.BoardLane;break;case x.fb.Lists:r=x.V.ListLane;break;case x.fb.Labels:r=x.V.LabelLane}}this._calendarCardsSrv.updateCalendarCardBySchedulerAsync(x.h.TrelloCard,e),this._logCardEvent(e,{event:x.X.CardEvents.Scheduled,data:{by:x.U.Drop,destination:r}})}},{kind:"method",key:"_updateCardsByHotkey",value:function _updateCardsByHotkey(e,t,r){var i;switch(t){case x.t.C:this._toggleCardsIsArchivedAsync(e,{getCardSpecificEvent:e=>e.isArchived?x.X.CardEvents.Unarchived:x.X.CardEvents.Archived,data:{by:x.U.Hotkey}});break;case x.t.D:(r.ctrlKey||r.metaKey)&&this._duplicateCardsAsync(e,{event:x.X.CardEvents.Duplicated,data:{by:x.U.Hotkey}});break;case x.t.L:if(1!==e.length)break;let o=this._trelloIntegrationSrv.getTrelloBoardById(e[0].boardId);if(0===S()(i=o.labels).call(i,(e=>e.id!==U.k)).length)break;this._$rootScope.$broadcast(x.n.OpenNestedContextMenuRequested,{calendarCard:e[0],nestedMenu:"labels",source:"calendar"});break;case x.t.M:if(1!==e.length)break;this._$rootScope.$broadcast(x.n.OpenNestedContextMenuRequested,{calendarCard:e[0],nestedMenu:"members",source:"calendar"});break;case x.t.S:this._toggleCardsIsSubscribedAsync(e,{getCardSpecificEvent:e=>e.isSubscribed?x.X.CardEvents.Unsubscribed:x.X.CardEvents.Subscribed,data:{by:x.U.Hotkey}});break;case x.t.Space:let s=this._trelloIntegrationSrv.getTrelloMemberById(this._currentMemberId);this._toggleCardsMemberAsync(e,s,{getCardSpecificEvent:e=>!e.memberIds.has(this._currentMemberId)?x.X.CardEvents.MemberAssignedSelf:x.X.CardEvents.MemberUnassignedSelf,data:{by:x.U.Hotkey}});break;case x.t.Delete:case x.t.Backspace:r.shiftKey||r.metaKey?this._deleteCardsAsync(e,{event:x.X.CardEvents.Deleted,data:{by:x.U.Hotkey}}):this._removeCardsDatesAsync(e,{event:x.X.CardEvents.DatesRemoved,data:{by:x.U.Hotkey}});break;default:if(t>=x.t.Key0&&t<=x.t.Key9){let r=x.u[t],i={};for(let t of e){var a;let e=this._trelloIntegrationSrv.getTrelloBoardById(t.boardId).labels,o=c()(a=We()(e).call(e,n.p)).call(a,(e=>e.color===r));o&&(i[o.id]?i[o.id].push(t):i[o.id]=[t])}for(let e in i)this._toggleCardsLabelAsync(i[e],e,{getCardSpecificEvent:t=>!t.labelIds.has(e)?x.X.CardEvents.LabelAdded:x.X.CardEvents.LabelRemoved,data:{by:x.U.Hotkey}})}}}},{kind:"method",key:"_toggleCardsIsCompleted",value:function _toggleCardsIsCompleted(e,t){if(0===(e=S()(e).call(e,(e=>!e.isReadOnly&&!e.isArchived))).length)return;this._modifyCalendarCardsAsync(e,x.v.Edit,(e=>(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id),this._calendarCardsSrv.updateCalendarCardPropertiesAsync(e,{isCompleted:!e.isCompleted}))),{forLog:"Planyway card updating error",forNotification:"NOTIFICATIONS.UPDATE_CARD_ERROR"},t,{beforeOnlyOccurrenceAsync:(e,t)=>(t.isCompleted=!t.isCompleted,!0),beforeThisAndFollowingAsync:(e,t)=>(t.isCompleted=!t.isCompleted,!0),beforeAllSeriesAsync:(e,t)=>(e.isCompleted=!e.isCompleted,!1)})}},{kind:"method",key:"_toggleCardsIsSubscribedAsync",value:function _toggleCardsIsSubscribedAsync(e,t){if(0===(e=S()(e).call(e,(e=>!e.isReadOnly&&!e.isArchived))).length)return;return this._modifyCalendarCardsAsync(e,x.v.Edit,(e=>(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id),this._calendarCardsSrv.updateCalendarCardPropertiesAsync(e,{isSubscribed:!e.isSubscribed}))),{forLog:"Planyway card updating error",forNotification:"NOTIFICATIONS.UPDATE_CARD_ERROR"},t,{beforeOnlyOccurrenceAsync:(e,t)=>(t.isSubscribed=!t.isSubscribed,!0),beforeThisAndFollowingAsync:(e,t)=>(t.isSubscribed=!t.isSubscribed,!0),beforeAllSeriesAsync:(e,t)=>(e.isSubscribed=!e.isSubscribed,!1)})}},{kind:"method",key:"_toggleCardsLabelAsync",value:function _toggleCardsLabelAsync(e,t,r){if(0===(e=S()(e).call(e,(e=>!e.isReadOnly&&!e.isArchived))).length)return;let actionOnRecurrentCard=e=>{e.labelIds=Object(G.i)(e,t)},i={beforeOnlyOccurrenceAsync:(e,t)=>(actionOnRecurrentCard(t),!0),beforeThisAndFollowingAsync:(e,t)=>(actionOnRecurrentCard(t),!0),beforeAllSeriesAsync:(e,t)=>(actionOnRecurrentCard(e),!1)};return this._modifyCalendarCardsAsync(e,x.v.Edit,(e=>(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id),this._calendarCardsSrv.updateCalendarCardPropertiesAsync(e,{labelIds:Object(G.i)(e,t)}))),{forLog:"Planyway card updating error",forNotification:"NOTIFICATIONS.UPDATE_CARD_ERROR"},r,i)}},{kind:"method",key:"_toggleCardsMemberAsync",value:function _toggleCardsMemberAsync(e,t,r){if(0===(e=S()(e).call(e,(e=>!e.isReadOnly&&!e.isArchived))).length)return;let actionOnRecurrentCard=e=>{e.memberIds=Object(G.j)(e,t.id),e.members=re()(e.memberIds)},i={beforeOnlyOccurrenceAsync:(e,t)=>(actionOnRecurrentCard(t),!0),beforeThisAndFollowingAsync:(e,t)=>(actionOnRecurrentCard(t),!0),beforeAllSeriesAsync:(e,t)=>(actionOnRecurrentCard(e),!1)};return this._modifyCalendarCardsAsync(e,x.v.Edit,(e=>(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id),this._calendarCardsSrv.updateCalendarCardPropertiesAsync(e,{memberIds:Object(G.j)(e,t.id)}))),{forLog:"Planyway card updating error",forNotification:"NOTIFICATIONS.UPDATE_CARD_ERROR"},r,i)}},{kind:"method",key:"_copyCardUrlAsync",value:async function _copyCardUrlAsync(e,t){let r=e[0];if(r){this._logCardEvent(r,t);try{await Object(n.u)(r.shareUrl),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.URL_COPIED_TO_CLIPBOARD"),x.A.Success)}catch(e){this._$log.error("Planyway copy card URL error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.COPY_CARD_URL_ERROR"),x.A.Error),this._telemetrySrv.logError("Planyway copy card URL error",e,{class:this.constructor.name,method:this._copyCardUrlAsync.name})}}}},{kind:"method",key:"_duplicateCardsAsync",value:async function _duplicateCardsAsync(e,t){if(0!==(e=S()(e).call(e,(e=>!e.isReadOnly&&!e.isArchived))).length){for(let r of e)this._logCardEvent(r,t);this._appCommonSrv.setSchedulerBusy(!0),e=await P.a.all(R()(e).call(e,(async e=>{try{if(e.isRecurring()&&!e.isException()){let t=this._getRecurrenceHead(e);e=this._calendarCardsSrv.getCalendarCardById(e.cardType,t.id)}else e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id);if(!e)return;return await this._calendarCardsSrv.createCalendarCardAsync(e.duplicate())}catch(e){this._$log.error("Planyway duplicate card error"),this._$log.error(e),this._telemetrySrv.logError("Planyway duplicate card error",e,{class:this.constructor.name,method:this._duplicateCardsAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.DUPLICATE_CARD_ERROR"),x.A.Error)}}))),this._appCommonSrv.setSchedulerBusy(!1),0!==(e=S()(e).call(e,(e=>e))).length&&(async()=>{let t=await P.a.all(R()(e).call(e,(e=>this._htmlHelperSrv.elementAddedOnceAsync(this.schedulerWidget.element,`.k-event[data-uid="${e.id}"]`))));this.schedulerWidget.select(null),this.schedulerWidget.select(R()(t).call(t,(e=>e.data("uid"))))})()}}},{kind:"method",key:"_toggleCardsIsArchivedAsync",value:function _toggleCardsIsArchivedAsync(e,t){if(0===(e=S()(e).call(e,(e=>!e.isReadOnly))).length)return;return this._modifyCalendarCardsAsync(e,x.v.Edit,(e=>(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id),this._calendarCardsSrv.updateCalendarCardPropertiesAsync(e,{isArchived:!e.isArchived}))),{forLog:"Planyway card updating error",forNotification:"NOTIFICATIONS.UPDATE_CARD_ERROR"},t,{beforeOnlyOccurrenceAsync:(e,t)=>(t.isArchived=!t.isArchived,!0),beforeThisAndFollowingAsync:(e,t)=>(t.isArchived=!t.isArchived,!0),beforeAllSeriesAsync:(e,t)=>(e.isArchived=!e.isArchived,!1)})}},{kind:"method",key:"_removeCardsDatesAsync",value:function _removeCardsDatesAsync(e,t){if(0===(e=S()(e).call(e,(e=>!e.isReadOnly&&!e.isArchived&&x.ob.has(e.cardType)))).length)return;let r={confirmAsync:async()=>{for(let t of Ms){let r=S()(e).call(e,(e=>e.cardType===t)).length;if(0!==r&&!await this._dialogSrv.showConfirmAsync(this._$translate.instant(Ns[t].title),1===r?this._$translate.instant(Ns[t].confirm):this._$translate.instant(Ns[t].confirmMultiple,{cardsCount:r}),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}],dontAskType:x.l.RemoveFromCalendar}))return!1}return!0},beforeAllSeriesAsync:(e,t)=>((async()=>{try{await this._calendarCardsSrv.deleteRecurrenceExceptionsAsync(t.cardType,t)}catch(e){this._$log.error("Planyway delete card exceptions error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete card exceptions error",e,{class:this.constructor.name,method:this._removeCardsDatesAsync.name})}})(),!1)};return this._modifyCalendarCardsAsync(e,x.v.Remove,(e=>(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id),this._calendarCardsSrv.removeCalendarCardAsync(e))),{forLog:"Planyway remove card error",forNotification:"NOTIFICATIONS.REMOVE_CARD_ERROR"},t,r)}},{kind:"method",key:"_deleteCardsAsync",value:async function _deleteCardsAsync(e,t){if(0===(e=S()(e).call(e,(e=>!e.isReadOnly&&ze()(Bs).call(Bs,e.cardType)))).length)return;let r={forLog:"Planyway delete card error",forNotification:Fs[e[0].cardType].error},i={confirmAsync:async()=>{for(let t of Bs){let r=S()(e).call(e,(e=>e.cardType===t)).length;if(0!==r&&!await this._dialogSrv.showConfirmAsync(this._$translate.instant(Fs[t].title),1===r?this._$translate.instant(Fs[t].confirm):this._$translate.instant(Fs[t].confirmMultiple,{cardsCount:r}),{buttons:[{text:this._$translate.instant("BUTTONS.DELETE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))return!1}return!0},beforeAllSeriesAsync:(e,t)=>((async()=>{try{await this._calendarCardsSrv.deleteRecurrenceExceptionsAsync(t.cardType,t)}catch(e){this._$log.error("Planyway delete card exceptions error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete card exceptions error",e,{class:this.constructor.name,method:this._deleteCardsAsync.name})}})(),!1),waitForAction:!0};this._appCommonSrv.setSchedulerBusy(!0),await this._modifyCalendarCardsAsync(e,x.v.Delete,(e=>(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id),this._calendarCardsSrv.deleteCalendarCardAsync(e))),r,t,i),this._appCommonSrv.setSchedulerBusy(!1)}},{kind:"method",key:"_modifyCalendarCardsAsync",value:async function _modifyCalendarCardsAsync(e,t,r,i,a,n={}){let o,s=t===x.v.Edit;if(s){if(xe()(e).call(e,(e=>{if(e.isMilestone&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0))return!0;switch(e.cardType){case x.h.TrelloTimeRecord:if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return!0}return!1})))return void(this._appCommonSrv.getSchedulerView()===x.O.Timeline&&this._schedulerCardsDataSource.read())}if(e=R()(e).call(e,(e=>e.deepClone())),xe()(e).call(e,(e=>e.isRecurring()&&!e.isException()))){if(s&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.RecurringCards,!0))return void(this._appCommonSrv.getSchedulerView()===x.O.Timeline&&this._schedulerCardsDataSource.read());if(this.cardContextMenu.close(),o=await this._dialogSrv.showEditRecurringConfirmDialogAsync(e[0].cardType,t),!o)return void(this._appCommonSrv.getSchedulerView()===x.O.Timeline&&this._schedulerCardsDataSource.read());if(o!==x.w.AllSeries&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.RecurringCards,!0))return void(this._appCommonSrv.getSchedulerView()===x.O.Timeline&&this._schedulerCardsDataSource.read());if(this._appCommonSrv.setSchedulerBusy(!0),e=await P.a.all(R()(e).call(e,(async e=>{if(!e.isRecurring()||e.isException())return e;try{o===x.w.ThisAndFollowing&&e.isRecurrenceHead()&&(o=x.w.AllSeries);let r=this._getRecurrenceHead(e),i=n.updateData?n.updateData.get(e.uid):{},s=this._getRecurrenceException(e,i),l=t!==x.v.Remove&&t!==x.v.Delete,d=o!==x.w.AllSeries;switch(o){case x.w.OnlyOccurrence:n.beforeOnlyOccurrenceAsync&&(d=await n.beforeOnlyOccurrenceAsync(e,s,r)),e=await this._createRecurrenceExceptionAsync(s,l);break;case x.w.ThisAndFollowing:n.beforeThisAndFollowingAsync&&(d=await n.beforeThisAndFollowingAsync(e,s,r));let t=e;l&&(e=await this._createFollowingRecurrenceAsync(r,e.start,s)),await this._deleteRecurrenceExceptionsAsync(r,t.start);break;case x.w.AllSeries:n.beforeAllSeriesAsync&&(d=await n.beforeAllSeriesAsync(e,r)),e=r}if(!d)return e;a&&this._logCardEvent(e||r,{event:a.event||a.getCardSpecificEvent(r),data:{...a.data,modifyRecurringMode:o}})}catch(e){this._$log.error("Planyway update recurrent card error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway update recurrent card error",e,{class:this.constructor.name,method:this._modifyCalendarCardsAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_RECURRING_CARD_ERROR"),x.A.Error)}}))),this._appCommonSrv.setSchedulerBusy(!1),0===(e=S()(e).call(e,(e=>e))).length)return}else if(n.confirmAsync){if(!await n.confirmAsync())return}let l=P.a.all(R()(e).call(e,(async e=>{try{let i=r(e);a&&(t!==x.v.Remove&&t!==x.v.Delete&&(e=this._calendarCardsSrv.getCalendarCardById(e.cardType,e.id)),this._logCardEvent(e,{event:a.event||a.getCardSpecificEvent(e),data:{...a.data,modifyRecurringMode:o}})),await i}catch(e){if(!i)throw e;this._$log.error(`${i.forLog}:`),this._$log.error(e),this._telemetrySrv.logError(i.forLog,e,{class:this.constructor.name,method:this._modifyCalendarCardsAsync.name}),this._notificationSrv.showNotification(this._$translate.instant(i.forNotification),x.A.Error)}})));if(n.waitForAction)return l}},{kind:"method",key:"_getRecurrenceHead",value:function _getRecurrenceHead(e){return e.recurrenceRule?e.uid?this._schedulerCardsDataSource.getByUid(e.uid):e:this._schedulerCardsDataSource.get(e.recurrenceId)}},{kind:"method",key:"_getRecurrenceException",value:function _getRecurrenceException(e,t){let r=e.listId;return t.calendarId&&e.calendarId!==t.calendarId&&(r=null),e.toOccurrence({exceptionDate:e.start,originalStart:e.isAllDay?Object(n.Fb)(e.start):e.start.toISOString(),listId:r,...t})}},{kind:"method",key:"_createRecurrenceExceptionAsync",value:function _createRecurrenceExceptionAsync(e,t){return this._calendarCardsSrv.addExceptionToRecurrentAsync(e.cardType,e),t?this._calendarCardsSrv.createRecurrenceExceptionAsync(e.cardType,e):this._calendarCardsSrv.createRecurrenceGapAsync(e.cardType,e)}},{kind:"method",key:"_deleteRecurrenceExceptionsAsync",value:async function _deleteRecurrenceExceptionsAsync(e,t){(e.recurrenceException||t)&&(await this._calendarCardsSrv.removeExceptionsFromRecurrentAsync(e.cardType,e,{fromDate:t,waitForRemove:!0}),(async()=>{try{await this._calendarCardsSrv.deleteRecurrenceExceptionsAsync(e.cardType,e,{fromDate:t})}catch(e){this._$log.error("Planyway delete card exceptions error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete card exceptions error",e,{class:this.constructor.name,method:this._deleteRecurrenceExceptionsAsync.name})}})())}},{kind:"method",key:"_createFollowingRecurrenceAsync",value:function _createFollowingRecurrenceAsync(e,t,r){let i=Ls.fromString(e.recurrenceRule);if(i.origOptions.until)i.origOptions.until<=r.start?(i.origOptions.until=null,i.origOptions.count=1):(i.origOptions.until=r.isAllDay?Object(n.O)(i.origOptions.until):Object(n.N)(i.origOptions.until),i.origOptions.count=null);else if(i.origOptions.count){i.options.dtstart=e.start;let r=i.all((e=>e<t));i.origOptions.count-=r.length}let a=r.clone({recurrenceRule:i.toString({onlyDate:r.isAllDay}),recurrenceId:null,sourceCardId:e.id}),o=this._calendarCardsSrv.createTempCalendarCardByScheduler(e.cardType,a,{addToCache:!1});return this._calendarCardsSrv.createCalendarCardAsync(o)}},{kind:"method",key:"_getContextMenuScope",value:function _getContextMenuScope(e){let t=a()(`md-menu[data-menu='${e}']`);if(0!==t.length)return t.scope()}},{kind:"method",key:"_onKendoReadCardsAsync",value:async function _onKendoReadCardsAsync(e){try{let t;if(this._appCommonSrv.setSchedulerBusy(!0),t=this.isSchedulerInPreview?[]:await this._calendarCardsSrv.getCalendarCardsAsync(),this._$scope.$$destroyed||!t)return void this._appCommonSrv.setSchedulerBusy(!1);this._addServiceListeners(),this._appCommonSrv.setSchedulerBusy(!1),e.success(S()(t).call(t,(e=>e.hasDates)))}catch(t){this._appCommonSrv.setSchedulerBusy(!1),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.LOAD_CARDS_ERROR"),x.A.Error),e.error(null,null,t)}}},{kind:"method",key:"_onKendoReadResources",value:function _onKendoReadResources(e){try{var t;let r=S()(t=this._appCommonSrv.getTimelineResources()).call(t,(e=>e.isSelected));e.success(r)}catch(t){this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.LOAD_RESOURCES_ERROR"),x.A.Error),e.error(null,null,t)}}},{kind:"method",key:"_applySchedulerFilters",value:function _applySchedulerFilters(e=!1){let t={operator:e=>{switch(this._schedulerMode){case x.M.TimeTracking:return e.cardType===x.h.TrelloTimeRecord&&e.memberIds.has(this._currentMemberId);default:return this._calendarCardsSrv.isCalendarCardVisible(e)}}};var r;e?this._schedulerCardsDataSource._filter=t:S()(r=this._schedulerCardsDataSource).call(r,t)}},{kind:"method",key:"_applyCardsFieldsSettings",value:function _applyCardsFieldsSettings(){let e=this._appCommonSrv.getSchedulerView();this.schedulerWidget.options.isDetailedView=this._globalBoardSettings.showDateTime||this._globalBoardSettings.showTrelloBoard,this.schedulerWidget.options.showDateTime=this._globalBoardSettings.showDateTime,this.schedulerWidget.options.showTrelloBoard=this._globalBoardSettings.showTrelloBoard,this.schedulerWidget.options.showTrelloCardNumber=this._globalBoardSettings.showTrelloCardNumber,e!==x.O.Timeline&&e!==x.O.Month||this._recreateSchedulerWidget(),this._schedulerCardsDataSource.read()}},{kind:"method",key:"_recreateSchedulerWidget",value:function _recreateSchedulerWidget(){let e=this._appCommonSrv.getSchedulerView();this.schedulerWidget.options.group.resources=e===x.O.Timeline?[this._appCommonSrv.getTimelineResourcesType()]:[],this.schedulerWidget._selectView(e)}},{kind:"method",key:"_printScheduler",value:function _printScheduler(){let e,t=a()("html"),r=a()("body, .pw-scheduler"),i=a()("#pwBodyWrapper"),n=a()("#pwScheduler");if(t.addClass("pw-print-scheduler"),this.schedulerOrientation!==x.N.Bottom&&i.removeClass(`pw-body-wrapper--scheduler_${this.schedulerOrientation}`).addClass(`pw-body-wrapper--scheduler_${x.N.Bottom}`),r.width(t.outerWidth()),this.schedulerWidget.resize(),this._appCommonSrv.getSchedulerView()===x.O.Timeline){let t=this.schedulerWidget.view();e=n.css("height"),n.height(t.contentHeight),t.redraw(this._globalBoardSettings.showDateTime||this._globalBoardSettings.showTrelloBoard)}else t.addClass("pw-print-scheduler-kendo");this._$timeout((()=>{this._$window.print(),this.schedulerOrientation!==x.N.Bottom&&i.removeClass(`pw-body-wrapper--scheduler_${x.N.Bottom}`).addClass(`pw-body-wrapper--scheduler_${this.schedulerOrientation}`),t.removeClass("pw-print-scheduler pw-print-scheduler-kendo"),r.width(""),this._appCommonSrv.getSchedulerView()===x.O.Timeline&&(n.css({height:e}),this.schedulerWidget.view().redraw(this._globalBoardSettings.showDateTime||this._globalBoardSettings.showTrelloBoard))}),0,!1)}},{kind:"method",key:"_addServiceListeners",value:function _addServiceListeners(){this._serviceEventsListenersAdded||(this._serviceEventsListenersAdded=!0,this._calendarCardsSrv.addCalendarCardEventListener("added",this._onAddOrUpdateCard),this._calendarCardsSrv.addCalendarCardEventListener("updated",this._onAddOrUpdateCard),this._calendarCardsSrv.addCalendarCardEventListener("deleted",this._onDeleteCard))}},{kind:"method",key:"_removeServiceListeners",value:function _removeServiceListeners(){this._serviceEventsListenersAdded&&(this._serviceEventsListenersAdded=!1,this._calendarCardsSrv.removeCalendarCardEventListener("added",this._onAddOrUpdateCard),this._calendarCardsSrv.removeCalendarCardEventListener("updated",this._onAddOrUpdateCard),this._calendarCardsSrv.removeCalendarCardEventListener("deleted",this._onDeleteCard))}},{kind:"method",key:"_logCardEvent",value:function _logCardEvent(e,t){var r,i;this._telemetrySrv.logSessionEvent(t.event,{isAllDay:e.isAllDay,start:e.realStart||e.start,end:e.realEnd||e.end,cardRole:e.cardRole,cardType:e.cardType,isCurrentBoardCard:null===(r=e.cardType===x.h.TrelloCard&&e.isCurrentBoardCard)||void 0===r||r,isNewCard:null!==(i=e.isTempCard)&&void 0!==i&&i,recurrenceRule:e.recurrenceHeadRule||e.recurrenceRule,priority:e.priority,where:x.W.Scheduler,by:x.U.Mouse,durationMinutes:e.durationMinutes,...t.data})}}]}}));var xs=r(100),Gs=r.n(xs);function SchedulerController_getDecoratorsApi(){SchedulerController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SchedulerController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SchedulerController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SchedulerController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SchedulerController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SchedulerController_createElementDescriptor(e){var t,r=SchedulerController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SchedulerController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SchedulerController_hasDecorators(e){return e.decorators&&e.decorators.length}function SchedulerController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SchedulerController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SchedulerController_toPropertyKey(e){var t=function SchedulerController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let zs=function SchedulerController_decorate(e,t,r,i){var a,n=SchedulerController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SchedulerController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SchedulerController_isDataDescriptor(a.descriptor)||SchedulerController_isDataDescriptor(i.descriptor)){if(SchedulerController_hasDecorators(a)||SchedulerController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SchedulerController_hasDecorators(a)){if(SchedulerController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SchedulerController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SchedulerController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope","appCommonSrv","settingsSrv","trelloIntegrationSrv"])],(function(e){return{F:class SchedulerController{constructor(t,r,i,n){e(this),this._$scope=t,this._appCommonSrv=r,this._settingsSrv=i,this._trelloIntegrationSrv=n;const getTimelineContentHeight=()=>{if(this._appCommonSrv.getSchedulerView()===x.O.Timeline){let t=kendo.widgetInstance(a()("#pwScheduler"));var e;if(t)return null===(e=t.view())||void 0===e?void 0:e.pwContentHeight}};this._$scope.$watch((()=>getTimelineContentHeight()),(e=>{e&&!Gs()(e)&&(this._minSchedulerHeight=e+a()(".pw-scheduler__toolbar").height())})),this._$scope.$on(x.n.BoardInitialized,(()=>{this._initialSchedulerWidth=null,this._initialSchedulerHeight=null,this._initialBoardHeight=null,this._initialTaskListWidth=null}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"schedulerCtrl"}},{kind:"get",key:"resizerOptions",value:function resizerOptions(){switch(this.schedulerOrientation){case x.N.Top:let e="203px",t="-48px";return this._appCommonSrv.getSchedulerView()===x.O.Timeline&&this._minSchedulerHeight&&(e=`${this._minSchedulerHeight}px`,t=""),{resizableContent:"#pwSchedulerContainer",contentPosition:this.schedulerOrientation,verticalMin:e,forceVerticalMin:this._appCommonSrv.getSchedulerOrientation()===x.N.Top&&this._appCommonSrv.getSchedulerView()===x.O.Timeline,verticalMax:t,forceVerticalMax:this._appCommonSrv.getSchedulerOrientation()===x.N.Top};case x.N.Left:case x.N.Right:return{resizableContent:"#pwSchedulerContainer",contentPosition:this.schedulerOrientation,horizontalMin:"500px",horizontalMax:"-640px"};case x.N.Bottom:return{resizableContent:"#surface",contentPosition:this.schedulerOrientation,verticalMin:"88px",verticalMax:"-8px"}}}},{kind:"get",key:"schedulerOrientation",value:function schedulerOrientation(){if(this.isSchedulerShown)return this._appCommonSrv.getSchedulerOrientation()}},{kind:"get",key:"initialSchedulerWidth",value:function initialSchedulerWidth(){return this._initialSchedulerWidth||(this._initialSchedulerWidth=this._localBoardSettings.schedulerWidth),this._initialSchedulerWidth}},{kind:"set",key:"initialSchedulerWidth",value:function initialSchedulerWidth(e){this._initialSchedulerWidth=e}},{kind:"get",key:"initialSchedulerHeight",value:function initialSchedulerHeight(){return this._initialSchedulerHeight||(this._initialSchedulerHeight=this._localBoardSettings.schedulerHeight),this._initialSchedulerHeight}},{kind:"set",key:"initialSchedulerHeight",value:function initialSchedulerHeight(e){this._initialSchedulerHeight=e}},{kind:"get",key:"initialBoardHeight",value:function initialBoardHeight(){return this._initialBoardHeight||(this._initialBoardHeight=this._localBoardSettings.trelloBoardHeight),this._initialBoardHeight}},{kind:"set",key:"initialBoardHeight",value:function initialBoardHeight(e){this._initialBoardHeight=e}},{kind:"get",key:"initialTaskListWidth",value:function initialTaskListWidth(){return this._initialTaskListWidth||(this._initialTaskListWidth=this._localBoardSettings.taskListsWidth),this._initialTaskListWidth}},{kind:"set",key:"initialTaskListWidth",value:function initialTaskListWidth(e){this._initialTaskListWidth=e}},{kind:"get",key:"initialHeight",value:function initialHeight(){return this.schedulerOrientation===x.N.Bottom?this.initialBoardHeight:this.initialSchedulerHeight}},{kind:"set",key:"initialHeight",value:function initialHeight(e){this.schedulerOrientation===x.N.Bottom?this.initialBoardHeight=e:this.initialSchedulerHeight=e}},{kind:"get",key:"initialWidth",value:function initialWidth(){return this.initialSchedulerWidth}},{kind:"set",key:"initialWidth",value:function initialWidth(e){this.initialSchedulerWidth=e}},{kind:"get",key:"isSchedulerInPreview",value:function isSchedulerInPreview(){return this._appCommonSrv.isSchedulerInPreview()}},{kind:"get",key:"isSchedulerLoading",value:function isSchedulerLoading(){return this._appCommonSrv.isSchedulerLoading()}},{kind:"get",key:"isHomePageShown",value:function isHomePageShown(){return this._appCommonSrv.isHomePageShown()}},{kind:"get",key:"isSidebarShown",value:function isSidebarShown(){return!!this.isSchedulerInPreview||this._appCommonSrv.isSchedulerSidebarShown()&&!this._appCommonSrv.isSchedulerMini()}},{kind:"get",key:"isSchedulerShown",value:function isSchedulerShown(){return this._appCommonSrv.isSchedulerShown()}},{kind:"get",key:"highlightToday",value:function highlightToday(){return this._globalBoardSettings.highlightToday}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_localBoardSettings",value:function _localBoardSettings(){return this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId)}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}}]}}));function SchedulerSidebarController_getDecoratorsApi(){SchedulerSidebarController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SchedulerSidebarController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SchedulerSidebarController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SchedulerSidebarController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SchedulerSidebarController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SchedulerSidebarController_createElementDescriptor(e){var t,r=SchedulerSidebarController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SchedulerSidebarController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SchedulerSidebarController_hasDecorators(e){return e.decorators&&e.decorators.length}function SchedulerSidebarController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SchedulerSidebarController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SchedulerSidebarController_toPropertyKey(e){var t=function SchedulerSidebarController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Us=function SchedulerSidebarController_decorate(e,t,r,i){var a,n=SchedulerSidebarController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SchedulerSidebarController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SchedulerSidebarController_isDataDescriptor(a.descriptor)||SchedulerSidebarController_isDataDescriptor(i.descriptor)){if(SchedulerSidebarController_hasDecorators(a)||SchedulerSidebarController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SchedulerSidebarController_hasDecorators(a)){if(SchedulerSidebarController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SchedulerSidebarController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SchedulerSidebarController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","$rootScope","$scope","$log","$timeout","$window","$translate","$mdMenu","appCommonSrv","calendarCardsSrv","chatSrv","dialogSrv","googleIntegrationSrv","iCalIntegrationSrv","licenseSrv","notificationSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class SchedulerSidebarController{constructor(t,r,i,n,o,s,l,d,h,u,p,m,f,y,v,_,g,C,k){e(this),this._$element=t,this._$rootScope=r,this._$scope=i,this._$log=n,this._$timeout=o,this._$window=s,this._$translate=l,this._$mdMenu=d,this._appCommonSrv=h,this._calendarCardsSrv=u,this._chatSrv=p,this._dialogSrv=m,this._googleIntegrationSrv=f,this._iCalIntegrationSrv=y,this._licenseSrv=v,this._notificationSrv=_,this._settingsSrv=g,this._telemetrySrv=C,this._trelloIntegrationSrv=k,this._$scope.$watch((()=>this.isShown),(e=>{e?this._addOutsideClickListeners():this._removeOutsideClickListeners()})),this._$scope.$watch((()=>this.isPinned),(e=>{e?this._removeOutsideClickListeners():this.isShown&&this._addOutsideClickListeners()})),this._onTrelloBoardChanged=()=>this._$scope.$evalAsync((()=>{let e;var t,r;this.boards.length>0&&(e=R()(t=S()(r=this.boards).call(r,(e=>e.isSelected))).call(t,(e=>e.id)));if(this._loadBoards(),this._members=null,e){var i,a;let t=R()(i=S()(a=this.boards).call(a,(t=>t.isSelected&&!ze()(e).call(e,t.id)))).call(i,(e=>e.id));if(t.length>0){for(let e of t)this._boardSelectionIdsQueue.set(e,{isSelected:!0,isFavorite:!0});this._boardSelectionStarted||this._processBoardSelectionQueue()}}})),this._trelloIntegrationSrv.addTrelloBoardEventListener("added",this._onTrelloBoardChanged),this._trelloIntegrationSrv.addTrelloBoardEventListener("updated",this._onTrelloBoardChanged),this._trelloIntegrationSrv.addTrelloBoardEventListener("deleted",this._onTrelloBoardChanged),this._$scope.$on(x.n.BoardChanged,(()=>{this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._calendarCardsSrv.needReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded),this._organizations=[],this._boards=[],this._googleCalendars=[],this._iCalCalendars=[],this._loadBoards(),this._loadGoogleCalendars(),this._loadICalCalendars(),this._members=null,this._currentBoardOrganization=void 0,this._canEditBoard=void 0,this._canRemoveBoard=void 0})),this._onGoogleCalendarChanged=()=>this._$scope.$evalAsync((()=>{let e;var t,r;this.googleCalendars.length>0&&(e=R()(t=S()(r=this.googleCalendars).call(r,(e=>e.isSelected))).call(t,(e=>e.id)));if(this._loadGoogleCalendars(),e){var i,a;let t=R()(i=S()(a=this.googleCalendars).call(a,(t=>t.isSelected&&!ze()(e).call(e,t.id)))).call(i,(e=>e.id));if(t.length>0){for(let e of t)this._setGoogleCalendarSelecting(e,!0);this._googleCalendarSelectionStarted||this._processGoogleCalendarSelectionQueue()}}})),this._googleIntegrationSrv.addGoogleCalendarEventListener("added",this._onGoogleCalendarChanged),this._googleIntegrationSrv.addGoogleCalendarEventListener("updated",this._onGoogleCalendarChanged),this._googleIntegrationSrv.addGoogleCalendarEventListener("deleted",this._onGoogleCalendarChanged),this._googleIntegrationSrv.addGoogleCalendarEventListener("cleared",this._onGoogleCalendarChanged),this._onICalCalendarChanged=()=>this._$scope.$evalAsync((()=>this._loadICalCalendars())),this._iCalIntegrationSrv.addICalCalendarEventListener("added",this._onICalCalendarChanged),this._iCalIntegrationSrv.addICalCalendarEventListener("updated",this._onICalCalendarChanged),this._iCalIntegrationSrv.addICalCalendarEventListener("deleted",this._onICalCalendarChanged),this._loadBoards(),this._loadGoogleCalendars(),this._loadICalCalendars(),this._appCommonSrv.isSchedulerInPreview()&&this._$scope.$on(x.n.BoardInitialized,(()=>{this._loadBoards(),this._loadGoogleCalendars(),this._loadICalCalendars()}));const D=a()(".pw-scheduler-sidebar",this._$element);this._$scope.$on(x.n.OpenMemberInviteDialogRequested,(()=>{D.addClass("pw-scheduler-sidebar--no-animation"),this.isShown=!0,this._$timeout((()=>{a()(".pw-js-member-invite-btn").trigger("click"),D.removeClass("pw-scheduler-sidebar--no-animation")}),0,!1)})),this._$scope.$on(x.n.OpenBoardsMenuRequested,(()=>{D.addClass("pw-scheduler-sidebar--no-animation"),this.isShown=!0,this._$timeout((()=>{a()(".pw-js-boards-menu-btn").trigger("click"),D.removeClass("pw-scheduler-sidebar--no-animation")}),0,!1)})),this._$scope.$on(x.n.SelectTrelloBoardRequested,((e,t)=>{this._$scope.$evalAsync((()=>{var e;let r=c()(e=this.boards).call(e,(e=>e.id===t.boardId));r&&r.isSelected!==t.isSelected&&!r.isCurrentBoard&&this.setBoardSelection(r,t.isSelected,!0)}))})),this._$scope.$on(x.n.SelectGoogleCalendarRequested,((e,t)=>{this._$scope.$evalAsync((()=>{var e;let r=c()(e=this.googleCalendars).call(e,(e=>e.id===t.googleCalendarId));r&&r.isSelected!==t.isSelected&&this.setGoogleCalendarSelection(r,t.isSelected)}))})),this._$scope.$on(x.n.SelectICalCalendarRequested,((e,t)=>{this._$scope.$evalAsync((()=>{var e;let r=c()(e=this.iCalCalendars).call(e,(e=>e.id===t.iCalCalendarId));r&&r.isSelected!==t.isSelected&&this.setICalCalendarSelection(r,!0)}))})),this._$scope.$on("$destroy",(()=>{this._trelloIntegrationSrv.removeTrelloBoardEventListener("added",this._onTrelloBoardChanged),this._trelloIntegrationSrv.removeTrelloBoardEventListener("updated",this._onTrelloBoardChanged),this._trelloIntegrationSrv.removeTrelloBoardEventListener("deleted",this._onTrelloBoardChanged),this._googleIntegrationSrv.removeGoogleCalendarEventListener("added",this._onGoogleCalendarChanged),this._googleIntegrationSrv.removeGoogleCalendarEventListener("updated",this._onGoogleCalendarChanged),this._googleIntegrationSrv.removeGoogleCalendarEventListener("deleted",this._onGoogleCalendarChanged),this._googleIntegrationSrv.removeGoogleCalendarEventListener("cleared",this._onGoogleCalendarChanged),this._iCalIntegrationSrv.removeICalCalendarEventListener("added",this._onICalCalendarChanged),this._iCalIntegrationSrv.removeICalCalendarEventListener("updated",this._onICalCalendarChanged),this._iCalIntegrationSrv.removeICalCalendarEventListener("deleted",this._onICalCalendarChanged),this._removeOutsideClickListeners()}))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"schedulerSidebarCtrl"}},{kind:"field",key:"_boardSelectionIdsQueue",value:()=>new lt.a},{kind:"field",key:"_boardSelectionStarted",value:()=>!1},{kind:"field",key:"_googleCalendarSelectionQueue",value:()=>new lt.a},{kind:"field",key:"_googleCalendarSelectionStarted",value:()=>!1},{kind:"field",key:"_iCalCalendarSelectionQueue",value:()=>new lt.a},{kind:"field",key:"_iCalCalendarSelectionStarted",value:()=>!1},{kind:"get",key:"isPowerup",value:function isPowerup(){return!1}},{kind:"get",key:"isStandalone",value:function isStandalone(){return!1}},{kind:"get",key:"schedulerWidget",value:function schedulerWidget(){return this._schedulerWidget}},{kind:"get",key:"isShown",value:function isShown(){return this._appCommonSrv.isSchedulerSidebarShown()}},{kind:"set",key:"isShown",value:function isShown(e){this.isShown!==e&&(this._telemetrySrv.logSessionEvent(e?x.X.CalendarEvents.SidebarOpened:x.X.CalendarEvents.SidebarClosed),this._appCommonSrv.setSchedulerSidebarShown(e))}},{kind:"get",key:"isPinned",value:function isPinned(){return!!this._appCommonSrv.isSchedulerInPreview()||!this._appCommonSrv.isSchedulerMini()}},{kind:"get",key:"organizations",value:function organizations(){return this._organizations}},{kind:"get",key:"currentBoardOrganization",value:function currentBoardOrganization(){var e;this._currentBoardOrganization||(this._currentBoardOrganization=c()(e=this.organizations).call(e,(e=>{var t;return e.id===(null===(t=this.currentBoard)||void 0===t?void 0:t.organizationId)})));return this._currentBoardOrganization}},{kind:"get",key:"boards",value:function boards(){return this._boards}},{kind:"get",key:"currentBoard",value:function currentBoard(){return this._currentBoard}},{kind:"get",key:"isCurrentBoardReadOnly",value:function isCurrentBoardReadOnly(){return this._trelloIntegrationSrv.isCurrentBoardReadOnly()}},{kind:"get",key:"isCurrentBoardMemberAdmin",value:function isCurrentBoardMemberAdmin(){return!!this._currentBoardId&&this.currentBoard.memberships.get(this._currentMemberId)===x.rb.Admin}},{kind:"get",key:"canEditBoard",value:function canEditBoard(){var e;if(void 0===this._canEditBoard&&this.currentBoardOrganization)switch(this.currentBoardOrganization.type){case"personal":case"public":this._canEditBoard=!0;break;case"real":switch(null===(e=this.currentBoard)||void 0===e?void 0:e.permissionLevel){case x.mb.Public:this._canEditBoard=this.currentBoardOrganization.canCreatePublicBoards;break;case x.mb.Private:this._canEditBoard=this.currentBoardOrganization.canCreatePrivateBoards;break;case x.mb.Organization:this._canEditBoard=this.currentBoardOrganization.canCreateOrganizationBoards;break;default:this._canEditBoard=!1}break;default:this._canEditBoard=!1}return this._canEditBoard}},{kind:"get",key:"canRemoveBoard",value:function canRemoveBoard(){var e;if(void 0===this._canRemoveBoard&&this.currentBoardOrganization)switch(this.currentBoardOrganization.type){case"personal":case"public":this._canRemoveBoard=!0;break;case"real":switch(null===(e=this.currentBoard)||void 0===e?void 0:e.permissionLevel){case x.mb.Public:this._canRemoveBoard=this.currentBoardOrganization.canDeletePublicBoards;break;case x.mb.Private:this._canRemoveBoard=this.currentBoardOrganization.canDeletePrivateBoards;break;case x.mb.Organization:this._canRemoveBoard=this.currentBoardOrganization.canDeleteOrganizationBoards;break;default:this._canRemoveBoard=!1}break;default:this._canRemoveBoard=!1}return this._canRemoveBoard}},{kind:"method",key:"showBoardDialog",value:function showBoardDialog(e){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.EditBoardClicked),this._dialogSrv.showBoardDialogAsync(e,{board:this.currentBoard,organization:this.currentBoardOrganization})}},{kind:"method",key:"removeCurrentBoardAsync",value:async function removeCurrentBoardAsync(){if(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.REMOVE_TRELLO_BOARD_TITLE"),this._$translate.instant("DIALOGS.REMOVE_TRELLO_BOARD_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]})){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.RemoveBoardClicked);try{this._appCommonSrv.setSchedulerBusy(!0),await this._trelloIntegrationSrv.updateTrelloBoardAsync(this._currentBoardId,{closed:!0}),this._telemetrySrv.logSingleEvent(x.X.CalendarEvents.BoardRemoved),this._$window.open(Object(n.cb)(this._$window),"_self")}catch(e){this._$log.error("Trello remove board error:"),this._$log.error(e),this._telemetrySrv.logError("Trello remove board error",e,{class:this.constructor.name,method:this.removeCurrentBoardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.REMOVE_BOARD_ERROR"),x.A.Error)}finally{this._appCommonSrv.setSchedulerBusy(!1)}}}},{kind:"method",key:"changeCurrentBoardAsync",value:function changeCurrentBoardAsync(e){this._appCommonSrv.isSchedulerBusy()||null!=e&&e.isCurrentBoard||(this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.CurrentBoardChanged,{where:x.T.Sidebar}),this._trelloIntegrationSrv.changeCurrentBoardAsync(e))}},{kind:"method",key:"showAddCalendarsDialog",value:function showAddCalendarsDialog(e){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.AddCalendarsDialogOpened),this._dialogSrv.showAddCalendarsDialogAsync(e)}},{kind:"method",key:"showIntegrationsDialog",value:function showIntegrationsDialog(e){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.IntegrationsDialogOpened),this._dialogSrv.showIntegrationsDialogAsync(e)}},{kind:"get",key:"integrationsCount",value:function integrationsCount(){const e=[this.isGoogleSyncStarted];return S()(e).call(e,(e=>e)).length}},{kind:"get",key:"members",value:function members(){if(!this.currentBoard)return[];var e,t;this._members||(this._members=We()(e=R()(t=this.currentBoard.members).call(t,(e=>({...e})))).call(e,((e,t)=>e.id===this._currentMemberId?-1:t.id===this._currentMemberId?1:Object(n.r)(e,t))));return this._members}},{kind:"get",key:"canInviteMembers",value:function canInviteMembers(){return this.currentBoard&&!this.isCurrentBoardReadOnly&&(this.isCurrentBoardMemberAdmin||this.currentBoard.invitationLevel===x.lb.Members)}},{kind:"method",key:"showMemberManageDialogAsync",value:function showMemberManageDialogAsync(e,t,r){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.MemberManageDialogOpened),this._dialogSrv.showMemberManageDialogAsync(e,this._currentBoardId,t,r)}},{kind:"method",key:"showMemberInviteDialogAsync",value:function showMemberInviteDialogAsync(e){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.MemberInviteDialogOpened),this._dialogSrv.showMemberInviteDialogAsync(e,this._currentBoardId)}},{kind:"method",key:"showBoardsMenu",value:function showBoardsMenu(){a()(".pw-js-boards-menu-btn").trigger("click")}},{kind:"get",key:"favoriteBoards",value:function favoriteBoards(){var e;return S()(e=this.boards).call(e,(e=>e.isFavorite&&!e.isCurrentBoard))}},{kind:"method",key:"setBoardSelection",value:function setBoardSelection(e,t,r){var i;e.isCurrentBoard||e.isSelected===t&&r&&e.isFavorite===r||(!t&&!r||this._licenseSrv.checkPaidFeatureAvailable(x.B.MultiBoard,!0)?(e.isSelected=t&&r,e.isFavorite=r,this._boardSelectionIdsQueue.set(e.id,{isSelected:e.isSelected,isFavorite:e.isFavorite}),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.MultiBoardChanged,{selectedMultiBoardCount:S()(i=this.boards).call(i,(e=>e.isSelected&&!e.isCurrentBoard)).length}),this._boardSelectionStarted||this._processBoardSelectionQueue()):this._$mdMenu.hide())}},{kind:"method",key:"showBoardFilterDialog",value:function showBoardFilterDialog(e,t){this._dialogSrv.showBoardFilterDialogAsync(e,t)}},{kind:"get",key:"isSelectAllBoardsDisabled",value:function isSelectAllBoardsDisabled(){var e;return this.boards.length<=1||A()(e=this.boards).call(e,(e=>e.isSelected||e.isCurrentBoard))}},{kind:"method",key:"selectAllBoards",value:function selectAllBoards(){var e;this.isSelectAllBoardsDisabled||(this._licenseSrv.checkPaidFeatureAvailable(x.B.MultiBoard,!0)?(this._changeBoardsSelection(!0),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.MultiBoardSelectedAll,{selectedMultiBoardCount:S()(e=this.boards).call(e,(e=>e.isSelected&&!e.isCurrentBoard)).length})):this._$mdMenu.hide())}},{kind:"get",key:"isSelectNoneBoardsDisabled",value:function isSelectNoneBoardsDisabled(){var e,t;return this.boards.length<=1||(!this._licenseSrv.checkPaidFeatureAvailable(x.B.MultiBoard,!1)||!xe()(e=S()(t=this.boards).call(t,(e=>!this.currentBoard.isReadOnly||!e.isReadOnly||!e.isShared))).call(e,(e=>e.isSelected&&!e.isCurrentBoard)))}},{kind:"method",key:"selectNoneBoards",value:function selectNoneBoards(){this.isSelectNoneBoardsDisabled||(this._changeBoardsSelection(!1),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.MultiBoardSelectedOnlyCurrent))}},{kind:"method",key:"showAddBoardByUrlDialogAsync",value:async function showAddBoardByUrlDialogAsync(e){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.AddBoardByUrlDialogOpened);let t=await this._dialogSrv.showAddBoardByUrlDialogAsync(e);if(t){var r;let e=c()(r=this.boards).call(r,(e=>e.id===t));e&&this.setBoardSelection(e,!0,!0)}}},{kind:"method",key:"switchOrganizationCollapsed",value:function switchOrganizationCollapsed(e){e.isCollapsed=!e.isCollapsed;let t=this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId).organizations,r=t[e.id];r||(r={isCollapsed:!1},t[e.id]=r),r.isCollapsed=!r.isCollapsed,this._settingsSrv.saveLocal()}},{kind:"method",key:"removePublicBoardAsync",value:async function removePublicBoardAsync(e){await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.REMOVE_PUBLIC_BOARD_TITLE"),this._$translate.instant("DIALOGS.REMOVE_PUBLIC_BOARD_CONFIRM",{boardName:ct()(e.name,36)}),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]})&&(this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.PublicBoardRemoved),this._trelloIntegrationSrv.removePublicBoard(e.id),this.setBoardSelection(e,!1,!1))}},{kind:"method",key:"onBoardsMenuKeydown",value:function onBoardsMenuKeydown(e){e.keyCode!==x.t.Escape&&a()(".pw-js-boards-menu-search-input").trigger("focus")}},{kind:"get",key:"isGoogleSyncStarted",value:function isGoogleSyncStarted(){return this._googleIntegrationSrv.getGoogleSyncStatus()===me.j.Ok}},{kind:"get",key:"isGoogleConnectBusy",value:function isGoogleConnectBusy(){return this._googleIntegrationSrv.isGoogleConnectBusy()||this._isGoogleConnectBusy}},{kind:"get",key:"isGoogleConnectEnabled",value:function isGoogleConnectEnabled(){return this._googleIntegrationSrv.isGoogleConnectEnabled()}},{kind:"get",key:"googleCalendarAccountName",value:function googleCalendarAccountName(){return this._googleIntegrationSrv.getGoogleCalendarAccountName()}},{kind:"get",key:"googleCalendars",value:function googleCalendars(){return this._googleCalendars}},{kind:"method",key:"setGoogleCalendarSelection",value:function setGoogleCalendarSelection(e,t){var r;e.isSelected!==t&&(this._licenseSrv.checkPaidFeatureAvailable(x.B.GoogleConnect,!0)?(e.isSelected=t,this._setGoogleCalendarSelecting(e.id,e.isSelected),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.GoogleCalendarsSelectionChanged,{selectedGoogleCalendarsCount:S()(r=this.googleCalendars).call(r,(e=>e.isSelected)).length}),this._googleCalendarSelectionStarted||this._processGoogleCalendarSelectionQueue()):this._$mdMenu.hide())}},{kind:"method",key:"isGoogleCalendarBusy",value:function isGoogleCalendarBusy(e){return this._googleIntegrationSrv.isConnectedGoogleCalendarBusy(e.id)}},{kind:"method",key:"isGoogleCalendarSelecting",value:function isGoogleCalendarSelecting(e){var t;return null!==(t=this._googleCalendarSelectionQueue.get(e.id))&&void 0!==t&&t}},{kind:"get",key:"isSelectAllGoogleCalendarsDisabled",value:function isSelectAllGoogleCalendarsDisabled(){var e;return A()(e=this.googleCalendars).call(e,(e=>e.isSelected))}},{kind:"method",key:"selectAllGoogleCalendars",value:function selectAllGoogleCalendars(){var e;this.isSelectAllGoogleCalendarsDisabled||(this._licenseSrv.checkPaidFeatureAvailable(x.B.GoogleConnect,!0)?(this._changeGoogleCalendarsSelection(!0),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.GoogleCalendarsSelectedAll,{selectedGoogleCalendarsCount:S()(e=this.googleCalendars).call(e,(e=>e.isSelected)).length})):this._$mdMenu.hide())}},{kind:"get",key:"isSelectNoneGoogleCalendarsDisabled",value:function isSelectNoneGoogleCalendarsDisabled(){var e;return!xe()(e=this.googleCalendars).call(e,(e=>e.isSelected))}},{kind:"method",key:"selectNoneGoogleCalendars",value:function selectNoneGoogleCalendars(){this.isSelectNoneGoogleCalendarsDisabled||(this._changeGoogleCalendarsSelection(!1),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.GoogleCalendarsSelectedNone))}},{kind:"method",key:"disableGoogleConnectAsync",value:async function disableGoogleConnectAsync(){await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.DISABLE_GOOGLE_CONNECT_TITLE"),this._$translate.instant("DIALOGS.DISABLE_GOOGLE_CONNECT_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]})&&(this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.GoogleConnectDisabled),await this._googleIntegrationSrv.disableGoogleConnectAsync())}},{kind:"get",key:"iCalCalendars",value:function iCalCalendars(){return this._iCalCalendars}},{kind:"method",key:"setICalCalendarSelection",value:function setICalCalendarSelection(e,t){var r;e.isSelected!==t&&(e.isSelected=t,this._setICalCalendarSelecting(e.id,e.isSelected),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ICalChanged,{selectedICalCount:S()(r=this.iCalCalendars).call(r,(e=>e.isSelected)).length}),this._iCalCalendarSelectionStarted||this._processICalCalendarSelectionQueue())}},{kind:"method",key:"isICalCalendarBusy",value:function isICalCalendarBusy(e){return this._iCalIntegrationSrv.isConnectedICalCalendarBusy(e.id)}},{kind:"method",key:"isICalCalendarSelecting",value:function isICalCalendarSelecting(e){var t;return null!==(t=this._iCalCalendarSelectionQueue.get(e.id))&&void 0!==t&&t}},{kind:"method",key:"showEditICalCalendarDialog",value:function showEditICalCalendarDialog(e,t){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ICalEditOpened),this._dialogSrv.showICalEditDialogAsync(e.id,t)}},{kind:"method",key:"removeICalCalendarAsync",value:async function removeICalCalendarAsync(e){await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.REMOVE_ICAL_TITLE"),this._$translate.instant("DIALOGS.REMOVE_ICAL_CONFIRM",{iCalName:ct()(e.name,36)}),{buttons:[{text:this._$translate.instant("BUTTONS.YES"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]})&&(this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ICalRemoved),this._iCalIntegrationSrv.removeICalCalendar(e.id))}},{kind:"get",key:"isSelectAllICalsDisabled",value:function isSelectAllICalsDisabled(){var e;return A()(e=this.iCalCalendars).call(e,(e=>e.isSelected))}},{kind:"method",key:"selectAllICalCalendars",value:function selectAllICalCalendars(){var e;this.isSelectAllICalsDisabled||(this._changeICalCalendarsSelection(!0),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ICalsSelectedAll,{selectedICalCount:S()(e=this.iCalCalendars).call(e,(e=>e.isSelected)).length}))}},{kind:"get",key:"isSelectNoneICalCalendarsDisabled",value:function isSelectNoneICalCalendarsDisabled(){var e;return!xe()(e=this.iCalCalendars).call(e,(e=>e.isSelected))}},{kind:"method",key:"selectNoneICalCalendars",value:function selectNoneICalCalendars(){this.isSelectNoneICalCalendarsDisabled||(this._changeICalCalendarsSelection(!1),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ICalsSelectedNone))}},{kind:"method",key:"showAddICalDialog",value:function showAddICalDialog(e){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ImportByURLClicked,{where:x.T.Sidebar}),this._dialogSrv.showICalImportDialogAsync(e)}},{kind:"method",key:"onAppsStoreIconClick",value:function onAppsStoreIconClick(e){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.AppsStoreIconClicked,{store:e})}},{kind:"get",key:"isFeedbackButtonShown",value:function isFeedbackButtonShown(){return this._licenseSrv.getLicenseType()===me.g.Free||!this._chatSrv.isChatInitialized}},{kind:"method",key:"showFeedbackDialog",value:function showFeedbackDialog(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.FeedbackOpened,{where:x.Y.Sidebar}),this._dialogSrv.showFeedbackDialogAsync(e)}},{kind:"get",key:"isChatButtonShown",value:function isChatButtonShown(){return this._licenseSrv.getLicenseType()!==me.g.Free&&this._chatSrv.isChatInitialized}},{kind:"get",key:"unreadMessagesCount",value:function unreadMessagesCount(){return this._chatSrv.unreadMessagesCount}},{kind:"get",key:"unreadMessagesCountBadgeText",value:function unreadMessagesCountBadgeText(){return this.unreadMessagesCount>9?"9+":this.unreadMessagesCount}},{kind:"method",key:"toggleChatWindow",value:function toggleChatWindow(){this._chatSrv.chatWindowShown=!this._chatSrv.chatWindowShown,this._chatSrv.chatWindowShown&&this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.LiveChatOpened,{where:x.Y.Sidebar})}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"method",key:"_loadBoards",value:function _loadBoards(){var e;if(!this._currentBoardId)return this._currentBoard={memberships:new lt.a,members:[]},this._boards=[],void(this._organizations=[]);this._currentBoard=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId),this._boards=[{...this.currentBoard,isCurrentBoard:!0,isSelected:!0,isFavorite:!0,showOnlyMemberCards:!1}];for(let e of this._trelloIntegrationSrv.getCurrentBoardConnectedBoards())this._boards.push({...this._trelloIntegrationSrv.getTrelloBoardById(e.id),...e,isCurrentBoard:!1});let t=this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId).organizations;this._organizations=R()(e=this._trelloIntegrationSrv.getTrelloOrganizations()).call(e,(e=>{var r,i,a;return{...e,boards:R()(r=e.boards).call(r,(e=>{var t;return c()(t=this.boards).call(t,(t=>t.id===e.id))})),isCollapsed:null!==(i=null===(a=t[e.id])||void 0===a?void 0:a.isCollapsed)&&void 0!==i&&i}}))}},{kind:"method",key:"_changeBoardsSelection",value:function _changeBoardsSelection(e){for(let t of this.boards)t.isCurrentBoard||this.currentBoard.isReadOnly&&t.isReadOnly&&t.isShared||(t.isSelected=e,t.isFavorite=e,this._boardSelectionIdsQueue.set(t.id,{isSelected:e,isFavorite:e}));this._boardSelectionStarted||this._processBoardSelectionQueue()}},{kind:"method",key:"_processBoardSelectionQueue",value:function _processBoardSelectionQueue(){if(this._boardSelectionIdsQueue.size>0){this._boardSelectionStarted=!0;let e=this._trelloIntegrationSrv.getCurrentBoardConnectedBoards();for(let t of e)if(this._boardSelectionIdsQueue.has(t.id)){let e=this._boardSelectionIdsQueue.get(t.id);t.isSelected=e.isSelected,t.isFavorite=e.isFavorite}this._boardSelectionIdsQueue.clear();try{this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._trelloIntegrationSrv.setCurrentBoardConnectedBoards(e)}catch(e){this._$log.error("Planyway boards selection error:"),this._$log.error(e)}this._processBoardSelectionQueue()}else this._boardSelectionStarted&&(this._boardSelectionStarted=!1,this._$rootScope.$broadcast(x.n.CardsReloaded),this._$rootScope.$broadcast(x.n.TrelloBoardSelectionChanged),this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars}),this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Lists}),this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Labels}))}},{kind:"method",key:"_loadGoogleCalendars",value:function _loadGoogleCalendars(){if(this._googleCalendars=[],this._currentBoardId)for(let e of this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars())this._googleCalendars.push({...this._googleIntegrationSrv.getGoogleCalendarById(e.id),...e})}},{kind:"method",key:"_setGoogleCalendarSelecting",value:function _setGoogleCalendarSelecting(e,t){this._googleCalendarSelectionQueue.set(e,t)}},{kind:"method",key:"_changeGoogleCalendarsSelection",value:function _changeGoogleCalendarsSelection(e){for(let t of this.googleCalendars)t.isSelected=e,this._setGoogleCalendarSelecting(t.id,e);this._googleCalendarSelectionStarted||this._processGoogleCalendarSelectionQueue()}},{kind:"method",key:"_processGoogleCalendarSelectionQueue",value:function _processGoogleCalendarSelectionQueue(){if(this._googleCalendarSelectionQueue.size>0){this._googleCalendarSelectionStarted=!0;let e=this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars();for(let t of e)this._googleCalendarSelectionQueue.has(t.id)&&(t.isSelected=this._googleCalendarSelectionQueue.get(t.id));this._googleCalendarSelectionQueue.clear();try{this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._googleIntegrationSrv.setCurrentBoardConnectedGoogleCalendars(e)}catch(e){this._$log.error("Planyway Google calendars selection error:"),this._$log.error(e)}this._processGoogleCalendarSelectionQueue()}else this._googleCalendarSelectionStarted&&(this._googleCalendarSelectionStarted=!1,this._$rootScope.$broadcast(x.n.CardsReloaded),this._$rootScope.$broadcast(x.n.GoogleCalendarSelectionChanged),this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars}))}},{kind:"method",key:"_loadICalCalendars",value:function _loadICalCalendars(){if(this._iCalCalendars=[],this._currentBoardId)for(let e of this._iCalIntegrationSrv.getCurrentBoardConnectedICalCalendars())this._iCalCalendars.push({...this._iCalIntegrationSrv.getICalCalendarById(e.id),...e})}},{kind:"method",key:"_setICalCalendarSelecting",value:function _setICalCalendarSelecting(e,t){this._iCalCalendarSelectionQueue.set(e,t)}},{kind:"method",key:"_changeICalCalendarsSelection",value:function _changeICalCalendarsSelection(e){for(let t of this.iCalCalendars)t.isSelected=e,this._setICalCalendarSelecting(t.id,e);this._iCalCalendarSelectionStarted||this._processICalCalendarSelectionQueue()}},{kind:"method",key:"_processICalCalendarSelectionQueue",value:function _processICalCalendarSelectionQueue(){if(this._iCalCalendarSelectionQueue.size>0){this._iCalCalendarSelectionStarted=!0;let e=this._iCalIntegrationSrv.getCurrentBoardConnectedICalCalendars();for(let t of e)this._iCalCalendarSelectionQueue.has(t.id)&&(t.isSelected=this._iCalCalendarSelectionQueue.get(t.id));this._iCalCalendarSelectionQueue.clear();try{this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._iCalIntegrationSrv.setCurrentBoardConnectedICalCalendars(e)}catch(e){this._$log.error("Planyway iCal calendars selection error:"),this._$log.error(e)}this._processICalCalendarSelectionQueue()}else this._iCalCalendarSelectionStarted&&(this._iCalCalendarSelectionStarted=!1,this._$rootScope.$broadcast(x.n.CardsReloaded),this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:x.fb.Calendars}))}},{kind:"method",key:"_addOutsideClickListeners",value:function _addOutsideClickListeners(){a()("body, #board, pw-scheduler, .js-list.list-wrapper").on("mousedown.pwEvent pointerdown.pwEvent",(e=>{if(this.isShown&&!this.isPinned){if(this._$element[0].contains(e.target))return;if(a()("md-menu.md-open")[0])return;if(a()(e.target).closest(".md-dialog-container, .md-panel")[0])return;this._$scope.$evalAsync((()=>this.isShown=!1))}}))}},{kind:"method",key:"_removeOutsideClickListeners",value:function _removeOutsideClickListeners(){a()("body, #board, pw-scheduler, .js-list.list-wrapper").off("mousedown.pwEvent pointerdown.pwEvent")}}]}}));function SchedulerToolbarController_getDecoratorsApi(){SchedulerToolbarController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SchedulerToolbarController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SchedulerToolbarController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SchedulerToolbarController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SchedulerToolbarController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SchedulerToolbarController_createElementDescriptor(e){var t,r=SchedulerToolbarController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SchedulerToolbarController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SchedulerToolbarController_hasDecorators(e){return e.decorators&&e.decorators.length}function SchedulerToolbarController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SchedulerToolbarController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SchedulerToolbarController_toPropertyKey(e){var t=function SchedulerToolbarController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ws=function SchedulerToolbarController_decorate(e,t,r,i){var a,n=SchedulerToolbarController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SchedulerToolbarController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SchedulerToolbarController_isDataDescriptor(a.descriptor)||SchedulerToolbarController_isDataDescriptor(i.descriptor)){if(SchedulerToolbarController_hasDecorators(a)||SchedulerToolbarController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SchedulerToolbarController_hasDecorators(a)){if(SchedulerToolbarController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SchedulerToolbarController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SchedulerToolbarController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$log","$translate","$mdMenu","appCommonSrv","backendSrv","calendarCardsSrv","chatSrv","dialogSrv","licenseSrv","onboardingSrv","platformSrv","pushNotificationsSrv","reportSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class SchedulerToolbarController{constructor(t,r,i,a,n,o,s,l,d,c,h,u,p,m,f,y,v,_){e(this),this._$rootScope=t,this._$scope=r,this._$log=i,this._$translate=a,this._$mdMenu=n,this._appCommonSrv=o,this._backendSrv=s,this._calendarCardsSrv=l,this._chatSrv=d,this._dialogSrv=c,this._licenseSrv=h,this._onboardingSrv=u,this._platformSrv=p,this._pushNotificationsSrv=m,this._reportSrv=f,this._settingsSrv=y,this._telemetrySrv=v,this._trelloIntegrationSrv=_,this._$scope.$on(x.n.BoardInitialized,(()=>this._applySchedulerToolbarSettings())),this._$scope.$on(x.n.SchedulerShown,(()=>this._applySchedulerToolbarSettings())),this._$scope.$on(x.n.ChangeSchedulerViewRequested,(()=>this._availableSchedulerModes=null))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"schedulerToolbarCtrl"}},{kind:"get",key:"schedulerWidget",value:function schedulerWidget(){return this._schedulerWidget}},{kind:"get",key:"isExtension",value:function isExtension(){return!this.isPowerUp&&!this.isStandalone}},{kind:"get",key:"isPowerUp",value:function isPowerUp(){return!1}},{kind:"get",key:"isStandalone",value:function isStandalone(){return!1}},{kind:"get",key:"isInDebug",value:function isInDebug(){return!1}},{kind:"get",key:"isSchedulerInPreview",value:function isSchedulerInPreview(){return this._appCommonSrv.isSchedulerInPreview()}},{kind:"get",key:"isTimelineMode",value:function isTimelineMode(){return this._appCommonSrv.getSchedulerMode()===x.M.Timeline}},{kind:"get",key:"isTimeTrackingMode",value:function isTimeTrackingMode(){return this._appCommonSrv.getSchedulerMode()===x.M.TimeTracking}},{kind:"get",key:"isSidebarShown",value:function isSidebarShown(){return this._appCommonSrv.isSchedulerSidebarShown()}},{kind:"set",key:"isSidebarShown",value:function isSidebarShown(e){this.isSidebarShown!==e&&(this._telemetrySrv.logSessionEvent(e?x.X.CalendarEvents.SidebarOpened:x.X.CalendarEvents.SidebarClosed),this._appCommonSrv.setSchedulerSidebarShown(e))}},{kind:"get",key:"isShowSidebarButtonAvailable",value:function isShowSidebarButtonAvailable(){return!this.isSidebarShown||this._appCommonSrv.isSchedulerMini()}},{kind:"get",key:"availableSchedulerModes",value:function availableSchedulerModes(){return this._availableSchedulerModes||(this._availableSchedulerModes=[{get value(){return x.M.Calendar},set value(e){},title:this._$translate.instant("BUTTONS.CALENDAR")},{get value(){return x.M.Timeline},set value(e){},title:this._$translate.instant("BUTTONS.TIMELINE")},{get value(){return x.M.TimeTracking},set value(e){},title:this._$translate.instant("BUTTONS.TIME_TRACKING")}],this._availableSchedulerViews=null),this._availableSchedulerModes}},{kind:"get",key:"selectedSchedulerMode",value:function selectedSchedulerMode(){var e;let t=this._appCommonSrv.getSchedulerMode();return c()(e=this.availableSchedulerModes).call(e,(e=>e.value===t))}},{kind:"set",key:"selectedSchedulerMode",value:function selectedSchedulerMode(e){if(this._appCommonSrv.isSchedulerUnavailable())return;if(this.selectedSchedulerMode===e)return;switch(e.value){case x.M.Timeline:if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.Timeline,!0))return;break;case x.M.TimeTracking:if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.TimeRecords,!0))return}let t=this.selectedSchedulerMode.value!==e.value;this._globalBoardSettings.schedulerMode=e.value,this._$rootScope.$broadcast(x.n.ChangeSchedulerViewRequested,{forceUpdate:t}),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.Opened)}},{kind:"method",key:"showShareBoardDialog",value:function showShareBoardDialog(e){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ShareBoardDialogOpened),this._dialogSrv.showShareBoardDialogAsync(e)}},{kind:"method",key:"showShortcutsDialog",value:function showShortcutsDialog(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.ShortcutsOpened),this._dialogSrv.showShortcutsDialogAsync(e)}},{kind:"get",key:"quickStartUrl",value:function quickStartUrl(){return U.r}},{kind:"method",key:"onQuickStartClicked",value:function onQuickStartClicked(){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.QuickStartClicked)}},{kind:"method",key:"showProductTour",value:function showProductTour(){this._telemetrySrv.logSessionEvent(x.X.OnboardingEvents.TourClicked),this._onboardingSrv.showProductTourAsync({force:!0})}},{kind:"method",key:"showNewsDialog",value:function showNewsDialog(){this._telemetrySrv.logSingleEvent(x.X.GeneralEvents.NewsClicked,{newsDate:this._onboardingSrv.lastNewsDate}),this._dialogSrv.showNewsDialogAsync({forceLoad:!0})}},{kind:"get",key:"helpUrl",value:function helpUrl(){return U.s}},{kind:"method",key:"onHelpClick",value:function onHelpClick(){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.HelpClicked)}},{kind:"method",key:"showFeedbackDialog",value:function showFeedbackDialog(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.FeedbackOpened,{where:x.Y.Toolbar}),this._dialogSrv.showFeedbackDialogAsync(e)}},{kind:"get",key:"isChatAvailable",value:function isChatAvailable(){return this._chatSrv.isChatInitialized&&this._settingsSrv.currentFlags.telemetry}},{kind:"get",key:"chatWindowShown",value:function chatWindowShown(){return this._chatSrv.chatWindowShown}},{kind:"get",key:"unreadMessagesCount",value:function unreadMessagesCount(){return this._chatSrv.unreadMessagesCount}},{kind:"get",key:"unreadMessagesCountBadgeText",value:function unreadMessagesCountBadgeText(){return this.unreadMessagesCount>9?"9+":this.unreadMessagesCount}},{kind:"method",key:"toggleChatWindow",value:function toggleChatWindow(){this._chatSrv.chatWindowShown=!this._chatSrv.chatWindowShown,this._chatSrv.chatWindowShown&&this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.LiveChatOpened,{where:x.Y.Toolbar})}},{kind:"method",key:"reloadCalendarCards",value:function reloadCalendarCards(){this._appCommonSrv.isSchedulerBusy()||(this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.Refreshed),this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._calendarCardsSrv.needReloadCalendarCards({reloadAdditionalData:!0}),this._$rootScope.$broadcast(x.n.CardsReloaded))}},{kind:"method",key:"showSettingsDialog",value:function showSettingsDialog(e){this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.SettingsDialogOpened),this._dialogSrv.showSettingsDialogAsync(e)}},{kind:"method",key:"printScheduler",value:function printScheduler(){this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.Print),this._$rootScope.$broadcast(x.n.PrintRequested)}},{kind:"get",key:"isTrelloFiltersEnabled",value:function isTrelloFiltersEnabled(){return!!this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!1)&&this._settingsSrv.currentSettings.global.isTrelloFiltersEnabled}},{kind:"set",key:"isTrelloFiltersEnabled",value:function isTrelloFiltersEnabled(e){e&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.Filters,!0)||(this._settingsSrv.currentSettings.global.isTrelloFiltersEnabled=e,this._$rootScope.$broadcast(x.n.FiltersChanged),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.EnableTrelloFiltersChanged))}},{kind:"get",key:"isLicenseOverridden",value:function isLicenseOverridden(){}},{kind:"set",key:"isLicenseOverridden",value:function isLicenseOverridden(e){}},{kind:"get",key:"availableLicenseTypes",value:function availableLicenseTypes(){}},{kind:"get",key:"overriddenLicenseType",value:function overriddenLicenseType(){}},{kind:"set",key:"overriddenLicenseType",value:function overriddenLicenseType(e){}},{kind:"get",key:"overriddenLicenseActive",value:function overriddenLicenseActive(){}},{kind:"set",key:"overriddenLicenseActive",value:function overriddenLicenseActive(e){}},{kind:"get",key:"isTrelloSyncDisabled",value:function isTrelloSyncDisabled(){}},{kind:"set",key:"isTrelloSyncDisabled",value:function isTrelloSyncDisabled(e){}},{kind:"get",key:"isNgStatusEnabled",value:function isNgStatusEnabled(){}},{kind:"set",key:"isNgStatusEnabled",value:function isNgStatusEnabled(e){}},{kind:"method",key:"revokeAuthAsync",value:async function revokeAuthAsync(){}},{kind:"method",key:"clearDataAsync",value:async function clearDataAsync(){}},{kind:"get",key:"currentMember",value:function currentMember(){if(!this.isSchedulerInPreview){if(!this._currentMember){let e=this._trelloIntegrationSrv.getMemberId();this._currentMember=this._trelloIntegrationSrv.getTrelloMemberById(e)}return this._currentMember}}},{kind:"get",key:"isSubscriptionAvailable",value:function isSubscriptionAvailable(){return!this._licenseSrv.isLicenseLoaded()||!this._licenseSrv.isLicenseActive()||this._licenseSrv.getLicenseType()===me.g.Trial}},{kind:"get",key:"upgradeUrl",value:function upgradeUrl(){return U.C}},{kind:"method",key:"onUpgradeClick",value:function onUpgradeClick(e){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.UpgradeClicked,{where:"toolbar"===e?x.db.Toolbar:x.db.ToolbarMenu})}},{kind:"get",key:"billingUrl",value:function billingUrl(){return U.E}},{kind:"method",key:"onBillingClick",value:function onBillingClick(){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.BillingClicked)}},{kind:"get",key:"isUsersAvailable",value:function isUsersAvailable(){return this._licenseSrv.isLicenseAdmin()}},{kind:"get",key:"usersUrl",value:function usersUrl(){return U.F}},{kind:"method",key:"onUsersClick",value:function onUsersClick(){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.UsersClicked)}},{kind:"method",key:"logOut",value:function logOut(){this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.LogOutClicked,{where:x.ab.SchedulerToolbar}),this._trelloIntegrationSrv.logOutAsync()}},{kind:"get",key:"fullScreenViewUrl",value:function fullScreenViewUrl(){let e=new le.a;return e.set(U.e,this._currentBoardId),e.set(U.V,x.G.Fullscreen),e.set(U.K,me.a.Chrome),`${U.L}?${e}`}},{kind:"method",key:"closeSchedulerAsync",value:function closeSchedulerAsync(){this._appCommonSrv.setSchedulerShown(!1),this._telemetrySrv.logSingleEvent(x.X.CalendarEvents.Hidden,{isBy:"close"})}},{kind:"get",key:"navigationActions",value:function navigationActions(){let e=this.schedulerWidget.view();return e?e.navigationActions:[]}},{kind:"method",key:"navigateCalendar",value:function navigateCalendar(e){let t,r=this.schedulerWidget.view().getDateToNavigate(e),i=!0;switch(e){case x.x.Today:t=x.y.Today,i=!1;break;case x.x.PreviousDay:case x.x.NextDay:t=x.y.DayScroll;break;case x.x.PreviousWeek:case x.x.NextWeek:t=x.y.WeekScroll;break;case x.x.PreviousMonth:case x.x.NextMonth:t=x.y.MonthScroll;break;case x.x.PreviousQuarter:case x.x.NextQuarter:t=x.y.QuarterScroll;break;case x.x.PreviousYear:case x.x.NextYear:t=x.y.YearScroll}r&&(this._telemetrySrv.logSessionEvent(this.isTimelineMode?x.X.CalendarEvents.TimelineNavigated:x.X.CalendarEvents.CalendarNavigated,{navigateAction:e}),this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{scrollToDate:r,restoreOffset:i,navigationMode:t}))}},{kind:"get",key:"calendarWidget",value:function calendarWidget(){return this._calendarWidget}},{kind:"set",key:"calendarWidget",value:function calendarWidget(e){this._calendarWidget=e}},{kind:"get",key:"calendarWidgetOptions",value:function calendarWidgetOptions(){return{close:()=>{this._$mdMenu.hide()}}}},{kind:"get",key:"selectedDate",value:function selectedDate(){return Object(n.pb)(this._appCommonSrv.getSchedulerSelectedDate(),this.schedulerWidget.date())||this._appCommonSrv.setSchedulerSelectedDate(this.schedulerWidget.date()),this._appCommonSrv.getSchedulerSelectedDate()}},{kind:"set",key:"selectedDate",value:function selectedDate(e){e&&(this._telemetrySrv.logSessionEvent(this.isTimelineMode?x.X.CalendarEvents.TimelineNavigated:x.X.CalendarEvents.CalendarNavigated,{navigateAction:x.x.DateSelect}),this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{scrollToDate:e,restoreOffset:this.schedulerWidget.view().isTimeAvailable,navigationMode:x.y.DateSelect}),this.calendarWidget.navigate(e,"month"),this._$mdMenu.hide())}},{kind:"get",key:"selectedDateRangeFormatted",value:function selectedDateRangeFormatted(){return kendo.format("{0:MMM} {0:yyyy}",this.selectedDate)}},{kind:"get",key:"isScaleAvailable",value:function isScaleAvailable(){let e=this.schedulerWidget.view();return!!e&&e.isScaleAvailable}},{kind:"get",key:"availableScales",value:function availableScales(){return this._availableScales||(this._availableScales=[{unit:x.hb.Day,title:this._$translate.instant("MENU.SCALE_DAY")},{unit:x.hb.Week,title:this._$translate.instant("MENU.SCALE_WEEK")},{unit:x.hb.Month,title:this._$translate.instant("MENU.SCALE_MONTH")},{unit:x.hb.Quarter,title:this._$translate.instant("MENU.SCALE_QUARTER")},{unit:x.hb.Year,title:this._$translate.instant("MENU.SCALE_YEAR")}]),this._availableScales}},{kind:"get",key:"selectedScale",value:function selectedScale(){var e;let t=this.schedulerWidget.view().currentScaleUnit;return c()(e=this.availableScales).call(e,(e=>e.unit===t))}},{kind:"set",key:"selectedScale",value:function selectedScale(e){this._appCommonSrv.isSchedulerUnavailable()||this.selectedScale!==e&&(this.schedulerWidget.view().currentScaleUnit=e.unit)}},{kind:"get",key:"availableSchedulerViews",value:function availableSchedulerViews(){var e,t;if(!this._availableSchedulerViews){switch(this._appCommonSrv.getSchedulerMode()){case x.M.Calendar:this._availableSchedulerViews=R()(e=S()(t=this.schedulerWidget.options.views).call(t,(e=>e.name!==x.O.Timeline))).call(e,(e=>({value:e.name,title:e.title})));break;case x.M.Timeline:this._availableSchedulerViews=[{value:x.ib.Member,icon:"member-outline",title:this._$translate.instant("BUTTONS.MEMBER")},{value:x.ib.Label,icon:"label-outline",title:this._$translate.instant("BUTTONS.LABEL")},{value:x.ib.Board,icon:"kanban-outline",title:this._$translate.instant("BUTTONS.BOARD")},{value:x.ib.List,icon:"list-outline",title:this._$translate.instant("BUTTONS.LIST")},{value:x.ib.None,icon:"minus-outline",title:this._$translate.instant("BUTTONS.NONE")}];break;case x.M.TimeTracking:this._availableSchedulerViews=[{value:x.O.Week,title:this._$translate.instant("MENU.WEEK")}]}this._availableSchedulerGroupBy=null}return this._availableSchedulerViews}},{kind:"get",key:"selectedSchedulerView",value:function selectedSchedulerView(){var e;let t,r=this.schedulerWidget.view();if(r){switch(this._appCommonSrv.getSchedulerMode()){case x.M.Calendar:case x.M.TimeTracking:t=r.name;break;case x.M.Timeline:t=this._appCommonSrv.getTimelineView()}return null===(e=this.availableSchedulerViews)||void 0===e?void 0:c()(e).call(e,(e=>e.value===t))}}},{kind:"set",key:"selectedSchedulerView",value:function selectedSchedulerView(e){if(!this._appCommonSrv.isSchedulerUnavailable()&&this.selectedSchedulerView!==e){switch(this._appCommonSrv.getSchedulerMode()){case x.M.Calendar:case x.M.TimeTracking:this._globalBoardSettings.schedulerView=e.value;break;case x.M.Timeline:let t=x.D[e.value];if(t&&!this._licenseSrv.checkPaidFeatureAvailable(t,!0))return;this._globalBoardSettings.timelineView=e.value}this._$rootScope.$broadcast(x.n.ChangeSchedulerViewRequested),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.ViewModeChanged)}}},{kind:"method",key:"exportToCsv",value:function exportToCsv(){var e;let t,r=this.schedulerWidget.view();if(!r)return;switch(this._appCommonSrv.getSchedulerMode()){case x.M.Calendar:case x.M.Timeline:if(!this._licenseSrv.checkPaidFeatureAvailable(x.B.CsvReport,!0))return;t=x.K.AllCards;break;case x.M.TimeTracking:t=x.K.TimeRecords}let i=this._reportSrv.getDefaultParameters(t,{view:r,unit:null===(e=this.selectedScale)||void 0===e?void 0:e.unit});this._dialogSrv.showReportDialogAsync(t,i)}},{kind:"get",key:"availableSchedulerOrientations",value:function availableSchedulerOrientations(){return this._schedulerOrientations||(this._schedulerOrientations=[{value:x.N.Top,title:this._$translate.instant("MENU.ORIENTATION_TOP")},{value:x.N.Bottom,title:this._$translate.instant("MENU.ORIENTATION_BOTTOM")},{value:x.N.Right,title:this._$translate.instant("MENU.ORIENTATION_RIGHT")},{value:x.N.Left,title:this._$translate.instant("MENU.ORIENTATION_LEFT")}]),this._schedulerOrientations}},{kind:"get",key:"selectedSchedulerOrientation",value:function selectedSchedulerOrientation(){var e;let t=this._appCommonSrv.getSchedulerOrientation();return c()(e=this.availableSchedulerOrientations).call(e,(e=>e.value===t))}},{kind:"set",key:"selectedSchedulerOrientation",value:function selectedSchedulerOrientation(e){this._appCommonSrv.isSchedulerUnavailable()||this.selectedSchedulerOrientation!==e&&(this._globalBoardSettings.schedulerOrientation=e.value,this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.CalendarEvents.OrientationChanged))}},{kind:"method",key:"showAppearanceDialog",value:function showAppearanceDialog(e){this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.CardAppearanceDialogOpened),this._dialogSrv.showAppearanceDialogAsync(e)}},{kind:"get",key:"isCustomFieldsAvailable",value:function isCustomFieldsAvailable(){var e;let t=this._trelloIntegrationSrv.getCurrentBoardId(),r=this._trelloIntegrationSrv.getTrelloBoardById(t);return null==r?void 0:xe()(e=r.customFields).call(e,(e=>e.type===x.pb.Date))}},{kind:"method",key:"showCustomFieldsSettingsDialog",value:function showCustomFieldsSettingsDialog(e){this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.CustomFieldsSettingsDialogOpened),this._dialogSrv.showCustomFieldsSettingsDialog(e)}},{kind:"get",key:"highlightToday",value:function highlightToday(){return this._globalBoardSettings.highlightToday}},{kind:"set",key:"highlightToday",value:function highlightToday(e){this._appCommonSrv.isSchedulerUnavailable()||(this._globalBoardSettings.highlightToday=e,this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.HighlightTodayChanged))}},{kind:"get",key:"showWeekNumbers",value:function showWeekNumbers(){return this._globalBoardSettings.showWeekNumbers}},{kind:"set",key:"showWeekNumbers",value:function showWeekNumbers(e){this._appCommonSrv.isSchedulerUnavailable()||(this._globalBoardSettings.showWeekNumbers=e,this._$rootScope.$broadcast(x.n.ChangeSchedulerViewRequested),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowWeekNumbersChanged),this._applySchedulerToolbarSettings())}},{kind:"get",key:"isShowNonWorkingHoursAvailable",value:function isShowNonWorkingHoursAvailable(){let e=this.schedulerWidget.view();return!!e&&e.isTimeAvailable}},{kind:"get",key:"isNonWorkingHoursShown",value:function isNonWorkingHoursShown(){return!this._globalBoardSettings.showWorkHours}},{kind:"set",key:"isNonWorkingHoursShown",value:function isNonWorkingHoursShown(e){this._appCommonSrv.isSchedulerUnavailable()||(this._globalBoardSettings.showWorkHours=!e,this._$rootScope.$broadcast(x.n.ChangeSchedulerViewRequested),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowOnlyWorkHoursChanged))}},{kind:"get",key:"isHideWeekendsAvailable",value:function isHideWeekendsAvailable(){let e=this.schedulerWidget.view();return!!e&&e.isHideWeekendsAvailable}},{kind:"get",key:"isWeekendsShown",value:function isWeekendsShown(){return!this._globalBoardSettings.showWorkDays}},{kind:"set",key:"isWeekendsShown",value:function isWeekendsShown(e){this._appCommonSrv.isSchedulerUnavailable()||(this._globalBoardSettings.showWorkDays=!e,this._$rootScope.$broadcast(x.n.ChangeSchedulerViewRequested),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowOnlyWorkDaysChanged))}},{kind:"get",key:"isArchivedCardsShown",value:function isArchivedCardsShown(){return this._globalBoardSettings.showArchivedCards}},{kind:"set",key:"isArchivedCardsShown",value:function isArchivedCardsShown(e){this._globalBoardSettings.showArchivedCards=e,this._settingsSrv.saveGlobalAsync(),e&&(this._$rootScope.$broadcast(x.n.CardsReloadRequested),this._calendarCardsSrv.needReloadCalendarCards(),this._$rootScope.$broadcast(x.n.CardsReloaded)),this._$rootScope.$broadcast(x.n.FiltersChanged),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowArchivedCardsChanged)}},{kind:"get",key:"isCheckItemCardsShown",value:function isCheckItemCardsShown(){return this._globalBoardSettings.isCheckItemCardsShown}},{kind:"set",key:"isCheckItemCardsShown",value:function isCheckItemCardsShown(e){this._globalBoardSettings.isCheckItemCardsShown=e,this._$rootScope.$broadcast(x.n.FiltersChanged),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowCheckItemCardsChanged)}},{kind:"get",key:"isTimeRecordCardsShown",value:function isTimeRecordCardsShown(){return this._globalBoardSettings.isTimeRecordCardsShown}},{kind:"set",key:"isTimeRecordCardsShown",value:function isTimeRecordCardsShown(e){this._globalBoardSettings.isTimeRecordCardsShown=e,this._$rootScope.$broadcast(x.n.FiltersChanged),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowTimeRecordCardsChanged)}},{kind:"get",key:"isMilestonesShown",value:function isMilestonesShown(){return!!this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!1)&&this._globalBoardSettings.isMilestonesShown}},{kind:"set",key:"isMilestonesShown",value:function isMilestonesShown(e){this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0)&&(this._globalBoardSettings.isMilestonesShown=e,this._appCommonSrv.getSchedulerMode()===x.M.Timeline&&this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:this._appCommonSrv.getTimelineResourcesType()}),this._$rootScope.$broadcast(x.n.FiltersChanged),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowMilestonesChanged))}},{kind:"get",key:"isTrelloCardNumberShown",value:function isTrelloCardNumberShown(){return this._globalBoardSettings.showTrelloCardNumber}},{kind:"set",key:"isTrelloCardNumberShown",value:function isTrelloCardNumberShown(e){this._globalBoardSettings.showTrelloCardNumber=e,this._$rootScope.$broadcast(x.n.CardsFieldsSettingsChanged),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowTrelloCardNumberChanged)}},{kind:"get",key:"isTrelloBoardShown",value:function isTrelloBoardShown(){return this._globalBoardSettings.showTrelloBoard}},{kind:"set",key:"isTrelloBoardShown",value:function isTrelloBoardShown(e){this._globalBoardSettings.showTrelloBoard=e,this._$rootScope.$broadcast(x.n.CardsFieldsSettingsChanged),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowTrelloBoardChanged)}},{kind:"get",key:"isDateTimeShown",value:function isDateTimeShown(){return this._globalBoardSettings.showDateTime}},{kind:"set",key:"isDateTimeShown",value:function isDateTimeShown(e){this._globalBoardSettings.showDateTime=e,this._$rootScope.$broadcast(x.n.CardsFieldsSettingsChanged),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.ShowDateTimeChanged)}},{kind:"get",key:"availableCardsVisibility",value:function availableCardsVisibility(){return this._availableCardsVisibility||(this._availableCardsVisibility=[{value:x.j.Completed,title:this._$translate.instant("BUTTONS.COMPLETED_CARDS"),icon:"checkbox-completed-card-outline"},{value:x.j.Incompleted,title:this._$translate.instant("BUTTONS.INCOMPLETE_CARDS"),icon:"checkbox-incompleted-card-outline"},{value:x.j.All,title:this._$translate.instant("BUTTONS.ALL_CARDS"),icon:"checkbox-all-card-outline"}]),this._availableCardsVisibility}},{kind:"get",key:"selectedCardsVisibility",value:function selectedCardsVisibility(){var e;return c()(e=this.availableCardsVisibility).call(e,(e=>e.value===this._globalBoardSettings.filters.cardsVisibility))}},{kind:"set",key:"selectedCardsVisibility",value:function selectedCardsVisibility(e){this._globalBoardSettings.filters.cardsVisibility=e.value,this._$rootScope.$broadcast(x.n.FiltersChanged),this._settingsSrv.saveGlobalAsync(),this._telemetrySrv.logSessionEvent(x.X.SettingsEvents.CardsVisibilityChanged)}},{kind:"get",key:"isNotificationsSupported",value:function isNotificationsSupported(){return this._pushNotificationsSrv.isNotificationsSupported}},{kind:"get",key:"isNotificationsEnabled",value:function isNotificationsEnabled(){return this._pushNotificationsSrv.isNotificationsEnabled}},{kind:"get",key:"notificationsActionText",value:function notificationsActionText(){switch(this._pushNotificationsSrv.notificationStatus){case x.J.Disabled:return this._$translate.instant("MENU.NOTIFICATIONS_ENABLE");case x.J.Disabling:return this._$translate.instant("MENU.NOTIFICATIONS_DISABLING");case x.J.Enabled:return this._$translate.instant("MENU.NOTIFICATIONS_DISABLE");case x.J.Enabling:return this._$translate.instant("MENU.NOTIFICATIONS_ENABLING")}}},{kind:"get",key:"canChangeNotificationsStatus",value:function canChangeNotificationsStatus(){return this._pushNotificationsSrv.notificationStatus===x.J.Enabled||this._pushNotificationsSrv.notificationStatus===x.J.Disabled}},{kind:"method",key:"changeNotificationsStatusAsync",value:async function changeNotificationsStatusAsync(){if(this._pushNotificationsSrv.notificationStatus===x.J.Enabled){await this._pushNotificationsSrv.disableNotificationsAsync()&&this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.PushNotificationsDisabled,{where:x.bb.Settings})}else if(this._pushNotificationsSrv.notificationStatus===x.J.Disabled){await this._pushNotificationsSrv.enableNotificationsAsync()&&this._telemetrySrv.logSessionEvent(x.X.GeneralEvents.PushNotificationsEnabled,{where:x.bb.Settings})}}},{kind:"method",key:"isTaskListButtonAvailable",value:function isTaskListButtonAvailable(e){return!1}},{kind:"get",key:"isTaskListShown",value:function isTaskListShown(){return this._appCommonSrv.isTaskListShown()}},{kind:"set",key:"isTaskListShown",value:function isTaskListShown(e){this._telemetrySrv.logSessionEvent(e?x.X.CalendarEvents.TaskListsOpened:x.X.CalendarEvents.TaskListsClosed);let t=this._trelloIntegrationSrv.getCurrentBoardId();this._settingsSrv.currentSettings.getLocalBoardSettings(t).taskLists.isShown=e,this._settingsSrv.saveLocal()}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}},{kind:"method",key:"_applySchedulerToolbarSettings",value:function _applySchedulerToolbarSettings(){this.calendarWidget.setOptions({weekNumber:this._globalBoardSettings.showWeekNumbers}),this._availableSchedulerModes=null}}]}}));function ShowButtonOnboardingController_getDecoratorsApi(){ShowButtonOnboardingController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ShowButtonOnboardingController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ShowButtonOnboardingController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ShowButtonOnboardingController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ShowButtonOnboardingController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ShowButtonOnboardingController_createElementDescriptor(e){var t,r=ShowButtonOnboardingController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ShowButtonOnboardingController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ShowButtonOnboardingController_hasDecorators(e){return e.decorators&&e.decorators.length}function ShowButtonOnboardingController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ShowButtonOnboardingController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ShowButtonOnboardingController_toPropertyKey(e){var t=function ShowButtonOnboardingController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let js=function ShowButtonOnboardingController_decorate(e,t,r,i){var a,n=ShowButtonOnboardingController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ShowButtonOnboardingController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ShowButtonOnboardingController_isDataDescriptor(a.descriptor)||ShowButtonOnboardingController_isDataDescriptor(i.descriptor)){if(ShowButtonOnboardingController_hasDecorators(a)||ShowButtonOnboardingController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ShowButtonOnboardingController_hasDecorators(a)){if(ShowButtonOnboardingController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ShowButtonOnboardingController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ShowButtonOnboardingController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$element","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class ShowButtonOnboardingController{constructor(t,r,i,a){e(this),this._$element=t,this._settingsSrv=r,this._telemetrySrv=i,this._trelloIntegrationSrv=a}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"showButtonOnboardingCtrl"}},{kind:"method",key:"skipButtonOnboarding",value:function skipButtonOnboarding(){this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.ShowButtonSkipped);try{localStorage.planywayOnboardingButtonPassed=!0}catch(e){}this._trelloIntegrationSrv.isAuthorized()&&(this._settingsSrv.currentSettings.global.isOnboardingButtonPassed=!0,this._settingsSrv.saveGlobalAsync()),a()(".pw-js-button-onboarding").remove()}}]}}));function TimeRecordsReportParametersController_getDecoratorsApi(){TimeRecordsReportParametersController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TimeRecordsReportParametersController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TimeRecordsReportParametersController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TimeRecordsReportParametersController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TimeRecordsReportParametersController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TimeRecordsReportParametersController_createElementDescriptor(e){var t,r=TimeRecordsReportParametersController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TimeRecordsReportParametersController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TimeRecordsReportParametersController_hasDecorators(e){return e.decorators&&e.decorators.length}function TimeRecordsReportParametersController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TimeRecordsReportParametersController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TimeRecordsReportParametersController_toPropertyKey(e){var t=function TimeRecordsReportParametersController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Hs=function TimeRecordsReportParametersController_decorate(e,t,r,i){var a,n=TimeRecordsReportParametersController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TimeRecordsReportParametersController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TimeRecordsReportParametersController_isDataDescriptor(a.descriptor)||TimeRecordsReportParametersController_isDataDescriptor(i.descriptor)){if(TimeRecordsReportParametersController_hasDecorators(a)||TimeRecordsReportParametersController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TimeRecordsReportParametersController_hasDecorators(a)){if(TimeRecordsReportParametersController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TimeRecordsReportParametersController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TimeRecordsReportParametersController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$scope"])],(function(e){return{F:class TimeRecordsReportParametersController{constructor(t){e(this),this._$scope=t}},d:[{kind:"field",key:"isDisabled",value:void 0},{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"timeRecordsReportParametersCtrl"}},{kind:"get",key:"startDate",value:function startDate(){return this._startDate}},{kind:"set",key:"startDate",value:function startDate(e){this._startDate=e}},{kind:"get",key:"endDate",value:function endDate(){return this._endDate}},{kind:"set",key:"endDate",value:function endDate(e){this._endDate=e,this._parametersChanged()}},{kind:"set",key:"parameters",value:function parameters(e){this._$scope.$evalAsync((()=>{this._startDate=e.startDate,this._endDate=e.endDate}))}},{kind:"set",key:"parametersChangedCallback",value:function parametersChangedCallback(e){this._parametersChangedCallback=e}},{kind:"method",key:"_parametersChanged",value:function _parametersChanged(){this._parametersChangedCallback({parameters:{startDate:this.startDate,endDate:this.endDate}})}}]}}));function TrelloButtonsController_getDecoratorsApi(){TrelloButtonsController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrelloButtonsController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloButtonsController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloButtonsController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloButtonsController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloButtonsController_createElementDescriptor(e){var t,r=TrelloButtonsController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloButtonsController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloButtonsController_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloButtonsController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloButtonsController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloButtonsController_toPropertyKey(e){var t=function TrelloButtonsController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Vs=function TrelloButtonsController_decorate(e,t,r,i){var a,n=TrelloButtonsController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloButtonsController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrelloButtonsController_isDataDescriptor(a.descriptor)||TrelloButtonsController_isDataDescriptor(i.descriptor)){if(TrelloButtonsController_hasDecorators(a)||TrelloButtonsController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrelloButtonsController_hasDecorators(a)){if(TrelloButtonsController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrelloButtonsController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrelloButtonsController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$translate","appCommonSrv","dialogSrv","onboardingSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class TrelloButtonsController{constructor(t,r,i,a,n,o,s,l){e(this),this._$rootScope=t,this._$scope=r,this._$translate=i,this._appCommonSrv=a,this._dialogSrv=n,this._onboardingSrv=o,this._telemetrySrv=s,this._trelloIntegrationSrv=l,this._$scope.$on(x.n.SwitchSchedulerShownRequested,((e,t)=>this.switchSchedulerShownAsync(null==t?void 0:t.isBy)))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"trelloButtonsCtrl"}},{kind:"get",key:"schedulerButtonTooltip",value:function schedulerButtonTooltip(){return this._trelloIntegrationSrv.isCurrentBoardInitializing()?this._$translate.instant("TOOLTIPS.CALENDAR_UNAVAILABLE_LOADING"):this.isSchedulerShown?this._$translate.instant("TOOLTIPS.CALENDAR_HIDE"):this._$translate.instant("TOOLTIPS.CALENDAR_SHOW")}},{kind:"get",key:"isSchedulerButtonBusy",value:function isSchedulerButtonBusy(){return this._appCommonSrv.isSchedulerButtonBusy()}},{kind:"get",key:"isSchedulerButtonDisabled",value:function isSchedulerButtonDisabled(){return this.isSchedulerButtonBusy}},{kind:"get",key:"isSchedulerShown",value:function isSchedulerShown(){return this._appCommonSrv.isSchedulerShown()}},{kind:"method",key:"switchSchedulerShownAsync",value:async function switchSchedulerShownAsync(e="trello"){if(this.isSchedulerButtonDisabled)return;let t=!this.isSchedulerShown;if(t&&!this._trelloIntegrationSrv.isAuthorized()){if(!await this._dialogSrv.showLoginDialogAsync({canClose:!0,fullSize:!0}))return}t&&(await this._onboardingSrv.showWelcomeSurveyDialogAsync(),this._$rootScope.$broadcast(x.n.SchedulerShowing)),this._appCommonSrv.setSchedulerShown(t),this._telemetrySrv.logSingleEvent(t?x.X.CalendarEvents.Shown:x.X.CalendarEvents.Hidden,{isBy:e})}}]}}));function TrelloCardPopupController_getDecoratorsApi(){TrelloCardPopupController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrelloCardPopupController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloCardPopupController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloCardPopupController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloCardPopupController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloCardPopupController_createElementDescriptor(e){var t,r=TrelloCardPopupController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloCardPopupController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloCardPopupController_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloCardPopupController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloCardPopupController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloCardPopupController_toPropertyKey(e){var t=function TrelloCardPopupController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ys=function TrelloCardPopupController_decorate(e,t,r,i){var a,n=TrelloCardPopupController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloCardPopupController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrelloCardPopupController_isDataDescriptor(a.descriptor)||TrelloCardPopupController_isDataDescriptor(i.descriptor)){if(TrelloCardPopupController_hasDecorators(a)||TrelloCardPopupController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrelloCardPopupController_hasDecorators(a)){if(TrelloCardPopupController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrelloCardPopupController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrelloCardPopupController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(n.Bb)(["$rootScope","$scope","$log","$timeout","$translate","appCommonSrv","calendarCardsSrv","dialogSrv","htmlHelperSrv","licenseSrv","notificationSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],(function(e){return{F:class TrelloCardPopupController{constructor(t,r,i,a,o,s,l,d,c,h,u,p,m,f){e(this),this._$rootScope=t,this._$scope=r,this._$log=i,this._$timeout=a,this._$translate=o,this._appCommonSrv=s,this._calendarCardsSrv=l,this._dialogSrv=d,this._htmlHelperSrv=c,this._licenseSrv=h,this._notificationSrv=u,this._settingsSrv=p,this._telemetrySrv=m,this._trelloIntegrationSrv=f,this._nowDate=Object(n.O)(new Date),this._onAddOrUpdateCard=e=>{e.shortId===this._currentShortId&&this._addOrUpdateCard(e)},this._onDeleteCard=e=>{e.shortId===this._currentShortId&&this._removeCard()},this._$scope.$on("$destroy",(()=>this._removeCalendarCardsListeners()))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"trelloCardPopupCtrl"}},{kind:"get",key:"isCardPopupControlsAvailable",value:function isCardPopupControlsAvailable(){return this._calendarCard&&!this._appCommonSrv.isSchedulerLoading()}},{kind:"get",key:"showWeekNumbers",value:function showWeekNumbers(){return this._globalBoardSettings.showWeekNumbers}},{kind:"get",key:"hasDates",value:function hasDates(){return!!this._calendarCard&&this._calendarCard.hasDates}},{kind:"get",key:"isSingleDate",value:function isSingleDate(){return!!this._calendarCard&&this._calendarCard.isSingleDate}},{kind:"get",key:"isReadOnly",value:function isReadOnly(){return this._calendarCard&&(this._calendarCard.isReadOnly||this._calendarCard.isArchived)}},{kind:"method",key:"setDates",value:function setDates(){var e;null===(e=a()(".js-close-window")[0])||void 0===e||e.click(),this._$timeout((async()=>{let e=await this._trelloIntegrationSrv.checkAuthorizationAsync();if(e)this._setDatesAsync();else{if(e=await this._trelloIntegrationSrv.authorizeAsync(),!e)return;this._appCommonSrv.sendLaunchAsync(),this._$rootScope.$once(x.n.BoardInitialized,(()=>this._setDatesAsync()))}}),0,!1)}},{kind:"get",key:"isMilestone",value:function isMilestone(){var e;return(null===(e=this._calendarCard)||void 0===e?void 0:e.cardRole)===me.c.Milestone}},{kind:"get",key:"isAllDay",value:function isAllDay(){return this._isAllDay}},{kind:"set",key:"isAllDay",value:function isAllDay(e){if(this._checkEditAvailable()&&this.isAllDay!==e){if(this._isAllDay=e,this.isAllDay)this._startDate=Object(n.O)(this.startDate),this._endDate=this.startDate;else{let e=this._cardBoard.defaultCardIsAllDay?G.b:this._cardBoard.defaultCardDuration;this._startDate=Object(n.W)(this.startDate),this._endDate=Object(n.c)(this.startDate,e)}this._logCardEvent({event:e?x.X.CardEvents.IsAllDaySet:x.X.CardEvents.IsAllDayUnset}),this._setCardPropertiesAsync({isAllDay:e,start:this.startDate,end:this.endDate})}}},{kind:"get",key:"startDate",value:function startDate(){return this._startDate}},{kind:"set",key:"startDate",value:function startDate(e){if(this._checkEditAvailable()&&e&&!Object(n.w)(this.startDate,e))if(this.hasDates){if(this.isAllDay){let t=Object(n.R)(this.startDate,this.endDate);this._startDate=e,this._endDate=Object(n.a)(this.startDate,t)}else{let t=Object(n.S)(this.startDate,this.endDate);this._startDate=e,this._endDate=Object(n.c)(this.startDate,t)}this._logCardEvent({event:x.X.CardEvents.StartChanged}),this._setCardPropertiesAsync({start:e,end:this.endDate})}else this._isAllDay=!0,this._startDate=e,this._endDate=e,this._logCardEvent({event:x.X.CardEvents.Scheduled,data:{by:x.U.SetDates}}),this._setCardPropertiesAsync({isAllDay:this.isAllDay,start:e,end:e})}},{kind:"get",key:"endDate",value:function endDate(){return this._endDate}},{kind:"set",key:"endDate",value:function endDate(e){this._checkEditAvailable()&&e&&!Object(n.w)(this.endDate,e)&&(this.hasDates?(this._endDate=e,this._logCardEvent({event:x.X.CardEvents.EndChanged}),this._setCardPropertiesAsync({end:e})):(this._isAllDay=!0,this._startDate=e,this._endDate=e,this._logCardEvent({event:x.X.CardEvents.Scheduled,data:{by:x.U.SetDates}}),this._setCardPropertiesAsync({isAllDay:this.isAllDay,start:e,end:e})))}},{kind:"get",key:"minEndDate",value:function minEndDate(){return this.startDate}},{kind:"get",key:"isProgressAllDayAvailable",value:function isProgressAllDayAvailable(){return!this.isMilestone&&!this.isRecurrentCard&&this.hasDates&&this.isAllDay}},{kind:"get",key:"progressAllDay",value:function progressAllDay(){return this.isProgressAllDayAvailable?this._nowDate<=this.startDate?0:this._nowDate>Object(n.a)(this.endDate,1)?100:(this._nowDate-this.startDate)/(Object(n.a)(this.endDate,1)-this.startDate)*100:0}},{kind:"get",key:"recurrenceRule",value:function recurrenceRule(){return this._recurrenceRule}},{kind:"set",key:"recurrenceRule",value:function recurrenceRule(e){e&&!this._checkEditAvailable()||this._recurrenceRule!==e&&(this._recurrenceRule=e,this._cardRoles=null,this._logCardEvent({event:x.X.CardEvents.RecurrenceRuleChanged,data:{recurrenceRule:e}}),this._setCardPropertiesAsync({recurrenceRule:e}))}},{kind:"get",key:"isRecurrentCard",value:function isRecurrentCard(){var e;return!!(this.recurrenceRule||null!==(e=this._calendarCard)&&void 0!==e&&e.recurrenceId)}},{kind:"get",key:"isRecurringAvailable",value:function isRecurringAvailable(){return this._calendarCard&&!this._calendarCard.recurrenceId}},{kind:"method",key:"loadCalendarCardAsync",value:async function loadCalendarCardAsync(e){this._currentShortId=e;try{let t=await this._calendarCardsSrv.getCalendarCardByIdAsync(x.h.TrelloCard,e);if(t)return this._addOrUpdateCard(t),t}catch(e){this._$log.error("Trello load card error:"),this._$log.error(e),this._telemetrySrv.logError("Trello load card error",e,{class:this.constructor.name,method:this.loadCalendarCardAsync.name})}finally{this._addCalendarCardsListeners()}}},{kind:"method",key:"getTrelloDescription",value:function getTrelloDescription(e,t){if(this._calendarCard){let t=this._calendarCard.clone();return t.description=e,t.toTrelloCard(this._cardBoard,["desc"]).desc}return e+Object(G.g)(t).match}},{kind:"method",key:"getCalendarDescription",value:function getCalendarDescription(e){return Object(G.g)(e).description}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){let e=this._trelloIntegrationSrv.getCurrentBoardId();return this._settingsSrv.currentSettings.getGlobalBoardSettings(e)}},{kind:"method",key:"_setDatesAsync",value:async function _setDatesAsync(){var e,t,r;try{this._appCommonSrv.isSchedulerShown()||(this._$rootScope.$broadcast(x.n.SwitchSchedulerShownRequested,{isBy:"setDates"}),await new P.a((e=>this._$rootScope.$once(x.n.SchedulerShown,(()=>e())))));let i=kendo.widgetInstance(a()("#pwScheduler"));if(!i)return;if(!this._calendarCard){if(this._calendarCard=await this._calendarCardsSrv.getCalendarCardByIdAsync(x.h.TrelloCard,this._currentShortId),!this._calendarCard||this.isReadOnly)return;if(this._cardBoard=this._trelloIntegrationSrv.getTrelloBoardById(this._calendarCard.boardId),!this._cardBoard)return}let o,s,l=this._appCommonSrv.getSchedulerView(),d=!1;if(this._calendarCard.isMilestone&&!this._globalBoardSettings.isMilestonesShown&&(this._globalBoardSettings.isMilestonesShown=!0,d=!0),l===x.O.Timeline)if(s=this._appCommonSrv.getTimelineResourcesType(),this._calendarCard.isMilestone)o=U.v;else{let i=this._globalBoardSettings.timelineHiddenResources[s];switch(s){case x.fb.Members:let a=We()(e=S()(t=R()(r=re()(this._calendarCard.memberIds)).call(r,(e=>this._trelloIntegrationSrv.getTrelloMemberById(e)))).call(t,(e=>e))).call(e,n.r);for(let e of a)ze()(i).call(i,e.id)&&(i=S()(i).call(i,(t=>t!==e.id)),d=!0);0===a.length&&ze()(i).call(i,U.k)&&(i=S()(i).call(i,(e=>e!==U.k)),d=!0),o=0!==a.length?a[0].id:U.k;break;case x.fb.Calendars:ze()(i).call(i,this._calendarCard.boardId)&&(i=S()(i).call(i,(e=>e!==this._calendarCard.boardId)),d=!0),o=this._calendarCard.boardId;break;case x.fb.Lists:ze()(i).call(i,this._calendarCard.listId)&&(i=S()(i).call(i,(e=>e!==this._calendarCard.listId)),d=!0),o=this._calendarCard.listId;break;case x.fb.NoResources:o=U.j}o!==U.j&&(this._globalBoardSettings.timelineHiddenResources[s]=i)}if(d&&(this._settingsSrv.saveGlobalAsync(),s&&this._$rootScope.$broadcast(x.n.TimelineResourcesReloaded,{resourcesType:s})),this._calendarCard.hasDates)this._logCardEvent({event:x.X.CardEvents.CardViewOnTimelineClicked});else{let e,t=i.view(),r=this._cardBoard.defaultCardIsAllDay||!t.isTimeAvailable,a=t.getClosestVisibleSlot(new Date,r),o=a.start;switch(t.name){case x.O.OneDay:case x.O.ThreeDay:case x.O.Week:let i=r?0:this._cardBoard.defaultCardDuration;e=Object(n.c)(o,i);break;case x.O.Month:case x.O.Timeline:e=a.end;break;default:throw new Error(`Unsupported scheduler view: ${t.name}`)}this._isAllDay=r,this._startDate=o,this._endDate=e,this._logCardEvent({event:x.X.CardEvents.Scheduled,data:{by:x.U.SetDates}}),await this._setCardPropertiesAsync({isAllDay:r,start:o,end:e})}this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{scrollToDate:this._calendarCard.start,restoreOffset:!1,navigationMode:x.y.DateSelect,resourceId:o});let c=this._calendarCardsSrv.getCalendarCardById(x.h.TrelloCard,this._calendarCard.id);if(!c)return;c.ignoreFilters=!0,this._calendarCardsSrv.updateCalendarCardAsync(c);let h=null;try{this._appCommonSrv.setSchedulerBusy(!0),h=await this._htmlHelperSrv.elementAddedOnceAsync(i.element,`.k-event[data-uid="${this._calendarCard.id}"]`,3e3),h&&(this._$rootScope.$broadcast(x.n.ScrollSchedulerViewRequested,{cardElement:h}),i.select(null),i.select([h.data("uid")]))}finally{this._appCommonSrv.setSchedulerBusy(!1)}this._logCardEvent({event:x.X.CardEvents.EditDialogOpened,data:{isDetailed:this._settingsSrv.currentSettings.local.editCardDialog.isDetailed}}),await this._dialogSrv.showEditCardDialogAsync(c,{cardElement:h,schedulerWidget:i})||this._logCardEvent({event:x.X.CardEvents.EditDialogClosed})}catch(e){this._$log.error("Trello card set dates error:"),this._$log.error(e),this._telemetrySrv.logError("Trello card set dates error",e,{class:this.constructor.name,method:this._setDatesAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}}},{kind:"method",key:"_checkEditAvailable",value:function _checkEditAvailable(){return!(this.isMilestone&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.Milestones,!0))&&!(this.recurrenceRule&&!this._licenseSrv.checkPaidFeatureAvailable(x.B.RecurringCards,!0))}},{kind:"method",key:"_addCalendarCardsListeners",value:function _addCalendarCardsListeners(){this._serviceEventsListenersAdded||(this._serviceEventsListenersAdded=!0,this._calendarCardsSrv.addCalendarCardEventListener("added",this._onAddOrUpdateCard),this._calendarCardsSrv.addCalendarCardEventListener("updated",this._onAddOrUpdateCard),this._calendarCardsSrv.addCalendarCardEventListener("deleted",this._onDeleteCard))}},{kind:"method",key:"_removeCalendarCardsListeners",value:function _removeCalendarCardsListeners(){this._serviceEventsListenersAdded&&(this._serviceEventsListenersAdded=!1,this._calendarCardsSrv.removeCalendarCardEventListener("added",this._onAddOrUpdateCard),this._calendarCardsSrv.removeCalendarCardEventListener("updated",this._onAddOrUpdateCard),this._calendarCardsSrv.removeCalendarCardEventListener("deleted",this._onDeleteCard))}},{kind:"method",key:"_addOrUpdateCard",value:function _addOrUpdateCard(e){e?(this._calendarCard=e.clone(),this._$scope.$evalAsync((()=>{this._cardRoles=null,this._isAllDay=e.isAllDay,this._startDate=e.start,this._endDate=e.end,this._recurrenceRule=e.recurrenceRule,this._cardBoard=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId)}))):this._removeCard()}},{kind:"method",key:"_removeCard",value:function _removeCard(){this._$scope.$evalAsync((()=>{this._startDate=null,this._endDate=null,this._calendarCard=null}))}},{kind:"method",key:"_setCardPropertiesAsync",value:async function _setCardPropertiesAsync(e){try{this._calendarCard.recurrenceRule&&(void 0!==e.isAllDay&&e.isAllDay!==this._calendarCard.isAllDay||e.start&&!Object(n.w)(e.start,this._calendarCard.start)||void 0!==e.recurrenceRule&&e.isAllDay!==this._calendarCard.recurrenceRule)&&(e.exceptionDates=[],this._calendarCard.deleteExceptionDates(),(async()=>{try{await this._calendarCardsSrv.deleteRecurrenceExceptionsAsync(this._calendarCard.cardType,this._calendarCard)}catch(e){this._$log.error("Planyway delete card exceptions error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete card exceptions error",e,{class:this.constructor.name,method:this._setCardPropertiesAsync.name})}})()),await this._calendarCardsSrv.updateCalendarCardPropertiesAsync(this._calendarCard,e)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),x.A.Error)}}},{kind:"method",key:"_logCardEvent",value:function _logCardEvent(e){this._telemetrySrv.logSessionEvent(e.event,{isAllDay:this.isAllDay,start:this.startDate,end:this.endDate,cardRole:this._calendarCard.cardRole,cardType:this._calendarCard.cardType,isCurrentBoardCard:this._calendarCard.isCurrentBoardCard,isNewCard:!1,recurrenceRule:this._calendarCard.recurrenceRule,priority:this._calendarCard.priority,where:x.W.Trello,by:x.U.TrelloPopup,durationMinutes:this._calendarCard.durationMinutes,...e.data})}}]}}));var Ks=r(722),Xs=r.n(Ks);function AllCardsReportParametersDirective_getDecoratorsApi(){AllCardsReportParametersDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AllCardsReportParametersDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AllCardsReportParametersDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AllCardsReportParametersDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AllCardsReportParametersDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AllCardsReportParametersDirective_createElementDescriptor(e){var t,r=AllCardsReportParametersDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AllCardsReportParametersDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AllCardsReportParametersDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function AllCardsReportParametersDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AllCardsReportParametersDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AllCardsReportParametersDirective_toPropertyKey(e){var t=function AllCardsReportParametersDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let qs=function AllCardsReportParametersDirective_decorate(e,t,r,i){var a,n=AllCardsReportParametersDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AllCardsReportParametersDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AllCardsReportParametersDirective_isDataDescriptor(a.descriptor)||AllCardsReportParametersDirective_isDataDescriptor(i.descriptor)){if(AllCardsReportParametersDirective_hasDecorators(a)||AllCardsReportParametersDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AllCardsReportParametersDirective_hasDecorators(a)){if(AllCardsReportParametersDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AllCardsReportParametersDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AllCardsReportParametersDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class AllCardsReportParametersDirective{constructor(){e(this),this.templateUrl=Xs.a,this.restrict="E",this.controller=Rn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={isDisabled:"<?",parameters:"<?",parametersChangedCallback:"&"}}}return{F:AllCardsReportParametersDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwAllCardsReportParameters"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new AllCardsReportParametersDirective}}]}}));function AutosizeInputDirective_getDecoratorsApi(){AutosizeInputDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AutosizeInputDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AutosizeInputDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AutosizeInputDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AutosizeInputDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AutosizeInputDirective_createElementDescriptor(e){var t,r=AutosizeInputDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AutosizeInputDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AutosizeInputDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function AutosizeInputDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AutosizeInputDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AutosizeInputDirective_toPropertyKey(e){var t=function AutosizeInputDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Qs=function AutosizeInputDirective_decorate(e,t,r,i){var a,n=AutosizeInputDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AutosizeInputDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AutosizeInputDirective_isDataDescriptor(a.descriptor)||AutosizeInputDirective_isDataDescriptor(i.descriptor)){if(AutosizeInputDirective_hasDecorators(a)||AutosizeInputDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AutosizeInputDirective_hasDecorators(a)){if(AutosizeInputDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AutosizeInputDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AutosizeInputDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class AutosizeInputDirective{constructor(){e(this),this.restrict="A"}}return{F:AutosizeInputDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwAutosizeInput"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new AutosizeInputDirective}},{kind:"method",key:"link",value:function link(e,t,r){const i=t[0];let a;switch(r.type){case"number":a=20;break;default:a=0}function resize(){let e=document.createElement("span"),t=getComputedStyle(i);for(let r of re()(t))e.style.setProperty(r,t.getPropertyValue(r),t.getPropertyPriority(r));e.style.display="inline",e.style.width="auto",e.style.visibility="hidden",e.textContent=i.value||i.placeholder,document.body.appendChild(e),i.style.width=`${Math.ceil(e.offsetWidth)+2+a}px`,document.body.removeChild(e)}r.ngModel?e.$watch(r.ngModel,resize):(vo()(resize),t.on("change",resize)),t.on("resize",resize)}}]}}));var Js=r(224),Zs=r.n(Js);function AutosizeTextareaDirective_getDecoratorsApi(){AutosizeTextareaDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!AutosizeTextareaDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=AutosizeTextareaDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:AutosizeTextareaDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=AutosizeTextareaDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function AutosizeTextareaDirective_createElementDescriptor(e){var t,r=AutosizeTextareaDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function AutosizeTextareaDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function AutosizeTextareaDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function AutosizeTextareaDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function AutosizeTextareaDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function AutosizeTextareaDirective_toPropertyKey(e){var t=function AutosizeTextareaDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let el=function AutosizeTextareaDirective_decorate(e,t,r,i){var a,n=AutosizeTextareaDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function AutosizeTextareaDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(AutosizeTextareaDirective_isDataDescriptor(a.descriptor)||AutosizeTextareaDirective_isDataDescriptor(i.descriptor)){if(AutosizeTextareaDirective_hasDecorators(a)||AutosizeTextareaDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(AutosizeTextareaDirective_hasDecorators(a)){if(AutosizeTextareaDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}AutosizeTextareaDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,AutosizeTextareaDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class AutosizeTextareaDirective{constructor(){e(this),this.restrict="A"}}return{F:AutosizeTextareaDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwAutosizeTextarea"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new AutosizeTextareaDirective}},{kind:"method",key:"link",value:function link(e,t,r){Zs()(t),r.ngModel?e.$watch(r.ngModel,(()=>Zs.a.update(t))):t.on("change",(()=>Zs.a.update(t))),e.$on(x.n.AutosizeTextareaResizeRequested,(()=>Zs.a.update(t)))}}]}}));var tl=r(723),rl=r.n(tl);function CalendarIconDirective_getDecoratorsApi(){CalendarIconDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CalendarIconDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CalendarIconDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CalendarIconDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CalendarIconDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CalendarIconDirective_createElementDescriptor(e){var t,r=CalendarIconDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CalendarIconDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CalendarIconDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function CalendarIconDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CalendarIconDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CalendarIconDirective_toPropertyKey(e){var t=function CalendarIconDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let il=function CalendarIconDirective_decorate(e,t,r,i){var a,n=CalendarIconDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CalendarIconDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CalendarIconDirective_isDataDescriptor(a.descriptor)||CalendarIconDirective_isDataDescriptor(i.descriptor)){if(CalendarIconDirective_hasDecorators(a)||CalendarIconDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CalendarIconDirective_hasDecorators(a)){if(CalendarIconDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CalendarIconDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CalendarIconDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class CalendarIconDirective{constructor(){e(this),this.templateUrl=rl.a,this.restrict="E",this.controller=On.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={calendarId:"@",calendarType:"@",_hideCalendarImage:"@?hideCalendarImage",_iconSize:"@?iconSize"}}}return{F:CalendarIconDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwCalendarIcon"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new CalendarIconDirective}}]}}));var al=r(724),nl=r.n(al);function CardContextMenuDirective_getDecoratorsApi(){CardContextMenuDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CardContextMenuDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CardContextMenuDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CardContextMenuDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CardContextMenuDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CardContextMenuDirective_createElementDescriptor(e){var t,r=CardContextMenuDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CardContextMenuDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CardContextMenuDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function CardContextMenuDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CardContextMenuDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CardContextMenuDirective_toPropertyKey(e){var t=function CardContextMenuDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ol=function CardContextMenuDirective_decorate(e,t,r,i){var a,n=CardContextMenuDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CardContextMenuDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CardContextMenuDirective_isDataDescriptor(a.descriptor)||CardContextMenuDirective_isDataDescriptor(i.descriptor)){if(CardContextMenuDirective_hasDecorators(a)||CardContextMenuDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CardContextMenuDirective_hasDecorators(a)){if(CardContextMenuDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CardContextMenuDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CardContextMenuDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class CardContextMenuDirective{constructor(){e(this),this.templateUrl=nl.a,this.restrict="E",this.controller=Ln.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={source:"@",onSetContextMenu:"&",onSetPriority:"&",onToggleLabel:"&",onToggleMember:"&",onToggleCardIsCompleted:"&",onCopyCardUrl:"&",onDuplicateCard:"&",onToggleCardIsArchived:"&",onRemoveCard:"&",onDeleteCard:"&"}}}return{F:CardContextMenuDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwCardContextMenu"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new CardContextMenuDirective}}]}}));var sl=r(725),ll=r.n(sl);function CardSelectDirective_getDecoratorsApi(){CardSelectDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CardSelectDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CardSelectDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CardSelectDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CardSelectDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CardSelectDirective_createElementDescriptor(e){var t,r=CardSelectDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CardSelectDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CardSelectDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function CardSelectDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CardSelectDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CardSelectDirective_toPropertyKey(e){var t=function CardSelectDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let dl=function CardSelectDirective_decorate(e,t,r,i){var a,n=CardSelectDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CardSelectDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CardSelectDirective_isDataDescriptor(a.descriptor)||CardSelectDirective_isDataDescriptor(i.descriptor)){if(CardSelectDirective_hasDecorators(a)||CardSelectDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CardSelectDirective_hasDecorators(a)){if(CardSelectDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CardSelectDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CardSelectDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class CardSelectDirective{constructor(){e(this),this.templateUrl=ll.a,this.restrict="E",this.controller=Mn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={calendarCard:"=?",onSelect:"&?",filter:"&",isDisabled:"<?",autofocus:"<?",placeholder:"@placeholder"}}}return{F:CardSelectDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwCardSelect"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new CardSelectDirective}},{kind:"method",key:"link",value:function link(e,t){e.$ctrl.autofocus&&c()(t).call(t,".pw-js-card-select-search-input").trigger("focus")}}]}}));var cl=r(726),hl=r.n(cl);function CardTooltipDirective_getDecoratorsApi(){CardTooltipDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!CardTooltipDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=CardTooltipDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:CardTooltipDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=CardTooltipDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function CardTooltipDirective_createElementDescriptor(e){var t,r=CardTooltipDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function CardTooltipDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function CardTooltipDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function CardTooltipDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function CardTooltipDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function CardTooltipDirective_toPropertyKey(e){var t=function CardTooltipDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ul=function CardTooltipDirective_decorate(e,t,r,i){var a,n=CardTooltipDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function CardTooltipDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(CardTooltipDirective_isDataDescriptor(a.descriptor)||CardTooltipDirective_isDataDescriptor(i.descriptor)){if(CardTooltipDirective_hasDecorators(a)||CardTooltipDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(CardTooltipDirective_hasDecorators(a)){if(CardTooltipDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}CardTooltipDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,CardTooltipDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class CardTooltipDirective{constructor(t,r,i){e(this),this._$log=r,this._$window=t,this._$mdPanel=i,this.restrict="A",this.scope={options:`<${CardTooltipDirective.directiveName}`},this._shownTooltips=new M.a,this._tooltipAnimation=this._$mdPanel.newPanelAnimation().withAnimation(this._$mdPanel.animation.FADE).duration(150),this._tooltipPosition=this._$mdPanel.newPanelPosition()}}return{F:CardTooltipDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwCardTooltip"}},{kind:"method",decorators:[Object(n.Bb)(["$window","$log","$mdPanel"])],static:!0,key:"create",value:function create(...e){return new CardTooltipDirective(...e)}},{kind:"method",key:"link",value:function link(e,t){t.on("mouseenter",(()=>{this._closeAllTooltipsAsync()})),t.on("mouseenter","[data-card-tooltip-id]",(async t=>{var r,i;if(t.stopPropagation(),t.buttons)return;let o=a()(t.target).closest("[data-card-tooltip-id]"),s=o.data("card-tooltip-id");if(!s)return;let l=o.data("card-tooltip-type");if(!l)return;let d=null===(r=(i=e.options).getCardForTooltip)||void 0===r?void 0:r.call(i,s,l);if(!d)return;let c={cardElement:o,isMouseHovering:!0};if(o.one("mouseleave mouseup",(()=>{c.isMouseHovering=!1,this._closeTooltipAsync(c)})),await P.a.all([Object(n.x)(150),c.mdPanelClosePromise]),c.isMouseHovering){await this._closeAllTooltipsAsync(),c.mdPanelRef=this._$mdPanel.create({templateUrl:hl.a,controller:Nn.controllerName,controllerAs:"$ctrl",locals:{calendarCard:d},attachTo:a()("body"),propagateContainerEvents:!0,panelClass:"pw-card-tooltip",animation:this._tooltipAnimation,position:this._tooltipPosition,trapFocus:!1,focusOnOpen:!1,fullscreen:!1,disableParentScroll:!1,onDomAdded:()=>a()(".pw-card-tooltip").css("pointer-events",""),zIndex:2e3}),this._tooltipPosition.left(`${this._mouseX}px`).top(`${this._mouseY+20}px`),c.mdPanelOpenPromise=c.mdPanelRef.open(),this._shownTooltips.add(c);try{await c.mdPanelOpenPromise}catch(e){this._$log.error("Planyway open card tooltip error:"),this._$log.error(e)}finally{c.mdPanelOpenPromise=null}}}));const onMouseScroll=()=>{this._closeAllTooltipsAsync()},onMouseMove=async e=>{this._mouseX=e.clientX,this._mouseY=e.clientY;for(let e of this._shownTooltips)e.cardElement.is(":hover")||await this._closeTooltipAsync(e)};this._$window.addEventListener("scroll",onMouseScroll,!0),this._$window.addEventListener("mousemove",onMouseMove,!0),e.$on("$destroy",(()=>{this._$window.removeEventListener("scroll",onMouseScroll,!0),this._$window.removeEventListener("mousemove",onMouseMove,!0)}))}},{kind:"method",key:"_closeAllTooltipsAsync",value:async function _closeAllTooltipsAsync(){for(let e of this._shownTooltips)await this._closeTooltipAsync(e)}},{kind:"method",key:"_closeTooltipAsync",value:async function _closeTooltipAsync(e){if(e.mdPanelRef&&this._shownTooltips.delete(e)){e.mdPanelOpenPromise&&await e.mdPanelOpenPromise,e.mdPanelClosePromise=e.mdPanelRef.close();try{await e.mdPanelClosePromise,e.mdPanelRef.destroy(),e.mdPanelRef=null}catch(e){this._$log.error("Planyway close card tooltip error:"),this._$log.error(e)}finally{e.mdPanelClosePromise=null}}}}]}}));function ContextMenuDirective_getDecoratorsApi(){ContextMenuDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ContextMenuDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ContextMenuDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ContextMenuDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ContextMenuDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ContextMenuDirective_createElementDescriptor(e){var t,r=ContextMenuDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ContextMenuDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ContextMenuDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function ContextMenuDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ContextMenuDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ContextMenuDirective_toPropertyKey(e){var t=function ContextMenuDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let pl=function ContextMenuDirective_decorate(e,t,r,i){var a,n=ContextMenuDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ContextMenuDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ContextMenuDirective_isDataDescriptor(a.descriptor)||ContextMenuDirective_isDataDescriptor(i.descriptor)){if(ContextMenuDirective_hasDecorators(a)||ContextMenuDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ContextMenuDirective_hasDecorators(a)){if(ContextMenuDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ContextMenuDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ContextMenuDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class ContextMenuDirective{constructor(t,r,i,a){e(this),this._$rootScope=t,this._$window=r,this._$timeout=i,this._$sniffer=a,this.restrict="A",this.require="mdMenu",this._openContextMenus=0}}return{F:ContextMenuDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwContextMenu"}},{kind:"method",decorators:[Object(n.Bb)(["$rootScope","$window","$timeout","$sniffer"])],static:!0,key:"create",value:function create(...e){return new ContextMenuDirective(...e)}},{kind:"method",key:"link",value:function link(e,t,r,i){var n;a()('<div style="visibility: hidden; position: absolute; left: 0; top: 0;" md-menu-align-target></div>').prependTo(t.children("md-menu-content")),t.children().first().attr("ng-click","");const o=e.$mdMenu,s=o.open,l=o.close,d=[];let h={left:0,top:0};i.offsets=()=>h,o.open=async(t,r,i)=>{if(o.pwData&&(o.pwData.isContextMenuOpened=!1),o.pwData=r,t.clientX&&t.clientY)h={left:t.clientX,top:t.clientY};else if(t.target){let e=a()(t.target),r=e.offset();h={left:r.left+e.width()/2,top:r.top+e.height()/2}}o.close(),t.target&&a()(t.target).trigger("mouseleave"),this._openContextMenus>0&&await this._$timeout(),i&&(this._setMenuAnimationEnabled(!1),e.$once("$mdMenuOpened",(()=>{this._setMenuAnimationEnabled(!0);let e=c()(d).call(d,(e=>e.menuItem===i));e&&e.$mdMenu.open()}))),s(t)};const u=e.$watch((()=>i.nestedMenus),(e=>{u();for(let t of e){let e=a()(t),r=e.scope();r&&(d.push({menuItem:e.data("nested-menu"),$mdMenu:r.$mdMenu}),r.$on("$mdMenuOpen",(()=>this._setMenuAnimationEnabled(!1))),r.$on("$mdMenuOpened",(()=>this._setMenuAnimationEnabled(!0))))}}));o.closeNested=()=>{for(let e of d)e.$mdMenu.close()},o.close=(...t)=>{e.$emit("$pwContextMenuClosed"),o.closeNested(),l(...t)},e.$on(x.n.CloseDialogsRequested,(()=>{o.close()}));let p=!1;e.$watch((()=>e.$mdMenuIsOpen),(e=>{p&&(e?this._openContextMenus++:this._openContextMenus--,o.pwData&&(o.pwData.isContextMenuOpened=this._openContextMenus>0)),p=!0,e||o.closeNested()})),o.isMacOS=ze()(n=navigator.platform.toUpperCase()).call(n,"MAC")}},{kind:"method",key:"_setMenuAnimationEnabled",value:function _setMenuAnimationEnabled(e){this._$sniffer.animations=e,this._$sniffer.transitions=e}}]}}));var ml=r(727),fl=r.n(ml);function DatePickerRangeDirective_getDecoratorsApi(){DatePickerRangeDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DatePickerRangeDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DatePickerRangeDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DatePickerRangeDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DatePickerRangeDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DatePickerRangeDirective_createElementDescriptor(e){var t,r=DatePickerRangeDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DatePickerRangeDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DatePickerRangeDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function DatePickerRangeDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DatePickerRangeDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DatePickerRangeDirective_toPropertyKey(e){var t=function DatePickerRangeDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let yl=function DatePickerRangeDirective_decorate(e,t,r,i){var a,n=DatePickerRangeDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DatePickerRangeDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DatePickerRangeDirective_isDataDescriptor(a.descriptor)||DatePickerRangeDirective_isDataDescriptor(i.descriptor)){if(DatePickerRangeDirective_hasDecorators(a)||DatePickerRangeDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DatePickerRangeDirective_hasDecorators(a)){if(DatePickerRangeDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DatePickerRangeDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DatePickerRangeDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class DatePickerRangeDirective{constructor(){e(this),this.templateUrl=fl.a,this.restrict="E",this.controller=Bn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={_start:"=start",_end:"=end",weekNumber:"<?weekNumber",isDisabled:"<?"}}}return{F:DatePickerRangeDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwDatePickerRange"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new DatePickerRangeDirective}}]}}));var vl=r(728),_l=r.n(vl);function DateTimePickerDirective_getDecoratorsApi(){DateTimePickerDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DateTimePickerDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DateTimePickerDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DateTimePickerDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DateTimePickerDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DateTimePickerDirective_createElementDescriptor(e){var t,r=DateTimePickerDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DateTimePickerDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DateTimePickerDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function DateTimePickerDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DateTimePickerDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DateTimePickerDirective_toPropertyKey(e){var t=function DateTimePickerDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let gl=function DateTimePickerDirective_decorate(e,t,r,i){var a,n=DateTimePickerDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DateTimePickerDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DateTimePickerDirective_isDataDescriptor(a.descriptor)||DateTimePickerDirective_isDataDescriptor(i.descriptor)){if(DateTimePickerDirective_hasDecorators(a)||DateTimePickerDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DateTimePickerDirective_hasDecorators(a)){if(DateTimePickerDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DateTimePickerDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DateTimePickerDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class DateTimePickerDirective{constructor(){e(this),this.templateUrl=_l.a,this.restrict="E",this.controller=xn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={_date:"=date",_minDate:"<?minDate",_maxDate:"<?maxDate",isOnlyDate:"<?isOnlyDate",isOnlyTime:"<?isOnlyTime",isYearShown:"<?isYearShown",weekNumber:"<?weekNumber",placeholder:"@placeholder",isDisabled:"<?"}}}return{F:DateTimePickerDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwDateTimePicker"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new DateTimePickerDirective}}]}}));var Cl=r(729),kl=r.n(Cl);function DateTimePickerRangeDirective_getDecoratorsApi(){DateTimePickerRangeDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DateTimePickerRangeDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DateTimePickerRangeDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DateTimePickerRangeDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DateTimePickerRangeDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DateTimePickerRangeDirective_createElementDescriptor(e){var t,r=DateTimePickerRangeDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DateTimePickerRangeDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DateTimePickerRangeDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function DateTimePickerRangeDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DateTimePickerRangeDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DateTimePickerRangeDirective_toPropertyKey(e){var t=function DateTimePickerRangeDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Dl=function DateTimePickerRangeDirective_decorate(e,t,r,i){var a,n=DateTimePickerRangeDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DateTimePickerRangeDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DateTimePickerRangeDirective_isDataDescriptor(a.descriptor)||DateTimePickerRangeDirective_isDataDescriptor(i.descriptor)){if(DateTimePickerRangeDirective_hasDecorators(a)||DateTimePickerRangeDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DateTimePickerRangeDirective_hasDecorators(a)){if(DateTimePickerRangeDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DateTimePickerRangeDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DateTimePickerRangeDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class DateTimePickerRangeDirective{constructor(){e(this),this.templateUrl=kl.a,this.restrict="E",this.controller=Gn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={_isOnlyDate:"=isOnlyDate",_start:"=start",_end:"=end",_defaultCardIsAllDay:"<defaultCardIsAllDay",_defaultCardDuration:"<defaultCardDuration",weekNumber:"<?weekNumber",removeDates:"&",isDisabled:"<?",isRemoveDatesButtonHidden:"<?",isSingleDate:"<?"}}}return{F:DateTimePickerRangeDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwDateTimePickerRange"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new DateTimePickerRangeDirective}}]}}));var El=r(730),bl=r.n(El);function DurationPickerDirective_getDecoratorsApi(){DurationPickerDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!DurationPickerDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=DurationPickerDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:DurationPickerDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=DurationPickerDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function DurationPickerDirective_createElementDescriptor(e){var t,r=DurationPickerDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function DurationPickerDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function DurationPickerDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function DurationPickerDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function DurationPickerDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function DurationPickerDirective_toPropertyKey(e){var t=function DurationPickerDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let wl=function DurationPickerDirective_decorate(e,t,r,i){var a,n=DurationPickerDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function DurationPickerDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(DurationPickerDirective_isDataDescriptor(a.descriptor)||DurationPickerDirective_isDataDescriptor(i.descriptor)){if(DurationPickerDirective_hasDecorators(a)||DurationPickerDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(DurationPickerDirective_hasDecorators(a)){if(DurationPickerDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}DurationPickerDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,DurationPickerDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class DurationPickerDirective{constructor(){e(this),this.templateUrl=bl.a,this.restrict="E",this.controller=Un.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={durationMinutes:"=",minDurationMinutes:"=",maxDurationMinutes:"=",isDisabled:"<?",placeholder:"@",_focusOnCreate:"<?focusOnCreate"}}}return{F:DurationPickerDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwDurationPicker"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new DurationPickerDirective}}]}}));function EllipsisTitleDirective_getDecoratorsApi(){EllipsisTitleDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!EllipsisTitleDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=EllipsisTitleDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:EllipsisTitleDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=EllipsisTitleDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function EllipsisTitleDirective_createElementDescriptor(e){var t,r=EllipsisTitleDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function EllipsisTitleDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function EllipsisTitleDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function EllipsisTitleDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function EllipsisTitleDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function EllipsisTitleDirective_toPropertyKey(e){var t=function EllipsisTitleDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Sl=function EllipsisTitleDirective_decorate(e,t,r,i){var a,n=EllipsisTitleDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function EllipsisTitleDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(EllipsisTitleDirective_isDataDescriptor(a.descriptor)||EllipsisTitleDirective_isDataDescriptor(i.descriptor)){if(EllipsisTitleDirective_hasDecorators(a)||EllipsisTitleDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(EllipsisTitleDirective_hasDecorators(a)){if(EllipsisTitleDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}EllipsisTitleDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,EllipsisTitleDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class EllipsisTitleDirective{constructor(t){e(this),this._$timeout=t,this.restrict="A"}}return{F:EllipsisTitleDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwEllipsisTitle"}},{kind:"method",decorators:[Object(n.Bb)(["$timeout"])],static:!0,key:"create",value:function create(e){return new EllipsisTitleDirective(e)}},{kind:"method",key:"link",value:function link(e,t){const r=t[0];this._$timeout((()=>{e.$watchGroup([()=>r.innerText||r.value,()=>r.scrollWidth,()=>r.offsetWidth],(()=>{r.scrollWidth>r.offsetWidth?r.title=r.innerText||r.value:r.title=""}))}),1e3,!1)}}]}}));var Tl=r(731),Al=r.n(Tl);function FiltersMenuDirective_getDecoratorsApi(){FiltersMenuDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!FiltersMenuDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=FiltersMenuDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:FiltersMenuDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=FiltersMenuDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function FiltersMenuDirective_createElementDescriptor(e){var t,r=FiltersMenuDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function FiltersMenuDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function FiltersMenuDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function FiltersMenuDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function FiltersMenuDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function FiltersMenuDirective_toPropertyKey(e){var t=function FiltersMenuDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Il=function FiltersMenuDirective_decorate(e,t,r,i){var a,n=FiltersMenuDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function FiltersMenuDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(FiltersMenuDirective_isDataDescriptor(a.descriptor)||FiltersMenuDirective_isDataDescriptor(i.descriptor)){if(FiltersMenuDirective_hasDecorators(a)||FiltersMenuDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(FiltersMenuDirective_hasDecorators(a)){if(FiltersMenuDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}FiltersMenuDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,FiltersMenuDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class FiltersMenuDirective{constructor(){e(this),this.templateUrl=Al.a,this.restrict="E",this.controller=Wn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={}}}return{F:FiltersMenuDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwFiltersMenu"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new FiltersMenuDirective}}]}}));var Rl=r(732),Ol=r.n(Rl);function MemberAvatarDirective_getDecoratorsApi(){MemberAvatarDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!MemberAvatarDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=MemberAvatarDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:MemberAvatarDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=MemberAvatarDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function MemberAvatarDirective_createElementDescriptor(e){var t,r=MemberAvatarDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function MemberAvatarDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function MemberAvatarDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function MemberAvatarDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function MemberAvatarDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function MemberAvatarDirective_toPropertyKey(e){var t=function MemberAvatarDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Pl=function MemberAvatarDirective_decorate(e,t,r,i){var a,n=MemberAvatarDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function MemberAvatarDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(MemberAvatarDirective_isDataDescriptor(a.descriptor)||MemberAvatarDirective_isDataDescriptor(i.descriptor)){if(MemberAvatarDirective_hasDecorators(a)||MemberAvatarDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(MemberAvatarDirective_hasDecorators(a)){if(MemberAvatarDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}MemberAvatarDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,MemberAvatarDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class MemberAvatarDirective{constructor(){e(this),this.templateUrl=Ol.a,this.restrict="E",this.controller=jn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={member:"<",memberId:"@memberId",_avatarSize:"@?avatarSize",_showNameTooltip:"<?showNameTooltip"}}}return{F:MemberAvatarDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwMemberAvatar"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new MemberAvatarDirective}}]}}));function NotificationDirective_getDecoratorsApi(){NotificationDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!NotificationDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=NotificationDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:NotificationDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=NotificationDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function NotificationDirective_createElementDescriptor(e){var t,r=NotificationDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function NotificationDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function NotificationDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function NotificationDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function NotificationDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function NotificationDirective_toPropertyKey(e){var t=function NotificationDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Ll='\n<p class="k-notification__title">\n    <strong>\n        #= title #\n    </strong>\n</p>\n# if (allowClose) { #\n<md-button class="md-icon-button pw-icon-btn pw-notification__close-btn">\n    <div class="pw-mdi-icon mdi mdi-close"></div>\n</md-button>\n# } #\n<p class="k-notification__message">\n    #= message #\n</p>\n# if (actionText) { #\n<md-button\n    class="pw-btn pw-notification__action-btn"\n    ng-click="actionHandlers[\'#= actionHandler #\']()"\n>\n    #= actionText #\n</md-button>\n# } #\n';let Ml=function NotificationDirective_decorate(e,t,r,i){var a,n=NotificationDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function NotificationDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(NotificationDirective_isDataDescriptor(a.descriptor)||NotificationDirective_isDataDescriptor(i.descriptor)){if(NotificationDirective_hasDecorators(a)||NotificationDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(NotificationDirective_hasDecorators(a)){if(NotificationDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}NotificationDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,NotificationDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class NotificationDirective{constructor(t,r,i){e(this),this._$translate=t,this._notificationSrv=r,this._platformSrv=i,this.template='<div id="pwNotification" kendo-notification></div>',this.restrict="E"}}return{F:NotificationDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwNotification"}},{kind:"method",decorators:[Object(n.Bb)(["$translate","notificationSrv","platformSrv"])],static:!0,key:"create",value:function create(...e){return new NotificationDirective(...e)}},{kind:"field",key:"_notificationGroups",value:()=>new lt.a},{kind:"method",key:"link",value:function link(e,t){let r=kendo.widgetInstance(c()(t).call(t,"#pwNotification"));r&&r.setOptions({appendTo:"pw-notification",allowHideAfter:1e3,templates:[{type:x.A.Info,template:Ll},{type:x.A.Success,template:Ll},{type:x.A.Warning,template:Ll},{type:x.A.Error,template:Ll}]});const onHide=(e,t)=>{t&&this._notificationGroups.has(t)&&this._notificationGroups.delete(t)},showNotification=(e,r,i)=>{let a=kendo.widgetInstance(c()(t).call(t,"#pwNotification"));if(a){a.setOptions({autoHideAfter:15e3,hideOnClick:!0});let t={allowClose:!0,message:e,actionText:null,actionHandler:null,hide:e=>onHide(0,i)};switch(r){case x.A.Info:t.title=this._$translate.instant("NOTIFICATIONS.INFO_TITLE");break;case x.A.Success:t.title=this._$translate.instant("NOTIFICATIONS.SUCCESS_TITLE");break;case x.A.Warning:t.title=this._$translate.instant("NOTIFICATIONS.WARNING_TITLE");break;case x.A.Error:t.title=this._$translate.instant("NOTIFICATIONS.ERROR_TITLE");break;case x.A.Reload:a.setOptions({autoHideAfter:0,hideOnClick:!1}),t.allowClose=!1,t.title=this._$translate.instant("NOTIFICATIONS.WARNING_TITLE"),t.actionText=this._$translate.instant("BUTTONS.RELOAD"),t.actionHandler="reload",r=x.A.Warning;break;case x.A.Progress:a.setOptions({autoHideAfter:0,hideOnClick:!1}),t.allowClose=!1,t.title=this._$translate.instant("NOTIFICATIONS.PROGRESS_TITLE"),r=x.A.Info}return i&&(this._notificationGroups.has(i)&&this._notificationGroups.get(i).hide(),this._notificationGroups.set(i,a)),a.show(t,r),a}};e.actionHandlers={reload:()=>this._platformSrv.reloadAppAsync()};for(let e of this._notificationSrv.getNotificationQueue())showNotification(e.message,e.type,e.group);this._notificationSrv.addEventListener(showNotification),e.$on("$destroy",(()=>{this._notificationSrv.removeEventListener(showNotification)}))}}]}}));var Nl=r(733),Bl=r.n(Nl);class OnboardingGuyDirective_OnboardingGuyDirective{static get directiveName(){return"pwOnboardingGuy"}static create(...e){return new OnboardingGuyDirective_OnboardingGuyDirective(...e)}constructor(){this.templateUrl=Bl.a,this.restrict="E",this.controller=Yn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={loadType:"@?"}}}var Fl=r(734),$l=r.n(Fl);function OnboardingTipDirective_getDecoratorsApi(){OnboardingTipDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!OnboardingTipDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=OnboardingTipDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:OnboardingTipDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=OnboardingTipDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function OnboardingTipDirective_createElementDescriptor(e){var t,r=OnboardingTipDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function OnboardingTipDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function OnboardingTipDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function OnboardingTipDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function OnboardingTipDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function OnboardingTipDirective_toPropertyKey(e){var t=function OnboardingTipDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let xl=function OnboardingTipDirective_decorate(e,t,r,i){var a,n=OnboardingTipDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function OnboardingTipDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(OnboardingTipDirective_isDataDescriptor(a.descriptor)||OnboardingTipDirective_isDataDescriptor(i.descriptor)){if(OnboardingTipDirective_hasDecorators(a)||OnboardingTipDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(OnboardingTipDirective_hasDecorators(a)){if(OnboardingTipDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}OnboardingTipDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,OnboardingTipDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class OnboardingTipDirective{constructor(){e(this),this.templateUrl=$l.a,this.restrict="E",this.scope=!1}}return{F:OnboardingTipDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwOnboardingTip"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new OnboardingTipDirective}}]}}));function OnCreateDirective_getDecoratorsApi(){OnCreateDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!OnCreateDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=OnCreateDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:OnCreateDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=OnCreateDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function OnCreateDirective_createElementDescriptor(e){var t,r=OnCreateDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function OnCreateDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function OnCreateDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function OnCreateDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function OnCreateDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function OnCreateDirective_toPropertyKey(e){var t=function OnCreateDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Gl=function OnCreateDirective_decorate(e,t,r,i){var a,n=OnCreateDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function OnCreateDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(OnCreateDirective_isDataDescriptor(a.descriptor)||OnCreateDirective_isDataDescriptor(i.descriptor)){if(OnCreateDirective_hasDecorators(a)||OnCreateDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(OnCreateDirective_hasDecorators(a)){if(OnCreateDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}OnCreateDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,OnCreateDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class OnCreateDirective{constructor(t){e(this),this._$timeout=t,this.restrict="A",this.scope={pwOnCreate:"&"}}}return{F:OnCreateDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwOnCreate"}},{kind:"method",decorators:[Object(n.Bb)(["$timeout"])],static:!0,key:"create",value:function create(e){return new OnCreateDirective(e)}},{kind:"method",key:"link",value:function link(e,t){this._$timeout((()=>null==e?void 0:e.pwOnCreate({$element:t})),0,!1)}}]}}));function PreviewImageDirective_getDecoratorsApi(){PreviewImageDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!PreviewImageDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PreviewImageDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PreviewImageDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PreviewImageDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PreviewImageDirective_createElementDescriptor(e){var t,r=PreviewImageDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PreviewImageDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PreviewImageDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function PreviewImageDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PreviewImageDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PreviewImageDirective_toPropertyKey(e){var t=function PreviewImageDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const zl="pw-preview-image--loading";let Ul=function PreviewImageDirective_decorate(e,t,r,i){var a,n=PreviewImageDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PreviewImageDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(PreviewImageDirective_isDataDescriptor(a.descriptor)||PreviewImageDirective_isDataDescriptor(i.descriptor)){if(PreviewImageDirective_hasDecorators(a)||PreviewImageDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PreviewImageDirective_hasDecorators(a)){if(PreviewImageDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PreviewImageDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,PreviewImageDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class PreviewImageDirective{constructor(){e(this),this.restrict="A"}}return{F:PreviewImageDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwPreviewImage"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new PreviewImageDirective}},{kind:"method",key:"link",value:function link(e,t,r){let i=e.$eval(r[PreviewImageDirective.directiveName]);if(!i||!Object(n.mb)(i)||!Object(n.nb)(i))return;t.addClass(zl);let o=new FileReader;o.onload=e=>{let r=a()(`<img class="pw-preview-image__img" src="${e.target.result}">`);r.on("load",(()=>t.removeClass(zl))),t.prepend(r)},o.readAsDataURL(i)}}]}}));var Wl=r(735),jl=r.n(Wl);function PrioritySelectDirective_getDecoratorsApi(){PrioritySelectDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!PrioritySelectDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PrioritySelectDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PrioritySelectDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PrioritySelectDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PrioritySelectDirective_createElementDescriptor(e){var t,r=PrioritySelectDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PrioritySelectDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PrioritySelectDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function PrioritySelectDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PrioritySelectDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PrioritySelectDirective_toPropertyKey(e){var t=function PrioritySelectDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Hl=function PrioritySelectDirective_decorate(e,t,r,i){var a,n=PrioritySelectDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PrioritySelectDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(PrioritySelectDirective_isDataDescriptor(a.descriptor)||PrioritySelectDirective_isDataDescriptor(i.descriptor)){if(PrioritySelectDirective_hasDecorators(a)||PrioritySelectDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PrioritySelectDirective_hasDecorators(a)){if(PrioritySelectDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PrioritySelectDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,PrioritySelectDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class PrioritySelectDirective{constructor(){e(this),this.templateUrl=jl.a,this.restrict="E",this.controller=Kn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={selectedPriorityValue:"=value",isDisabled:"<?",delayRender:"<?"}}}return{F:PrioritySelectDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwPrioritySelect"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new PrioritySelectDirective}}]}}));var Vl=r(736),Yl=r.n(Vl);function PushNotificationsPanelEnableBannerDirective_getDecoratorsApi(){PushNotificationsPanelEnableBannerDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!PushNotificationsPanelEnableBannerDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PushNotificationsPanelEnableBannerDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PushNotificationsPanelEnableBannerDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PushNotificationsPanelEnableBannerDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PushNotificationsPanelEnableBannerDirective_createElementDescriptor(e){var t,r=PushNotificationsPanelEnableBannerDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PushNotificationsPanelEnableBannerDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PushNotificationsPanelEnableBannerDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function PushNotificationsPanelEnableBannerDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PushNotificationsPanelEnableBannerDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PushNotificationsPanelEnableBannerDirective_toPropertyKey(e){var t=function PushNotificationsPanelEnableBannerDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Kl=function PushNotificationsPanelEnableBannerDirective_decorate(e,t,r,i){var a,n=PushNotificationsPanelEnableBannerDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PushNotificationsPanelEnableBannerDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(PushNotificationsPanelEnableBannerDirective_isDataDescriptor(a.descriptor)||PushNotificationsPanelEnableBannerDirective_isDataDescriptor(i.descriptor)){if(PushNotificationsPanelEnableBannerDirective_hasDecorators(a)||PushNotificationsPanelEnableBannerDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PushNotificationsPanelEnableBannerDirective_hasDecorators(a)){if(PushNotificationsPanelEnableBannerDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PushNotificationsPanelEnableBannerDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,PushNotificationsPanelEnableBannerDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class PushNotificationsPanelEnableBannerDirective{constructor(){e(this),this.templateUrl=Yl.a,this.restrict="E",this.controller=Xn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={}}}return{F:PushNotificationsPanelEnableBannerDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwPushNotificationsEnableBanner"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new PushNotificationsPanelEnableBannerDirective}}]}}));var Xl=r(737),ql=r.n(Xl);function RecurrentSelectDirective_getDecoratorsApi(){RecurrentSelectDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!RecurrentSelectDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=RecurrentSelectDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:RecurrentSelectDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=RecurrentSelectDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function RecurrentSelectDirective_createElementDescriptor(e){var t,r=RecurrentSelectDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function RecurrentSelectDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function RecurrentSelectDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function RecurrentSelectDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function RecurrentSelectDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function RecurrentSelectDirective_toPropertyKey(e){var t=function RecurrentSelectDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ql=function RecurrentSelectDirective_decorate(e,t,r,i){var a,n=RecurrentSelectDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function RecurrentSelectDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(RecurrentSelectDirective_isDataDescriptor(a.descriptor)||RecurrentSelectDirective_isDataDescriptor(i.descriptor)){if(RecurrentSelectDirective_hasDecorators(a)||RecurrentSelectDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(RecurrentSelectDirective_hasDecorators(a)){if(RecurrentSelectDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}RecurrentSelectDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,RecurrentSelectDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class RecurrentSelectDirective{constructor(){e(this),this.templateUrl=ql.a,this.restrict="E",this.controller=Zn.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={recurrenceRule:"=recurrenceRule",startDate:"<",isAllDay:"<",isDisabled:"<?",delayRender:"<?",menuClass:"@menuClass"}}}return{F:RecurrentSelectDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwRecurrentSelect"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new RecurrentSelectDirective}},{kind:"method",key:"link",value:function link(e,t){c()(t).call(t,"md-menu-content").addClass(e.$ctrl.menuClass)}}]}}));var Jl=r(738);function ResizeListenerDirective_getDecoratorsApi(){ResizeListenerDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ResizeListenerDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ResizeListenerDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ResizeListenerDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ResizeListenerDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ResizeListenerDirective_createElementDescriptor(e){var t,r=ResizeListenerDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ResizeListenerDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ResizeListenerDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function ResizeListenerDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ResizeListenerDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ResizeListenerDirective_toPropertyKey(e){var t=function ResizeListenerDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Zl=function ResizeListenerDirective_decorate(e,t,r,i){var a,n=ResizeListenerDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ResizeListenerDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ResizeListenerDirective_isDataDescriptor(a.descriptor)||ResizeListenerDirective_isDataDescriptor(i.descriptor)){if(ResizeListenerDirective_hasDecorators(a)||ResizeListenerDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ResizeListenerDirective_hasDecorators(a)){if(ResizeListenerDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ResizeListenerDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ResizeListenerDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class ResizeListenerDirective{constructor(t,r){e(this),this._$rootScope=t,this._$window=r,this.restrict="A"}}return{F:ResizeListenerDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwResizeListener"}},{kind:"method",decorators:[Object(n.Bb)(["$rootScope","$window"])],static:!0,key:"create",value:function create(...e){return new ResizeListenerDirective(...e)}},{kind:"method",key:"link",value:function link(e,t,r){const i=r[ResizeListenerDirective.directiveName];let n,o,s=a()(this._$window).width(),l=a()(this._$window).height();e.resizeSensor=new Jl.ResizeSensor(t,(()=>{let e=a()(this._$window).width(),r=a()(this._$window).height(),d=t.width(),c=t.height();if(e===s&&r===l){let e=d!==n,t=c!==o;(!i||"width"===i&&e||"height"===i&&t)&&this._$rootScope.$broadcast(x.n.ResizeListenerElementResized,{widthChanged:e,heightChanged:t})}else{let t=e!==s,a=r!==l;(!i||"width"===i&&t||"height"===i&&a)&&this._$rootScope.$broadcast(x.n.ResizeListenerWindowResized,{widthChanged:t,heightChanged:a})}s=e,l=r,n=t.width(),o=t.height()}))}}]}}));function ResizerDirective_getDecoratorsApi(){ResizerDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ResizerDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ResizerDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ResizerDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ResizerDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ResizerDirective_createElementDescriptor(e){var t,r=ResizerDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ResizerDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ResizerDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function ResizerDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ResizerDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ResizerDirective_toPropertyKey(e){var t=function ResizerDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ed=function ResizerDirective_decorate(e,t,r,i){var a,n=ResizerDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ResizerDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ResizerDirective_isDataDescriptor(a.descriptor)||ResizerDirective_isDataDescriptor(i.descriptor)){if(ResizerDirective_hasDecorators(a)||ResizerDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ResizerDirective_hasDecorators(a)){if(ResizerDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ResizerDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ResizerDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class ResizerDirective{constructor(t,r,i){e(this),this._$rootScope=t,this._$window=r,this._$document=i,this._previewContainer=a()('<div class="pw-resizer-preview"></div>'),this._preview=a()('\n<div class="pw-resizer-preview__wrapper pw-scheduler__resizer">\n    <div class="pw-scheduler__resizer-line"></div>\n</div>\n'),this._previewContainer.append(this._preview),this.restrict="A",this.scope={isDisabled:"<?",initialSize:"=",sizeMinString:"<sizeMin",forceSizeMin:"<",sizeMaxString:"<sizeMax",forceSizeMax:"<"}}}return{F:ResizerDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwResizer"}},{kind:"method",decorators:[Object(n.Bb)(["$rootScope","$window","$document"])],static:!0,key:"create",value:function create(...e){return new ResizerDirective(...e)}},{kind:"method",key:"link",value:function link(e,t,r){if(e.isDisabled)return void t.hide();this._initAttributes(e,r);let i,n=0,o=0,s=0,l=0,d=a()("#pwBodyWrapper");const onMouseMove=t=>{let r=0;switch(e.resizableDirection){case"horizontal":let i;i="right"===e.contentPosition?n-t.clientX:t.clientX-n;let a=this._calcBoundedSize(e.sizeMin,e.sizeMinIsPercent,this._$window.innerWidth);i<a&&(r=a-i);let c,h=this._calcBoundedSize(e.sizeMax,e.sizeMaxIsPercent,this._$window.innerWidth);i>h&&(r=h-i),c="right"===e.contentPosition?t.clientX-s-r:t.clientX-s+r,this._preview.css({left:c});break;case"vertical":let u;u="bottom"===e.contentPosition?t.clientY-o+d.scrollTop():t.clientY-o;let p=this._calcBoundedSize(e.sizeMin,e.sizeMinIsPercent,this._$window.innerHeight);u<p&&(r=p-u);let m=this._calcBoundedSize(e.sizeMax,e.sizeMaxIsPercent,this._$window.innerHeight);u>m&&(r=m-u),this._preview.css({top:t.clientY-l+r})}t.buttons%2==0&&i(t)};i=t=>{switch(this._previewContainer.detach(),e.resizableDirection){case"horizontal":let r;r="right"===e.contentPosition?n-t.clientX:t.clientX-n;let i=this._calcBoundedSize(e.sizeMin,e.sizeMinIsPercent,this._$window.innerWidth);r<i&&(r=i);let a=this._calcBoundedSize(e.sizeMax,e.sizeMaxIsPercent,this._$window.innerWidth);r>a&&(r=a),e.initialSize=r,e.resizableContent.css({width:r}),this._$rootScope.$broadcast(x.n.ResizerContentResized,{saveSize:!0});break;case"vertical":let s;s="bottom"===e.contentPosition?t.clientY-o+d.scrollTop():t.clientY-o;let l=this._calcBoundedSize(e.sizeMin,e.sizeMinIsPercent,this._$window.innerHeight);s<l&&(s=l);let c=this._calcBoundedSize(e.sizeMax,e.sizeMaxIsPercent,this._$window.innerHeight);s>c&&(s=c);let h=e.resizableContent.height();e.initialSize=s,e.resizableContent.css({height:s,minHeight:s}),this._$rootScope.$broadcast(x.n.ResizerContentResized,{saveSize:!0,oldHeight:h,newHeight:s})}this._$document.off("mousemove",onMouseMove),this._$document.off("mouseup",i)},t.on("mousedown",(d=>{if(0!==d.button)return;d.preventDefault(),e.resizableContent=a()(r.resizableContent),this._previewContainer.removeClass("pw-resizer-preview--horizontal pw-resizer-preview--vertical").addClass(`pw-resizer-preview--${e.resizableDirection}`),this._preview.removeAttr("style");let c=t.offset();switch(e.resizableDirection){case"horizontal":n="right"===e.contentPosition?d.clientX+e.resizableContent.width():d.clientX-e.resizableContent.width(),this._preview.css({height:t.height(),top:c.top,left:c.left}),s=d.clientX-c.left;break;case"vertical":o="bottom"===e.contentPosition?d.offsetY:d.clientY-e.resizableContent.height(),this._preview.css({width:t.width(),top:c.top,left:c.left}),l=d.clientY-c.top}a()("body").append(this._previewContainer),this._$document.on("mousemove",onMouseMove),this._$document.on("mouseup",i)})),e.$on("$destroy",(()=>{switch(e.resizableDirection){case"horizontal":a()(r.resizableContent).css({width:""});break;case"vertical":a()(r.resizableContent).css({minHeight:"",height:""})}}))}},{kind:"method",key:"_initAttributes",value:function _initAttributes(e,t){e.resizableDirection=t[ResizerDirective.directiveName],e.contentPosition=t.contentPosition,e.$watch((()=>e.sizeMinString),(r=>{if(r){let i=Cn()(r);if(!Gs()(i))if(e.sizeMin=i,e.sizeMinIsPercent=Je()(r).call(r,"%"),e.sizeMinIsPercent&&(e.sizeMin/=100),e.forceSizeMin){let r,i=a()(t.resizableContent),n=i.height();if(r=e.sizeMin>n?e.sizeMin:Math.max(e.sizeMin,e.initialSize),i.css({height:r,minHeight:r}),this._$rootScope.$broadcast(x.n.ResizerContentResized,{saveSize:!1,oldHeight:n,newHeight:r}),!e.oldSizeMin){let e=a()("#pwBodyWrapper");requestAnimationFrame((()=>e.scrollTop(-e[0].scrollHeight)))}e.oldSizeMin=e.sizeMin}else e.oldSizeMin=null}})),e.$watch((()=>e.sizeMaxString),(r=>{if(r){let n=Cn()(r);var i;if(!Gs()(n))if(e.sizeMax=n,e.sizeMaxIsPercent=Je()(i=t.sizeMax).call(i,"%"),e.sizeMaxIsPercent&&(e.sizeMax/=100),e.forceSizeMax){let r=a()(t.resizableContent),i=this._calcBoundedSize(e.sizeMax,e.sizeMaxIsPercent,this._$window.innerHeight);r.height()>i&&(r.css({height:i,minHeight:i}),this._$rootScope.$broadcast(x.n.ResizerContentResized,{saveSize:!1}))}}else e.sizeMax=void 0,e.sizeMaxIsPercent=void 0})),e.$watch((()=>e.initialSize),(()=>this._updateInitialSize(e,t)))}},{kind:"method",key:"_updateInitialSize",value:function _updateInitialSize(e,t){let r,i;var n;e.initialSize&&(i=Cn()(e.initialSize),"string"!=typeof e.initialSize?r=!1:Je()(n=e.initialSize).call(n,"%")&&(r=!0,i/=100));switch(e.resizableDirection){case"horizontal":i||(i=e.sizeMin,r=e.sizeMinIsPercent),r&&(i=this._$window.innerWidth*i);let n=this._calcBoundedSize(e.sizeMin,e.sizeMinIsPercent,this._$window.innerWidth);i<n&&(i=n);let o=this._calcBoundedSize(e.sizeMax,e.sizeMaxIsPercent,this._$window.innerWidth);i>o&&(i=o),e.initialSize=i,a()(t.resizableContent).css({width:e.initialSize}),this._$rootScope.$broadcast(x.n.ResizerInitialSizeUpdated);break;case"vertical":i||(i=e.sizeMin,r=e.sizeMinIsPercent),r&&(i=this._$window.innerHeight*i);let s=this._calcBoundedSize(e.sizeMin,e.sizeMinIsPercent,this._$window.innerHeight);i<s&&(i=s);let l=this._calcBoundedSize(e.sizeMax,e.sizeMaxIsPercent,this._$window.innerHeight);i>l&&(i=l),e.initialSize=i,a()(t.resizableContent).css({height:e.initialSize,minHeight:e.initialSize}),this._$rootScope.$broadcast(x.n.ResizerInitialSizeUpdated)}}},{kind:"method",key:"_calcBoundedSize",value:function _calcBoundedSize(e,t,r){return t?r*e:e<0?r+e:e}}]}}));var td=r(739),rd=r.n(td);function ResourcesMenuDirective_getDecoratorsApi(){ResourcesMenuDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ResourcesMenuDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ResourcesMenuDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ResourcesMenuDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ResourcesMenuDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ResourcesMenuDirective_createElementDescriptor(e){var t,r=ResourcesMenuDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ResourcesMenuDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ResourcesMenuDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function ResourcesMenuDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ResourcesMenuDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ResourcesMenuDirective_toPropertyKey(e){var t=function ResourcesMenuDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ad=function ResourcesMenuDirective_decorate(e,t,r,i){var a,n=ResourcesMenuDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ResourcesMenuDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ResourcesMenuDirective_isDataDescriptor(a.descriptor)||ResourcesMenuDirective_isDataDescriptor(i.descriptor)){if(ResourcesMenuDirective_hasDecorators(a)||ResourcesMenuDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ResourcesMenuDirective_hasDecorators(a)){if(ResourcesMenuDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ResourcesMenuDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ResourcesMenuDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class ResourcesMenuDirective{constructor(){e(this),this.templateUrl=rd.a,this.restrict="E",this.controller=eo.controllerName,this.controllerAs="$ctrl",this.scope={}}}return{F:ResourcesMenuDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwResourcesMenu"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new ResourcesMenuDirective}}]}}));var nd=r(740),od=r.n(nd);function ScalesMenuDirective_getDecoratorsApi(){ScalesMenuDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ScalesMenuDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ScalesMenuDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ScalesMenuDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ScalesMenuDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ScalesMenuDirective_createElementDescriptor(e){var t,r=ScalesMenuDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ScalesMenuDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ScalesMenuDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function ScalesMenuDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ScalesMenuDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ScalesMenuDirective_toPropertyKey(e){var t=function ScalesMenuDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let sd=function ScalesMenuDirective_decorate(e,t,r,i){var a,n=ScalesMenuDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ScalesMenuDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ScalesMenuDirective_isDataDescriptor(a.descriptor)||ScalesMenuDirective_isDataDescriptor(i.descriptor)){if(ScalesMenuDirective_hasDecorators(a)||ScalesMenuDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ScalesMenuDirective_hasDecorators(a)){if(ScalesMenuDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ScalesMenuDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ScalesMenuDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class ScalesMenuDirective{constructor(){e(this),this.templateUrl=od.a,this.restrict="E",this.controller=to.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={_schedulerWidget:"<scheduler"}}}return{F:ScalesMenuDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwScalesMenu"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new ScalesMenuDirective}}]}}));var ld=r(741),dd=r.n(ld);function SchedulerContainerDirective_getDecoratorsApi(){SchedulerContainerDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SchedulerContainerDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SchedulerContainerDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SchedulerContainerDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SchedulerContainerDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SchedulerContainerDirective_createElementDescriptor(e){var t,r=SchedulerContainerDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SchedulerContainerDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SchedulerContainerDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function SchedulerContainerDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SchedulerContainerDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SchedulerContainerDirective_toPropertyKey(e){var t=function SchedulerContainerDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let cd=function SchedulerContainerDirective_decorate(e,t,r,i){var a,n=SchedulerContainerDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SchedulerContainerDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SchedulerContainerDirective_isDataDescriptor(a.descriptor)||SchedulerContainerDirective_isDataDescriptor(i.descriptor)){if(SchedulerContainerDirective_hasDecorators(a)||SchedulerContainerDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SchedulerContainerDirective_hasDecorators(a)){if(SchedulerContainerDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SchedulerContainerDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SchedulerContainerDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class SchedulerContainerDirective{constructor(t,r,i,a,n,o,s,l,d,c,h,u){e(this),this._$rootScope=t,this._$log=r,this._$window=i,this._$timeout=a,this._$translate=n,this._appCommonSrv=o,this._googleIntegrationSrv=s,this._htmlHelperSrv=l,this._notificationSrv=d,this._settingsSrv=c,this._telemetrySrv=h,this._trelloIntegrationSrv=u,this.templateUrl=dd.a,this.restrict="E",this.controller=$s.controllerName,this.controllerAs="$ctrl",this.scope={initialWidth:"<initialWidth",initialHeight:"<initialHeight"}}}return{F:SchedulerContainerDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwSchedulerContainer"}},{kind:"method",decorators:[Object(n.Bb)(["$rootScope","$log","$window","$timeout","$translate","appCommonSrv","googleIntegrationSrv","htmlHelperSrv","notificationSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],static:!0,key:"create",value:function create(...e){return new SchedulerContainerDirective(...e)}},{kind:"method",key:"link",value:function link(e,t){var r;this._$scope=e,this._$element=t;const i=a()("#pwBodyWrapper");let n=c()(r=this._$element).call(r,"#pwScheduler");n.kendoScheduler({autoBind:!1,group:{resources:[],orientation:"vertical"},footer:!1,selectable:!0,editable:{confirmation:!1,create:!1,update:!1,move:!0,resize:!0,destroy:!0},edit:e=>e.preventDefault(),templateSettings:{useWithBlock:!1},...this._$scope.$ctrl.schedulerOptions}),this._$scope.$ctrl.schedulerWidget=kendo.widgetInstance(n),this._$scope.$watch((()=>this._appCommonSrv.getSchedulerOrientation()),((e,t)=>{if(e){switch(e){case x.N.Top:this._$element.width(""),requestAnimationFrame((()=>i.scrollTop(-i[0].scrollHeight)));break;case x.N.Left:case x.N.Right:this._$element.css({minHeight:"",height:""});break;case x.N.Bottom:this._$element.css({width:"",minHeight:"",height:""})}t&&e!==t&&(this._adjustSchedulerSize({forceResize:!0}),this._needScrollToSelectedDateTime=!0),this._$rootScope.$broadcast(x.n.SchedulerOrientationChanged)}})),this._$scope.$watch((()=>this._$scope.$ctrl.isSchedulerMini),(e=>{this._adjustSchedulerSize({forceResize:!0})})),this._$scope.$on(x.n.ResizerContentResized,((e,t={})=>{if(this._adjustSchedulerSize({saveSize:t.saveSize}),this._appCommonSrv.getSchedulerOrientation()===x.N.Top){let{newHeight:e,oldHeight:r}=t,a=e-r;a>0&&requestAnimationFrame((()=>i.scrollTop(i.scrollTop()-a)))}})),this._$scope.$on(x.n.ResizerInitialSizeUpdated,((e,t={})=>{this._appCommonSrv.getSchedulerOrientation()===x.N.Top&&requestAnimationFrame((()=>i.scrollTop(-i[0].scrollHeight)))}));const adaptSchedulerWidth=()=>{let e=this._$element.width();this._$scope.$ctrl.isSchedulerMini=e<870,this._$element.toggleClass("pw-scheduler--mini",e<870),this._$element.toggleClass("pw-scheduler--compact",e<1190),this._$element.toggleClass("pw-scheduler--narrow",e>=1190&&e<1500),this._$element.toggleClass("pw-scheduler--medium",e>=1500&&e<1690),this._$element.toggleClass("pw-scheduler--normal",e>=1690)};adaptSchedulerWidth(),this._$scope.$on(x.n.ResizeListenerElementResized,((e,t)=>{this._appCommonSrv.isSchedulerShown()&&(adaptSchedulerWidth(),this._schedulerWidget&&(this._schedulerWidget.view().resize(t.widthChanged),this._needScrollToSelectedDateTime&&(this._needScrollToSelectedDateTime=!1,this._$scope.$ctrl.scrollView(this._appCommonSrv.getSchedulerSelectedDate()))))})),this._$scope.$on(x.n.ResizeListenerWindowResized,((e,t)=>{adaptSchedulerWidth(),this._schedulerWidget&&this._adjustSchedulerSize({forceResize:!0})})),this._$scope.$on(x.n.ChangeSchedulerViewRequested,(()=>{if(this._appCommonSrv.getSchedulerOrientation()!==x.N.Bottom)switch(this._schedulerView){case x.O.OneDay:case x.O.ThreeDay:case x.O.Week:this._$timeout((()=>this._adjustSchedulerSize({forceResize:!0})),0,!1)}}));let o=!0;this._$scope.$watch((()=>this._appCommonSrv.isSchedulerShown()),(e=>{i.toggleClass("pw-body-wrapper--scheduler-shown",!!e),e&&(o?(o=!1,this._$scope.$ctrl.applySchedulerSettings(),this._createDropTargetArea(),this._createClickArea(),this._adjustSchedulerSize({refreshLayout:!0})):this._adjustSchedulerSize(),this._needScrollToSelectedDateTime=!0,this._$rootScope.$broadcast(x.n.SchedulerShown))})),this._$scope.$on(x.n.TaskListsToggled,(()=>{this._adjustSchedulerSize({forceResize:!0})})),this._$scope.$on(x.n.TaskListsOrientationChanged,(()=>{this._adjustSchedulerSize({forceResize:!0})})),t.on("click pwClick dblclick",".k-event",(e=>{if(e.ctrlKey||e.shiftKey||e.metaKey)return;let t=a()(e.target),r=t.closest(".k-event");if(!r[0])return;this._schedulerWidget.select(null);let i=r.data("uid"),n=this._$scope.$ctrl.schedulerWidget.occurrenceByUid(i);if(n&&!n.isTempCard)switch(this._schedulerWidget.select([i]),e.type){case"click":case"pwClick":if("click"===e.type&&this._schedulerView===x.O.Timeline)return;if(e.originalEvent.detail>1)return;t.hasClass("pw-js-card-edit-button")?(this._$rootScope.$broadcast(x.n.CloseDialogsRequested),this._logCardEvent(n,{event:x.X.CardEvents.ContextMenuOpened,data:{by:x.U.MenuButton}}),this._$scope.$ctrl.cardContextMenu.open(e,n)):t.hasClass("pw-js-card-complete-button")?this._$scope.$ctrl.toggleCardIsCompletedByIcon(n):this._$scope.$ctrl.showEditCardDialogAsync(n,r);break;case"dblclick":if(this._settingsSrv.currentSettings.local.editCardDialog.isDetailed)return;if(this._$rootScope.$broadcast(x.n.CloseDialogsRequested),!x.ob.has(n.cardType))return;if(this._logCardEvent(n,{event:x.X.CardEvents.CardDoubleClicked,data:{by:x.U.Mouse}}),n.isCurrentBoardCard){let e=a()(`<a href="${n.cardUrl}"></a>`);a()("body").append(e),e[0].click(),e.remove()}else this._$window.open(n.cardUrl,"_blank")}}));let s=!1;t.on("contextmenu",".k-event",(e=>{let t=a()(e.target).closest(".k-event");t[0]&&(e.preventDefault(),s||(s=!0,this._$timeout((()=>s=!1),250,!1),this._$scope.$ctrl.openContextMenu(t.data("uid"),e)))})),e.$on("$destroy",(()=>{var e;i.removeClass("pw-body-wrapper--scheduler-shown"),B()(e=J()(x.N)).call(e,(e=>i.removeClass(`pw-body-wrapper--scheduler_${e}`))),this._htmlHelperSrv.unbindElementAdded("#pwScheduler")}))}},{kind:"get",key:"_schedulerWidget",value:function _schedulerWidget(){return this._$scope.$ctrl.schedulerWidget}},{kind:"method",key:"_adjustSchedulerSize",value:function _adjustSchedulerSize(e={}){let{saveSize:t,forceResize:r,refreshLayout:i}=e;switch(this._appCommonSrv.getSchedulerOrientation()){case x.N.Top:t&&(this._$scope.$ctrl.schedulerHeight=this._$element.outerHeight());break;case x.N.Left:case x.N.Right:if(t){this._$scope.$ctrl.schedulerWidth=this._$element.outerWidth();let e=a()("#pwTasksLists");e[0]&&(this._$scope.$ctrl.taskListsWidth=e.outerWidth())}break;case x.N.Bottom:t&&(this._$scope.$ctrl.trelloBoardHeight=a()("#surface").outerHeight())}r&&this._schedulerWidget.resize(!0),i&&this._schedulerWidget.refresh()}},{kind:"method",key:"_createDropTargetArea",value:function _createDropTargetArea(){let e,t;const mouseMoveHandler=e=>{switch(this._schedulerView){case x.O.Timeline:this._schedulerWidget.view().updateAutoScroll(e),this._schedulerWidget.view().removeRangeHighlight(),this._schedulerWidget.view().createMouseTargetHighlight(e);break;default:this._schedulerWidget.view().updateMouseTargetHighlight(e)}};let r=null;const retargetTimelineMouseMove=e=>{r&&r.off("mousemove",mouseMoveHandler),e&&e.on("mousemove",mouseMoveHandler),r=e},removeRangeHighlight=()=>{var e;switch(this._schedulerView){case x.O.Timeline:this._schedulerWidget.view().removeRangeHighlight(),retargetTimelineMouseMove(null);break;default:c()(e=a()("#pwScheduler")).call(e,".pw-scheduler-range-highlight").removeClass("pw-scheduler-range-highlight")}};this._$scope.$on(x.n.CardDragStarted,(()=>{this._schedulerView===x.O.Timeline&&this._schedulerWidget.view().startAutoScroll()})),this._$scope.$on(x.n.CardDragEnded,(()=>{removeRangeHighlight(),this._schedulerView===x.O.Timeline&&this._schedulerWidget.view().stopAutoScroll()})),this._schedulerWidget.element.kendoDropTargetArea({filter:".k-scheduler-table td, .timeline-timeline .timeline-itemset .timeline-foreground .timeline-group",group:U.i,dragenter:r=>{var i;if(e=this._trelloIntegrationSrv.isCurrentBoardReadOnly(),!e&&(t=this._getCardCreateOptionsByCell(r.dropTarget,"drag"),t))switch(this._schedulerView){case x.O.Timeline:t?(retargetTimelineMouseMove(t.targetCells[0]),mouseMoveHandler(r)):removeRangeHighlight();break;default:B()(i=t.targetCells).call(i,(e=>e.addClass("pw-scheduler-range-highlight")))}},dragleave:()=>{e||(t=null,removeRangeHighlight())},drop:r=>{if(!e){if(this._trelloIntegrationSrv.fireKeydownEvent("Escape"),r.preventDefault(),t&&this._schedulerView===x.O.Timeline&&(t.range=this._schedulerWidget.view().getRangeHighlightDates()),removeRangeHighlight(),t&&t.targetCells.length>0){let e=this._trelloIntegrationSrv.extractCardIds(a()(r.draggable.currentTarget));if(!e)return;let i=this._getNewCardObject(r,t);i&&this._$scope.$ctrl.createCardByDropAsync({...e,...i})}t=null}}})}},{kind:"method",key:"_createClickArea",value:function _createClickArea(){this._htmlHelperSrv.elementAdded("#pwScheduler",".k-scheduler-layout",(()=>{let e;const t=a()("body"),r=a()("#pwScheduler"),removeRangeHighlight=()=>this._schedulerWidget.view().removeRangeHighlight();let i;const onMouseDown=r=>{if(0!==r.button||this._schedulerWidget.isEventsSelected()||c()(t).call(t,"> .md-open-menu-container.md-active")[0])return;let a=c()(t).call(t,"> .md-panel-outer-wrapper.md-panel-is-showing"),n=[".pw-product-tour"];(!a[0]||a.children("md-tooltip")[0]||xe()(n).call(n,(e=>c()(a).call(a,e))))&&(e=this._getCardCreateOptionsByCell(r.target,"click"),e&&(i="single",t.addClass("pw--creating-calendar-card"),this._schedulerWidget.view().createMouseTargetHighlight(r,e)))},onMouseUp=r=>{if(!e)return;this._schedulerView!==x.O.Month&&(e.range=this._schedulerWidget.view().getRangeHighlightDates()),removeRangeHighlight();let a=this._getNewCardObject(r,e);a&&this._$scope.$ctrl.createCardByClickAsync(a,i),e=null,t.removeClass("pw--creating-calendar-card")},onMouseMove=t=>{e&&(this._schedulerView===x.O.Timeline&&(t.ctrlKey||t.metaKey)||this._schedulerView!==x.O.Timeline&&this._schedulerView!==x.O.Month)&&(i="stretching",this._schedulerWidget.view().updateMouseTargetHighlight(t,e))},onMouseLeave=()=>{t.removeClass("pw--creating-calendar-card"),e&&(e=null,removeRangeHighlight())};let n;switch(this._schedulerView){case x.O.Timeline:n=c()(r).call(r,".timeline-foreground .timeline-group"),n.off("pwMouseUp.pwEvent, pwMouseDown.pwEvent"),n.on("pwMouseUp.pwEvent",onMouseUp),n.on("pwMouseDown.pwEvent",onMouseDown),n.on("pwMouseMove.pwEvent",onMouseMove),this._schedulerWidget.view().addEventListener("rangechange",onMouseLeave),this._schedulerWidget.view().addEventListener("pwMouseLeave",onMouseLeave);break;default:n=c()(r).call(r,".k-scheduler-table.pw-selectable-items-container"),n.off("mousedown mouseup mousemove mouseleave"),n.mousedown(onMouseDown),n.mouseup(onMouseUp),n.mousemove(onMouseMove),n.mouseleave(onMouseLeave)}}))}},{kind:"method",key:"_getCardCreateOptionsByCell",value:function _getCardCreateOptionsByCell(e,t){var r;let i=a()(e);this._schedulerView!==x.O.Timeline&&(i=i.closest("td"));let n,o,s=this._trelloIntegrationSrv.getCurrentBoardId();if(this._schedulerView===x.O.Timeline){let e=this._schedulerWidget.view().getResourceIdByCell(i);if(e!==U.v)switch(this._appCommonSrv.getTimelineResourcesType()){case x.fb.Calendars:s=e;break;case x.fb.Lists:s=null===(r=this._trelloIntegrationSrv.getTrelloListById(e))||void 0===r?void 0:r.boardId}}switch(t){case"click":if(n=this._trelloIntegrationSrv.getTrelloBoardById(s),n){o=x.h.TrelloCard;break}if(n=this._googleIntegrationSrv.getGoogleCalendarById(s),n){o=x.h.GoogleEvent;break}break;case"drag":if(n=this._trelloIntegrationSrv.getTrelloBoardById(s),n){o=x.h.TrelloCard;break}}if(!n||n.isReadOnly)return;let l=!this._schedulerWidget.view().isTimeAvailable,d=n.defaultCardIsAllDay,c=!l&&d?G.b:n.defaultCardDuration||1,h=this._schedulerWidget.view().getCardTargetCells(i,c);return h?{isAllDayView:l,defaultCardIsAllDay:d,defaultCardDuration:c,targetCells:h,cardType:o}:void 0}},{kind:"method",key:"_getNewCardObject",value:function _getNewCardObject(e,t){let r,i=this._schedulerWidget.view(),a=this._schedulerView===x.O.Timeline;if(r=a?i.getSlotByEvent(e):this._schedulerWidget.slotByElement(t.targetCells[0]),!r)return;let o,s,l=t.isAllDayView||r.isDaySlot;t.range?(o=t.range.start,s=t.isAllDayView?Object(n.O)(t.range.end):t.range.end):(o=r.startDate,s=t.isAllDayView&&t.defaultCardIsAllDay?Object(n.a)(o,t.defaultCardDuration-1):l?o:Object(n.c)(o,t.defaultCardDuration));let d={start:o,end:s,isAllDay:l,cardType:t.cardType};if(a){var h;let a=r.resources,n=this._appCommonSrv.getTimelineResourcesType(),o=c()(h=this._schedulerWidget.resources).call(h,(e=>e.name===n)),s=o.field,l=o.multiple?a[s][0]:a[s];l===U.v?d.cardRole=me.c.Milestone:n===x.fb.Labels?(d.cardRole=me.c.Card,d.labels=l===U.k?[]:[{name:r.labelName,color:r.labelColor}]):(d.cardRole=me.c.Card,d[s]=a[s]);let u=i.getCardSortOrderField(),p=i.getCardTargetSortOrder(e,t.targetCells[0]);d[u]=p}else d.cardRole=me.c.Card;return d}},{kind:"get",key:"_schedulerView",value:function _schedulerView(){return this._appCommonSrv.getSchedulerView()}},{kind:"method",key:"_logCardEvent",value:function _logCardEvent(e,t){var r,i;this._telemetrySrv.logSessionEvent(t.event,{isAllDay:e.isAllDay,start:e.realStart||e.start,end:e.realEnd||e.end,cardRole:e.cardRole,cardType:e.cardType,isCurrentBoardCard:null===(r=e.cardType===x.h.TrelloCard&&e.isCurrentBoardCard)||void 0===r||r,isNewCard:null!==(i=e.isTempCard)&&void 0!==i&&i,recurrenceRule:e.recurrenceHeadRule||e.recurrenceRule,priority:e.priority,where:x.W.Scheduler,by:x.U.Mouse,durationMinutes:e.durationMinutes,...t.data})}}]}}));var hd=r(466),ud=r.n(hd);let pd=!1;class CustomDraggable_CustomDraggable extends kendo.ui.Draggable{constructor(...e){super(...e),no()(this).call(this,"dragstart",(e=>e.target.dispatchEvent(new CustomEvent("pwDragStart"))))}static get isDragging(){return pd}destroy(){this._cancelAutoScroll(),super.destroy()}static get autoScrollSettings(){return CustomDraggable_CustomDraggable._autoScrollSettings}static set autoScrollSettings(e){CustomDraggable_CustomDraggable._autoScrollSettings=e}_start(e){if(this.options.autoScroll){var t;let r=e.target;this._currentAutoScrollSettings=c()(t=CustomDraggable_CustomDraggable.autoScrollSettings).call(t,(e=>e.chooseWhen(r)))}pd=!0,super._start(e)}_updateHint(e){let t;switch(this.options.cursorOffset?t={left:e.x.location+this.options.cursorOffset.left,top:e.y.location+this.options.cursorOffset.top}:(this.hintOffset.left+=e.x.delta,this.hintOffset.top+=e.y.delta,Math.abs(this.hintOffset.top-e.y.location)>this.hint.height()/2&&(this.hintOffset.top=e.y.location-Math.ceil(this.hint.height()/2)),this.hintOffset.left+this.hint.width()<=e.x.location&&(this.hintOffset.left=e.x.location-Math.ceil(this.hint.width()/2)),t=a.a.extend({},this.hintOffset)),this.boundaries&&(t.top=Math.min(Math.max(t.top,this.boundaries.y.min),this.boundaries.y.max),t.left=Math.min(Math.max(t.left,this.boundaries.x.min),this.boundaries.x.max)),this.options.axis){case"x":delete t.top;break;case"y":delete t.left}this.hint.css(t)}_cancel(e){this._cancelAutoScroll(),pd=!1,super._cancel(e)}_drag(e){e.preventDefault();let t=this._elementUnderCursor(e),r=e.x.location,i=e.y.location;this.options.autoScroll&&(this._setupAutoScrollStep(r,i),this._cursorElement=t),this._lastEvent=e,this._processMovement(e,t),this.options.autoScroll&&(this._scrollableParent[0]?(this._scrollCompenstation=a.a.extend({},this.hintOffset),this._scrollTimeout||(this._scrollTimeout=vo()((()=>{this._scrollInterval=ud()(25,(()=>{this._autoScroll()}))}),200))):this._cancelAutoScroll()),this.hint&&this._updateHint(e)}_rawAutoScrollVelocity(e,t,r,i){let a={x:0,y:0},n=i.scrollArea,o=kendo.ui.Draggable.utils.scrollableViewPort(r),s=r.scrollLeft(),l=r.scrollTop(),d=r.prop("scrollWidth")-r.innerWidth()-s,c=r.prop("scrollHeight")-r.innerHeight()-l;return(i.workBeyondScrollable||e>o.left&&e<o.right&&t>o.top&&t<o.bottom)&&(e-o.left<n&&s>1?a.x=-(n-(e-o.left)):o.right-e<n&&d>1&&(a.x=n-(o.right-e)),t-o.top<n&&l>1?a.y=-(n-(t-o.top)):o.bottom-t<n&&c>1&&(a.y=n-(o.bottom-t))),a}_adjustScrollVelocity(e,t){e.x=this._limitScrollVelocity(e.x,t),e.y=this._limitScrollVelocity(e.y,t)}_cancelAutoScroll(){this._scrollTimeout&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null),this._scrollInterval&&(ud.a.clear(this._scrollInterval),this._scrollInterval=null)}_limitScrollVelocity(e,t){if(e){let r=Math.exp(Math.log(t.maxVelocity)*Math.abs(e)/t.scrollArea);return r>t.maxVelocity&&(r=t.maxVelocity),e<0&&(r*=-1),r}return e}_setupAutoScrollStep(e,t){let r=this._currentAutoScrollSettings;for(;r;){let i=r.getScrollable();if(i[0]){let a=this._rawAutoScrollVelocity(e,t,i,r);if(a.x||a.y)return this._adjustScrollVelocity(a,r),this._scrollVelocity=a,void(this._scrollableParent=i)}r=r.nextSettings}this._scrollableParent=a()()}}var md=r(742),fd=r.n(md);function SchedulerDirective_getDecoratorsApi(){SchedulerDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SchedulerDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SchedulerDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SchedulerDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SchedulerDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SchedulerDirective_createElementDescriptor(e){var t,r=SchedulerDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SchedulerDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SchedulerDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function SchedulerDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SchedulerDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SchedulerDirective_toPropertyKey(e){var t=function SchedulerDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let yd=function SchedulerDirective_decorate(e,t,r,i){var a,n=SchedulerDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SchedulerDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SchedulerDirective_isDataDescriptor(a.descriptor)||SchedulerDirective_isDataDescriptor(i.descriptor)){if(SchedulerDirective_hasDecorators(a)||SchedulerDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SchedulerDirective_hasDecorators(a)){if(SchedulerDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SchedulerDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SchedulerDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class SchedulerDirective{constructor(){e(this),this.templateUrl=fd.a,this.restrict="E",this.controller=zs.controllerName,this.controllerAs="$ctrl"}}return{F:SchedulerDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwScheduler"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new SchedulerDirective}},{kind:"method",key:"link",value:function link(e,t){{t.click((e=>{e.stopPropagation()}));const e=a()("#trello-root"),r=a()("#board");let i=null;t.mouseenter((()=>{CustomDraggable_CustomDraggable.isDragging?(i=r.scrollLeft(),e.addClass("pw--mouse-over-calendar")):i=null})),t.mouseleave((()=>{i=null,e.removeClass("pw--mouse-over-calendar")})),r.on("scroll",(()=>{null!==i&&r.scrollLeft(i)}))}}}]}}));var vd=r(743),_d=r.n(vd);function SchedulerSidebarDirective_getDecoratorsApi(){SchedulerSidebarDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SchedulerSidebarDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SchedulerSidebarDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SchedulerSidebarDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SchedulerSidebarDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SchedulerSidebarDirective_createElementDescriptor(e){var t,r=SchedulerSidebarDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SchedulerSidebarDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SchedulerSidebarDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function SchedulerSidebarDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SchedulerSidebarDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SchedulerSidebarDirective_toPropertyKey(e){var t=function SchedulerSidebarDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let gd=function SchedulerSidebarDirective_decorate(e,t,r,i){var a,n=SchedulerSidebarDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SchedulerSidebarDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SchedulerSidebarDirective_isDataDescriptor(a.descriptor)||SchedulerSidebarDirective_isDataDescriptor(i.descriptor)){if(SchedulerSidebarDirective_hasDecorators(a)||SchedulerSidebarDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SchedulerSidebarDirective_hasDecorators(a)){if(SchedulerSidebarDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SchedulerSidebarDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SchedulerSidebarDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class SchedulerSidebarDirective{constructor(){e(this),this.templateUrl=_d.a,this.restrict="E",this.controller=Us.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={_schedulerWidget:"<scheduler"}}}return{F:SchedulerSidebarDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwSchedulerSidebar"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new SchedulerSidebarDirective}}]}}));var Cd=r(744),kd=r.n(Cd);function SchedulerToolbarDirective_getDecoratorsApi(){SchedulerToolbarDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!SchedulerToolbarDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=SchedulerToolbarDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:SchedulerToolbarDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=SchedulerToolbarDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function SchedulerToolbarDirective_createElementDescriptor(e){var t,r=SchedulerToolbarDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function SchedulerToolbarDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function SchedulerToolbarDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function SchedulerToolbarDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function SchedulerToolbarDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function SchedulerToolbarDirective_toPropertyKey(e){var t=function SchedulerToolbarDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Dd=function SchedulerToolbarDirective_decorate(e,t,r,i){var a,n=SchedulerToolbarDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function SchedulerToolbarDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(SchedulerToolbarDirective_isDataDescriptor(a.descriptor)||SchedulerToolbarDirective_isDataDescriptor(i.descriptor)){if(SchedulerToolbarDirective_hasDecorators(a)||SchedulerToolbarDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(SchedulerToolbarDirective_hasDecorators(a)){if(SchedulerToolbarDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}SchedulerToolbarDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,SchedulerToolbarDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class SchedulerToolbarDirective{constructor(){e(this),this.templateUrl=kd.a,this.restrict="E",this.controller=Ws.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={_schedulerWidget:"<scheduler"}}}return{F:SchedulerToolbarDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwSchedulerToolbar"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new SchedulerToolbarDirective}}]}}));var Ed=r(745),bd=r.n(Ed);function ShowButtonOnboardingDirective_getDecoratorsApi(){ShowButtonOnboardingDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!ShowButtonOnboardingDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ShowButtonOnboardingDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ShowButtonOnboardingDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ShowButtonOnboardingDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ShowButtonOnboardingDirective_createElementDescriptor(e){var t,r=ShowButtonOnboardingDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ShowButtonOnboardingDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ShowButtonOnboardingDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function ShowButtonOnboardingDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ShowButtonOnboardingDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ShowButtonOnboardingDirective_toPropertyKey(e){var t=function ShowButtonOnboardingDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let wd=function ShowButtonOnboardingDirective_decorate(e,t,r,i){var a,n=ShowButtonOnboardingDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ShowButtonOnboardingDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(ShowButtonOnboardingDirective_isDataDescriptor(a.descriptor)||ShowButtonOnboardingDirective_isDataDescriptor(i.descriptor)){if(ShowButtonOnboardingDirective_hasDecorators(a)||ShowButtonOnboardingDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(ShowButtonOnboardingDirective_hasDecorators(a)){if(ShowButtonOnboardingDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}ShowButtonOnboardingDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,ShowButtonOnboardingDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class ShowButtonOnboardingDirective{constructor(){e(this),this.templateUrl=bd.a,this.restrict="E",this.controller=js.controllerName,this.controllerAs="$ctrl"}}return{F:ShowButtonOnboardingDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwShowButtonOnboarding"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new ShowButtonOnboardingDirective}}]}}));var Sd=r(746),Td=r.n(Sd);function TimeRecordsReportParametersDirective_getDecoratorsApi(){TimeRecordsReportParametersDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TimeRecordsReportParametersDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TimeRecordsReportParametersDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TimeRecordsReportParametersDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TimeRecordsReportParametersDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TimeRecordsReportParametersDirective_createElementDescriptor(e){var t,r=TimeRecordsReportParametersDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TimeRecordsReportParametersDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TimeRecordsReportParametersDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TimeRecordsReportParametersDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TimeRecordsReportParametersDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TimeRecordsReportParametersDirective_toPropertyKey(e){var t=function TimeRecordsReportParametersDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ad=function TimeRecordsReportParametersDirective_decorate(e,t,r,i){var a,n=TimeRecordsReportParametersDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TimeRecordsReportParametersDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TimeRecordsReportParametersDirective_isDataDescriptor(a.descriptor)||TimeRecordsReportParametersDirective_isDataDescriptor(i.descriptor)){if(TimeRecordsReportParametersDirective_hasDecorators(a)||TimeRecordsReportParametersDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TimeRecordsReportParametersDirective_hasDecorators(a)){if(TimeRecordsReportParametersDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TimeRecordsReportParametersDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TimeRecordsReportParametersDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TimeRecordsReportParametersDirective{constructor(){e(this),this.templateUrl=Td.a,this.restrict="E",this.controller=Hs.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={isDisabled:"<?",parameters:"<?",parametersChangedCallback:"&"}}}return{F:TimeRecordsReportParametersDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTimeRecordsReportParameters"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new TimeRecordsReportParametersDirective}}]}}));var Id=r(747),Rd=r.n(Id);function TrelloButtonsDirective_getDecoratorsApi(){TrelloButtonsDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrelloButtonsDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloButtonsDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloButtonsDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloButtonsDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloButtonsDirective_createElementDescriptor(e){var t,r=TrelloButtonsDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloButtonsDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloButtonsDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloButtonsDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloButtonsDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloButtonsDirective_toPropertyKey(e){var t=function TrelloButtonsDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Od=function TrelloButtonsDirective_decorate(e,t,r,i){var a,n=TrelloButtonsDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloButtonsDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrelloButtonsDirective_isDataDescriptor(a.descriptor)||TrelloButtonsDirective_isDataDescriptor(i.descriptor)){if(TrelloButtonsDirective_hasDecorators(a)||TrelloButtonsDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrelloButtonsDirective_hasDecorators(a)){if(TrelloButtonsDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrelloButtonsDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrelloButtonsDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloButtonsDirective{constructor(){e(this),this.templateUrl=Rd.a,this.restrict="E",this.controller=Vs.controllerName,this.controllerAs="$ctrl"}}return{F:TrelloButtonsDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloButtons"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new TrelloButtonsDirective}}]}}));var Pd=r(748),Ld=r.n(Pd);function TrelloCardPopupControlsDirective_getDecoratorsApi(){TrelloCardPopupControlsDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrelloCardPopupControlsDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloCardPopupControlsDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloCardPopupControlsDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloCardPopupControlsDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloCardPopupControlsDirective_createElementDescriptor(e){var t,r=TrelloCardPopupControlsDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloCardPopupControlsDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloCardPopupControlsDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloCardPopupControlsDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloCardPopupControlsDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloCardPopupControlsDirective_toPropertyKey(e){var t=function TrelloCardPopupControlsDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Md=function TrelloCardPopupControlsDirective_decorate(e,t,r,i){var a,n=TrelloCardPopupControlsDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloCardPopupControlsDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrelloCardPopupControlsDirective_isDataDescriptor(a.descriptor)||TrelloCardPopupControlsDirective_isDataDescriptor(i.descriptor)){if(TrelloCardPopupControlsDirective_hasDecorators(a)||TrelloCardPopupControlsDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrelloCardPopupControlsDirective_hasDecorators(a)){if(TrelloCardPopupControlsDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrelloCardPopupControlsDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrelloCardPopupControlsDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloCardPopupControlsDirective{constructor(){e(this),this.templateUrl=Ld.a,this.restrict="E"}}return{F:TrelloCardPopupControlsDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloCardPopupControls"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new TrelloCardPopupControlsDirective}},{kind:"method",key:"link",value:function link(e,t){t.click((e=>{a()(e.target).parents("pw-trello-card-popup-controls")[0]||(e.preventDefault(),e.stopPropagation())}))}}]}}));var Nd=r(749),Bd=r.n(Nd);function TrelloCardPopupDescriptionDirective_getDecoratorsApi(){TrelloCardPopupDescriptionDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrelloCardPopupDescriptionDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloCardPopupDescriptionDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloCardPopupDescriptionDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloCardPopupDescriptionDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloCardPopupDescriptionDirective_createElementDescriptor(e){var t,r=TrelloCardPopupDescriptionDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloCardPopupDescriptionDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloCardPopupDescriptionDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloCardPopupDescriptionDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloCardPopupDescriptionDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloCardPopupDescriptionDirective_toPropertyKey(e){var t=function TrelloCardPopupDescriptionDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Fd=function TrelloCardPopupDescriptionDirective_decorate(e,t,r,i){var a,n=TrelloCardPopupDescriptionDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloCardPopupDescriptionDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrelloCardPopupDescriptionDirective_isDataDescriptor(a.descriptor)||TrelloCardPopupDescriptionDirective_isDataDescriptor(i.descriptor)){if(TrelloCardPopupDescriptionDirective_hasDecorators(a)||TrelloCardPopupDescriptionDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrelloCardPopupDescriptionDirective_hasDecorators(a)){if(TrelloCardPopupDescriptionDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrelloCardPopupDescriptionDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrelloCardPopupDescriptionDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloCardPopupDescriptionDirective{constructor(){e(this),this.templateUrl=Bd.a,this.restrict="E"}}return{F:TrelloCardPopupDescriptionDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloCardPopupDescription"}},{kind:"method",decorators:[Object(n.Bb)([])],static:!0,key:"create",value:function create(){return new TrelloCardPopupDescriptionDirective}},{kind:"method",key:"link",value:function link(e,t){this._$scope=e,this._calendarDescriptionTextarea=a()("textarea",t),this._calendarDescriptionTextarea.on("input",(()=>{this._trelloDescriptionTextarea.val(this._getTrelloDescription())})),this._trelloDescriptionTextarea=t.siblings("textarea"),this._trelloDescriptionTextarea.on("input",(()=>{this._calendarDescriptionTextarea.val(this._getCalendarDescription()).trigger("change")})),this._calendarDescriptionTextarea.val(this._getCalendarDescription()).trigger("change")}},{kind:"method",key:"_getTrelloDescription",value:function _getTrelloDescription(){return this._$scope.$ctrl.getTrelloDescription(this._calendarDescriptionTextarea.val(),this._trelloDescriptionTextarea.val())}},{kind:"method",key:"_getCalendarDescription",value:function _getCalendarDescription(){return this._$scope.$ctrl.getCalendarDescription(this._trelloDescriptionTextarea.val())}}]}}));function TrelloCardPopupInjectorDirective_getDecoratorsApi(){TrelloCardPopupInjectorDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrelloCardPopupInjectorDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloCardPopupInjectorDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloCardPopupInjectorDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloCardPopupInjectorDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloCardPopupInjectorDirective_createElementDescriptor(e){var t,r=TrelloCardPopupInjectorDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloCardPopupInjectorDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloCardPopupInjectorDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloCardPopupInjectorDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloCardPopupInjectorDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloCardPopupInjectorDirective_toPropertyKey(e){var t=function TrelloCardPopupInjectorDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let $d=function TrelloCardPopupInjectorDirective_decorate(e,t,r,i){var a,n=TrelloCardPopupInjectorDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloCardPopupInjectorDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrelloCardPopupInjectorDirective_isDataDescriptor(a.descriptor)||TrelloCardPopupInjectorDirective_isDataDescriptor(i.descriptor)){if(TrelloCardPopupInjectorDirective_hasDecorators(a)||TrelloCardPopupInjectorDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrelloCardPopupInjectorDirective_hasDecorators(a)){if(TrelloCardPopupInjectorDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrelloCardPopupInjectorDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrelloCardPopupInjectorDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloCardPopupInjectorDirective{constructor(t,r,i,a,n){e(this),this._$window=t,this._$log=r,this._$translate=i,this._$mdMenu=a,this._htmlHelperSrv=n,this.restrict="A",this.controller=Ys.controllerName,this.controllerAs="$ctrl"}}return{F:TrelloCardPopupInjectorDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloCardPopupInjector"}},{kind:"method",decorators:[Object(n.Bb)(["$window","$log","$translate","$mdMenu","htmlHelperSrv"])],static:!0,key:"create",value:function create(...e){return new TrelloCardPopupInjectorDirective(...e)}},{kind:"method",key:"link",value:function link(e,t){const r=a()("body");let i=!0;const onDocumentMousedown=()=>{c()(r).call(r,"> .md-open-menu-container.md-active, > .k-animation-container > .k-list-container.k-state-border-up, > .md-panel-is-showing")[0]?(i=!1,t.attr("data-elevation",9999)):(i=!0,t.removeAttr("data-elevation"))},onDocumentClick=e=>{a()(e.target).is(".window-overlay")&&(i||e.stopImmediatePropagation())};this._$window.document.addEventListener("mousedown",onDocumentMousedown,!0),this._$window.document.addEventListener("click",onDocumentClick,!0),e.$on("$destroy",(()=>{this._$window.document.removeEventListener("mousedown",onDocumentMousedown,!0),this._$window.document.removeEventListener("click",onDocumentClick,!0),this._htmlHelperSrv.unbindElementAdded(t)})),t.on("keydown",(e=>{e.which===x.t.Escape&&c()(r).call(r,"> .md-open-menu-container.md-active")[0]&&(this._$mdMenu.hide(),e.stopPropagation())})),t.on("keydown",".k-timepicker",(e=>{e.which===x.t.Escape&&(e.stopPropagation(),t.trigger("focus"))}));let n=this._getCurrentCardShortId();n?(async()=>{let r;await e.$ctrl.loadCalendarCardAsync(n)&&(this._htmlHelperSrv.elementAdded(t,".card-detail-data",(t=>{t.prepend(this._htmlHelperSrv.compileHtml("<pw-trello-card-popup-controls></pw-trello-card-popup-controls>",e,!1))})),this._htmlHelperSrv.elementAdded(t,".card-detail-edit, .description-edit",(t=>{r=c()(t).call(t,"textarea"),r.addClass("pw-trello-card-popup-hidden-description"),r.after(this._htmlHelperSrv.compileHtml("<pw-trello-card-popup-description></pw-trello-card-popup-description>",e,!1))})),this._htmlHelperSrv.elementAdded(t,".edit-controls",(()=>{r&&r.trigger("input")})),this._htmlHelperSrv.elementAdded(t,'img[alt="Planyway Data - DO NOT EDIT!"]',(e=>{e.hide()})),this._htmlHelperSrv.elementAdded(t,".custom-field-detail-item",(e=>{let t=c()(e).call(e,".card-detail-item-header").attr("title");G.c.test(t)&&e.hide()})),this._htmlHelperSrv.elementAdded(t,".js-plugin-card-back-sections",(e=>{this._htmlHelperSrv.elementAdded(e,".plugin-section-title",(t=>{t.html()===U.B&&e.hide()}))})))})():this._$log.error("Unknown context for current Trello card popup!")}},{kind:"method",key:"_getCurrentCardShortId",value:function _getCurrentCardShortId(){let e=this._$window.location.pathname.match(/^\/c\/(\w+)/);if(e)return e[1]}}]}}));const xd=pe()('\n<div class="k-header k-calendar-header">\n    <a href="#" class="k-button k-title pw-link"></a>\n    <span class="k-calendar-nav">\n        <a href="#" class="k-button k-button-icon k-prev-view"><span class="mdi mdi-chevron-left"></span></a>\n        <a href="#" class="k-button k-button-icon k-next-view"><span class="mdi mdi-chevron-right"></span></a>\n        <a href="#" class="k-button k-button-icon k-close"><span class="mdi mdi-close"></span></a>\n    </span>\n</div>\n').call('\n<div class="k-header k-calendar-header">\n    <a href="#" class="k-button k-title pw-link"></a>\n    <span class="k-calendar-nav">\n        <a href="#" class="k-button k-button-icon k-prev-view"><span class="mdi mdi-chevron-left"></span></a>\n        <a href="#" class="k-button k-button-icon k-next-view"><span class="mdi mdi-chevron-right"></span></a>\n        <a href="#" class="k-button k-button-icon k-close"><span class="mdi mdi-close"></span></a>\n    </span>\n</div>\n'),Gd={month:0,year:1,decade:2,century:3};class CustomCalendar_CustomCalendar extends kendo.ui.Calendar{constructor(e,t){const r=a()(e).scope();if(void 0===(t={...t,month:{weekNumber:"<span>#= data.weekNumber #</span>"},disableDates:()=>r.$ctrl.isDisabled}).footer){let e=CustomCalendar_CustomCalendar.$injector.get("$translate");t.footer=e.instant("BUTTONS.TODAY")}super(e,t),this._pwOnBlur=e=>{if(!this._active)return;let t=e.target;for(;t;){if(t===this._table[0])return;t=t.parentNode}this._removeClassProxy()},document.addEventListener("mousedown",this._pwOnBlur,!0),document.addEventListener("pwMouseDown",this._pwOnBlur,!0),r.$on("$destroy",(()=>this.destroy()))}destroy(){document.removeEventListener("mousedown",this._pwOnBlur,!0),document.removeEventListener("pwMouseDown",this._pwOnBlur,!0),super.destroy()}_todayClick(e){e.preventDefault();let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(this.options.disableDates(r))return;let i=Gd[this.options.depth];0===this._view.compare(this._current,r)&&this._index===i&&(this._changeView=!1),this.options.max&&t>this.options.max&&(t=new Date(this.options.max)),this._value=t,this.navigate(r,i),this.trigger("change")}_header(){let e=a()(xd);this._title=c()(e).call(e,".k-title"),this._title.on("click",(()=>{this._active=!1!==this.options.focusOnNav,this.navigateUp()})),this._prevArrow=c()(e).call(e,".k-prev-view"),this._prevArrow.on("click",(()=>{this._active=!1!==this.options.focusOnNav,this.navigateToPast()})),this._nextArrow=c()(e).call(e,".k-next-view"),this._nextArrow.on("click",(()=>{this._active=!1!==this.options.focusOnNav,this.navigateToFuture()})),this._closeBtn=c()(e).call(e,".k-close"),this._closeBtn.on("click",(()=>{this.options.close()})),this.element.append(e)}}const zd=pe()('\n<div class="k-calendar-header">\n    <a href="#" class="k-button k-title pw-link"></a>\n    <span class="k-calendar-nav">\n        <a href="#" class="k-button k-button-icon k-prev-view"><span class="mdi mdi-chevron-left"></span></a>\n        <a href="#" class="k-button k-button-icon k-next-view"><span class="mdi mdi-chevron-right"></span></a>\n        <a href="#" class="k-button k-button-icon k-close"><span class="mdi mdi-close"></span></a>\n    </span>\n</div>\n').call('\n<div class="k-calendar-header">\n    <a href="#" class="k-button k-title pw-link"></a>\n    <span class="k-calendar-nav">\n        <a href="#" class="k-button k-button-icon k-prev-view"><span class="mdi mdi-chevron-left"></span></a>\n        <a href="#" class="k-button k-button-icon k-next-view"><span class="mdi mdi-chevron-right"></span></a>\n        <a href="#" class="k-button k-button-icon k-close"><span class="mdi mdi-close"></span></a>\n    </span>\n</div>\n');class CustomCalendarRange_CustomCalendarRange extends kendo.ui.MultiViewCalendar{constructor(e,t){super(e,t)}todayClick(e){this._todayClick(e)}_todayClick(e){let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=this.options.disableDates,a=!1;e.preventDefault(),i(r)||(this._value=r,"multiple"===this.options.selectable&&(this._selectDates=[r]),"range"===this.options.selectable&&(this.rangeSelectable.clear(!0),this._range={start:r,end:r}),"month"===this._currentView.name&&this._dateInViews(r)||(a=!0),this.navigate(r,this.options.depth),"single"===this.options.selectable&&(this.selectable._lastActive=null),a&&this.trigger("navigate"),this.trigger("change"))}_header(){let e=a()(zd);this._closeBtn=c()(e).call(e,".k-close"),this.options.hideCloseBtn?this._closeBtn.hide():this._closeBtn.on("click",(()=>{this.options.close()})),this.element.prepend(e),super._header()}_updateHeader(){var e;this._navContainer||(this._navContainer=c()(e=this.element).call(e,".k-calendar-nav"));super._updateHeader()}}kendo.ui.Sortable.fn.events.push("moveHint","droppedToCalendar");class CustomSortable_CustomSortable extends kendo.ui.Sortable{constructor(e,t){super(e,t)}_createDraggable(){let e=super._createDraggable();return e.setOptions({group:this.options.group}),e}_dragstart(e){super._dragstart(e),e.isDefaultPrevented()||a()("body").addClass("pw--dragging-item")}_drag(e){this.trigger("moveHint",{event:e,elementUnderCursor:this._findElementUnderCursor(e)}),super._drag(e)}_dragend(e){if(a()("body").removeClass("pw--dragging-item"),a()(this._findElementUnderCursor(e)).closest("#pwScheduler")[0])return e.sender.hint.remove(),this._cancel(),void this.trigger("droppedToCalendar");super._dragend(e)}_dragcancel(){a()("body").removeClass("pw--dragging-item"),super._dragcancel()}_isCursorAfterLast(e,t){let r=e.items(),i=r.last();i.is(":hidden")&&r.length>=2&&(i=a()(r[r.length-2]));let n,o=kendo.getOffset(i);return o.top+=kendo._outerHeight(i),o.left+=kendo._outerWidth(i),n=this._isFloating(i)?o.left-t.x.location:o.top-t.y.location,n<0}_movePlaceholder(e,t,r){r.direction=t,super._movePlaceholder(e,t,r)}_isFloating(e){let t=super._isFloating(e);if(!t){let r=e.parent();t=r&&/flex/.test(r.css("display"))&&/row/.test(r.css("flex-direction"))}return t}}const Ud=pe()('\n<li\n    data-time="#= data.time #"\n    class="k-item"\n    tabindex="-1"\n    unselectable="on"\n>\n    <md-menu-item class="pw-menu-item">\n        <md-button\n            class="pw-menu-item-btn k-timepicker-item-btn"\n            # if (data.isDisabled) { #\n            disabled\n            # } #\n        >\n            <div class="pw-menu-item-btn__text">\n                #= data.text #\n            </div>\n        </md-button>\n    </md-menu-item>\n</li>\n').call('\n<li\n    data-time="#= data.time #"\n    class="k-item"\n    tabindex="-1"\n    unselectable="on"\n>\n    <md-menu-item class="pw-menu-item">\n        <md-button\n            class="pw-menu-item-btn k-timepicker-item-btn"\n            # if (data.isDisabled) { #\n            disabled\n            # } #\n        >\n            <div class="pw-menu-item-btn__text">\n                #= data.text #\n            </div>\n        </md-button>\n    </md-menu-item>\n</li>\n'),Wd="pw-menu-item--selected";class CustomTimePicker_CustomTimePicker extends kendo.ui.TimePicker{constructor(e,t){!t.min&&t.max&&(t.min=Object(n.O)(t.max)),!t.max&&t.min&&(t.max=Object(n.N)(t.min)),super(e,t),this.element.css({width:""}),this.options.readonly&&this.element.prop("readonly",!0),a()(".md-dialog-container").on("mousedown",(()=>this.timeView.close()));const r=a()(e).scope(),i=CustomTimePicker_CustomTimePicker.$injector.get("$compile");this._$scope=r,this.timeView.template=kendo.template(Ud,{useWithBlock:!1}),this.timeView.refresh=function(){var e;let t=new Date(this.options.min),a=Object(n.w)(t,this.options.max)?Object(n.a)(this.options.max,1):new Date(this.options.max),o=a.getTimezoneOffset()-t.getTimezoneOffset(),s=o<0,l=kendo.TimeView.getMilliseconds(t),d=kendo.TimeView.getMilliseconds(a),h=new Date(2100,0,1);h.setMinutes(-this.options.interval);let u,p=kendo.TimeView.getMilliseconds(h),m=this.options.interval*kendo.date.MS_PER_MINUTE;l!==d||p===d?(s&&(d+=o*kendo.date.MS_PER_MINUTE),l>d&&(d+=kendo.date.MS_PER_DAY),u=(d-l)/m+1):u=s?(kendo.date.MS_PER_DAY+o*kendo.date.MS_PER_MINUTE)/m:kendo.date.MS_PER_DAY/m,this._dates=[],this._times={};let f="",y=new Date(t),v=jr()(u);for(let e=0;e<u;e++){if(e>0&&kendo.date.setTime(y,m,s),d&&e===v){let e=kendo.TimeView.getMilliseconds(y);y>t&&(e+=kendo.date.MS_PER_DAY),e>d&&(y=new Date(a))}this._dates.push(kendo.TimeView.getMilliseconds(y));let r={time:kendo.toString(y,this.options.format,this.options.culture),isDisabled:this.options.disable};this._times[r.time]=new Date(y);let i=e*m;if(i===kendo.date.MS_PER_DAY&&(i-=1),this.options.isOnlyDuration)r.text=Object(n.E)(i+l)||"0m";else{let e=this.options.showDuration&&Object(n.E)(i);r.text=e?`${r.time} (${e})`:r.time}f+=this.template(r)}this._html(f),i(this.ul)(r),this.list.addClass("k-timepicker-list pw-menu-content pw-menu-content--selection_single"),this.ul.css({overflow:""}),this.options.padding=8,this.options.height=7*c()(e=this.ul).call(e,"md-menu-item").height()-2*this.options.padding},this.timeView.select=function(e){if(this.options.disable)return;let t,r,i=!1;var a;("string"==typeof e?t=this._parse(e):e instanceof Date?t=e:(r=e,i=!0),t)&&(this._current&&Object(n.w)(this._times[this._current.data("time")],t)?(r=this._current,i=!0):c()(a=this.ul).call(a,"> li").each(((e,a)=>{let o=this._times[a.getAttribute("data-time")];if(o<=t&&(r=[a],Object(n.w)(o,t)))return i=!0,!1})));this.current(this._distinctSelection(r),i)},this.timeView.current=function(e,t){if(void 0===e)return this._current;var r;this._current&&c()(r=this._current).call(r,"> .pw-menu-item").removeClass(Wd);e&&(e=a()(e),t&&c()(e).call(e,"> .pw-menu-item").addClass(Wd),this.scroll(e[0])),this._current=e},this.timeView.scroll=function(e){e&&void 0!==this.options.padding&&this.list.scrollTop(e.offsetTop-this.options.height/2+this.options.padding)},this.timeView.move=function(e){switch(e.keyCode){case Kr()(kendo).UP:case Kr()(kendo).DOWN:if(e.altKey)return void this.toggle(Kr()(kendo).DOWN);let t;e.preventDefault(),t=e.keyCode===Kr()(kendo).DOWN?this._current?this._current[0].nextSibling:this.ul[0].firstChild:this._current?this._current[0].previousSibling:this.ul[0].lastChild,t&&this.select(t),this.options.isOnlyDuration?this.options.change(formatDateAsDuration(this._times[this._current.data("time")])):this.options.change(this._current.data("time"));break;case Kr()(kendo).ENTER:case Kr()(kendo).TAB:case Kr()(kendo).ESC:e.preventDefault(),this._current&&this.options.change(this._times[this._current.data("time")],!0),this.close()}},this.timeView._click=function(e){let t=a()(e.currentTarget).closest("li");e.isDefaultPrevented()||(this.select(t),this.options.change(this._times[t.data("time")],!0),this.close())},this.timeView.ul.on("click","button",(e=>this.timeView._click(e))),this.timeView._adjustListWidth=function(){this.list.css("min-width",this.options.anchor[0].offsetWidth)},this.timeView._parse=function(e){if(e instanceof Date)return e;if(!e)return;let t;if(this.options.isOnlyDuration){var r,i;let a=S()(r=R()(i=e.split(" ")).call(i,(e=>ze()(e).call(e,"h")?kendo.parseDate(e,"H"):ze()(e).call(e,"m")?kendo.parseDate(e,"mm"):void 0))).call(r,(e=>e));t=a[1]?Object(n.c)(a[0],a[1].getMinutes()):a[0]}else t=kendo.parseDate(e,this.options.parseFormats,this.options.culture);return t&&(t=Object(n.Eb)(this.options.min,t),t<this.options.min&&(t=Object(n.a)(t,1))),t},this._$scope.$on("$destroy",(()=>this.destroy()))}_editable(e){super._editable(e),e.readonly||e.disable||(this.options.focusOnCreate&&this.element.trigger("focus"),this.element.on("click",(()=>{this.options.readonly||this.timeView.open()})),this.element.on("focus",(()=>{this.element[0].selectionEnd-this.element[0].selectionStart==0&&this.element.trigger("select"),this.options.readonly||this.timeView.open()})),this.element.on("keypress",(e=>{if(e.keyCode===Kr()(kendo).ENTER){let t=this.element.val();t!==this._oldText&&this._change(t),e.stopPropagation()}}))),this.wrapper.on("click",(e=>{e.preventDefault(),e.stopPropagation()}))}_keydown(e){e.keyCode===Kr()(kendo).ESC&&this.timeView.popup.visible()&&e.stopPropagation(),this._keyboardSelection=e.keyCode===Kr()(kendo).UP||e.keyCode===Kr()(kendo).DOWN||e.keyCode===Kr()(kendo).ESC,this._keyboardSelection&&(this.timeView.popup.visible()||e.altKey)?this.timeView.move(e):e.keyCode!==Kr()(kendo).ENTER&&(this._typing=!0)}_change(e){if(e){if("string"==typeof e){if(this.options.readonly||this.options.disable)return;e=pe()(e).call(e)}}else e=this._old;let t=this._update(e);t?Object(n.w)(t,this._old)||(this._old=t,this._oldText=this.element.val(),this._typing||this.element.trigger("change"),this.trigger("change")):this._update(this._old),this._typing=!1}_update(e){let t=this.timeView._parse(e);if(Object(n.w)(this.options.min,this.options.max)||Object(n.ob)(t,this.options.min,this.options.max)||(t=null),this._value=t,this._dateInput&&t)this._dateInput.value(t||e);else{let r=this.element.val(),i=kendo.toString(t||e,this.options.format,this.options.culture);this.options.isOnlyDuration&&(i=t?formatDateAsDuration(t):e||"0h"),this.element.val(i),r!==i&&this.element.trigger("change")}return this.timeView.value(t),t}}function formatDateAsDuration(e){if(e){let t=e.getHours(),r=e.getMinutes();return t||r?t&&r?`${t}h ${r}m`:t?`${t}h`:`${r}m`:"0m"}}Do()(CustomTimePicker_CustomTimePicker,"$injector",void 0);var jd=r(750),Hd=r.n(jd),Vd=r(751),Yd=r.n(Vd),Kd=r(752),Xd=r.n(Kd),qd=r(753),Qd=r.n(qd),Jd=r(754),Zd=r.n(Jd);function TrelloInjectorDirective_getDecoratorsApi(){TrelloInjectorDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;B()(r=["method","field"]).call(r,(function(r){B()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}C()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(B()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),B()(e).call(e,(function(e){if(!TrelloInjectorDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==_()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];y()(o).call(o,_()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return C()(t,m.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return R()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloInjectorDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:u()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloInjectorDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:R()(e).call(e,this.fromElementDescriptor,this)};return C()(t,m.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloInjectorDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloInjectorDirective_createElementDescriptor(e){var t,r=TrelloInjectorDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloInjectorDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloInjectorDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloInjectorDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloInjectorDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloInjectorDirective_toPropertyKey(e){var t=function TrelloInjectorDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[D.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const ec=[CustomCalendar_CustomCalendar,CustomCalendarRange_CustomCalendarRange,CustomDraggable_CustomDraggable,CustomScheduler_CustomScheduler,CustomSortable_CustomSortable,CustomTimePicker_CustomTimePicker];let tc=function TrelloInjectorDirective_decorate(e,t,r,i){var a,n=TrelloInjectorDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloInjectorDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=c()(t).call(t,isSameElement)))if(TrelloInjectorDirective_isDataDescriptor(a.descriptor)||TrelloInjectorDirective_isDataDescriptor(i.descriptor)){if(TrelloInjectorDirective_hasDecorators(a)||TrelloInjectorDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(TrelloInjectorDirective_hasDecorators(a)){if(TrelloInjectorDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}TrelloInjectorDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(R()(a=s.d).call(a,TrelloInjectorDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloInjectorDirective{constructor(t,r,i,n,o,s,l,d,c,h,u,p,m,f,y,v,_){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$timeout=n,this._$window=o,this._$translate=s,this._$mdMenu=l,this._appCommonSrv=c,this._dialogSrv=h,this._htmlHelperSrv=u,this._notificationSrv=p,this._onboardingSrv=m,this._platformSrv=f,this._settingsSrv=y,this._telemetrySrv=v,this._trelloIntegrationSrv=_,d.defaultIconSet(this._platformSrv.getPlatformUrl(Hd.a),16).iconSet("icons-16",this._platformSrv.getPlatformUrl(Yd.a),16).iconSet("icons-24",this._platformSrv.getPlatformUrl(Xd.a),24).iconSet("icons-32",this._platformSrv.getPlatformUrl(Qd.a),32).iconSet("icons-56",this._platformSrv.getPlatformUrl(Zd.a),56),this.restrict="A",this._$rootScope.$on(x.n.SchedulerShown,(()=>{if(this._showButtonOnboardingShown){this._showButtonOnboardingShown=!1,this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.ShowButtonPassed),a()(".pw-js-button-onboarding").remove();try{localStorage.planywayOnboardingButtonPassed=!0}catch(e){}this._appCommonSrv.isSchedulerInPreview()||(this._settingsSrv.currentSettings.global.isOnboardingButtonPassed=!0,this._settingsSrv.saveGlobalAsync())}}))}}return{F:TrelloInjectorDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloInjector"}},{kind:"method",decorators:[Object(n.Bb)(["$injector","$rootScope","$log","$timeout","$window","$translate","$mdMenu","$mdIconProvider","appCommonSrv","dialogSrv","htmlHelperSrv","notificationSrv","onboardingSrv","platformSrv","settingsSrv","telemetrySrv","trelloIntegrationSrv"])],static:!0,key:"create",value:function create(...e){return new TrelloInjectorDirective(...e)}},{kind:"method",key:"link",value:async function link(e,t){try{let e=this._appCommonSrv.getLanguage();this._$translate.negotiateLocale(e)&&await this._$translate.use(e),await this._$translate("MISC.PLANYWAY")}catch(e){this._$log.error("Planyway failed to set current language:"),this._$log.error(e),this._telemetrySrv.logError("Planyway failed to set current language",e,{class:this.constructor.name,method:this.link.name})}for(let e of ec)e.$injector=this._$injector,kendo.ui.plugin(e);this._trelloIntegrationSrv.initMemberAsync();const r=a()("body");this._injectGlobalElements(r),this._injectBoardElements(r,e),r.append(this._htmlHelperSrv.compileHtml("<pw-notification></pw-notification>",e)),r.append(this._htmlHelperSrv.compileHtml("<pw-push-notifications-enable-banner></pw-push-notifications-enable-banner>",e));let i,o=!1,s=!1,l=!1,d=!1;r.on("mousedown pointerdown",(e=>{o=!1,s=!1,i=null;let t=a()(e.target);if(t.hasClass("md-input")||t.hasClass("k-input"))return i=!t.attr("readonly")&&t.closest(".pw-js-mousedown-menu")[0],void(o=!0);t.closest("md-menu-content")[0]&&(s=!0),t.closest("md-menu-item")[0]&&(d=!0)})),r.on("mouseup pointerup",(e=>{if(l=!1,s)return void(s=!1);if(d)return void(d=!1);if(!c()(r).call(r,"> .md-open-menu-container.md-active")[0])return;let t=a()(e.target);t.closest("md-menu-content")[0]||t.closest("md-menu-item")[0]||i||(l=!0,3!==e.which&&this._$mdMenu.hide())})),this._$window.document.addEventListener("click",(e=>{if(o)o=!1;else{if(l||c()(r).call(r,"> .md-open-menu-container.md-active")[0]){let t=a()(e.target);if(t.closest("md-menu-content")[0])return;if(t.closest("md-menu")[0])return;if(t.closest(".k-list-container")[0])return;if(t.closest(".k-input")[0])return}else{if(!c()(r).call(r,"> .k-animation-container > .k-list-container.k-state-border-up")[0])return;{let t=a()(e.target);if(t.closest(".k-list-container")[0])return;if(t.closest(".k-input")[0])return}}Object(n.tb)(c()(r).call(r,"> .md-panel-is-showing > .md-panel, > .md-dialog-container > md-dialog")),e.stopImmediatePropagation(),e.preventDefault()}}),!0),this._$rootScope.$on(x.n.CloseDialogsRequested,(()=>{c()(r).call(r,"> .md-open-menu-container.md-active")[0]&&this._$mdMenu.hide()})),this._$window.document.addEventListener("keydown",(t=>{if(x.qb.has(t.which)){if(a()(this._$window.document.activeElement).closest(".pw-dialog")[0])return;let r=kendo.widgetInstance(a()("#pwScheduler"));if(r){let i=r.getSelectedEvents(),n=a()(".pw-card:hover",r.element);if(n[0]){let e=n.data("uid");if(A()(i).call(i,(t=>t.uid!==e))){r.select(null);let t=r.occurrenceByUid(e);if(t.isReadOnly)return;r.select([e]),i=[t]}}else if(!r.element.is(":hover"))return;i.length>0&&(t.preventDefault(),t.stopImmediatePropagation(),e.$broadcast(x.n.CardKeydown,{keyCode:t.which,keyModifiers:{altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey},selectedCards:i}))}}else if(t.which===x.t.Escape){if(a()(this._$window.document.activeElement).closest(".pw-dialog")[0])return;if(c()(r).call(r,"> .md-open-menu-container.md-active")[0])return this._$mdMenu.hide(),void t.stopPropagation();let e=kendo.widgetInstance(a()("#pwScheduler"));e&&e.isEventsSelected()&&(e.select(null),t.stopPropagation())}}),!0)}},{kind:"method",key:"_injectGlobalElements",value:function _injectGlobalElements(e){this._htmlHelperSrv.elementAdded(e,'a[href^="/signup"]',(()=>{this._$window.opener||this._showOnboardingGuyAsync("signIn")}),!0),this._htmlHelperSrv.elementAdded(e,".js-boards-page",(()=>{this._trelloIntegrationSrv.isAuthorized()?(this._appCommonSrv.sendLaunchAsync(),this._showOnboardingGuyAsync("openBoard")):this._onboardingSrv.isInOnboarding?this._showLoginDialogAsync():this._showOnboardingGuyAsync("openBoard")}),!0),this._injectGlobalListeners()}},{kind:"method",key:"_injectGlobalListeners",value:function _injectGlobalListeners(){this._$window.document.addEventListener(x.n.TrelloContextError,(e=>{if(e.detail){let t=new Error(e.detail.message);t.originalError=e.detail.originalError,this._$log.error("Planyway injected Trello context error:"),this._$log.error(t),this._telemetrySrv.logError("Planyway injected Trello context error",t,{class:this.constructor.name,method:this._injectGlobalListeners.name})}})),this._htmlHelperSrv.injectScript(((e,t,r)=>{document.addEventListener(e,(e=>{let i=e.detail;if(i)try{if(!window.rpc)return;function subscribe(){window.rpc.currentSubscriptions[i]||(window.rpc.subscribe("Board",i,["clientActions","updates"]),delete window.rpc.currentSubscriptions[i])}window.planywaySubscribedBoardIds||(window.planywaySubscribedBoardIds=[]),window.planywaySubscribedBoardIds[r](i)||(window.planywaySubscribedBoardIds.push(i),subscribe(),window.rpc.on("reconnect",subscribe))}catch(e){document.dispatchEvent(new CustomEvent(t,{detail:{message:"Failed to subscribe Trello board",originalError:e.toString()}}))}}))}),x.n.TrelloSyncSubscribeRequested,x.n.TrelloContextError,"includes"),this._htmlHelperSrv.injectScript(((e,t,r)=>{try{if(!window.rpc)return;window.rpc.on("updateModels",(t=>{document.dispatchEvent(new CustomEvent(e,{detail:t}))})),window.rpc.on("deleteModels",(e=>{document.dispatchEvent(new CustomEvent(t,{detail:e}))}))}catch(e){document.dispatchEvent(new CustomEvent(r,{detail:{message:"Failed to subscribe Trello changes",originalError:e.toString()}}))}}),x.n.TrelloSyncUpdate,x.n.TrelloSyncDelete,x.n.TrelloContextError),this._htmlHelperSrv.injectScript(((e,t)=>{document.addEventListener(e,(e=>{try{e.detail&&document.dispatchEvent(new KeyboardEvent(e.detail.event,{key:e.detail.key}))}catch(e){document.dispatchEvent(new CustomEvent(t,{detail:{message:"Failed to dispatch Trello keyboard event",originalError:e.toString()}}))}}))}),x.n.TrelloFireKeyRequested,x.n.TrelloContextError)}},{kind:"method",key:"_injectBoardElements",value:function _injectBoardElements(e,t){let r;this._htmlHelperSrv.elementAdded(e,"#surface",(e=>{e.wrap('<div id="pwBodyWrapper" class="pw-body-wrapper"></div>'),r=a()("#pwBodyWrapper")})),t.$watch((()=>this._appCommonSrv.isUiPreconditionsPassed),(e=>{r&&r.toggleClass("pw-body-wrapper--hidden",!e)})),this._htmlHelperSrv.elementAdded(e,".board-main-content",(async i=>{if(!r)return;let n=this._htmlHelperSrv.compileElement(i,t);if(n.$$destroyed)return;if(this._notificationSrv.clearNotificationQueue(),n.trelloButtons=this._htmlHelperSrv.compileHtml("<pw-trello-buttons></pw-trello-buttons>",n),this._htmlHelperSrv.elementAdded(e,"#header",(e=>c()(e).call(e,"> :last-child").prepend(n.trelloButtons)),!0),n.boardWrapper=this._htmlHelperSrv.compileHtml('<div id="pwBoardWrapper"></div>',n),r.append(n.boardWrapper).addClass("pw-body-wrapper--scheduler_right"),await this._trelloIntegrationSrv.initCurrentBoardAsync({isCanceled:()=>n.$$destroyed}),this._trelloIntegrationSrv.isAuthorized()&&this._appCommonSrv.sendLaunchAsync(),n.$$destroyed)return;this._hideOnboardingGuyAsync(),this._appCommonSrv.isSchedulerInPreview()?t.$on(x.n.BoardInitialized,(()=>this._injectBoardListeners())):this._injectBoardListeners(),this._onboardingSrv.isInOnboarding&&this._trelloIntegrationSrv.isAuthorized()?(this._appCommonSrv.setSchedulerShown(!0),this._telemetrySrv.logSingleEvent(x.X.CalendarEvents.Shown,{isBy:"onboarding"})):this._showButtonOnboarding();let o=a()("#board"),s=o.scrollLeft();n.boardWrapper.append(this._htmlHelperSrv.compileHtml("<pw-scheduler></pw-scheduler>",n)),this._$timeout((()=>{if(n.$$destroyed)return;if(!a()(".pw-trello-buttons")[0]){let t=new Error("Cannot find Trello buttons");try{t.trelloDOM=this._htmlHelperSrv.traceDOM(e[0],6).outerHTML}catch(e){}this._$log.error("Planyway failed to inject extension button:"),this._$log.error(t),this._telemetrySrv.logError("Planyway failed to inject extension button",t,{class:this.constructor.name,method:this._injectBoardElements.name})}if(!kendo.widgetInstance(a()("#pwScheduler"))){let t=new Error("Scheduler widget undefined");try{t.trelloDOM=this._htmlHelperSrv.traceDOM(e[0],6).outerHTML}catch(e){}this._$log.error("Planyway failed to inject extension:"),this._$log.error(t),this._telemetrySrv.logError("Planyway failed to inject extension",t,{class:this.constructor.name,method:this._injectBoardElements.name})}}),5e3,!1),t.$watch((()=>this._appCommonSrv.getSchedulerOrientation()),(e=>{var t;if(!e)return;B()(t=J()(x.N)).call(t,(e=>r.removeClass(`pw-body-wrapper--scheduler_${e}`))),r.addClass(`pw-body-wrapper--scheduler_${e}`),r.removeClass("pw-body-wrapper--no-scrollable_top pw-body-wrapper--no-scrollable_bottom");let i=this._appCommonSrv.getSchedulerView();switch(e){case x.N.Top:i===x.O.Timeline&&r.addClass("pw-body-wrapper--no-scrollable_top");break;case x.N.Bottom:i!==x.O.Month&&i!==x.O.Timeline||r.addClass("pw-body-wrapper--no-scrollable_bottom")}})),t.$watch((()=>this._appCommonSrv.getSchedulerView()),(e=>{if(!e)return;switch(r.removeClass("pw-body-wrapper--no-scrollable_top pw-body-wrapper--no-scrollable_bottom"),this._appCommonSrv.getSchedulerOrientation()){case x.N.Top:e===x.O.Timeline&&r.addClass("pw-body-wrapper--no-scrollable_top");break;case x.N.Bottom:e!==x.O.Month&&e!==x.O.Timeline||r.addClass("pw-body-wrapper--no-scrollable_bottom")}})),o.scrollLeft(s);let l={chooseWhen:e=>e.hasClass("k-event"),getScrollable:()=>a()(".k-event-drag-hint").closest(".k-scheduler-content--scrollable"),maxVelocity:20,scrollArea:50,workBeyondScrollable:!0,nextSettings:{getScrollable:()=>r,maxVelocity:30,scrollArea:100,workBeyondScrollable:!0}},d={chooseWhen:e=>e.hasClass("list-card"),getScrollable:()=>a()(".k-scheduler-table:hover").closest(".k-scheduler-content--scrollable"),maxVelocity:20,scrollArea:50,workBeyondScrollable:!1,nextSettings:{getScrollable:()=>r,maxVelocity:50,scrollArea:200,workBeyondScrollable:!0}},h={chooseWhen:e=>e.hasClass("pw-dialog-edit-card-checklist")||e.hasClass("pw-dialog-edit-card-check-item"),getScrollable:()=>a()(".pw-dialog-edit-card").closest(".md-panel-outer-wrapper"),maxVelocity:30,scrollArea:100,workBeyondScrollable:!0};CustomDraggable_CustomDraggable.autoScrollSettings=[l,d,h];const u=a()(".window-overlay"),p=c()(u).call(u,".window");this._htmlHelperSrv.styleChanged(p,(()=>{if(p.hasClass("mod-notifications")&&this._appCommonSrv.isSchedulerShown()){switch(this._appCommonSrv.getSchedulerOrientation()){case x.N.Top:return void u.css({top:"4px",right:"4px"});case x.N.Right:return void u.css({top:"44px",right:`${n.boardWrapper.offsetWidth+4}px`})}}u.css({top:"",right:""})})),this._htmlHelperSrv.elementAdded(e,".quick-card-editor",(e=>{this._$rootScope.$broadcast(x.n.CloseDialogsRequested)})),a()("#clipboard-container").insertAfter(r),this._$window.addEventListener("popstate",(()=>this._$rootScope.$broadcast(x.n.CloseDialogsRequested))),n.$on("$destroy",(()=>this._$rootScope.$broadcast(x.n.CloseDialogsRequested)))})),this._htmlHelperSrv.elementRemoved(e,".board-main-content",(e=>{this._notificationSrv.clearNotificationQueue();let t=e.scope();var r,i;t&&(t.$destroy(),null===(r=t.trelloButtons)||void 0===r||r.remove(),null===(i=t.boardWrapper)||void 0===i||i.remove())})),this._htmlHelperSrv.elementAdded(e,"#board",(r=>{r[0].addEventListener("mousedown",(r=>{if(!/card|badge/.test(r.target.className))return;let i,n=a()(r.target).closest(".list-card");if(!n[0])return;const onDragEnd=()=>{e.removeClass("pw--dragging-item"),i&&(i.removeClass("active-card"),i=null),t.$broadcast(x.n.CardDragEnded)};n.removeData("kendoDraggable"),n.kendoDraggable({autoScroll:!0,group:U.i,hint:r=>{e.addClass("pw--dragging-item"),i=r,t.$broadcast(x.n.CardDragStarted)},dragend:onDragEnd,dragcancel:onDragEnd})}),!0)})),this._htmlHelperSrv.elementAdded(e,".card-detail-window",(e=>{e.attr("pw-trello-card-popup-injector",""),this._htmlHelperSrv.compileElement(e,t)})),this._htmlHelperSrv.elementRemoved(e,".card-detail-window",(e=>{let t=e.scope();t&&t.$destroy()})),this._$window.document.addEventListener("click",(t=>{var r;if(ze()(r=t.target.className).call(r,"board-header-btn")&&t.target.innerText===U.B){if(!kendo.widgetInstance(a()("#pwScheduler"))){let t=new Error("Scheduler widget undefined");try{t.trelloDOM=this._htmlHelperSrv.traceDOM(e[0],6).outerHTML}catch(e){}return this._$log.error("Planyway failed to handle power-up button:"),this._$log.error(t),void this._telemetrySrv.logError("Planyway failed to handle power-up button",t,{class:this.constructor.name,method:this._injectBoardElements.name})}t.stopPropagation(),this._telemetrySrv.logSingleEvent(x.X.TrelloEvents.PlanywayPowerUpClicked),this._$rootScope.$broadcast(x.n.SwitchSchedulerShownRequested,{isBy:"powerup"})}}),!0)}},{kind:"method",key:"_injectBoardListeners",value:function _injectBoardListeners(){this._lastBoardId&&this._htmlHelperSrv.injectScript(((e,t,r)=>{try{var i;let t=null===(i=window.planywayFiltersChangedCallbacks)||void 0===i?void 0:i[e];var a;if(t)null===(a=window.ModelCache._cache.Board[e])||void 0===a||a[r].off("change",t)}catch(e){document.dispatchEvent(new CustomEvent(t,{detail:{message:"Failed to unsubscribe Trello filters",originalError:e.toString()}}))}}),this._lastBoardId,x.n.TrelloContextError,"filter");let e=this._trelloIntegrationSrv.getCurrentBoardId();this._htmlHelperSrv.injectScript(((e,t,r,i)=>{try{var a;function onFiltersChanged(r,i){document.dispatchEvent(new CustomEvent(t,{detail:e}))}null===(a=window.ModelCache._cache.Board[e])||void 0===a||a[i].on("change",onFiltersChanged),window.planywayFiltersChangedCallbacks||(window.planywayFiltersChangedCallbacks={}),window.planywayFiltersChangedCallbacks[e]=onFiltersChanged}catch(e){document.dispatchEvent(new CustomEvent(r,{detail:{message:"Failed to subscribe Trello filters",originalError:e.toString()}}))}}),e,x.n.TrelloFiltersChanged,x.n.TrelloContextError,"filter"),this._lastBoardId=e}},{kind:"method",key:"_showLoginDialogAsync",value:async function _showLoginDialogAsync(){let e=await this._platformSrv.getAppStorageDataAsync();if(e.isLoginDialogShown)return;this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.LoginDialogOpened);let t=await this._dialogSrv.showLoginDialogAsync({canClose:!0,fullSize:!0});e.isLoginDialogShown=!0,this._platformSrv.setAppStorageDataAsync(e),t?this._showOnboardingGuyAsync("openBoard"):this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.LoginDialogClosed)}},{kind:"method",key:"_showOnboardingGuyAsync",value:async function _showOnboardingGuyAsync(e){(await this._platformSrv.getAppStorageDataAsync()).isOnboardingGuyShown||a()("body").append(this._htmlHelperSrv.compileHtml(`<pw-onboarding-guy class="pw-js-onboarding-guy" load-type="${e}"></pw-onboarding-guy>`,this._$rootScope,!0))}},{kind:"method",key:"_hideOnboardingGuyAsync",value:async function _hideOnboardingGuyAsync(){a()(".pw-js-onboarding-guy").remove();let e=await this._platformSrv.getAppStorageDataAsync();e.isOnboardingGuyShown||(e.isOnboardingGuyShown=!0,await this._platformSrv.setAppStorageDataAsync(e))}},{kind:"method",key:"_showButtonOnboarding",value:function _showButtonOnboarding(){this._appCommonSrv.isSchedulerShown()||localStorage.planywayOnboardingButtonPassed||this._settingsSrv.currentSettings.global.isOnboardingButtonPassed||this._showButtonOnboardingShown||(this._telemetrySrv.logSingleEvent(x.X.OnboardingEvents.ShowButtonShown),a()("#pwBodyWrapper").append(this._htmlHelperSrv.compileHtml('<pw-show-button-onboarding class="pw-js-button-onboarding"></pw-show-button-onboarding>',this._$rootScope,!0)),a()("#header > :last-child").append('<div class="pw-show-button-onboarding-header pw-js-button-onboarding"></div>'),this._showButtonOnboardingShown=!0)}}]}}));r(655);Object(n.yb)(),a()("body").on("dragstart",(e=>{e.preventDefault(),e.stopPropagation()}));let rc=[s.a,l.a,z,X,q.a,ka,Ra,Ga,za.a,Wa,Ha,Va.a,Ya.a,qa,tn,mn,fn.a,yn.a,Tn,In.a],ic=[ie,oe,he,Rn,we,Se,Ae,On,Ln,Mn,Nn,Ne,Be,Fe,je,Ye,Bn,xn,Gn,Un,Ke,wt,St,Tt,Wn,At,It,Rt,Ot,Pt,Lt,Bt,Ft,jn,$t,xt,Gt,Yn,yr,Kn,Sr,Xn,Mr,Zn,Nr,eo,to,$s,zs,Us,Ws,$r,xr,Gr,js,Hs,Vs,Ys,Vr,ti],ac=[qs,Qs,el,il,ol,dl,ul,pl,yl,gl,Dl,wl,Sl,Il,Pl,Ml,OnboardingGuyDirective_OnboardingGuyDirective,xl,Gl,Ul,Hl,Kl,Ql,Zl,ed,ad,sd,cd,yd,gd,Dd,wd,Ad,Od,Md,Fd,$d,tc],nc=document.createElement("script");nc.textContent=`(${()=>{try{localStorage.planywayTrelloVersion=window.trelloVersion||window.clientVersion}catch(e){}}})()`,(document.head||document.documentElement).appendChild(nc),nc.parentNode.removeChild(nc),document.body.setAttribute("pw-trello-injector",""),Object(o.a)("planyway",{modules:["angularFileUpload","kendo.directives"],services:rc,controllers:ic,directives:ac})},1492:function(e,t,r){"use strict";r.r(t);var i=r(21),a=r.n(i),n=r(13),o=r.n(n),s=r(133),l=r.n(s),d=r(0),c=r(143),h=r(161),u=r(112),p=r(162),m=r(5),f=r.n(m),y=r(6),v=r.n(y),_=r(9),g=r.n(_),C=r(11),k=r.n(C),D=r(8),E=r.n(D),b=r(4),w=r.n(b),S=r(2),T=r.n(S),A=r(3),I=r.n(A),R=r(14),O=r.n(R),P=r(15),L=r.n(P),M=r(7),N=r(1);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;T()(r=["method","field"]).call(r,(function(r){T()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;T()(r=["method","field"]).call(r,(function(r){T()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}w()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(T()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),T()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==E()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];k()(o).call(o,E()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return w()(t,g.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return I()(t=L()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:v()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:I()(e).call(e,this.fromElementDescriptor,this)};return w()(t,g.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[O.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const B="planywayGoogleAuthCodeSuccess",F="planywayGoogleAuthCodeFailure";let $=function _decorate(e,t,r,i){var a,n=_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=f()(t).call(t,isSameElement)))if(_isDataDescriptor(a.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(a)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(_hasDecorators(a)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}_coalesceGetterSetter(a,i)}else t.push(a)}return t}(I()(a=s.d).call(a,_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(N.Bb)(["$sce","$scope","$translate","onSuccess","onFailure"])],(function(e){return{F:class GoogleAuthWindowController{constructor(t,r,i,a,n){e(this),this._$sce=t,this._$scope=r,this._$translate=i,this._onSuccess=a,this._onFailure=n}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"googleAuthWindowCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"authorizeLabel",value:function authorizeLabel(){return this._$sce.trustAsHtml(this._$translate.instant("MISC.AUTHORIZE_GOOGLE_LABEL"))}},{kind:"get",key:"authorizeConsent",value:function authorizeConsent(){return this._$sce.trustAsHtml(this._$translate.instant("MISC.AUTHORIZE_GOOGLE_CONSENT",{btnText:this._$translate.instant("BUTTONS.CONNECT_WITH_GOOGLE"),termsOfUseUrl:M.P,privacyPolicyUrl:M.D}))}},{kind:"method",key:"authorizeAsync",value:async function authorizeAsync(){if(!this.isBusy)try{this.isBusy=!0;let e=await this._getGoogleAuthCodeAsync();e&&this._onSuccess(e)}catch(e){this._onFailure(e)}finally{this.isBusy=!1}}},{kind:"method",key:"_getGoogleAuthCodeAsync",value:function _getGoogleAuthCodeAsync(){return new a.a(((e,t)=>{function onSuccess({detail:t}){document.removeEventListener(B,onSuccess),document.removeEventListener(F,onFailure),e(t)}function onFailure({detail:e}){document.removeEventListener(F,onFailure),document.removeEventListener(B,onSuccess),t(e)}document.addEventListener(B,onSuccess),document.addEventListener(F,onFailure);let r=document.createElement("script");r.textContent=`(${(e,t,r)=>{window.initOAuth2=()=>{try{window.gapi.load("auth2",(()=>{try{const i=window.gapi.auth2.init({client_id:e,fetch_basic_profile:!1,scope:"openid profile email https://www.googleapis.com/auth/calendar"});i.then((()=>{try{i.grantOfflineAccess().then((e=>{document.dispatchEvent(new CustomEvent(t,{detail:e.code}))}),(e=>{switch(e.error){case"access_denied":case"popup_closed_by_user":document.dispatchEvent(new CustomEvent(t));break;default:document.dispatchEvent(new CustomEvent(r,{detail:{message:e.details||"Google OAuth2 grantOfflineAccess error ("+e.error+")",code:e.error}}))}}))}catch(e){document.dispatchEvent(new CustomEvent(r,{detail:e}))}}),(e=>{document.dispatchEvent(new CustomEvent(r,{detail:{message:e.details||"Google OAuth2 init error ("+e.error+")",code:e.error}}))}))}catch(e){document.dispatchEvent(new CustomEvent(r,{detail:e}))}}))}catch(e){document.dispatchEvent(new CustomEvent(r,{detail:e}))}};let i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://apis.google.com/js/client:platform.js?onload=initOAuth2",(document.head||document.documentElement).appendChild(i)}})('${M.p}', 'planywayGoogleAuthCodeSuccess', 'planywayGoogleAuthCodeFailure')`,(document.head||document.documentElement).appendChild(r),r.parentNode.removeChild(r)}))}}]}}));var x=r(755),G=r.n(x);function PushNotificationsEnableWindowController_getDecoratorsApi(){PushNotificationsEnableWindowController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;T()(r=["method","field"]).call(r,(function(r){T()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;T()(r=["method","field"]).call(r,(function(r){T()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}w()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(T()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),T()(e).call(e,(function(e){if(!PushNotificationsEnableWindowController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==E()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];k()(o).call(o,E()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return w()(t,g.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return I()(t=L()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PushNotificationsEnableWindowController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:v()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PushNotificationsEnableWindowController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:I()(e).call(e,this.fromElementDescriptor,this)};return w()(t,g.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PushNotificationsEnableWindowController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PushNotificationsEnableWindowController_createElementDescriptor(e){var t,r=PushNotificationsEnableWindowController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PushNotificationsEnableWindowController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PushNotificationsEnableWindowController_hasDecorators(e){return e.decorators&&e.decorators.length}function PushNotificationsEnableWindowController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PushNotificationsEnableWindowController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PushNotificationsEnableWindowController_toPropertyKey(e){var t=function PushNotificationsEnableWindowController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[O.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let z=function PushNotificationsEnableWindowController_decorate(e,t,r,i){var a,n=PushNotificationsEnableWindowController_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PushNotificationsEnableWindowController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=f()(t).call(t,isSameElement)))if(PushNotificationsEnableWindowController_isDataDescriptor(a.descriptor)||PushNotificationsEnableWindowController_isDataDescriptor(i.descriptor)){if(PushNotificationsEnableWindowController_hasDecorators(a)||PushNotificationsEnableWindowController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PushNotificationsEnableWindowController_hasDecorators(a)){if(PushNotificationsEnableWindowController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PushNotificationsEnableWindowController_coalesceGetterSetter(a,i)}else t.push(a)}return t}(I()(a=s.d).call(a,PushNotificationsEnableWindowController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(N.Bb)(["$scope","platformSrv","onSuccess","onFailure"])],(function(e){return{F:class PushNotificationsEnableWindowController{constructor(t,r,i,a){e(this),this._$scope=t,this._platformSrv=r,this._onSuccess=i,this._onFailure=a,this._registerServiceWorkerAsync()}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"pushNotificationsEnableWindowCtrl"}},{kind:"get",key:"isBusy",value:function isBusy(){return this._isBusy}},{kind:"set",key:"isBusy",value:function isBusy(e){this._$scope.$evalAsync((()=>this._isBusy=e))}},{kind:"get",key:"isPushNotificationsSupported",value:function isPushNotificationsSupported(){return"serviceWorker"in navigator&&"PushManager"in window}},{kind:"get",key:"notificationsImgUrl",value:function notificationsImgUrl(){return this._platformSrv.getPlatformUrl(G.a)}},{kind:"get",key:"isSubscriptionAvailable",value:function isSubscriptionAvailable(){return this.isPushNotificationsSupported&&this._serviceWorkerRegistration}},{kind:"method",key:"subscribe",value:async function subscribe(){if(!this.isBusy)try{this.isBusy=!0;let e=await this._serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:M.W});this._onSuccess(e.toJSON())}catch(e){this._onFailure(e)}finally{this.isBusy=!1}}},{kind:"method",key:"cancel",value:function cancel(){this._onSuccess()}},{kind:"method",key:"_registerServiceWorkerAsync",value:async function _registerServiceWorkerAsync(){if(this.isPushNotificationsSupported)try{let e=await navigator.serviceWorker.register(`${M.J}/common/push-notifications-sw.js`);this._$scope.$evalAsync((()=>this._serviceWorkerRegistration=e))}catch(e){this._onFailure(e)}}}]}}));var U=r(756),W=r.n(U);function GoogleAuthWindowDirective_getDecoratorsApi(){GoogleAuthWindowDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;T()(r=["method","field"]).call(r,(function(r){T()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;T()(r=["method","field"]).call(r,(function(r){T()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}w()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(T()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),T()(e).call(e,(function(e){if(!GoogleAuthWindowDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==E()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];k()(o).call(o,E()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return w()(t,g.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return I()(t=L()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=GoogleAuthWindowDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:v()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:GoogleAuthWindowDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:I()(e).call(e,this.fromElementDescriptor,this)};return w()(t,g.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=GoogleAuthWindowDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function GoogleAuthWindowDirective_createElementDescriptor(e){var t,r=GoogleAuthWindowDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function GoogleAuthWindowDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function GoogleAuthWindowDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function GoogleAuthWindowDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function GoogleAuthWindowDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function GoogleAuthWindowDirective_toPropertyKey(e){var t=function GoogleAuthWindowDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[O.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let j=function GoogleAuthWindowDirective_decorate(e,t,r,i){var a,n=GoogleAuthWindowDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function GoogleAuthWindowDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=f()(t).call(t,isSameElement)))if(GoogleAuthWindowDirective_isDataDescriptor(a.descriptor)||GoogleAuthWindowDirective_isDataDescriptor(i.descriptor)){if(GoogleAuthWindowDirective_hasDecorators(a)||GoogleAuthWindowDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(GoogleAuthWindowDirective_hasDecorators(a)){if(GoogleAuthWindowDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}GoogleAuthWindowDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(I()(a=s.d).call(a,GoogleAuthWindowDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class GoogleAuthWindowDirective{constructor(t,r,i){e(this),this._$log=t,this._$translate=r,this._currentLanguage=i,this.templateUrl=W.a,this.restrict="E",this.controller=$.controllerName,this.controllerAs="$ctrl"}}return{F:GoogleAuthWindowDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwGoogleAuthWindow"}},{kind:"method",decorators:[Object(N.Bb)(["$log","$translate","currentLanguage"])],static:!0,key:"create",value:function create(...e){return new GoogleAuthWindowDirective(...e)}},{kind:"method",key:"link",value:async function link(){if(this._currentLanguage)try{this._$translate.negotiateLocale(this._currentLanguage)&&await this._$translate.use(this._currentLanguage)}catch(e){this._$log.error("Planyway failed to set current language:"),this._$log.error(e)}}}]}}));var H=r(757),V=r.n(H);function PushNotificationsEnableWindowDirective_getDecoratorsApi(){PushNotificationsEnableWindowDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;T()(r=["method","field"]).call(r,(function(r){T()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;T()(r=["method","field"]).call(r,(function(r){T()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}w()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(T()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),T()(e).call(e,(function(e){if(!PushNotificationsEnableWindowDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==E()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];k()(o).call(o,E()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return w()(t,g.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return I()(t=L()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=PushNotificationsEnableWindowDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:v()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:PushNotificationsEnableWindowDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:I()(e).call(e,this.fromElementDescriptor,this)};return w()(t,g.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=PushNotificationsEnableWindowDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function PushNotificationsEnableWindowDirective_createElementDescriptor(e){var t,r=PushNotificationsEnableWindowDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function PushNotificationsEnableWindowDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function PushNotificationsEnableWindowDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function PushNotificationsEnableWindowDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function PushNotificationsEnableWindowDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function PushNotificationsEnableWindowDirective_toPropertyKey(e){var t=function PushNotificationsEnableWindowDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[O.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Y=function PushNotificationsEnableWindowDirective_decorate(e,t,r,i){var a,n=PushNotificationsEnableWindowDirective_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function PushNotificationsEnableWindowDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=f()(t).call(t,isSameElement)))if(PushNotificationsEnableWindowDirective_isDataDescriptor(a.descriptor)||PushNotificationsEnableWindowDirective_isDataDescriptor(i.descriptor)){if(PushNotificationsEnableWindowDirective_hasDecorators(a)||PushNotificationsEnableWindowDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(PushNotificationsEnableWindowDirective_hasDecorators(a)){if(PushNotificationsEnableWindowDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}PushNotificationsEnableWindowDirective_coalesceGetterSetter(a,i)}else t.push(a)}return t}(I()(a=s.d).call(a,PushNotificationsEnableWindowDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class PushNotificationsEnableWindowDirective{constructor(t,r,i){e(this),this._$log=t,this._$translate=r,this._currentLanguage=i,this.templateUrl=V.a,this.restrict="E",this.controller=z.controllerName,this.controllerAs="$ctrl"}}return{F:PushNotificationsEnableWindowDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwPushNotificationsEnableWindow"}},{kind:"method",decorators:[Object(N.Bb)(["$log","$translate","currentLanguage"])],static:!0,key:"create",value:function create(...e){return new PushNotificationsEnableWindowDirective(...e)}},{kind:"method",key:"link",value:async function link(){if(this._currentLanguage)try{this._$translate.negotiateLocale(this._currentLanguage)&&await this._$translate.use(this._currentLanguage)}catch(e){this._$log.error("Planyway failed to set current language:"),this._$log.error(e)}}}]}}));r(655);if(window.parent!==window||window.opener){let e=window.location.search.replace("?",""),t=l.a.parse(e);const r=t.request_type,i=t.request_id,n=t.return_url,s=t.data;(async()=>{const e={requestId:i,success:!0};try{let t;switch(r){case d.o.LoadTelemetryData:localStorage.planywayUnauthorizedId&&await requestBackgroundAsync(d.p.SetTelemetryData,{unauthorizedId:localStorage.planywayUnauthorizedId});break;case d.o.SaveTelemetryData:t=await requestBackgroundAsync(d.p.GetTelemetryData),t.unauthorizedId&&(localStorage.planywayUnauthorizedId=t.unauthorizedId);break;case d.o.LoadTrelloToken:localStorage.planywayTrelloToken&&await requestBackgroundAsync(d.p.SetTrelloToken,{trelloToken:localStorage.planywayTrelloToken});break;case d.o.SaveTrelloToken:t=await requestBackgroundAsync(d.p.GetTrelloToken),t.trelloToken&&(localStorage.planywayTrelloToken=t.trelloToken);break;case d.o.GetGoogleAuthCode:let r=await function getGoogleAuthCodeAsync(e){return new a.a(((t,r)=>{o()("body").append("<pw-google-auth-window></pw-google-auth-window>"),Object(c.a)("planyway.googleAuthWindow",{controllers:[$],directives:[j],values:{currentLanguage:e,onSuccess:t,onFailure:r}})}))}(s);r&&(e.data=r);break;case d.o.SubscribeNotifications:let i=await function getNotificationsSubscriptionAsync(e){return new a.a(((t,r)=>{o()("body").append("<pw-push-notifications-enable-window></pw-push-notifications-enable-window>"),Object(c.a)("planyway.pushNotifications",{services:[h.a,u.a,p.a],controllers:[z],directives:[Y],values:{currentLanguage:e,onSuccess:t,onFailure:r}})}))}(s);i&&(e.data=i);break;case d.o.LoadPushNotificationsSubscriptions:e.data=localStorage.planywayPushNotificationsSubscriptions;break;case d.o.SavePushNotificationsSubscriptions:localStorage.planywayPushNotificationsSubscriptions=s}}catch(t){e.success=!1,e.error=t}switch(r){case d.o.SubscribeNotifications:window.opener.postMessage(e,n);break;default:window.parent.postMessage(e,n)}})()}function requestBackgroundAsync(e,t,r=3){let i=0;return function platformRetryAsync(){return new a.a(((a,n)=>{chrome.runtime.sendMessage({type:e,...t},(async e=>{if(e)e.error?n(e.error):a(e);else if(i<r)try{i++;let e=await platformRetryAsync();a(e)}catch(e){n(e)}else n(new Error("Empty response"))}))}))}()}},161:function(e,t,r){"use strict";r.d(t,"a",(function(){return M}));var i=r(5),a=r.n(i),n=r(6),o=r.n(n),s=r(9),l=r.n(s),d=r(11),c=r.n(d),h=r(8),u=r.n(h),p=r(4),m=r.n(p),f=r(2),y=r.n(f),v=r(14),_=r.n(v),g=r(27),C=r.n(g),k=r(41),D=r.n(k),E=r(3),b=r.n(E),w=r(21),S=r.n(w),T=r(19),A=r.n(T),I=r(15),R=r.n(I),O=r(13),P=r.n(O),L=(r(653),r(1));function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;y()(r=["method","field"]).call(r,(function(r){y()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;y()(r=["method","field"]).call(r,(function(r){y()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}m()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(y()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),y()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==u()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];c()(o).call(o,u()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var h=0;h<d.length;h++)this.addElementPlacement(d[h],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return m()(t,l.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return b()(t=R()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:o()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:b()(e).call(e,this.fromElementDescriptor,this)};return m()(t,l.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[_.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let M=function _decorate(e,t,r,i){var n,o=_getDecoratorsApi();if(i)for(var s=0;s<i.length;s++)o=i[s](o);var l=t((function initialize(e){o.initializeInstanceElements(e,d.elements)}),r),d=o.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===n.key&&e.placement===n.placement},r=0;r<e.length;r++){var i,n=e[r];if("method"===n.kind&&(i=a()(t).call(t,isSameElement)))if(_isDataDescriptor(n.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(n)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");i.descriptor=n.descriptor}else{if(_hasDecorators(n)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");i.decorators=n.decorators}_coalesceGetterSetter(n,i)}else t.push(n)}return t}(b()(n=l.d).call(n,_createElementDescriptor)),e);return o.initializeClassElements(l.F,d.elements),o.runClassFinishers(l.F,d.finishers)}([Object(L.Bb)(["$injector","$compile","$log","$window"])],(function(e){return{F:class HtmlHelperService{constructor(t,r,i,a){e(this),this._$injector=t,this._$compile=r,this._$log=i,this._$window=a}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"htmlHelperSrv"}},{kind:"field",key:"_elementStyleObservers",value:()=>new A.a},{kind:"get",key:"_telemetrySrv",value:function _telemetrySrv(){return this._telemetrySrvLazy||(this._telemetrySrvLazy=this._$injector.get("telemetrySrv")),this._telemetrySrvLazy}},{kind:"method",key:"elementAdded",value:function elementAdded(e,t,r,i=!1){let a=!1;P()(t,e).each(((e,t)=>{if(r(P()(t)),a=!0,i)return!1})),i&&a||P()(e).arrive(t,{onceOnly:i},(e=>{r(P()(e))}))}},{kind:"method",key:"elementAddedOnceAsync",value:function elementAddedOnceAsync(e,t,r=0){let i=[new S.a((r=>this.elementAdded(e,t,(e=>r(e)),!0)))];return r&&i.push(Object(L.x)(r)),S.a.race(i)}},{kind:"method",key:"unbindElementAdded",value:function unbindElementAdded(e,t){t?P()(e).unbindArrive(t):P()(e).unbindArrive()}},{kind:"method",key:"elementRemoved",value:function elementRemoved(e,t,r,i=!1){P()(e).leave(t,{onceOnly:i},(e=>{r(P()(e))}))}},{kind:"method",key:"elementRemovedOnceAsync",value:function elementRemovedOnceAsync(e,t){return new S.a((r=>this.elementRemoved(e,t,(e=>r(e)),!0)))}},{kind:"method",key:"unbindElementRemoved",value:function unbindElementRemoved(e,t){t?P()(e).unbindLeave(t):P()(e).unbindLeave()}},{kind:"method",key:"styleChanged",value:function styleChanged(e,t){let r=e[0];if(!r)return;let i=new MutationObserver((()=>{t(e)}));i.observe(r,{attributes:!0,attributeFilter:["style"]});let a=this._elementStyleObservers.get(e)||[];a.push(i),this._elementStyleObservers.set(e,a)}},{kind:"method",key:"unbindStyleChanged",value:function unbindStyleChanged(e){let t=this._elementStyleObservers.get(e);if(t){for(let e of t)e.disconnect();this._elementStyleObservers.delete(e)}}},{kind:"method",key:"isElementOnScreen",value:function isElementOnScreen(e,t=!0){var r;let i=null===(r=e[0])||void 0===r?void 0:r.getBoundingClientRect();return!(!i||0===i.width||0===i.height)&&(t?i.top>=0&&i.bottom<=this._$window.innerHeight&&i.left>=0&&i.right<=this._$window.innerWidth:i.bottom>=0&&i.top<=this._$window.innerHeight&&i.right>=0&&i.left<=this._$window.innerWidth)}},{kind:"method",key:"compileHtml",value:function compileHtml(e,t,r=!0){let i=r?t.$new():t;return this._$compile(e)(i)[0]}},{kind:"method",key:"compileElement",value:function compileElement(e,t,r=!0){let i=r?t.$new():t;return this._$compile(e)(i),i}},{kind:"method",key:"injectScript",value:function injectScript(e,...t){try{var r;let i=this._$window.document.createElement("script");i.textContent=`(${e})(${b()(r=D()(Array.prototype).call(t)).call(r,(e=>C()(e))).join(", ")})`,(this._$window.document.head||this._$window.document.documentElement).appendChild(i),i.parentNode.removeChild(i)}catch(e){this._$log.error("Planyway failed to inject script:"),this._$log.error(e),this._telemetrySrv.logError("Planyway inject script error",e,{class:this.constructor.name,method:this.injectScript.name})}}},{kind:"method",key:"traceDOM",value:function traceDOM(e,t){let r=this._$window.document.createElement(e.tagName);if(e.id&&(r.id=e.id),e.className&&(r.className=e.className),t>0)for(let i of e.children)"SCRIPT"!==i.tagName&&"IFRAME"!==i.tagName&&r.appendChild(this.traceDOM(i,t-1));return r}}]}}))},162:function(e,t,r){"use strict";r.d(t,"a",(function(){return ce}));var i,a=r(5),n=r.n(a),o=r(6),s=r.n(o),l=r(9),d=r.n(l),c=r(11),h=r.n(c),u=r(8),p=r.n(u),m=r(4),f=r.n(m),y=r(2),v=r.n(y),_=r(3),g=r.n(_),C=r(14),k=r.n(C),D=r(21),E=r.n(D),b=r(27),w=r.n(b),S=r(94),T=r.n(S),A=r(19),I=r.n(A),R=r(15),O=r.n(R),P=r(264),L=r.n(P),M=r(218),N=r.n(M),B=r(55),F=r.n(B),$=r(10),x=r(0),G=r(1),z=r(38),U=r.n(z),W=r(30),j=r.n(W),H=r(20),V=r.n(H),Y=r(127),K=r.n(Y),X=r(41),q=r.n(X),Q=r(13),J=r.n(Q),Z=r(69),ee=r.n(Z),te=r(189),re=r(133),ie=r.n(re),ae=r(179),ne=r.n(ae),oe=r(180),se=r.n(oe),le=r(7);se()(ee.a);const de=q()(i="1.9.77.2".split(".")).call(i,0,3).join(".");function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;v()(r=["method","field"]).call(r,(function(r){v()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;v()(r=["method","field"]).call(r,(function(r){v()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}f()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(v()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),v()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==p()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];h()(o).call(o,p()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return f()(t,d.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return g()(t=O()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:s()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:g()(e).call(e,this.fromElementDescriptor,this)};return f()(t,d.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[k.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ce=function _decorate(e,t,r,i){var a,o=_getDecoratorsApi();if(i)for(var s=0;s<i.length;s++)o=i[s](o);var l=t((function initialize(e){o.initializeInstanceElements(e,d.elements)}),r),d=o.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=n()(t).call(t,isSameElement)))if(_isDataDescriptor(a.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(a)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(_hasDecorators(a)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}_coalesceGetterSetter(a,i)}else t.push(a)}return t}(g()(a=l.d).call(a,_createElementDescriptor)),e);return o.initializeClassElements(l.F,d.elements),o.runClassFinishers(l.F,d.finishers)}([Object(G.Bb)(["$rootScope","$log","$window","$interval","$timeout","htmlHelperSrv"])],(function(e,t){class ChromePlatformService extends t{constructor(t,r,i,a,n,o){super(r,i,a,n,o),e(this),this._onProgressCallbackMap=new I.a;try{chrome.runtime.onMessage.addListener((e=>{var r;switch(e.type){case x.p.OnProgress:null===(r=this._onProgressCallbackMap.get(e.progressId))||void 0===r||r({direction:e.direction,percent:e.percent});break;case x.p.SwitchSchedulerShown:t.$evalAsync((()=>{t.$broadcast(x.n.SwitchSchedulerShownRequested,{isBy:"browser"})}))}}))}catch(e){}}}return{F:ChromePlatformService,d:[{kind:"method",key:"getPlatformUrl",value:function getPlatformUrl(e){if(e)return chrome.runtime.getURL(e.replace(/^(\.){0,2}\\/,""))}},{kind:"method",key:"getAppType",value:function getAppType(){return $.a.Chrome}},{kind:"method",key:"clearAppStorageAsync",value:async function clearAppStorageAsync(){}},{kind:"method",key:"closeAppAsync",value:async function closeAppAsync(){}},{kind:"method",key:"reloadAppAsync",value:async function reloadAppAsync(e=!1){try{await this._requestBackgroundAsync(x.p.ReloadTrelloTabs,{exceptCurrent:e})}catch(e){this._$log.error("Planyway failed to reload Trello tabs:"),this._$log.error(e)}}},{kind:"method",key:"getTelemetryDataAsync",value:async function getTelemetryDataAsync(){let e=`un_${F()()}`,t=!1;try{let r=await this._requestBackgroundAsync(x.p.GetTelemetryData);r.unauthorizedId?e=r.unauthorizedId:await this._requestBackgroundAsync(x.p.SetTelemetryData,{unauthorizedId:e}),localStorage.planywayUnauthorizedId=e,(async()=>{try{await this.exchangeSiteDataAsync(x.o.SaveTelemetryData)}catch(e){}})(),t=r.isInstallSent}catch(e){this._$log.error("Planyway failed to get telemetry data:"),this._$log.error(e)}return{unauthorizedId:e,isInstallSent:t}}},{kind:"method",key:"setTelemetryDataAsync",value:function setTelemetryDataAsync(e){return this._requestBackgroundAsync(x.p.SetTelemetryData,e)}},{kind:"method",key:"getAppStorageDataAsync",value:async function getAppStorageDataAsync(){try{var e;let t=await this._requestBackgroundAsync(x.p.GetAppStorageData);return{isOnboardingGuyShown:!1,isLoginDialogShown:!1,...t.storageData,flags:{telemetry:!0,...null===(e=t.storageData)||void 0===e?void 0:T()(e)}}}catch(e){this._$log.error("Planyway failed to get app storage data:"),this._$log.error(e)}return{isOnboardingGuyShown:!0,isLoginDialogShown:!0,flags:{telemetry:!1}}}},{kind:"method",key:"setAppStorageDataAsync",value:async function setAppStorageDataAsync(e){try{await this._requestBackgroundAsync(x.p.SetAppStorageData,{storageData:e})}catch(e){this._$log.error("Planyway failed to set app storage data:"),this._$log.error(e)}}},{kind:"method",key:"getTrelloTokenAsync",value:async function getTrelloTokenAsync(){let e=await this._requestBackgroundAsync(x.p.GetTrelloToken);if(e.trelloToken)return e.trelloToken;let t=localStorage.planywayTrelloToken;return t?(localStorage.removeItem("planywayTrelloToken"),t):void 0}},{kind:"method",key:"setTrelloTokenAsync",value:async function setTrelloTokenAsync(e){await this._requestBackgroundAsync(x.p.SetTrelloToken,{trelloToken:e}),(async()=>{try{await this.exchangeSiteDataAsync(x.o.SaveTrelloToken)}catch(e){}})()}},{kind:"method",key:"setMemberInfoAsync",value:async function setMemberInfoAsync(e){try{localStorage.planywayMemberId=e.memberId,await this._requestBackgroundAsync(x.p.SetMemberInfo,{...e})}catch(e){this._$log.error("Planyway failed to set member info:"),this._$log.error(e)}}},{kind:"method",key:"getGoogleCredentialsAsync",value:async function getGoogleCredentialsAsync(){let{googleCredentials:e}=await this._requestBackgroundAsync(x.p.GetGoogleCredentials);if(e)return{primaryCalendarId:e.primaryCalendarId,accessToken:e.accessToken,expiryDate:e.expiryDate&&new Date(e.expiryDate)}}},{kind:"method",key:"setGoogleCredentialsAsync",value:async function setGoogleCredentialsAsync(e){await this._requestBackgroundAsync(x.p.SetGoogleCredentials,{googleCredentials:e})}},{kind:"method",key:"getPushNotificationsSubscriptionsAsync",value:async function getPushNotificationsSubscriptionsAsync(){try{let e=await this.exchangeSiteDataAsync(x.o.LoadPushNotificationsSubscriptions);if(e)return JSON.parse(e)}catch(e){this._$log.error("Planyway failed to get notifications subscriptions:"),this._$log.error(e)}return{}}},{kind:"method",key:"setPushNotificationsSubscriptionsAsync",value:function setPushNotificationsSubscriptionsAsync(e){(async()=>{try{await this.exchangeSiteDataAsync(x.o.SavePushNotificationsSubscriptions,w()(e))}catch(e){}})()}},{kind:"method",key:"restAsync",value:async function restAsync(e,t,r={}){if(!chrome.runtime)return L()(N()(ChromePlatformService.prototype),"restAsync",this).call(this,e,t,r);r.onProgress&&(r.progressId=F()(),this._onProgressCallbackMap.set(r.progressId,r.onProgress));let i=await this._requestBackgroundAsync(x.p.Rest,{method:e,url:t,options:r});return r.onProgress&&this._onProgressCallbackMap.delete(r.progressId),i.response}},{kind:"method",key:"_requestBackgroundAsync",value:function _requestBackgroundAsync(e,t,r=3){let i=0;return function platformRetryAsync(){return new E.a(((a,n)=>{chrome.runtime.sendMessage({type:e,...t},(async e=>{if(e)e.error?n(e.error):a(e);else if(i<r)try{i++;let e=await platformRetryAsync();a(e)}catch(e){n(e)}else n(new Error("Empty response"))}))}))}()}}]}}),class PlatformService_PlatformService{static get serviceName(){return"platformSrv"}constructor(e,t,r,i,a){K()(this,"_exchangeSiteDataPromises",{}),K()(this,"_deduplicatedRestPromises",new I.a),this._$log=e,this._$window=t,this._$interval=r,this._$timeout=i,this._htmlHelperSrv=a}getPlatformUrl(e){return e}getAppType(){}getAppVersion(){return"1.9.77.2"}getAppVersionShort(){return de}clearAppStorageAsync(){}closeAppAsync(){}reloadAppAsync(e=!1){}getTelemetryDataAsync(){}setTelemetryDataAsync(e){}getAppStorageDataAsync(){}setAppStorageDataAsync(e){}getTrelloTokenAsync(){}setTrelloTokenAsync(e){}setMemberInfoAsync(e){}getGoogleCredentialsAsync(){}setGoogleCredentialsAsync(e){}getPushNotificationsSubscriptionsAsync(){}setPushNotificationsSubscriptionsAsync(){}restAsync(e,t,r={}){const{token:i,headers:a={},query:n,body:o,maxRetryCount:s=3,deduplicationTag:l,onProgress:d}=r;let c=45e3;if(l&&this._deduplicatedRestPromises.has(l))return this._deduplicatedRestPromises.get(l);const h=(async()=>{i&&(a.Authorization=`Bearer ${i}`);let r,l=V()(x.F).call(x.F,(e=>j()(t).call(t,e)));if(l&&i){let e=localStorage.planywayPlanywayToken;e&&(a["x-planyway-token"]=e)}switch(e){case x.L.Get:r=ee.a.get(t);break;case x.L.PutForm:r=ee.a.put(t).type("form").send(o);break;case x.L.PostForm:r=ee.a.post(t).type("form").send(o);break;case x.L.PostFile:c=0;let i=new FormData;for(let[e,t]of U()(o))switch(e){case"file":i.append("file",new File([new Blob([ne()(o.file)])],o.name));break;default:i.append(e,t)}r=ee.a.post(t).send(i);break;default:r=ee.a[e](t).send(o)}let h=await r.set(a).query(n).timeout({response:c}).retry(s,-1).on("progress",(e=>{null==d||d({direction:e.direction,percent:e.percent})}));if(l&&i){let e=h.headers["x-planyway-token"];if(e)try{localStorage.planywayPlanywayToken=e}catch(e){}}return h.body||h.text})();return l&&this._deduplicatedRestPromises.set(l,h),h}async exchangeSiteDataAsync(e,t,r){if(!this._exchangeSiteDataPromises[e]){const i=Object(te.a)();let a,n,o=null;const s=[new E.a((e=>{o=t=>{var r;(null===(r=t.data)||void 0===r?void 0:r.requestId)===i&&e(t.data)}}))],onBeforeUnload=()=>{var e;return null===(e=n)||void 0===e?void 0:e.close()};this._exchangeSiteDataPromises[e]=(async()=>{try{this._$window.addEventListener("message",o,!1),this._$window.addEventListener("beforeunload",onBeforeUnload,!1);let c=`${this._getExchangeUrl()}?${ie.a.stringify({request_type:e,request_id:i,return_url:this._$window.location.origin,data:t})}`;const handleExchangeNotificationsSubscriptionDataAsync=()=>{if(n)try{return void n.focus()}catch(e){}let e=this._$window.screenX+(this._$window.innerWidth-630)/2,t=this._$window.screenY+(this._$window.innerHeight-630)/2;if(n=this._$window.open(c,"PlanywayNotificationsEnableWindow",`width=630,height=630,left=${e},top=${t}`),!n)throw new Error("Cannot open Planyway notifications enable window");s.push(new E.a((e=>{const t=this._$interval((()=>{if(n)try{n.closed&&(this._$interval.cancel(t),e({success:!0}))}catch(r){this._$interval.cancel(t),e({success:!0})}}),200,0,!1)})))},handleExchangeDefaultDataAsync=()=>{switch(r?(a=J()(r),s.push((async()=>(await this._htmlHelperSrv.elementRemovedOnceAsync("body",r),{success:!1,error:{message:"Planyway exchange frame removed"}}))())):(a=J()('<iframe style="display: none"></iframe>'),a.appendTo("body")),a.attr("src",c),e){case x.o.GetGoogleAuthCode:break;default:s.push(this._$timeout((()=>({success:!1,error:{message:"Planyway exchange timeout exceeded"}})),5e3,!1))}};switch(e){case x.o.SubscribeNotifications:await handleExchangeNotificationsSubscriptionDataAsync();break;default:await handleExchangeDefaultDataAsync()}return await E.a.race(s)}finally{var l,d;this._exchangeSiteDataPromises[e]=null,this._$window.removeEventListener("message",o,!1),this._$window.removeEventListener("beforeunload",onBeforeUnload,!1),null===(l=a)||void 0===l||l.remove(),null===(d=n)||void 0===d||d.close()}})()}let i=await this._exchangeSiteDataPromises[e];if(!i.success){if(i.error instanceof Error)throw i.error;let e=new Error;for(let t in i.error)e[t]=i.error[t];throw e}return i.data}_getExchangeUrl(){return`${le.J}/common/exchange.html`}})},216:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return J}));var i=r(5),a=r.n(i),n=r(9),o=r.n(n),s=r(11),l=r.n(s),d=r(4),c=r.n(d),h=r(2),u=r.n(h),p=r(14),m=r.n(p),f=r(39),y=r.n(f),v=r(6),_=r.n(v),g=r(27),C=r.n(g),k=r(43),D=r.n(k),E=r(29),b=r.n(E),w=r(19),S=r.n(w),T=r(23),A=r.n(T),I=r(12),R=r.n(I),O=r(3),P=r.n(O),L=r(8),M=r.n(L),N=r(17),B=r.n(N),F=r(15),$=r.n(F),x=r(16),G=r.n(x),z=r(107),U=r.n(z),W=r(26),j=r.n(W),H=r(89),V=r.n(H),Y=r(7),K=r(0),X=r(1);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;u()(r=["method","field"]).call(r,(function(r){u()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;u()(r=["method","field"]).call(r,(function(r){u()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}c()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(u()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),u()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==M()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];l()(o).call(o,M()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),d=this.toElementFinisherExtras((0,a[n])(s)||s);e=d.element,this.addElementPlacement(e,t),d.finisher&&i.push(d.finisher);var c=d.extras;if(c){for(var h=0;h<c.length;h++)this.addElementPlacement(c[h],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return c()(t,o.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return P()(t=$()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:_()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:P()(e).call(e,this.fromElementDescriptor,this)};return c()(t,o.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[m.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const q={[K.d.TrelloBoard]:1,[K.d.GoogleCalendar]:2,[K.d.ICalCalendar]:3},Q=new G.a(["ru"]);let J=function _decorate(e,t,r,i){var n,o=_getDecoratorsApi();if(i)for(var s=0;s<i.length;s++)o=i[s](o);var l=t((function initialize(e){o.initializeInstanceElements(e,d.elements)}),r),d=o.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===n.key&&e.placement===n.placement},r=0;r<e.length;r++){var i,n=e[r];if("method"===n.kind&&(i=a()(t).call(t,isSameElement)))if(_isDataDescriptor(n.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(n)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");i.descriptor=n.descriptor}else{if(_hasDecorators(n)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");i.decorators=n.decorators}_coalesceGetterSetter(n,i)}else t.push(n)}return t}(P()(n=l.d).call(n,_createElementDescriptor)),e);return o.initializeClassElements(l.F,d.elements),o.runClassFinishers(l.F,d.finishers)}([Object(X.Bb)(["$injector","$rootScope","$window","$interval","$timeout","$translate","backendSrv","licenseSrv","notificationSrv","settingsSrv","telemetrySrv"])],(function(t){return{F:class AppCommonService{constructor(e,r,i,a,n,o,s,l,d,c,h){t(this),this._$injector=e,this._$rootScope=r,this._$window=i,this._$interval=a,this._$timeout=n,this._$translate=o,this._backendSrv=s,this._licenseSrv=l,this._notificationSrv=d,this._settingsSrv=c,this._telemetrySrv=h,this._isSchedulerButtonBusy=!0,this._isSchedulerBusy=!1,this._watchTimeZoneChange()}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"appCommonSrv"}},{kind:"get",key:"_googleIntegrationSrv",value:function _googleIntegrationSrv(){return this._googleIntegrationSrvLazy||(this._googleIntegrationSrvLazy=this._$injector.get("googleIntegrationSrv")),this._googleIntegrationSrvLazy}},{kind:"get",key:"_iCalIntegrationSrv",value:function _iCalIntegrationSrv(){return this._iCalIntegrationSrvLazy||(this._iCalIntegrationSrvLazy=this._$injector.get("iCalIntegrationSrv")),this._iCalIntegrationSrvLazy}},{kind:"get",key:"_trelloIntegrationSrv",value:function _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=this._$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}},{kind:"get",key:"_onboardingSrv",value:function _onboardingSrv(){return this._onboardingSrvLazy||(this._onboardingSrvLazy=this._$injector.get("onboardingSrv")),this._onboardingSrvLazy}},{kind:"method",key:"getLocale",value:function getLocale(){return this._globalSettings.locale?(this._localSettings.locale!==this._globalSettings.locale&&(this._localSettings.locale=this._globalSettings.locale,this._settingsSrv.saveLocal()),this._globalSettings.locale):this._localSettings.locale?this._localSettings.locale:Object(X.K)(U.a.replace("_","-"))}},{kind:"method",key:"getLanguage",value:function getLanguage(e){return(e||this.getLocale()).replace("-","_")}},{kind:"method",key:"applyLocale",value:function applyLocale(e){kendo.culture(e),j.a.locale(e)}},{kind:"method",key:"checkReloadLocaleRequired",value:function checkReloadLocaleRequired(e,t){e!==t&&(Q.has(e)||Q.has(t))&&this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.LOCALE_CHANGED_WARNING"),K.A.Reload)}},{kind:"method",key:"isMacOS",value:function isMacOS(){var e;void 0===this._isMacOS&&(this._isMacOS=B()(e=navigator.platform.toUpperCase()).call(e,"MAC"));return this._isMacOS}},{kind:"method",key:"isInsideElectron",value:function isInsideElectron(){var t;void 0===this._isInsideElectron&&("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||void 0!==e&&"object"==typeof e.versions&&e.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&M()(t=navigator.userAgent).call(t,"Electron")>=0?this._isInsideElectron=!0:this._isInsideElectron=!1);return this._isInsideElectron}},{kind:"method",key:"isInsideTeams",value:function isInsideTeams(){return void 0===this._isInsideTeams&&(this._isInsideTeams="true"===Object(X.bb)(this._$window,Y.O)),this._isInsideTeams}},{kind:"method",key:"isSchedulerButtonBusy",value:function isSchedulerButtonBusy(){return this._isSchedulerButtonBusy}},{kind:"method",key:"setSchedulerButtonBusy",value:function setSchedulerButtonBusy(e){this._$timeout((()=>this._isSchedulerButtonBusy=e))}},{kind:"method",key:"isSchedulerBusy",value:function isSchedulerBusy(){return this._isSchedulerBusy}},{kind:"method",key:"setSchedulerBusy",value:function setSchedulerBusy(e){void 0===this._schedulerBusyCounter&&(this._schedulerBusyCounter=0),e?(0===this._schedulerBusyCounter&&this._$timeout((()=>this._isSchedulerBusy=!0)),this._schedulerBusyCounter++):(this._schedulerBusyCounter--,0===this._schedulerBusyCounter&&this._$timeout((()=>this._isSchedulerBusy=!1)))}},{kind:"get",key:"isUiPreconditionsPassed",value:function isUiPreconditionsPassed(){return!!this._globalSettings.isOnboardingWelcomeSurveyPassed&&!(this._currentBoardId&&!this._globalBoardSettings.isViewTemplateSelected)}},{kind:"method",key:"isSchedulerInPreview",value:function isSchedulerInPreview(){return!this._trelloIntegrationSrv.isAuthorized()||this.isSchedulerUnavailable()}},{kind:"method",key:"isSchedulerLoading",value:function isSchedulerLoading(){return this._trelloIntegrationSrv.isCurrentBoardInitializing()}},{kind:"method",key:"isSchedulerUnavailable",value:function isSchedulerUnavailable(){return this._trelloIntegrationSrv.isCurrentBoardUnavailable()}},{kind:"method",key:"isSchedulerShown",value:function isSchedulerShown(){return!!this._trelloIntegrationSrv.isAuthorized()&&(this.isSchedulerInPreview()?this._localSettings.showSchedulerPreview:!this._trelloIntegrationSrv.isCurrentBoardUnavailable()&&(this.isSchedulerLoading()?this._localSettings.showSchedulerPreview:this._globalBoardSettings.showCalendar&&this.isUiPreconditionsPassed))}},{kind:"method",key:"setSchedulerShown",value:function setSchedulerShown(e){this._$timeout((()=>{if(this.isSchedulerInPreview()||this.isSchedulerUnavailable()&&!this._trelloIntegrationSrv.isCurrentBoardUnavailable())return this._localSettings.showSchedulerPreview=e,void this._settingsSrv.saveLocal();this._trelloIntegrationSrv.isCurrentBoardUnavailable()||(this._globalBoardSettings.showCalendar=e,this._settingsSrv.saveGlobalAsync())}))}},{kind:"method",key:"getSchedulerOrientation",value:function getSchedulerOrientation(){return this.isSchedulerInPreview()||this.isSchedulerUnavailable()?this._globalSettings.defaultSchedulerOrientation:this._globalBoardSettings.schedulerOrientation}},{kind:"method",key:"getSchedulerMode",value:function getSchedulerMode(){if(this.isSchedulerInPreview()||this.isSchedulerUnavailable())return this._globalSettings.defaultSchedulerMode;let e=K.C[this._globalBoardSettings.schedulerMode];return e&&!this._licenseSrv.checkPaidFeatureAvailable(e,!1)?K.M.Calendar:this._globalBoardSettings.schedulerMode}},{kind:"method",key:"getSchedulerView",value:function getSchedulerView(){switch(this.getSchedulerMode()){case K.M.Timeline:return K.O.Timeline;case K.M.Calendar:return this.isSchedulerInPreview()||this.isSchedulerUnavailable()?this._globalSettings.defaultSchedulerView:this._globalBoardSettings.schedulerView;case K.M.TimeTracking:return K.O.Week}}},{kind:"method",key:"getTimelineView",value:function getTimelineView(){if(this.isSchedulerInPreview()||this.isSchedulerUnavailable())return this._globalSettings.defaultTimelineView;let e=K.D[this._globalBoardSettings.timelineView];return e&&!this._licenseSrv.checkPaidFeatureAvailable(e,!1)?K.ib.None:this._globalBoardSettings.timelineView}},{kind:"method",key:"getSchedulerSelectedDate",value:function getSchedulerSelectedDate(){return this._schedulerSelectedDate||(this._schedulerSelectedDate=Object(X.O)(new Date)),this._schedulerSelectedDate}},{kind:"method",key:"setSchedulerSelectedDate",value:function setSchedulerSelectedDate(e){return this._schedulerSelectedDate=e}},{kind:"method",key:"isSchedulerMini",value:function isSchedulerMini(){return this._isSchedulerMini}},{kind:"method",key:"setSchedulerMini",value:function setSchedulerMini(e){this._isSidebarShown=!e&&this._localSettings.schedulerSidebar.isShown,void 0===this._isSchedulerMini?this._isSchedulerMini=e:this._$timeout((()=>this._isSchedulerMini=e))}},{kind:"method",key:"isSchedulerSidebarShown",value:function isSchedulerSidebarShown(){return!this.isHomePageShown()&&(!!this.isSchedulerInPreview()||(this.isSchedulerMini()&&null!==(e=this._isSidebarShown)&&void 0!==e?e:this._localSettings.schedulerSidebar.isShown));var e}},{kind:"method",key:"setSchedulerSidebarShown",value:function setSchedulerSidebarShown(e){this.isSchedulerInPreview()||this.isHomePageShown()||(this.isSchedulerMini()?this._isSidebarShown=e:(this._localSettings.schedulerSidebar.isShown=e,this._settingsSrv.saveLocal()))}},{kind:"method",key:"getSchedulerWorkWeek",value:function getSchedulerWorkWeek(){if(this.isSchedulerInPreview()||this.isSchedulerUnavailable())return;let e=this.getSchedulerView();return(e===K.O.Week||e===K.O.Timeline)&&this._globalBoardSettings.showWorkDays?{start:this._globalSettings.workWeekStart,end:this._globalSettings.workWeekEnd}:void 0}},{kind:"method",key:"getTimelineResourcesType",value:function getTimelineResourcesType(){switch(this.getTimelineView()){case K.ib.None:return K.fb.NoResources;case K.ib.Member:return K.fb.Members;case K.ib.Board:return K.fb.Calendars;case K.ib.List:return K.fb.Lists;case K.ib.Label:return K.fb.Labels}}},{kind:"method",key:"getTimelineResources",value:function getTimelineResources(e=this.getTimelineResourcesType()){var t,r,i;if(this.isSchedulerInPreview()||this.isSchedulerUnavailable())return[];if(e===K.fb.NoResources)return[];const a=this._trelloIntegrationSrv.getMemberId(),n=this._trelloIntegrationSrv.getTrelloBoardById(this._currentBoardId),o=this._globalBoardSettings.timelineHiddenResources[e],s=[n,...P()(t=R()(r=this._trelloIntegrationSrv.getCurrentBoardConnectedBoards()).call(r,(e=>e.isSelected))).call(t,(e=>this._trelloIntegrationSrv.getTrelloBoardById(e.id)))];let l;switch(e){case K.fb.Members:if(l=[{id:Y.k,type:K.fb.Members,name:this._$translate.instant("MISC.UNASSIGNED_MEMBER_FULL_NAME"),isSelected:!B()(o).call(o,Y.k),canCreateCard:n&&!n.isReadOnly,resourceData:{}}],null!=n&&n.members){var d;let e=A()(d=[...n.members]).call(d,((e,t)=>e.id===a?-1:t.id===a?1:0)),t=this._licenseSrv.getMaxMemberLanes(),r=t;for(let i of e){let e=!B()(o).call(o,i.id);e&&void 0!==r&&(1===t?e=i.id===a:r--<=0&&(e=!1)),l.push({id:i.id,type:K.fb.Members,name:i.fullName,isSelected:e,canCreateCard:!n.isReadOnly,resourceData:{avatarUrl:i.avatarUrlNormal,initials:i.initials}})}}break;case K.fb.Calendars:l=[];for(let e of s)l.push({id:e.id,type:K.fb.Calendars,name:e.name,isSelected:!B()(o).call(o,e.id),canCreateCard:!e.isReadOnly,resourceData:{calendarType:K.d.TrelloBoard,calendarColor:e.color,calendarIcon:e.imageUrls[K.kb.Small]}});for(let e of this._googleIntegrationSrv.getCurrentBoardConnectedGoogleCalendars())if(e.isSelected){let t=this._googleIntegrationSrv.getGoogleCalendarById(e.id);l.push({id:t.id,type:K.fb.Calendars,name:t.name,isSelected:!B()(o).call(o,t.id),canCreateCard:!0,resourceData:{calendarType:K.d.GoogleCalendar,calendarColor:t.color.base}})}for(let e of this._iCalIntegrationSrv.getCurrentBoardConnectedICalCalendars())if(e.isSelected){let t=this._iCalIntegrationSrv.getICalCalendarById(e.id);l.push({id:t.id,type:K.fb.Calendars,name:t.name,isSelected:!B()(o).call(o,t.id),canCreateCard:!1,resourceData:{calendarType:K.d.ICalCalendar,calendarColor:t.color,iCalCalendarType:t.type}})}break;case K.fb.Lists:l=[];for(let e of s)for(let t of e.lists)l.push({id:t.id,type:K.fb.Lists,name:t.name,isSelected:!B()(o).call(o,t.id),canCreateCard:!e.isReadOnly,resourceData:{boardId:t.boardId,boardName:e.name,boardColor:e.color,boardIcon:e.imageUrls[K.kb.Small]}});break;case K.fb.Labels:let e=new S.a;for(let t of s)for(let r of t.labels){let i=Object(X.V)(r),a=e.get(i);a?t.isReadOnly||(a.canCreateCard=!0):e.set(i,{id:i,type:K.fb.Labels,name:r.name||Object(X.i)(r.color),isSelected:!B()(o).call(o,i),canCreateCard:n&&!n.isReadOnly,resourceData:{name:r.name,color:r.color}})}l=[{id:Y.k,type:K.fb.Labels,name:this._$translate.instant("MISC.NO_LABEL"),isSelected:!B()(o).call(o,Y.k),canCreateCard:n&&!n.isReadOnly,resourceData:{color:"default"}},...b()(e).call(e)]}let c=this._globalBoardSettings.timelineResourcesOrder[e];return P()(i=A()(l).call(l,((t,r)=>{if(c){let e=M()(c).call(c,t.id),i=M()(c).call(c,r.id);if(-1!==e&&-1!==i)return e-i;if(-1!==e)return-1;if(-1!==i)return 1}switch(e){case K.fb.Members:if(t.id===Y.k)return-1;if(r.id===Y.k)return 1;if(t.id===a)return-1;if(r.id===a)return 1;break;case K.fb.Calendars:if(t.resourceData.calendarType!==r.resourceData.calendarType)return q[t.resourceData.calendarType]-q[r.resourceData.calendarType];if(t.id===this._currentBoardId)return-1;if(r.id===this._currentBoardId)return 1;if("primary"===t.id)return-1;if("primary"===r.id)return 1;break;case K.fb.Lists:let e=this._trelloIntegrationSrv.getTrelloListById(t.id),i=this._trelloIntegrationSrv.getTrelloBoardById(e.boardId),n=this._trelloIntegrationSrv.getTrelloListById(r.id),o=this._trelloIntegrationSrv.getTrelloBoardById(n.boardId);return e.boardId===this._currentBoardId&&n.boardId!==this._currentBoardId?-1:n.boardId===this._currentBoardId&&e.boardId!==this._currentBoardId?1:Object(X.q)({...e,boardName:i.name},{...n,boardName:o.name});case K.fb.Labels:return t.id===Y.k?-1:r.id===Y.k?1:Object(X.p)(t.resourceData,r.resourceData)}return Object(X.j)(t.name,r.name)||Object(X.j)(t.id,r.id)}))).call(i,((e,t)=>({...e,order:t})))}},{kind:"method",key:"isHomePageShown",value:function isHomePageShown(){return!1}},{kind:"method",key:"isTaskListShown",value:function isTaskListShown(){return!1}},{kind:"method",key:"getTaskListsView",value:function getTaskListsView(){}},{kind:"method",key:"getTaskListsOrientation",value:function getTaskListsOrientation(){}},{kind:"method",key:"isABTestEnabled",value:function isABTestEnabled(e){var t,r;return null!==(t=null===(r=this._ABTests)||void 0===r?void 0:r[e])&&void 0!==t&&t}},{kind:"method",key:"initABTest",value:function initABTest(e){this._ABTests={};try{let e=JSON.parse(localStorage.planywayABTests);for(let t in e)K.a.hasValue(t)&&(this._ABTests[t]=e[t])}catch(e){}for(let t of D()(K.a))t in this._ABTests||(this._ABTests[t]=getRandomGroup(`${t}${e}`,2)>0);this._telemetrySrv.setABTestTests(this._ABTests);try{localStorage.planywayABTests=C()(this._ABTests)}catch(e){}}},{kind:"method",key:"sendLaunchAsync",value:async function sendLaunchAsync(){if(!this._launchInfoSent)return this._launchInfoSent=!0,this._backendSrv.sendLaunchAsync(),await this._trelloIntegrationSrv.initMemberAsync(),this._telemetrySrv.initMemberAsync()}},{kind:"method",key:"selectTemplateAsync",value:async function selectTemplateAsync(e){try{let t=K.tb[e];this._globalBoardSettings.viewTemplate=e,_()(this._globalBoardSettings,t),this._$rootScope.$broadcast(K.n.ChangeSchedulerViewRequested),this.setSchedulerButtonBusy(!0),this.setSchedulerBusy(!0),await this._settingsSrv.saveGlobalAsync()}finally{this.setSchedulerButtonBusy(!1),this.setSchedulerBusy(!1)}}},{kind:"get",key:"_currentBoardId",value:function _currentBoardId(){return this._trelloIntegrationSrv.getCurrentBoardId()}},{kind:"get",key:"_globalSettings",value:function _globalSettings(){return this._settingsSrv.currentSettings.global}},{kind:"get",key:"_localSettings",value:function _localSettings(){return this._settingsSrv.currentSettings.local}},{kind:"get",key:"_localBoardSettings",value:function _localBoardSettings(){return this._settingsSrv.currentSettings.getLocalBoardSettings(this._currentBoardId)}},{kind:"get",key:"_globalBoardSettings",value:function _globalBoardSettings(){return this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId)}},{kind:"method",key:"_watchTimeZoneChange",value:function _watchTimeZoneChange(){this._lastTimeZone=j.a.tz.guess(),this._$interval((()=>{let e=j.a.tz.guess(!0);e!==this._lastTimeZone&&(this._telemetrySrv.logSingleEvent(K.X.GeneralEvents.TimeZoneChanged,{previousTimeZone:this._lastTimeZone}),this._lastTimeZone=e,this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.TIME_ZONE_CHANGED"),K.A.Reload))}),5e3,0,!1)}}]}}));function getRandomGroup(e,t){var r;let i=V()(e);return y()(r=i.split("")).call(r,((e,t)=>e+t.charCodeAt(0)),0)%t}}).call(this,r(61))},217:function(e,t,r){"use strict";r.d(t,"a",(function(){return X}));var i=r(5),a=r.n(i),n=r(6),o=r.n(n),s=r(9),l=r.n(s),d=r(11),c=r.n(d),h=r(8),u=r.n(h),p=r(4),m=r.n(p),f=r(2),y=r.n(f),v=r(14),_=r.n(v),g=r(27),C=r.n(g),k=r(3),D=r.n(k),E=r(21),b=r.n(E),w=r(45),S=r.n(w),T=r(41),A=r.n(T),I=r(94),R=r.n(I),O=r(15),P=r.n(O),L=r(26),M=r.n(L),N=r(124),B=r.n(N),F=r(107),$=r.n(F),x=r(182),G=r.n(x),z=r(263),U=r.n(z),W=r(10),j=r(7),H=r(0),V=r(1);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;y()(r=["method","field"]).call(r,(function(r){y()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;y()(r=["method","field"]).call(r,(function(r){y()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}m()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(y()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),y()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==u()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];c()(o).call(o,u()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var h=0;h<d.length;h++)this.addElementPlacement(d[h],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return m()(t,l.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return D()(t=P()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:o()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:D()(e).call(e,this.fromElementDescriptor,this)};return m()(t,l.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[_.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Y=new G.a(j.I),K={[W.f.TrialNoRemainingTrials]:"NOTIFICATIONS.PLANYWAY_ACTIVATE_TRIAL_ERROR_NO_REMAINING_TRIALS",[W.f.TrialPaidAlreadyActive]:"NOTIFICATIONS.PLANYWAY_ACTIVATE_TRIAL_ERROR_PAID_ALREADY_ACTIVE",[W.f.InviteTokenInvalid]:"NOTIFICATIONS.PLANYWAY_INVITE_ERROR_TOKEN_INVALID",[W.f.InviteUnconfirmedAccount]:"NOTIFICATIONS.PLANYWAY_INVITE_ERROR_UNCONFIRMED_MEMBER"};let X=function _decorate(e,t,r,i){var n,o=_getDecoratorsApi();if(i)for(var s=0;s<i.length;s++)o=i[s](o);var l=t((function initialize(e){o.initializeInstanceElements(e,d.elements)}),r),d=o.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===n.key&&e.placement===n.placement},r=0;r<e.length;r++){var i,n=e[r];if("method"===n.kind&&(i=a()(t).call(t,isSameElement)))if(_isDataDescriptor(n.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(n)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");i.descriptor=n.descriptor}else{if(_hasDecorators(n)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");i.decorators=n.decorators}_coalesceGetterSetter(n,i)}else t.push(n)}return t}(D()(n=l.d).call(n,_createElementDescriptor)),e);return o.initializeClassElements(l.F,d.elements),o.runClassFinishers(l.F,d.finishers)}([Object(V.Bb)(["$injector","$log","$window","$translate","notificationSrv","platformSrv","telemetrySrv"])],(function(e){return{F:class BackendService{constructor(t,r,i,a,n,o,s){e(this),this._$injector=t,this._$log=r,this._$window=i,this._$translate=a,this._notificationSrv=n,this._platformSrv=o,this._telemetrySrv=s;try{this._browser=B.a.getParser(this._$window.navigator.userAgent)}catch(e){}}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"backendSrv"}},{kind:"get",key:"_trelloIntegrationSrv",value:function _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=this._$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}},{kind:"method",key:"getMemberSettingsAsync",value:async function getMemberSettingsAsync(){let e=await this._restAsync(H.L.Get,`${j.c}/trello/${this._memberId}/memberSettings`,"Get member settings",{token:this._trelloToken});if(!e.success){let t=new Error(e.message);throw t.code=e.code,t.details=e.details,t}return this._memberSettingsETag=e.data._etag,{creationDate:new Date(e.data.creationDate),settingsString:e.data.serialized,flags:R()(e.data)}}},{kind:"method",key:"setMemberSettingsAsync",value:async function setMemberSettingsAsync(e,t){let r=await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/memberSettings`,"Set member settings",{token:this._trelloToken,body:{action:"set",data:{creationDate:null==e?void 0:e.toISOString(),serialized:t,_etag:this._memberSettingsETag}}});if(!r.success){let e=new Error(r.message);throw e.code=r.code,e.details=r.details,e}this._memberSettingsETag=r.data._etag}},{kind:"method",key:"getBoardsSettingsAsync",value:async function getBoardsSettingsAsync(e){let t=await this._restAsync(H.L.Get,`${j.c}/trello/${this._memberId}/boardSettings`,"Get board settings",{token:this._trelloToken,query:{ids:A()(e).call(e,0,50).join()}});if(!t.success){let e=new Error(t.message);throw e.code=t.code,e.details=t.details,e}return t.data}},{kind:"method",key:"setBoardSettingsAsync",value:async function setBoardSettingsAsync(e,t){let r=await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/boardSettings`,"Set board settings",{token:this._trelloToken,body:{action:"set",data:{...t,id:e}}});if(!r.success){let e=new Error(r.message);throw e.code=r.code,e.details=r.details,e}}},{kind:"method",key:"sendLaunchAsync",value:async function sendLaunchAsync(){try{await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/acquisition`,"Send launch",{token:this._trelloToken,body:{action:"launch",data:{appType:this._platformSrv.getAppType(),unauthorizedId:this._telemetrySrv.unauthorizedId}},deduplicationTag:`Launch Request ${Math.floor(S()()/1e3/60/60)}`})}catch(e){}}},{kind:"method",key:"sendSurveyAsync",value:async function sendSurveyAsync(e){try{await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/acquisition`,"Send survey",{token:this._trelloToken,body:{action:"survey",data:e}})}catch(e){}}},{kind:"method",key:"getMemberLicenseAsync",value:async function getMemberLicenseAsync(){let e=await this._restAsync(H.L.Get,`${j.c}/trello/${this._memberId}/license`,"Get member license",{token:this._trelloToken});if(!e.success){let t=new Error(e.message);throw t.code=e.code,t.details=e.details,t}let t=e.data;return this._verifySignature(t),{licenseType:t.licenseType,expirationDate:t.expirationDate&&new Date(t.expirationDate),maxMemberLanes:t.maxMemberLanes,remainingTrials:t.remainingTrials,isLicenseAdmin:t.isLicenseAdmin}}},{kind:"method",key:"activateTrialLicenseAsync",value:async function activateTrialLicenseAsync(){let e=await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/license`,"Activate trial license",{token:this._trelloToken,body:{action:"activateTrial"}});if(!e.success)return void this._notificationSrv.showNotification(K[e.code]?this._$translate.instant(K[e.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_ACTIVATE_TRIAL_ERROR_WITH_MESSAGE",{message:e.message}),H.A.Error);let t=e.data;return this._verifySignature(t),{licenseType:t.licenseType,expirationDate:t.expirationDate&&new Date(t.expirationDate),maxMemberLanes:t.maxMemberLanes,remainingTrials:t.remainingTrials,isLicenseAdmin:t.isLicenseAdmin}}},{kind:"method",key:"sendFeedbackAsync",value:async function sendFeedbackAsync(e){try{var t,r;let a,n=this._restAsync(H.L.Get,`${j.c}/feedback/link`,"Get feedback upload link");var i;if(e.files)a=b.a.all(D()(i=e.files).call(i,(async e=>{let t=await Object(V.ub)(e);return{name:e.name,content:t}})));let[o,s]=await b.a.all([n,a]);if(!o.success)throw new Error(`Failed to get feedback upload link! Response:\n${C()(o,null,4)}`);return await this._restAsync(H.L.Put,o.data,"Send feedback",{headers:{"x-ms-blob-type":"BlockBlob"},body:{memberId:e.memberId,memberName:e.memberName,memberEmail:e.memberEmail,appType:this._platformSrv.getAppType(),appVersion:this._platformSrv.getAppVersion(),browserName:null===(t=this._browser)||void 0===t?void 0:t.getBrowserName(),browserVersion:null===(r=this._browser)||void 0===r?void 0:r.getBrowserVersion(),browserLocale:$.a,timeZone:M.a.tz.guess(),isEnterpriseContactUs:e.isEnterpriseContactUs,message:e.message,attachments:s}}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.SEND_FEEDBACK_SUCCESS"),H.A.Success),!0}catch(e){return this._$log.error("Planyway send feedback error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway send feedback error",e,{class:this.constructor.name,method:this.sendFeedbackAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.SEND_FEEDBACK_ERROR"),H.A.Error),!1}}},{kind:"method",key:"createInviteTokenAsync",value:async function createInviteTokenAsync(e){let t=await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/invite`,"Create invite token",{token:this._trelloToken,body:{action:"createInvite",data:{boardId:e}}});return t.success||this._notificationSrv.showNotification(K[t.code]?this._$translate.instant(K[t.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_INVITE_ERROR_WITH_MESSAGE",{message:t.message}),H.A.Error),t.data.inviteToken}},{kind:"method",key:"deleteInviteTokenAsync",value:async function deleteInviteTokenAsync(e){let t=await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/invite`,"Delete invite token",{token:this._trelloToken,body:{action:"deleteInvite",data:{inviteToken:e}}});t.success||this._notificationSrv.showNotification(K[t.code]?this._$translate.instant(K[t.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_INVITE_ERROR_WITH_MESSAGE",{message:t.message}),H.A.Error)}},{kind:"method",key:"addMemberToBoardByInviteAsync",value:async function addMemberToBoardByInviteAsync(e){let t=await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/invite`,"Add member to board by invite",{token:this._trelloToken,body:{action:"addMemberByInvite",data:{inviteToken:e}}});return!!t.success||(this._notificationSrv.showNotification(K[t.code]?this._$translate.instant(K[t.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_INVITE_ERROR_WITH_MESSAGE",{message:t.message}),H.A.Error),!1)}},{kind:"method",key:"notifyMemberInvitedToBoardAsync",value:async function notifyMemberInvitedToBoardAsync(e,t){let r=await this._restAsync(H.L.Post,`${j.c}/trello/${this._memberId}/invite`,"Notify member invited to board",{token:this._trelloToken,body:{action:"notifyMemberInvited",data:{boardId:e,inviteeId:t.inviteeId,inviteeEmail:t.inviteeEmail}}});r.success||this._notificationSrv.showNotification(K[r.code]?this._$translate.instant(K[r.code]):this._$translate.instant("NOTIFICATIONS.PLANYWAY_INVITE_ERROR_WITH_MESSAGE",{message:r.message}),H.A.Error)}},{kind:"method",key:"clearMemberDataAsync",value:async function clearMemberDataAsync(){}},{kind:"method",key:"getPricingAsync",value:async function getPricingAsync(){let e=await this._restAsync(H.L.Get,`${j.c}/payment/pd/prices`,"Get pricing");if(!e.success){let t=new Error(e.message);throw t.code=e.code,t.details=e.details,t}return e.data}},{kind:"method",key:"subscribePushNotificationsAsync",value:async function subscribePushNotificationsAsync(e,t){let r=await this._restAsync(H.L.Post,`${j.x}/trello/${this._memberId}/control`,"Subscribe Push Notifications",{token:this._trelloToken,body:{action:"subscribe",data:{subscription:e,timeZone:t}}});if(!r.success){let e=new Error(r.message);throw e.code=r.code,e.details=r.details,e}}},{kind:"method",key:"checkPushNotificationsSubscriptionAsync",value:async function checkPushNotificationsSubscriptionAsync(e){var t;let r=await this._restAsync(H.L.Post,`${j.x}/trello/${this._memberId}/control`,"Check Push Notifications subscription",{token:this._trelloToken,body:{action:"check",data:{subscription:e}}});if(!r.success){let e=new Error(r.message);throw e.code=r.code,e.details=r.details,e}return null!==(t=r.data.isExists)&&void 0!==t&&t}},{kind:"method",key:"unsubscribePushNotificationsAsync",value:async function unsubscribePushNotificationsAsync(){let e=await this._restAsync(H.L.Post,`${j.x}/trello/${this._memberId}/control`,"Unsubscribe Push Notifications",{token:this._trelloToken,body:{action:"unsubscribe"}});if(!e.success){let t=new Error(e.message);throw t.code=e.code,t.details=e.details,t}}},{kind:"get",key:"_memberId",value:function _memberId(){return this._trelloIntegrationSrv.getMemberId()}},{kind:"get",key:"_trelloToken",value:function _trelloToken(){return this._trelloIntegrationSrv.getTrelloToken()}},{kind:"method",key:"_restAsync",value:async function _restAsync(e,t,r,i={}){let a,n=this._telemetrySrv.logRequest(r,e,t,{...i.query,...i.body}),o=200;try{return await this._platformSrv.restAsync(e,t,i)}catch(e){throw o=e.status,a=e.response,e}finally{this._telemetrySrv.logRequestEnd(n,o,a)}}},{kind:"method",key:"_verifySignature",value:function _verifySignature(e){let{signature:t,...r}=e;try{if(Y.verify(U()(r),t,"utf-8","base64"))return!0;throw new Error("Invalid signature")}catch(e){e.signature=t,e.data=r,this._$log.error("Planyway failed to verify signature:"),this._$log.error(e),this._telemetrySrv.logError("Planyway failed to verify signature",e,{class:this.constructor.name,method:this._verifySignature.name})}return!1}}]}}))},219:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var i=r(5),a=r.n(i),n=r(6),o=r.n(n),s=r(9),l=r.n(s),d=r(11),c=r.n(d),h=r(8),u=r.n(h),p=r(4),m=r.n(p),f=r(2),y=r.n(f),v=r(3),_=r.n(v),g=r(14),C=r.n(g),k=r(45),D=r.n(k),E=r(144),b=r.n(E),w=r(16),S=r.n(w),T=r(15),A=r.n(T),I=r(10),R=r(0),O=r(1);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;y()(r=["method","field"]).call(r,(function(r){y()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;y()(r=["method","field"]).call(r,(function(r){y()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}m()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(y()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),y()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==u()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];c()(o).call(o,u()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var h=0;h<d.length;h++)this.addElementPlacement(d[h],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return m()(t,l.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return _()(t=A()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:o()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:_()(e).call(e,this.fromElementDescriptor,this)};return m()(t,l.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[C.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let P=function _decorate(e,t,r,i){var n,o=_getDecoratorsApi();if(i)for(var s=0;s<i.length;s++)o=i[s](o);var l=t((function initialize(e){o.initializeInstanceElements(e,d.elements)}),r),d=o.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===n.key&&e.placement===n.placement},r=0;r<e.length;r++){var i,n=e[r];if("method"===n.kind&&(i=a()(t).call(t,isSameElement)))if(_isDataDescriptor(n.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(n)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");i.descriptor=n.descriptor}else{if(_hasDecorators(n)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");i.decorators=n.decorators}_coalesceGetterSetter(n,i)}else t.push(n)}return t}(_()(n=l.d).call(n,_createElementDescriptor)),e);return o.initializeClassElements(l.F,d.elements),o.runClassFinishers(l.F,d.finishers)}([Object(O.Bb)(["$log","$window","$translate","backendSrv","dialogSrv","notificationSrv","platformSrv","telemetrySrv"])],(function(e){return{F:class LicenseService{constructor(t,r,i,a,n,o,s,l){e(this),this._$log=t,this._$window=r,this._$translate=i,this._backendSrv=a,this._dialogSrv=n,this._notificationSrv=o,this._platformSrv=s,this._telemetrySrv=l}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"licenseSrv"}},{kind:"field",key:"_memberLicense",value:void 0},{kind:"method",key:"loadLicenseAsync",value:async function loadLicenseAsync(){let e=this._getCancellationToken("loadMemberLicense");this._memberLicense=null,this._availablePaidFeatures=new S.a;try{let t=await this._backendSrv.getMemberLicenseAsync();if(e.isCanceled())return;this._memberLicense=t}catch(e){this._$log.error("Planyway get license error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway get license error",e,{class:this.constructor.name,method:this.loadLicenseAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_MEMBER_LICENSE_LOADING_ERROR"),R.A.Reload)}this.isLicenseLoaded()&&this._applyLicense()}},{kind:"method",key:"activateTrialLicenseAsync",value:async function activateTrialLicenseAsync(){let e=this._getCancellationToken("activateTrialLicense");try{let t=await this._backendSrv.activateTrialLicenseAsync();if(e.isCanceled())return!1;t&&(this._memberLicense=t)}catch(e){this._$log.error("Planyway activate trial license error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway activate trial license error",e,{class:this.constructor.name,method:this.activateTrialLicenseAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_ACTIVATE_TRIAL_ERROR"),R.A.Error)}this.isLicenseLoaded()&&this._memberLicense.licenseType!==I.g.Free&&this._applyLicense()}},{kind:"method",key:"isLicenseLoaded",value:function isLicenseLoaded(){return!!this._memberLicense}},{kind:"method",key:"isLicenseActive",value:function isLicenseActive(){if(this.isLicenseLoaded())return this._memberLicense.licenseType!==I.g.Free&&this._memberLicense.expirationDate>new Date}},{kind:"method",key:"getLicenseType",value:function getLicenseType(){if(this.isLicenseLoaded())return this._memberLicense.licenseType}},{kind:"method",key:"getLicenseExpirationDate",value:function getLicenseExpirationDate(){if(this.isLicenseLoaded())return this._memberLicense.expirationDate}},{kind:"method",key:"getMaxMemberLanes",value:function getMaxMemberLanes(){var e;return null!==(e=this._memberLicense.maxMemberLanes)&&void 0!==e?e:b.a}},{kind:"method",key:"getRemainingTrials",value:function getRemainingTrials(){if(this.isLicenseLoaded())return this._memberLicense.remainingTrials}},{kind:"method",key:"isTrialAvailable",value:function isTrialAvailable(){return!this.isLicenseActive()&&this.getRemainingTrials()>0}},{kind:"method",key:"isLicenseAdmin",value:function isLicenseAdmin(){var e;return!!this.isLicenseLoaded()&&(null!==(e=this._memberLicense.isLicenseAdmin)&&void 0!==e&&e)}},{kind:"method",key:"checkPaidFeatureAvailable",value:function checkPaidFeatureAvailable(e,t=!1,r={}){if(!this.isLicenseLoaded())return t&&this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_MEMBER_LICENSE_LOADING_ERROR"),R.A.Reload),!1;if(this._availablePaidFeatures.has(e))switch(e){case R.B.TimelineMember:if(void 0===r.paidLanesCount||r.paidLanesCount<=this.getMaxMemberLanes())return!0;break;default:return this.isLicenseActive()}return t&&this._dialogSrv.showPaidFeatureOfferDialogAsync(e,r),!1}},{kind:"method",key:"_applyLicense",value:function _applyLicense(){let e=this.isLicenseActive()?this.getLicenseType():I.g.Free;this._availablePaidFeatures=R.E[e]}},{kind:"method",key:"_getCancellationToken",value:function _getCancellationToken(e){this._cancellationTokens||(this._cancellationTokens={});let t=D()(),r={_timestamp:t,isCanceled:()=>this._cancellationTokens[e]._timestamp!==t};return this._cancellationTokens[e]=r,r}}]}}))},220:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i=r(5),a=r.n(i),n=r(6),o=r.n(n),s=r(9),l=r.n(s),d=r(11),c=r.n(d),h=r(8),u=r.n(h),p=r(4),m=r.n(p),f=r(3),y=r.n(f),v=r(14),_=r.n(v),g=r(2),C=r.n(g),k=r(16),D=r.n(k),E=r(15),b=r.n(E),w=r(1);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;C()(r=["method","field"]).call(r,(function(r){C()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;C()(r=["method","field"]).call(r,(function(r){C()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}m()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(C()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),C()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==u()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];c()(o).call(o,u()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var h=0;h<d.length;h++)this.addElementPlacement(d[h],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return m()(t,l.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return y()(t=b()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:o()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:y()(e).call(e,this.fromElementDescriptor,this)};return m()(t,l.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[_.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let S=function _decorate(e,t,r,i){var n,o=_getDecoratorsApi();if(i)for(var s=0;s<i.length;s++)o=i[s](o);var l=t((function initialize(e){o.initializeInstanceElements(e,d.elements)}),r),d=o.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===n.key&&e.placement===n.placement},r=0;r<e.length;r++){var i,n=e[r];if("method"===n.kind&&(i=a()(t).call(t,isSameElement)))if(_isDataDescriptor(n.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(n)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");i.descriptor=n.descriptor}else{if(_hasDecorators(n)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");i.decorators=n.decorators}_coalesceGetterSetter(n,i)}else t.push(n)}return t}(y()(n=l.d).call(n,_createElementDescriptor)),e);return o.initializeClassElements(l.F,d.elements),o.runClassFinishers(l.F,d.finishers)}([Object(w.Bb)([])],(function(e){return{F:class NotificationService{constructor(){e(this),this._notificationListeners=new D.a,this._notificationQueue=[]}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"notificationSrv"}},{kind:"method",key:"addEventListener",value:function addEventListener(e){this._notificationListeners.add(e)}},{kind:"method",key:"removeEventListener",value:function removeEventListener(e){this._notificationListeners.delete(e)}},{kind:"method",key:"showNotification",value:function showNotification(e,t,r){var i;this._notificationQueue.push({message:e,type:t}),C()(i=this._notificationListeners).call(i,(i=>i(e,t,r)))}},{kind:"method",key:"getNotificationQueue",value:function getNotificationQueue(){return this._notificationQueue}},{kind:"method",key:"clearNotificationQueue",value:function clearNotificationQueue(){this._notificationQueue=[]}}]}}))},221:function(e,t,r){"use strict";r.d(t,"a",(function(){return le}));var i=r(9),a=r.n(i),n=r(4),o=r.n(n),s=r(14),l=r.n(s),d=r(144),c=r.n(d),h=r(27),u=r.n(h),p=r(6),m=r.n(p),f=r(58),y=r.n(f),v=r(56),_=r.n(v),g=r(8),C=r.n(g),k=r(20),D=r.n(k),E=r(95),b=r.n(E),w=r(11),S=r.n(w),T=r(12),A=r.n(T),I=r(23),R=r.n(I),O=r(29),P=r.n(O),L=r(22),M=r.n(L),N=r(3),B=r.n(N),F=r(17),$=r.n(F),x=r(21),G=r.n(x),z=r(16),U=r.n(z),W=r(19),j=r.n(W),H=r(5),V=r.n(H),Y=r(2),K=r.n(Y),X=r(15),q=r.n(X),Q=r(187),J=r(7),Z=r(0),ee=r(1),te=r(28),re=r(88);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;K()(r=["method","field"]).call(r,(function(r){K()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;K()(r=["method","field"]).call(r,(function(r){K()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}o()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(K()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),K()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];S()(o).call(o,C()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return o()(t,a.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return B()(t=q()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:m()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:B()(e).call(e,this.fromElementDescriptor,this)};return o()(t,a.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[l.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const ie="https://trello.com",ae="https://api.trello.com/1",ne=["fullName","email"].join(),oe=["name","displayName","logoHash","limits","memberships","prefs","premiumFeatures"].join(),se=["name","closed","shortLink","prefs","premiumFeatures","idOrganization","memberships"].join();let le=function _decorate(e,t,r,i){var a,n=_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=V()(t).call(t,isSameElement)))if(_isDataDescriptor(a.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(a)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(_hasDecorators(a)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}_coalesceGetterSetter(a,i)}else t.push(a)}return t}(B()(a=s.d).call(a,_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([Object(ee.Bb)(["$injector","$rootScope","$log","$window","$timeout","$interval","$httpParamSerializer","$translate","appCommonSrv","licenseSrv","notificationSrv","platformSrv","settingsSrv","telemetrySrv"])],(function(e){return{F:class TrelloIntegrationService{constructor(t,r,i,a,n,o,s,l,d,c,h,u,p,m){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$window=a,this._$timeout=n,this._$interval=o,this._$httpParamSerializer=s,this._$translate=l,this._appCommonSrv=d,this._licenseSrv=c,this._notificationSrv=h,this._platformSrv=u,this._settingsSrv=p,this._telemetrySrv=m,this._isAuthorizationChecking=!1,this._isMemberInitializing=!1,this._isMemberAvailable=!1,this._isCurrentBoardInitializing=!1,this._isCurrentBoardAvailable=!1,this._isCurrentCardMode=!1,this._$window.addEventListener("beforeunload",(()=>{if(this._authPopup)try{this._authPopup.close()}catch(e){}}));for(const e in this._boardsListeners)this._boardsMap.addEventListener(e,((t,r={})=>{var i,a;r.silent||K()(a=this._boardsListeners[e]).call(a,(e=>e(t,r)));if(!this._currentBoardId)return;if("cleared"===e)return this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Members}),this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Calendars}),this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Lists}),void this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Labels});let n=V()(i=this.getCurrentBoardConnectedBoards()).call(i,(e=>e.id===t.id));switch(e){case"updated":if(t.closed!==r.oldValue.closed)return this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Members}),this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Calendars}),this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Lists}),void this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Labels});if(t.id!==this._currentBoardId&&n&&!n.isSelected)return;t.name!==r.oldValue.name&&this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Calendars}),Object(ee.h)(t.members,r.oldValue.members)||this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Members}),Object(ee.h)(t.lists,r.oldValue.lists)||this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Lists}),Object(ee.h)(t.labels,r.oldValue.labels)||this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Labels});break;case"deleted":if(t.id!==this._currentBoardId&&n&&!n.isSelected)return;this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Members}),this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Calendars}),this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Lists}),this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Labels})}}));this._$window.document.addEventListener(Z.n.TrelloFiltersChanged,(e=>{this._filtersChangedTimeout&&this._$timeout.cancel(this._filtersChangedTimeout),this._filtersChangedTimeout=this._$timeout((()=>{e.detail===this._currentBoardId&&(this._trelloFilters=null,this._$rootScope.$broadcast(Z.n.FiltersChanged))}),100,!1)})),this._$window.document.addEventListener(Z.n.TrelloSyncUpdate,(e=>{switch(e.detail.typeName){case"Member":for(let t of e.detail.deltas)this._updateByTrelloMemberDelta(t);break;case"Board":for(let t of e.detail.deltas)this._updateByTrelloBoardDelta(t);break;case"List":for(let t of e.detail.deltas)this._updateByTrelloListDelta(t);break;case"Label":for(let t of e.detail.deltas)this._updateByTrelloLabelDelta(t);break;case"CustomField":for(let t of e.detail.deltas)this._updateByTrelloCustomFieldDelta(t)}})),this._$window.document.addEventListener(Z.n.TrelloSyncDelete,(e=>{switch(e.detail.typeName){case"CustomField":for(let t of e.detail.deltas)this._deleteByTrelloCustomFieldDelta(t)}}))}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"trelloIntegrationSrv"}},{kind:"field",key:"_token",value:void 0},{kind:"field",key:"_organizationsMap",value:()=>new j.a},{kind:"field",key:"_boardsMap",value:()=>new re.a("id")},{kind:"field",key:"_listsMap",value:()=>new j.a},{kind:"field",key:"_labelsMap",value:()=>new j.a},{kind:"field",key:"_membersMap",value:()=>new j.a},{kind:"field",key:"_membersByUserNameMap",value:()=>new j.a},{kind:"field",key:"_customFieldsMap",value:()=>new j.a},{kind:"field",key:"_boardsListeners",value:()=>({added:new U.a,updated:new U.a,deleted:new U.a,cleared:new U.a})},{kind:"get",key:"_chatSrv",value:function _chatSrv(){return this._chatSrvLazy||(this._chatSrvLazy=this._$injector.get("chatSrv")),this._chatSrvLazy}},{kind:"get",key:"_iCalIntegrationSrv",value:function _iCalIntegrationSrv(){return this._iCalIntegrationSrvLazy||(this._iCalIntegrationSrvLazy=this._$injector.get("iCalIntegrationSrv")),this._iCalIntegrationSrvLazy}},{kind:"get",key:"_googleIntegrationSrv",value:function _googleIntegrationSrv(){return this._googleIntegrationSrvLazy||(this._googleIntegrationSrvLazy=this._$injector.get("googleIntegrationSrv")),this._googleIntegrationSrvLazy}},{kind:"get",key:"_trelloCardsSrv",value:function _trelloCardsSrv(){return this._trelloCardsSrvLazy||(this._trelloCardsSrvLazy=this._$injector.get("trelloCardsSrv")),this._trelloCardsSrvLazy}},{kind:"method",key:"isAuthorized",value:function isAuthorized(){return!!this._token}},{kind:"method",key:"checkAuthorizationAsync",value:async function checkAuthorizationAsync(){if(this.isAuthorized())return!0;this._checkAuthorizationPromise||(this._checkAuthorizationPromise=(async()=>{let e;try{e=await this._platformSrv.getTrelloTokenAsync()}catch(e){this._$log.error("Planyway failed to get Trello token:"),this._$log.error(e)}let t=await this._checkTrelloTokenAsync(e);this._token=t?e:null;try{await this._platformSrv.setTrelloTokenAsync(this._token)}catch(e){this._$log.error("Planyway failed to set Trello token:"),this._$log.error(e)}})());try{return await this._checkAuthorizationPromise,this.isAuthorized()}finally{this._checkAuthorizationPromise=null}}},{kind:"method",key:"authorizeAsync",value:async function authorizeAsync(e){if(this.isAuthorized())return!0;if(this._authPopup)try{return this._authPopup.focus(),!1}catch(e){}try{if(this._telemetrySrv.logSingleEvent(Z.X.GeneralEvents.AuthRequested),this._appCommonSrv.isInsideTeams()&&this._appCommonSrv.isInsideElectron())e=await new G.a(((e,t)=>{Q.initialize((()=>{Q.authentication.authenticate({height:720,width:650,url:this.getRequestTrelloTokenUrl(),successCallback:t=>e(t),failureCallback:e=>t("CancelledByUser"===e?J.t:e)})}))}));else if(!e){let t=this._getReturnUrl(),r=this._getAuthUrl({name:J.S,return_url:t,callback_method:"postMessage",expiration:"never",scope:"read,write,account"});e=await this._openAuthPopupAsync(r)}this._isAuthorizationChecking=!0;let t=await this._checkTrelloTokenAsync(e);this._token=t?e:null,await this._platformSrv.setTrelloTokenAsync(this._token)}catch(e){if("string"==typeof e&&$()(e).call(e,J.t))return this._telemetrySrv.logSingleEvent(Z.X.GeneralEvents.AuthRejected),!1;this._$log.error("Trello authorization error:"),this._$log.error(e),this._telemetrySrv.logError("Trello authorization error",e,{class:this.constructor.name,method:this.authorizeAsync.name})}finally{this._isAuthorizationChecking=!1}return this.isAuthorized()?(this._$rootScope.$broadcast(Z.n.TrelloAuthorized),this._platformSrv.reloadAppAsync(!0),this._telemetrySrv.logSingleEvent(Z.X.GeneralEvents.AuthConfirmed),!0):(this._telemetrySrv.logSingleEvent(Z.X.GeneralEvents.AuthRejected),!1)}},{kind:"method",key:"getTrelloToken",value:function getTrelloToken(){return this._token}},{kind:"method",key:"getRequestTrelloTokenUrl",value:function getRequestTrelloTokenUrl(){}},{kind:"method",key:"getTrelloTokenUrl",value:function getTrelloTokenUrl(){}},{kind:"method",key:"initMemberAsync",value:async function initMemberAsync(){if(!await this.checkAuthorizationAsync())return!1;this._initMemberPromise||(this._initMemberPromise=(async()=>await this._loadMemberAsync()?(this._appCommonSrv.applyLocale(this._appCommonSrv.getLocale()),!0):(this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.LOAD_MEMBER_INFO_ERROR"),Z.A.Error),!1))());try{return this._isMemberInitializing=!0,await this._initMemberPromise}catch(e){return this._$log.error("Planyway member initialization error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway member initialization error",e,{class:this.constructor.name,method:this.initMemberAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_INITIALIZATION_ERROR"),Z.A.Error),!1}finally{this._isMemberInitializing=!1,this._initMemberPromise=null}}},{kind:"method",key:"isMemberInitializing",value:function isMemberInitializing(){return this._isAuthorizationChecking||this._isMemberInitializing}},{kind:"method",key:"isMemberUnavailable",value:function isMemberUnavailable(){return!this._isMemberAvailable}},{kind:"method",key:"getMemberId",value:function getMemberId(){return this._memberId}},{kind:"method",key:"getMemberName",value:function getMemberName(){return this._memberName}},{kind:"method",key:"getMemberEmail",value:function getMemberEmail(){return this._memberEmail}},{kind:"method",key:"getTrelloOrganizations",value:function getTrelloOrganizations(){var e,t,r;let i={availableBoardsCount:0,canCreatePublicBoards:!1,canCreatePrivateBoards:!1,canCreateOrganizationBoards:!1,canDeletePublicBoards:!1,canDeletePrivateBoards:!1,canDeleteOrganizationBoards:!1,canInviteGuests:!1},a={...i,id:J.A,type:"personal",name:this._$translate.instant("MENU.PERSONAL_BOARDS"),memberships:new j.a([[this._memberId,Z.rb.Admin]]),boards:[],canCreatePublicBoards:!0,canCreatePrivateBoards:!0,canCreateOrganizationBoards:!0,canDeletePublicBoards:!0,canDeletePrivateBoards:!0,canDeleteOrganizationBoards:!0,canInviteGuests:!0},n={...i,id:J.H,type:"public",name:this._$translate.instant("MENU.PUBLIC_BOARDS"),memberships:new j.a,boards:[]},o={...i,id:J.M,type:"starred",name:this._$translate.instant("MENU.STARRED_BOARDS"),memberships:new j.a([[this._memberId,Z.rb.Admin]]),boards:[]},s=[o,a,...B()(e=M()(P()(t=this._organizationsMap).call(t))).call(e,(e=>({...i,...e,type:"real",boards:[]}))),n];for(let e of this.getTrelloBoards())switch(e.starred&&o.boards.push({...e}),e.organizationId){case J.H:n.boards.push({...e,starredPosition:void 0});break;case J.A:a.boards.push({...e,starredPosition:void 0});break;default:let t=V()(s).call(s,(t=>t.id===e.organizationId));t&&t.boards.push({...e,starredPosition:void 0})}return R()(r=o.boards).call(r,((e,t)=>e.starredPosition-t.starredPosition)),s}},{kind:"method",key:"getTrelloOrganizationById",value:function getTrelloOrganizationById(e){return this._organizationsMap.get(e)}},{kind:"method",key:"getTrelloBoards",value:function getTrelloBoards(){var e,t;return A()(e=P()(t=this._boardsMap).call(t)).call(e,(e=>!e.closed))}},{kind:"method",key:"getTrelloBoardById",value:function getTrelloBoardById(e){return this._boardsMap.get(e)}},{kind:"method",key:"getTrelloListById",value:function getTrelloListById(e){return this._listsMap.get(e)}},{kind:"method",key:"getTrelloLabelById",value:function getTrelloLabelById(e){return this._labelsMap.get(e)}},{kind:"method",key:"getTrelloMemberById",value:function getTrelloMemberById(e){return this._membersMap.get(e)}},{kind:"method",key:"getMemberByUserName",value:function getMemberByUserName(e){return this._membersByUserNameMap.get(e)}},{kind:"method",key:"getTrelloCustomFieldById",value:function getTrelloCustomFieldById(e){return this._customFieldsMap.get(e)}},{kind:"method",key:"getTrelloFilters",value:function getTrelloFilters(){if(!this._trelloFilters)try{let e=localStorage[`boardCardFilterSettings-${this._currentBoardId}-${this._memberId}`];if(!e)return;let t=JSON.parse(e);this._trelloFilters={keywords:Object(te.h)(t.title),labelIds:t.idLabels||[],memberIds:t.idMembers||[],due:t.due,mode:t.mode||"or"}}catch(e){this._$log.error("Trello filters getting error:"),this._$log.error(e)}return this._trelloFilters}},{kind:"method",key:"initCurrentBoardAsync",value:async function initCurrentBoardAsync(e){try{this._appCommonSrv.setSchedulerButtonBusy(!0);let t=await this.checkAuthorizationAsync();if(e.isCanceled())return;if(!t)return this._appCommonSrv.applyLocale(this._appCommonSrv.getLocale()),await this._settingsSrv.loadSettingsAsync(),this._isCurrentBoardInPreview=!0,void this._$rootScope.$once(Z.n.TrelloAuthorized,(()=>{this.initCurrentBoardAsync(e)}))}finally{e.isCanceled()||this._appCommonSrv.setSchedulerButtonBusy(!1)}try{this._isCurrentBoardInitializing=!0,this._appCommonSrv.setSchedulerBusy(!0),this._appCommonSrv.setSchedulerButtonBusy(!0);let t=!1,r=!1;if(this._lastBoardId)t=!0,await Object(ee.x)(50);else{if(!await this.initMemberAsync())return}if(this._currentBoardId=await this._getCurrentBoardIdAsync(),!this._currentBoardId)return void(this._isCurrentBoardAvailable=!1);if(e.isCanceled())return;this._currentBoardId!==this._lastBoardId&&(this._isCurrentBoardAvailable=!1);let i=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId);this._isCurrentBoardInPreview&&(this._isCurrentBoardInPreview=!1,i.showCalendar=!0,this._settingsSrv.saveGlobalAsync());let a=this._boardsMap.get(this._currentBoardId);if(!a||this._currentBoardId===this._lastBoardId){if(!await this._loadMemberAsync(!0))return void this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.LOAD_MEMBER_INFO_ERROR"),Z.A.Error);if(a=this._boardsMap.get(this._currentBoardId),!a){if(a=await this.addPublicBoardAsync(this._currentBoardId),!a)return this.changeCurrentBoardAsync(null);r=!0}}0,this._isCurrentBoardAvailable=!0,this._currentBoardId!==this._lastBoardId&&(this._lastBoardId=this._currentBoardId,this._trelloFilters=null),await this.loadBoardsSettingsAsync([this._currentBoardId]);for(let e of a.connectedPublicBoards)await this.addPublicBoardAsync(e.id);this._subscribeTrelloSync(this._currentBoardId);for(let e of this.getCurrentBoardConnectedBoards())e.isSelected&&this._subscribeTrelloSync(e.id);this._trelloCardsSrv.initCurrentBoardAsync(e),this._googleIntegrationSrv.initCurrentBoardAsync(e),this._iCalIntegrationSrv.initCurrentBoardAsync(e),this._isCurrentBoardInitializing=!1;const sendTelemetry=()=>{t&&this._telemetrySrv.logSessionEvent(Z.X.TrelloEvents.BoardSwitched),this._telemetrySrv.logSessionEvent(Z.X.CalendarEvents.Opened),r&&this._telemetrySrv.logSessionEvent(Z.X.CalendarEvents.PublicBoardAdded,{source:"Direct"})};this._appCommonSrv.isSchedulerShown()?sendTelemetry():this._$rootScope.$once(Z.n.SchedulerShown,(()=>{e.isCanceled()||sendTelemetry()}))}catch(e){this._$log.error("Planyway board initialization error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway board initialization error",e,{class:this.constructor.name,method:this.initCurrentBoardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_INITIALIZATION_ERROR"),Z.A.Error)}finally{this._appCommonSrv.setSchedulerBusy(!1),e.isCanceled()||(this._appCommonSrv.setSchedulerButtonBusy(!1),this._isCurrentBoardInitializing=!1,this._isCurrentBoardInPreview=!1,this._$rootScope.$broadcast(Z.n.BoardInitialized))}}},{kind:"method",key:"changeCurrentBoardAsync",value:async function changeCurrentBoardAsync(e){this._notificationSrv.clearNotificationQueue(),e?(await this.initCurrentBoardAsync({isCanceled:()=>!1}),this._$rootScope.$broadcast(Z.n.BoardChanged),this._$rootScope.$broadcast(Z.n.SettingsChanged)):this._currentBoardId=null}},{kind:"method",key:"initCurrentCardAsync",value:async function initCurrentCardAsync(e){let t=await this.checkAuthorizationAsync();if(!e.isCanceled()&&t)try{if(this._isCurrentCardMode=!0,!await this.initMemberAsync())return;if(this._currentBoardId=await this._getCurrentBoardIdAsync(),!this._currentBoardId)return;if(e.isCanceled())return;await this.loadBoardsSettingsAsync([this._currentBoardId])}catch(e){this._$log.error("Planyway card initialization error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway card initialization error",e,{class:this.constructor.name,method:this.initCurrentCardAsync.name}),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.PLANYWAY_INITIALIZATION_ERROR"),Z.A.Error)}}},{kind:"method",key:"getCurrentBoardConnectedBoards",value:function getCurrentBoardConnectedBoards(){var e,t;let r=this._boardsMap.get(this._currentBoardId);if(!r)return[];let i=this._licenseSrv.checkPaidFeatureAvailable(Z.B.MultiBoard,!1),a=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).multiBoard,n=r.connectedPublicBoards;return B()(e=A()(t=this.getTrelloBoards()).call(t,(e=>e.id!==this._currentBoardId))).call(e,(e=>{let t={isSelected:!1,isFavorite:!1,showOnlyMemberCards:!1,...a[e.id]};if(r.isPublic&&e.isPublic){let r=V()(n).call(n,(t=>t.id===e.id));if(r)return{...r,isShared:!0,showOnlyMemberCards:t.showOnlyMemberCards}}return{id:e.id,isShared:!1,isSelected:i&&t.isSelected,isFavorite:t.isFavorite||t.isSelected,showOnlyMemberCards:t.showOnlyMemberCards}}))}},{kind:"method",key:"setCurrentBoardConnectedBoards",value:function setCurrentBoardConnectedBoards(e){let t=this._boardsMap.get(this._currentBoardId);if(!t)return;let r=[this._currentBoardId],i=this._settingsSrv.currentSettings.getGlobalBoardSettings(this._currentBoardId).multiBoard,a=[];for(let n of e){n.isSelected&&(r.push(n.id),this._subscribeTrelloSync(n.id));let e=this._boardsMap.get(n.id);!t.isReadOnly&&t.isPublic&&e.isPublic?(n.isSelected||n.isFavorite)&&a.push({id:n.id,isSelected:n.isSelected,isFavorite:n.isFavorite}):i[n.id]={...i[n.id],isSelected:n.isSelected,isFavorite:n.isFavorite,showOnlyMemberCards:n.showOnlyMemberCards}}this._trelloCardsSrv.setBoardsLoad(r),t.connectedPublicBoards=a,this._settingsSrv.saveGlobalAsync(),!t.isReadOnly&&t.isPublic&&this._settingsSrv.saveBoardSettingsAsync(this._currentBoardId,{connectedPublicBoards:a})}},{kind:"method",key:"logOutAsync",value:async function logOutAsync(){await this._platformSrv.setTrelloTokenAsync(null),await this._platformSrv.reloadAppAsync()}},{kind:"method",key:"isCurrentBoardInitializing",value:function isCurrentBoardInitializing(){return this._isAuthorizationChecking||this._isCurrentBoardInitializing}},{kind:"method",key:"isCurrentBoardUnavailable",value:function isCurrentBoardUnavailable(){return!this._isCurrentBoardInPreview&&!this._isCurrentBoardAvailable}},{kind:"method",key:"isCurrentBoardReadOnly",value:function isCurrentBoardReadOnly(){let e=this._boardsMap.get(this._currentBoardId);return!e||e.isReadOnly}},{kind:"method",key:"getCurrentBoardId",value:function getCurrentBoardId(){return this._currentBoardId}},{kind:"method",key:"loadBoardDataAsync",value:function loadBoardDataAsync(e){return this.loadBoardsDataAsync([e])}},{kind:"method",key:"loadBoardsDataAsync",value:async function loadBoardsDataAsync(e){let t=new j.a,[r]=await G.a.all([this._settingsSrv.getBoardsSettingsAsync(e),(async()=>{let r=B()(e).call(e,(e=>`/boards/${e}`));for(;r.length>0;){let e=[];for(let t=0;t<4&&r.length>0;t++)e.push(S()(r).call(r,0,20));try{let r=await G.a.all(B()(e).call(e,(e=>this.batchAsync(e,"Get Trello boards",{fields:se,lists:"open",labels:"all",members:"all",customFields:!0,boardStars:"mine"}))));for(let e of b()(r).call(r))t.set(e.id,e)}catch(e){this._$log.error("Trello load boards data error:"),this._$log.error(e),this._telemetrySrv.logError("Trello load boards data error",e,{class:this.constructor.name,method:this.loadBoardsDataAsync.name})}}})()]);for(let i of e)t.has(i)?this._addOrUpdateBoard(t.get(i),r[i]):this._boardsMap.delete(i)}},{kind:"method",key:"loadBoardsSettingsAsync",value:async function loadBoardsSettingsAsync(e){let t=await this._settingsSrv.getBoardsSettingsAsync(e,!0);for(let a of e){let e=this._boardsMap.get(a),n=t[a];if(e&&n){e.dueLinkType=n.dueLinkType,e.dueLinkTypeAllDay=n.dueLinkTypeAllDay,e.defaultCardIsAllDay=n.defaultCardIsAllDay,e.defaultCardDuration=n.defaultCardDuration;let t=e.defaultListId;var r;if(n.defaultListId)D()(r=e.lists).call(r,(e=>e.id===n.defaultListId))?e.defaultListId=n.defaultListId:(e.defaultListId=void 0,n.defaultListId=void 0);if(t!==e.defaultListId&&this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Lists}),e.defaultCardPosition=n.defaultCardPosition,n.customFilters){var i;let t=A()(i=n.customFilters).call(i,(t=>{var r,i;switch(t.targetType){case Z.m.CustomField:let a=V()(r=e.customFields).call(r,(e=>e.id===t.targetId));if(!a)return!1;switch(a.type){case Z.pb.List:return!!V()(i=a.options).call(i,(e=>e.id===t.value));case Z.pb.Checkbox:return!0}}}));e.customFilters=t,n.customFilters=t}e.connectedPublicBoards=n.connectedPublicBoards}}}},{kind:"method",key:"checkPublicBoardAsync",value:async function checkPublicBoardAsync(e){var t,r;let i=V()(t=P()(r=this._boardsMap).call(r)).call(t,(t=>t.id===e||t.shortId===e));if(i)return i;try{let t=await this.restAsync(Z.L.Get,`/boards/${e}`,"Get Trello public board",{fields:"name,closed"});if(!t.closed)return{id:t.id,name:t.name}}catch(e){this._$log.error("Trello check public board error:"),this._$log.error(e),this._telemetrySrv.logError("Trello check public board error",e,{class:this.constructor.name,method:this.checkPublicBoardAsync.name})}}},{kind:"method",key:"addPublicBoardAsync",value:async function addPublicBoardAsync(e){let t=this._boardsMap.get(e);if(t)return t;if(await this.loadBoardDataAsync(e),t=this._boardsMap.get(e),t){var r;let i=this._settingsSrv.currentSettings.global;return D()(r=i.publicBoardIds).call(r,(t=>t===e))||(i.publicBoardIds.push(e),this._settingsSrv.saveGlobalAsync()),t}}},{kind:"method",key:"removePublicBoard",value:function removePublicBoard(e){var t;this._boardsMap.delete(e);let r=this._settingsSrv.currentSettings.global,i=C()(t=r.publicBoardIds).call(t,e);var a;-1!==i&&(S()(a=r.publicBoardIds).call(a,i,1),this._settingsSrv.saveGlobalAsync())}},{kind:"method",key:"createTrelloBoardAsync",value:async function createTrelloBoardAsync(e){let{id:t}=await this.restAsync(Z.L.Post,"/boards","Create Trello board",{name:e.name,idOrganization:e.organizationId,prefs_permissionLevel:e.permissionLevel,prefs_comments:e.isCommentsPublic?"public":"members",prefs_background:e.color,defaultLists:!1});return t}},{kind:"method",key:"updateTrelloBoardAsync",value:async function updateTrelloBoardAsync(e,t){let r=await this.restAsync(Z.L.PutForm,`/boards/${e}`,"Update Trello board",{name:t.name,"prefs/permissionLevel":t.permissionLevel,"prefs/comments":t.isCommentsPublic?"public":"members",closed:t.closed,"prefs/background":t.color}),i={...this._boardsMap.get(e),name:r.name,permissionLevel:r.prefs.permissionLevel,isPublic:r.prefs.permissionLevel===Z.mb.Public,isCommentsPublic:"public"===r.prefs.comments,closed:r.closed,color:r.prefs.backgroundColor&&r.prefs.background||"default",imageUrls:this._getBoardImageUrls(r.prefs)};return this._boardsMap.update(i),this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:this._appCommonSrv.getTimelineResourcesType()}),i}},{kind:"method",key:"addTrelloBoardEventListener",value:function addTrelloBoardEventListener(e,t){let r=this._boardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.add(t)}},{kind:"method",key:"removeTrelloBoardEventListener",value:function removeTrelloBoardEventListener(e,t){let r=this._boardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.delete(t)}},{kind:"method",key:"addMemberToBoardAsync",value:async function addMemberToBoardAsync(e,t,r="normal"){await this.restAsync(Z.L.Put,`/boards/${e}/members/${t}`,"Add Trello member to board",{type:r,allowBillableGuest:!0}),await this.loadBoardDataAsync(e)}},{kind:"method",key:"inviteMemberToBoardAsync",value:async function inviteMemberToBoardAsync(e,t,r="normal"){var i;let a=t.split("@")[0],n=await this.restAsync(Z.L.Put,`/boards/${e}/members`,"Invite Trello member to board",{email:t,type:r,fullName:a,allowBillableGuest:!0});await this.loadBoardDataAsync(e);let o=V()(i=n.members).call(i,(e=>e.fullName===a&&!1===e.confirmed&&"ghost"===e.memberType&&e.idMemberReferrer===this._memberId));return null==o?void 0:o.id}},{kind:"method",key:"removeMemberFromBoardAsync",value:async function removeMemberFromBoardAsync(e,t){await this.restAsync(Z.L.Delete,`/boards/${e}/members/${t}`,"Remove Trello member from board"),await this.loadBoardDataAsync(e),this._$rootScope.$broadcast(Z.n.CardsReloadRequested),this._trelloCardsSrv.needReloadCalendarCards(),this._$rootScope.$broadcast(Z.n.CardsReloaded)}},{kind:"method",key:"searchMembersAsync",value:async function searchMembersAsync(e){var t;let r;if(/^([0-9a-f]{24})$/.test(e))try{r=[await this.restAsync(Z.L.Get,`/member/${e}`,"Get Trello member by ID")]}catch(e){r=[]}else r=await this.restAsync(Z.L.Get,"/search/members","Search Trello members",{query:e,limit:10});return A()(t=B()(r).call(r,(e=>e.id?{...this._fromTrelloMember(e),similarity:e.similarity||0}:e.email?{id:e.email,email:e.email,userName:e.email,fullName:e.email,initials:e.email.substr(0,1).toUpperCase(),similarity:e.similarity||0}:void 0))).call(t,(e=>e))}},{kind:"method",key:"createTrelloListAsync",value:async function createTrelloListAsync(e,t){const r=await this.restAsync(Z.L.Post,"/lists","Create Trello list",{idBoard:e,name:t.name,pos:t.position});let i=this._fromTrelloList(r);this._listsMap.set(i.id,i);let a=this._boardsMap.get(e);if(a){let e={...a};e.lists=[...a.lists,i],this._boardsMap.update(e)}return i}},{kind:"method",key:"updateTrelloListAsync",value:async function updateTrelloListAsync(e,t){const r=await this.restAsync(Z.L.Put,`/lists/${e}`,"Update Trello list",{name:t.name,pos:t.position});let i=this._fromTrelloList(r),a=this._boardsMap.get(i.boardId);if(a){var n;let e={...a};e.lists=[...a.lists];let t=_()(n=e.lists).call(n,(e=>e.id===i.id));if(-1!==t){var o;let r={...e.lists[t]};r.name=i.name,r.position=i.position,S()(o=e.lists).call(o,t,1,r),this._boardsMap.update(e)}}let s=this._listsMap.get(i.id);return s&&(s.name=i.name,s.position=i.position,this._$rootScope.$broadcast(Z.n.TimelineResourcesReloaded,{resourcesType:Z.fb.Lists})),i}},{kind:"method",key:"deleteTrelloListAsync",value:async function deleteTrelloListAsync(e){var t;await this.restAsync(Z.L.Put,`/lists/${e}/closed`,"Delete Trello list",{value:!0});const r=null===(t=this._listsMap.get(e))||void 0===t?void 0:t.boardId;this._listsMap.delete(e);let i=this._boardsMap.get(r);if(i){var a;let t={...i};t.lists=A()(a=i.lists).call(a,(t=>t.id!==e)),this._boardsMap.update(t)}}},{kind:"method",key:"getOrCreateTrelloLabel",value:function getOrCreateTrelloLabel(e,t,r){let i=this.getTrelloBoardById(e).labels,a=V()(i).call(i,(e=>e.color===t&&e.name===r));if(a)return a;let n=`${e}-${t}-${r}`;return a=this.getTrelloLabelById(n),a||(a={id:n,boardId:e,color:t,name:r,isTempLabel:!0},this._labelsMap.set(n,a)),a}},{kind:"method",key:"createTrelloLabelAsync",value:function createTrelloLabelAsync(e){if(e===J.k)return;let t,r,i=this.getTrelloLabelById(e);if(i){if(!i.isTempLabel)return i;i.getLabelPromise||(t=this.restAsync(Z.L.Post,"/labels","Create Trello label",{name:i.name||"",color:i.color,idBoard:i.boardId}),r={forTelemetry:"NOTIFICATIONS.CREATE_TRELLO_LABEL_ERROR",forNotification:"Create Trello label error"})}else i={id:e,isTempLabel:!0},this._labelsMap.set(e,i),t=this.restAsync(Z.L.Get,`/labels/${e}`,"Get Trello label"),r={forTelemetry:"Load Trello label error",forNotification:"NOTIFICATIONS.LOAD_TRELLO_LABEL_ERROR"};return i.getLabelPromise||(i.getLabelPromise=(async()=>{try{var e;let r=await t,a={id:r.id,boardId:r.idBoard,name:r.name,color:r.color};this._labelsMap.set(a.id,a);let n={...this.getTrelloBoardById(a.boardId)};var i;if(y()(e=n.labels).call(e,(e=>e.id!==a.id)))n.labels=R()(i=[...n.labels,a]).call(i,ee.p),this._boardsMap.update(n);return a}catch(e){this._$log.error(r.forTelemetry),this._$log.error(e),this._telemetrySrv.logError(r.forTelemetry,e,{class:this.constructor.name,method:this.createTrelloLabelAsync.name}),this._notificationSrv.showNotification(this._$translate.instant(r.forNotification),Z.A.Error)}})()),i.getLabelPromise}},{kind:"method",key:"fireKeydownEvent",value:function fireKeydownEvent(e){this._$window.document.dispatchEvent(new CustomEvent(Z.n.TrelloFireKeyRequested,{detail:{key:e,event:"keydown"}}))}},{kind:"method",key:"extractCardIds",value:function extractCardIds(e){try{var t;let r=e.attr("href");if(r){let e=r.match(/^\/c\/(\w+)/);if(e)return{shortId:e[1]};if(e=r.match(/^\/card\/board\/-\/[0-9a-f]{24}\/([0-9a-f]{24})/),e)return{id:e[1]}}let i=new Error("Unable to extract Trello IDs from card");throw i.card=null===(t=e[0])||void 0===t?void 0:t.outerHTML,i}catch(e){this._$log.error("Trello extract card IDs error:"),this._$log.error(e),this._telemetrySrv.logError("Trello extract card IDs error",e,{class:this.constructor.name,method:this.extractCardIds.name})}}},{kind:"method",key:"getCurrentCardIdAsync",value:function getCurrentCardIdAsync(){}},{kind:"method",key:"restAsync",value:async function restAsync(e,t,r,i,a=3,n){let o={query:{key:J.R,token:this._token},maxRetryCount:a,onProgress:n};switch(e){case Z.L.Get:m()(o.query,i);break;case Z.L.Delete:o.headers={"Content-Type":"application/json"};break;default:o.body=i}let s,l=this._telemetrySrv.logRequest(r,e,ae+t,{...o.query,...o.body}),d=200;try{return await this._platformSrv.restAsync(e,ae+t,o)}catch(e){throw d=e.status,s=e,e}finally{this._telemetrySrv.logRequestEnd(l,d,s)}}},{kind:"method",key:"batchAsync",value:async function batchAsync(e,t,r,i={}){let{maxRetryCount:a=3,keepResultPlacement:n}=i;if(r){r.constructor!==Array&&(r=[r]);let t=B()(r).call(r,(e=>{for(let t in e)e[t]=encodeURIComponent(e[t]);return decodeURIComponent(this._$httpParamSerializer(e))}));e=B()(e).call(e,((e,r)=>`${e}?${t[r<t.length?r:t.length-1]}`))}let o=await this.restAsync(Z.L.Get,`/batch/?urls=${encodeURIComponent(e.join())}`,t,null,a),s=[];for(let e of o){let r=e[200];if(r)s.push(r);else{n&&s.push(null);let r=new Error(`Batch request error, message: ${u()(e.message)}, code: "${e.statusCode}"`);this._$log.error(`${t} batch error:`),this._$log.error(r),this._telemetrySrv.logError(`${t} batch error`,r,{class:this.constructor.name,method:this.batchAsync.name})}}return s}},{kind:"method",key:"_loadMemberAsync",value:async function _loadMemberAsync(e=!1){this._loadMemberPromise||(this._loadMemberPromise=(async()=>{if(this._isMemberLoaded&&!e)return!0;try{this._isMemberLoaded=!1;let e,n,o=await this.restAsync(Z.L.Get,"/member/me","Get Trello member me",{fields:ne,organizations:"all",organization_fields:oe,boards:"all",board_fields:"id",channels:!0});if(this._memberId=o.id,this._memberName=o.fullName,this._memberEmail=o.email,this._appCommonSrv.initABTest(this._memberId),this._oldLocale=this._appCommonSrv.getLocale(),this._isCurrentCardMode||(await G.a.all([this._settingsSrv.loadSettingsAsync(),this._licenseSrv.loadLicenseAsync()]),this._chatSrv.initializeChatAsync()),this._organizationsMap=new j.a,o.organizations){var t,r;let e=R()(t=B()(r=o.organizations).call(r,(e=>{var t;let r=new j.a(B()(t=e.memberships).call(t,(({idMember:e,memberType:t})=>[e,t]))),i=r.get(o.id)===Z.rb.Admin,a=e.premiumFeatures.length?c.a:e.limits.orgs.freeBoardsPerOrg.disableAt-(e.limits.orgs.freeBoardsPerOrg.count||0);return{id:e.id,name:e.displayName,logoUrlSmall:e.logoHash&&`${J.T}/${e.logoHash}/30.png`,logoUrlNormal:e.logoHash&&`${J.T}/${e.logoHash}/50.png`,memberships:r,availableBoardsCount:a,canCreatePublicBoards:i||"org"===e.prefs.boardVisibilityRestrict.public,canCreatePrivateBoards:i||"org"===e.prefs.boardVisibilityRestrict.private,canCreateOrganizationBoards:i||"org"===e.prefs.boardVisibilityRestrict.org,canDeletePublicBoards:i||"org"===e.prefs.boardDeleteRestrict.public,canDeletePrivateBoards:i||"org"===e.prefs.boardDeleteRestrict.private,canDeleteOrganizationBoards:i||"org"===e.prefs.boardDeleteRestrict.org,canInviteGuests:"any"===e.prefs.boardInviteRestrict}}))).call(t,((e,t)=>Object(ee.j)(e.name,t.name)));for(let t of e)this._organizationsMap.set(t.id,t)}if(this._isCurrentCardMode){let t=await this._getCurrentBoardIdAsync();e=t?[t]:[],n=[]}else{var i,a;e=B()(i=o.boards).call(i,(e=>e.id)),n=A()(a=this._settingsSrv.currentSettings.global.publicBoardIds).call(a,(t=>!$()(e).call(e,t))),e.push(...n)}await this.loadBoardsDataAsync(e);let s=A()(n).call(n,(e=>this._boardsMap.has(e)));s.length!==n.length&&(this._settingsSrv.currentSettings.global.publicBoardIds=s,this._settingsSrv.saveGlobalAsync()),this._platformSrv.setMemberInfoAsync({memberId:this._memberId,memberName:this._memberName,memberEmail:this._memberEmail}),this._isMemberLoaded=!0,this._isMemberAvailable=!0}catch(e){this._$log.error("Trello load member info error:"),this._$log.error(e),this._telemetrySrv.logError("Trello load member info error",e,{class:this.constructor.name,method:this._loadMemberAsync.name}),this._isMemberAvailable=!1}return this._isMemberLoaded})());try{let e=await this._loadMemberPromise;if(e){const e=this._appCommonSrv.getLocale();this._appCommonSrv.checkReloadLocaleRequired(this._oldLocale,e)}return e}finally{this._loadMemberPromise=null}}},{kind:"method",key:"_addOrUpdateBoard",value:function _addOrUpdateBoard(e,t){var r,i,a,n,o,s,l,d,c,h;let u=e.id,p=V()(r=e.boardStars).call(r,(e=>e.idBoard===u)),m=this._organizationsMap.get(e.idOrganization),f={id:u,shortId:e.shortLink,isReadOnly:!(null!==(i=e.members)&&void 0!==i&&D()(i).call(i,(e=>e.id===this._memberId))),permissionLevel:e.prefs.permissionLevel,invitationLevel:e.prefs.invitations,isPublic:e.prefs.permissionLevel===Z.mb.Public,isCommentsPublic:"public"===e.prefs.comments,closed:e.closed||!1,starred:!!p,starredPosition:null==p?void 0:p.pos,name:e.name,color:e.prefs.backgroundColor&&e.prefs.background||"default",imageUrls:this._getBoardImageUrls(e.prefs),premiumFeatures:e.premiumFeatures,memberships:new j.a(B()(a=e.memberships).call(a,(({idMember:e,memberType:t})=>((null==m?void 0:m.memberships.get(e))===Z.rb.Admin&&(t=Z.rb.Admin),[e,t])))),lists:R()(n=B()(o=e.lists||[]).call(o,(e=>({id:e.id,boardId:u,name:e.name,position:e.pos})))).call(n,ee.q),labels:R()(s=B()(l=e.labels||[]).call(l,(e=>({id:e.id,boardId:u,name:e.name,color:e.color})))).call(s,ee.p),members:B()(d=e.members||[]).call(d,(e=>this._fromTrelloMember(e))),customFields:R()(c=B()(h=e.customFields||[]).call(h,(e=>{var t,r;return{id:e.id,boardId:u,name:e.name,type:e.type,position:e.pos,options:e.options&&R()(t=B()(r=e.options).call(r,(e=>({id:e.id,name:e.value.text,color:e.color,position:e.pos})))).call(t,((e,t)=>e.position-t.position))}}))).call(c,ee.o),cardDataCustomFieldId:this._getBoardCardDataCustomFieldId(e.customFields),organizationId:e.idOrganization,dueLinkType:t.dueLinkType,dueLinkTypeAllDay:t.dueLinkTypeAllDay,defaultCardIsAllDay:t.defaultCardIsAllDay,defaultCardDuration:t.defaultCardDuration,defaultCardPosition:t.defaultCardPosition,connectedPublicBoards:t.connectedPublicBoards};var y;(f.isReadOnly?f.organizationId=J.H:e.idOrganization&&this._organizationsMap.has(e.idOrganization)?f.organizationId=e.idOrganization:f.organizationId=J.A,t.defaultListId)&&(D()(y=f.lists).call(y,(e=>e.id===t.defaultListId))?f.defaultListId=t.defaultListId:t.defaultListId=void 0);if(t.customFilters){var v;let e=A()(v=t.customFilters).call(v,(e=>{var t,r;switch(e.targetType){case Z.m.CustomField:let i=V()(t=f.customFields).call(t,(t=>t.id===e.targetId));if(!i)return!1;switch(i.type){case Z.pb.List:return!!V()(r=i.options).call(r,(t=>t.id===e.value));case Z.pb.Checkbox:return!0}}}));f.customFilters=e,t.customFilters=e}for(let e of f.lists)this._listsMap.set(e.id,e);for(let e of f.labels)this._labelsMap.set(e.id,e);for(let e of f.members)this._membersMap.set(e.id,e),this._membersByUserNameMap.set(e.userName,e);for(let e of f.customFields)this._customFieldsMap.set(e.id,e);let _=this._boardsMap.get(u);_?f.isReadOnly===_.isReadOnly&&f.permissionLevel===_.permissionLevel&&f.invitationLevel===_.invitationLevel&&f.isCommentsPublic===_.isCommentsPublic&&f.closed===_.closed&&f.starred===_.starred&&f.starredPosition===_.starredPosition&&f.name===_.name&&f.color===_.color&&Object(ee.Cb)(f.imageUrls,_.imageUrls)&&Object(ee.h)(f.premiumFeatures,_.premiumFeatures)&&Object(ee.vb)(f.memberships,_.memberships)&&Object(ee.h)(f.lists,_.lists)&&Object(ee.h)(f.labels,_.labels)&&Object(ee.h)(f.members,_.members)&&Object(ee.h)(f.customFields,_.customFields)&&f.cardDataCustomFieldId===_.cardDataCustomFieldId&&f.organizationId===_.organizationId&&f.dueLinkType===_.dueLinkType&&f.dueLinkTypeAllDay===_.dueLinkTypeAllDay&&f.defaultCardIsAllDay===_.defaultCardIsAllDay&&f.defaultCardDuration===_.defaultCardDuration&&f.defaultListId===_.defaultListId&&f.defaultCardPosition===_.defaultCardPosition&&Object(ee.h)(f.customFilters,_.customFilters)&&Object(ee.h)(f.connectedPublicBoards,_.connectedPublicBoards)||this._boardsMap.update(f):this._boardsMap.add(f)}},{kind:"method",key:"_getBoardImageUrls",value:function _getBoardImageUrls(e){if(e){var t;if(!e.backgroundImageScaled)return{[Z.kb.Small]:e.backgroundImage,[Z.kb.Medium]:e.backgroundImage};R()(t=e.backgroundImageScaled).call(t,((e,t)=>e.width-t.width));let r=Math.floor((e.backgroundImageScaled.length-1)/2);return{[Z.kb.Small]:e.backgroundImageScaled[0].url,[Z.kb.Medium]:e.backgroundImageScaled[r].url}}return{}}},{kind:"method",key:"_getBoardCardDataCustomFieldId",value:function _getBoardCardDataCustomFieldId(e){var t;if(e)return null===(t=V()(e).call(e,(e=>e.type===Z.pb.Text&&te.c.test(e.name))))||void 0===t?void 0:t.id}},{kind:"method",key:"_getCurrentBoardIdAsync",value:async function _getCurrentBoardIdAsync(){if(/^\/b\//.test(this._$window.location.pathname)){var e;let t=this._$window.location.pathname.match(/^\/b\/(\w+)/);if(!t||t.length<2)throw new Error(`Cannot extract current board id from location! Location: ${window.location.pathname}`);let r=t[1],i=V()(e=this._boardsMap).call(e,(e=>e.shortId===r));return i?i.id:(await this.restAsync(Z.L.Get,`/boards/${r}`,"Get Trello board by short ID")).id}if(/^\/c\//.test(this._$window.location.pathname)){let e=this._$window.location.pathname.match(/^\/c\/(\w+)/);if(!e||e.length<2)throw new Error(`Cannot extract current card id from location! Location: ${window.location.pathname}`);let t=e[1];return(await this.restAsync(Z.L.Get,`/cards/${t}`,"Get Trello card by short ID",{fields:"idBoard"})).idBoard}}},{kind:"method",key:"_subscribeTrelloSync",value:function _subscribeTrelloSync(e){this._$window.document.dispatchEvent(new CustomEvent(Z.n.TrelloSyncSubscribeRequested,{detail:e}))}},{kind:"method",key:"_updateByTrelloMemberDelta",value:function _updateByTrelloMemberDelta(e){if(e.idBoards){var t;if(D()(t=e.idBoards).call(t,(e=>!this._boardsMap.has(e)||this._boardsMap.get(e).isReadOnly)))this._loadMemberAsync(!0);else for(let t of P()(r=this._boardsMap).call(r)){var r,i;t.isReadOnly||$()(i=e.idBoards).call(i,t.id)||this._boardsMap.delete(t.id)}}}},{kind:"method",key:"_updateByTrelloBoardDelta",value:function _updateByTrelloBoardDelta(e){let t=this._boardsMap.get(e.id);if(!t)return;let r={...t},i=!1,a=this._organizationsMap.get(r.organizationId);void 0!==e.closed&&e.closed!==t.closed&&(r.closed=e.closed,i=!0),e.name&&e.name!==t.name&&(r.name=e.name,i=!0);let n=e.prefs;if(n){n.permissionLevel!==t.permissionLevel&&(r.permissionLevel=n.permissionLevel,r.isPublic=n.permissionLevel===Z.mb.Public,i=!0),n.invitations!==t.invitationLevel&&(r.invitationLevel=n.invitations,i=!0);let e="public"===n.comments;e!==t.isCommentsPublic&&(r.isCommentsPublic=e,i=!0),n.background!==t.color&&(r.color=n.background,i=!0);let a=this._getBoardImageUrls(n);Object(ee.Cb)(a,t.imageUrls)||(r.imageUrls=a,i=!0)}let o=e.premiumFeatures;if(o&&(Object(ee.h)(o,t.premiumFeatures)||(r.premiumFeatures=o,i=!0)),e.memberships){var s;let n=new j.a(B()(s=e.memberships).call(s,(({idMember:e,memberType:t})=>((null==a?void 0:a.memberships.get(e))===Z.rb.Admin&&(t=Z.rb.Admin),[e,t]))));Object(ee.vb)(n,t.memberships)||(r.newMemberships=n,i=!0)}if(e.members){var l;let a=B()(l=e.members).call(l,(e=>this._fromTrelloMember(e)));if(!Object(ee.h)(a,t.members)){for(let e of a)this._membersMap.set(e.id,e),this._membersByUserNameMap.set(e.userName,e);r.isReadOnly=!D()(a).call(a,(e=>e.id===this._memberId)),r.members=a,i=!0}}if(e.customFields){var d;let a=B()(d=e.customFields).call(d,(t=>{var r,i;return{id:t.id,boardId:e.id,name:t.name,type:t.type,options:t.options&&R()(r=B()(i=t.options).call(i,(e=>({id:e.id,name:e.value.text,color:e.color,position:e.pos})))).call(r,((e,t)=>e.position-t.position))}}));if(!Object(ee.h)(a,t.customFields)){var c;for(let e of a)this._customFieldsMap.set(e.id,e);r.customFields=a,R()(c=r.customFields).call(c,ee.o),r.cardDataCustomFieldId=this._getBoardCardDataCustomFieldId(e.customFields),i=!0}}i&&this._boardsMap.update(r)}},{kind:"method",key:"_updateByTrelloListDelta",value:function _updateByTrelloListDelta(e){let t=this._boardsMap.get(e.idBoard);if(!t)return;t={...t,lists:[...t.lists],labels:[...t.labels],members:[...t.members],customFields:[...t.customFields]};let r=!1;if(e.closed){var i;this._listsMap.delete(e.id),t.lists=A()(i=t.lists).call(i,(t=>t.id!==e.id)),r=!0}else{let i=this._listsMap.get(e.id);if(i){let s={...i},l=!1;if(void 0!==e.name&&e.name!==i.name&&(s.name=e.name,l=!0),void 0!==e.pos&&e.pos!==i.position&&(s.position=e.pos,l=!0),void 0!==e.idBoard&&e.idBoard!==i.boardId){let t=this._boardsMap.get(i.boardId);var a;if(t)t.lists=A()(a=t.lists).call(a,(t=>t.id!==e.id)),this._boardsMap.update(t);s.boardId=e.idBoard,l=!0}var n,o;if(l)this._listsMap.set(s.id,s),t.lists=A()(n=t.lists).call(n,(t=>t.id!==e.id)),t.lists.push(s),R()(o=t.lists).call(o,ee.q),r=!0}else if(void 0!==e.name&&void 0!==e.pos){var s;let i={id:e.id,boardId:e.idBoard,name:e.name,position:e.pos};this._listsMap.set(i.id,i),t.lists.push(i),R()(s=t.lists).call(s,ee.q),r=!0}}r&&this._boardsMap.update(t)}},{kind:"method",key:"_updateByTrelloLabelDelta",value:function _updateByTrelloLabelDelta(e){let t=this._boardsMap.get(e.idBoard);if(!t)return;t={...t,lists:[...t.lists],labels:[...t.labels],members:[...t.members],customFields:[...t.customFields]};let r=!1,i=this._labelsMap.get(e.id);if(i){let o={...i},s=!1;var a,n;if(void 0!==e.name&&e.name!==i.name&&(o.name=e.name,s=!0),void 0!==e.color&&e.color!==i.color&&(o.color=e.color,s=!0),s)this._labelsMap.set(o.id,o),t.labels=A()(a=t.labels).call(a,(e=>e.id!==o.id)),t.labels.push(o),R()(n=t.labels).call(n,ee.p),r=!0}else if(void 0!==e.name&&void 0!==e.color){var o;let i={id:e.id,boardId:e.idBoard,name:e.name,color:e.color};this._labelsMap.set(i.id,i),t.labels.push(i),R()(o=t.labels).call(o,ee.p),r=!0}r&&this._boardsMap.update(t)}},{kind:"method",key:"_updateByTrelloCustomFieldDelta",value:function _updateByTrelloCustomFieldDelta(e){let t=this.getTrelloBoardById(e.idModel);if(!t)return;t={...t,lists:[...t.lists],labels:[...t.labels],members:[...t.members],customFields:[...t.customFields]};let r=!1,i=this._customFieldsMap.get(e.id);if(i){let l={...i},d=!1;if(void 0!==e.name&&e.name!==i.name&&(l.name=e.name,d=!0),void 0!==e.type&&e.type!==i.type&&(l.type=e.type,d=!0),void 0!==e.options){var a,n;let t=R()(a=B()(n=e.options).call(n,(e=>({id:e.id,name:e.value.text,color:e.color,position:e.pos})))).call(a,((e,t)=>e.position-t.position));Object(ee.h)(t,i.options)||(l.options=t,d=!0)}var o,s;if(d)this._customFieldsMap.set(l.id,l),t.customFields=A()(o=t.customFields).call(o,(e=>e.id!==l.id)),t.customFields.push(l),R()(s=t.customFields).call(s,ee.o),t.cardDataCustomFieldId=this._getBoardCardDataCustomFieldId(t.customFields),r=!0}else if(void 0!==e.name&&void 0!==e.type){var l,d,c;let i={id:e.id,boardId:e.idModel,name:e.name,type:e.type,options:e.options&&R()(l=B()(d=e.options).call(d,(e=>({id:e.id,name:e.value.text,color:e.color,position:e.pos})))).call(l,((e,t)=>e.position-t.position))};this._customFieldsMap.set(i.id,i),t.customFields.push(i),R()(c=t.customFields).call(c,ee.o),t.cardDataCustomFieldId=this._getBoardCardDataCustomFieldId(t.customFields),r=!0}r&&this._boardsMap.update(t)}},{kind:"method",key:"_deleteByTrelloCustomFieldDelta",value:function _deleteByTrelloCustomFieldDelta(e){var t;let r=this._customFieldsMap.get(e.id);if(!r)return;this._customFieldsMap.delete(r.id);let i=this.getTrelloBoardById(r.boardId);i&&(i.customFields=A()(t=i.customFields).call(t,(e=>e.id!==r.id)),i.cardDataCustomFieldId=this._getBoardCardDataCustomFieldId(i.customFields),this._boardsMap.update(i))}},{kind:"method",key:"_fromTrelloMember",value:function _fromTrelloMember(e){return{id:e.id,userName:e.username,fullName:e.fullName,initials:e.initials,avatarUrlSmall:e.avatarUrl&&`${e.avatarUrl}/30.png`,avatarUrlNormal:e.avatarUrl&&`${e.avatarUrl}/50.png`}}},{kind:"method",key:"_fromTrelloList",value:function _fromTrelloList(e){return{id:e.id,boardId:e.idBoard,name:e.name,position:e.pos}}},{kind:"method",key:"_getReturnUrl",value:function _getReturnUrl(){let e=/^[a-z]+:\/\/[^/]*/.exec(this._$window.location);if(e)return e[0]}},{kind:"method",key:"_getAuthUrl",value:function _getAuthUrl(e){return m()(e,{response_type:"token",key:J.R}),`https://trello.com/1/authorize?${this._$httpParamSerializer(e)}`}},{kind:"method",key:"_openAuthPopupAsync",value:async function _openAuthPopupAsync(e){let t=this._$window.screenX+(this._$window.innerWidth-650)/2,r=this._$window.screenY+(this._$window.innerHeight-720)/2;if(this._authPopup=this._$window.open(e,"PlanywayAuthWindow",`width=650,height=720,left=${t},top=${r}`),!this._authPopup)throw new Error("Cannot open Trello auth popup!");try{return await new G.a(((e,t)=>{try{const r=this._$interval((()=>{if(this._authPopup)try{this._authPopup.closed&&(this._$interval.cancel(r),e())}catch(t){this._$interval.cancel(r),e()}}),200,0,!1),onMessageReceived=i=>{if(i.origin===ie&&i.source===this._authPopup){this._$interval.cancel(r),this._$window.removeEventListener("message",onMessageReceived);try{this._authPopup.close()}catch(e){}i.data?/^[0-9a-f]{64}$/.test(i.data)?e(i.data):t(new Error(`Invalid token message data: ${i.data}`)):e()}};this._$window.addEventListener("message",onMessageReceived)}catch(e){t(e)}}))}finally{this._authPopup=null}}},{kind:"method",key:"_checkTrelloTokenAsync",value:async function _checkTrelloTokenAsync(e){if(!e)return!1;try{let t,r=await this.restAsync(Z.L.Get,`/tokens/${e}`,"Check Trello token");if(3!==r.permissions.length)throw new Error(`Invalid Trello token permissions:\n${u()(r.permissions,null,4)}`);if(r.dateExpires&&new Date(r.dateExpires)<new Date)throw new Error(`Trello token expired: ${r.dateExpires}`);try{t=JSON.parse(localStorage.idMe)}catch(e){}if(t&&r.idMember!==t){try{localStorage.removeItem("idMe")}catch(e){}throw new Error("Trello token invalid for current Trello member!")}this._memberId=r.idMember}catch(e){return this._$log.warn("Planyway failed to check Trello token:"),this._$log.warn(e),!1}return!0}}]}}))},222:function(e,t,r){"use strict";r.d(t,"a",(function(){return Q}));var i=r(5),a=r.n(i),n=r(6),o=r.n(n),s=r(9),l=r.n(s),d=r(8),c=r.n(d),h=r(4),u=r.n(h),p=r(2),m=r.n(p),f=r(3),y=r.n(f),v=r(14),_=r.n(v),g=r(27),C=r.n(g),k=r(17),D=r.n(k),E=r(11),b=r.n(E),w=r(94),S=r.n(w),T=r(15),A=r.n(T),I=r(73),R=r.n(I),O=r(10),P=r(1),L=r(29),M=r.n(L),N=r(22),B=r.n(N),F=r(30),$=r.n(F),x=r(19),G=r.n(x),z=r(43),U=r.n(z),W=r(41),j=r.n(W),H=r(38),V=r.n(H),Y=r(39),K=r.n(Y),X=r(146),q=r(0);function getDefaultGlobalSettings(){return{calendarBoard:{},defaultSchedulerMode:q.M.Timeline,defaultSchedulerOrientation:q.N.Top,defaultSchedulerView:q.O.Month,defaultTaskListsOrientation:q.Q.Bottom,defaultTaskListsView:q.R.Kanban,defaultTimelineScale:q.gb.Default,defaultTimelineView:q.ib.Member,dontAskConfirmDialogs:{},firstWeekDay:null,iCalList:[],isOnboardingButtonPassed:!1,isOnboardingWelcomeSurveyPassed:!1,isProductTourClosed:!1,isProductTourMinimized:!1,isProductTourPassed:!1,isPushNotificationsRequestShown:!1,isTrelloFiltersEnabled:!0,locale:null,news:{},productTourType:q.H.Free,productTourStepIndex:0,publicBoardIds:[],workDayEnd:Object(P.Hb)(new Date(1980,1,1,18,0,0)),workDayStart:Object(P.Hb)(new Date(1980,1,1,9,0,0)),workWeekEnd:5,workWeekStart:1}}function getDefaultGlobalBoardSettings(){let e=getDefaultGlobalSettings();return{boardICals:{},cardTheme:q.g.Colorful,connectedGoogleCalendars:{primary:{isSelected:!0}},customFieldsAsCards:[],filters:{cardsVisibility:q.j.All,members:[],labels:[],lists:[],customFields:[],customFilters:[]},highlightToday:!1,isCheckItemCardsShown:!0,isMilestonesShown:!0,isTimeRecordCardsShown:!0,isViewTemplateSelected:!1,multiBoard:{},schedulerMode:e.defaultSchedulerMode,schedulerOrientation:e.defaultSchedulerOrientation,schedulerView:e.defaultSchedulerView,showArchivedCards:!1,showDateTime:!1,showTrelloBoard:!1,showTrelloCardNumber:!1,showWeekNumbers:!0,showWorkDays:!1,showWorkHours:!1,taskListsFilters:{onlyUnscheduled:!1},taskListsOrientation:e.defaultTaskListsOrientation,taskListsView:e.defaultTaskListsView,timelineHiddenResources:{[q.fb.Members]:[],[q.fb.Calendars]:[],[q.fb.Lists]:[],[q.fb.Labels]:[]},timelineResourcesOrder:{[q.fb.Members]:null,[q.fb.Calendars]:null,[q.fb.Lists]:null,[q.fb.Labels]:null},timelineScale:e.defaultTimelineScale,timelineView:e.defaultTimelineView}}class Settings_Settings{constructor(e,t,r,i){this._$log=e,this._telemetrySrv=t,this._localSettings=this._deserializeLocalSettings(r,!0)||{locale:null,showSchedulerPreview:!0,calendarBoard:{},syncOnlyMyCards:!1,syncSetEventColorByLabel:!1,syncCompletedCards:!1,syncAsFree:!1,taskLists:{trelloLists:{},trelloCards:{}},schedulerSidebar:{isShown:!0,groups:{boards:{isCollapsed:!1},iCals:{isCollapsed:!1}}},filters:{members:{isCollapsed:!1},labels:{isCollapsed:!1},lists:{isCollapsed:!1},customFields:{isCollapsed:!1}},editCardDialog:{isDetailed:!0,groups:{customFields:{isCollapsed:!1}},defaultRemindBefore:30,defaultRemindBeforeAllDay:900,checklists:{}}},this._globalSettings=this._deserializeGlobalSettings(i,!0)||getDefaultGlobalSettings(),this._remoteGlobalSettings=this.global}get local(){return this._localSettings}get global(){return this._globalSettings}getGlobalSettingsCopy(){let e=this.serializeGlobalSettings(null,!1);return this._deserializeGlobalSettings(e,!1)}getLocalBoardSettings(e){let t=this.local.calendarBoard[e];return t||(t={organizations:{},lastSyncStatus:null,schedulerWidth:"720px",schedulerHeight:"50%",trelloBoardHeight:"60%",taskListsWidth:"320px",taskLists:{isShown:!0}},e&&(this.local.calendarBoard[e]=t)),t}getGlobalBoardSettings(e){let t=this.global.calendarBoard[e];return t||(t=getDefaultGlobalBoardSettings(),e&&(this.global.calendarBoard[e]=t)),t}serializeLocalSettings(e){var t,r,i,a,n,o,s,l,d;let c=this.local;c.taskLists.trelloLists=K()(t=V()(c.taskLists.trelloLists)).call(t,((e,[t,r])=>(r.isCollapsed&&(e[t]=r),e)),{}),c.taskLists.trelloCards=K()(r=V()(c.taskLists.trelloCards)).call(r,((e,[t,r])=>(r.isCheckItemsExpanded&&(e[t]=r),e)),{}),c.editCardDialog.checklists=K()(i=V()(c.editCardDialog.checklists)).call(i,((e,[t,r])=>((r.isCollapsed||r.hideCompleted)&&(e[t]=r),e)),{}),c={...c,taskLists:{...c.taskLists,trelloLists:K()(a=j()(n=V()(c.taskLists.trelloLists)).call(n,-1e3)).call(a,((e,[t,r])=>(e[t]=r,e)),{}),trelloCards:K()(o=j()(s=V()(c.taskLists.trelloCards)).call(s,-1e3)).call(o,((e,[t,r])=>(e[t]=r,e)),{})},editCardDialog:{...c.editCardDialog,checklists:y()(l=j()(d=V()(c.editCardDialog.checklists)).call(d,-1e3)).call(l,(([e,t])=>({...t,id:e})))}};let h=C()(c);return h=e?btoa(R.a.deflate(h,{to:"string",level:3})):X.a.encode(h),`![Planyway Settings - DO NOT EDIT!]()[](${h})`}serializeGlobalSettings(e,t){let r;e?(r=this.getGlobalSettingsCopy(),this._remoteGlobalSettings&&Object(P.xb)(r,e,this._remoteGlobalSettings),this._remoteGlobalSettings=r):r=this.global;for(let e of U()(r.calendarBoard)){var i,a,n;let t=getDefaultGlobalBoardSettings();e.multiBoard=e.multiBoard?K()(i=V()(e.multiBoard)).call(i,((e,[t,r])=>((r.isSelected||r.isFavorite||r.showOnlyMemberCards)&&(e[t]=r),e)),{}):t.multiBoard,e.connectedGoogleCalendars=e.connectedGoogleCalendars?K()(a=V()(e.connectedGoogleCalendars)).call(a,((e,[t,r])=>(("primary"===t||r.isSelected)&&(e[t]=r),e)),{}):t.connectedGoogleCalendars,e.boardICals=e.boardICals?K()(n=V()(e.boardICals)).call(n,((e,[t,r])=>(r.isSelected&&(e[t]=r),e)),{}):t.boardICals}let o=C()(r);return o=t?btoa(R.a.deflate(o,{to:"string",level:3})):X.a.encode(o),`![Planyway Settings - DO NOT EDIT!]()[](${o})`}updateRemoteGlobalSettings(e){this._remoteGlobalSettings=this._deserializeGlobalSettings(e,!0)}updateLocalSettings(e){this._localSettings=this._deserializeLocalSettings(e,!0)||{locale:null,showSchedulerPreview:!0,calendarBoard:{},syncOnlyMyCards:!1,syncSetEventColorByLabel:!1,syncCompletedCards:!1,syncAsFree:!1,taskLists:{trelloLists:{},trelloCards:{}},schedulerSidebar:{isShown:!0,groups:{boards:{isCollapsed:!1},iCals:{isCollapsed:!1}}},filters:{members:{isCollapsed:!1},labels:{isCollapsed:!1},lists:{isCollapsed:!1},customFields:{isCollapsed:!1}},editCardDialog:{isDetailed:!0,groups:{customFields:{isCollapsed:!1}},defaultRemindBefore:30,defaultRemindBeforeAllDay:900,checklists:{}}}}_deserializeLocalSettings(e,t){let r=this._parseSettingsString(e,t);if(r){let e={locale:null,showSchedulerPreview:!0,calendarBoard:{},syncOnlyMyCards:!1,syncSetEventColorByLabel:!1,syncCompletedCards:!1,syncAsFree:!1,taskLists:{trelloLists:{},trelloCards:{}},schedulerSidebar:{isShown:!0,groups:{boards:{isCollapsed:!1},iCals:{isCollapsed:!1}}},filters:{members:{isCollapsed:!1},labels:{isCollapsed:!1},lists:{isCollapsed:!1},customFields:{isCollapsed:!1}},editCardDialog:{isDetailed:!0,groups:{customFields:{isCollapsed:!1}},defaultRemindBefore:30,defaultRemindBeforeAllDay:900,checklists:{}}},t={...e,...r};if(r.calendarBoard)for(let e in r.calendarBoard){let i=r.calendarBoard[e],a={organizations:{},lastSyncStatus:null,schedulerWidth:"720px",schedulerHeight:"50%",trelloBoardHeight:"60%",taskListsWidth:"320px",taskLists:{isShown:!0}};t.calendarBoard[e]={organizations:i.organizations||a.organizations,lastSyncStatus:i.lastSyncStatus||a.lastSyncStatus,schedulerWidth:i.schedulerWidth||t.schedulerWidth||a.schedulerWidth,schedulerHeight:i.schedulerHeight||t.schedulerHeight||a.schedulerHeight,trelloBoardHeight:i.trelloBoardHeight||t.trelloBoardHeight||a.trelloBoardHeight,taskListsWidth:i.taskListsWidth||t.taskListsWidth||a.taskListsWidth,taskLists:{...a.taskLists,...i.taskLists,...r.taskLists}}}var i;if(delete t.schedulerWidth,delete t.schedulerHeight,delete t.trelloBoardHeight,delete t.taskListsWidth,r.taskLists&&(t.taskLists={...e.taskLists,...r.taskLists}),r.schedulerSidebar&&(t.schedulerSidebar={...e.schedulerSidebar,...r.schedulerSidebar,groups:{...e.schedulerSidebar.groups,...r.schedulerSidebar.groups}}),r.filters&&(t.filters={...e.filters,...r.filters}),r.editCardDialog)t.editCardDialog={...e.editCardDialog,...r.editCardDialog,groups:{...e.editCardDialog.groups,...r.editCardDialog.groups},checklists:{...e.editCardDialog.checklists,...K()(i=r.editCardDialog.checklists||[]).call(i,((e,t)=>(e[t.id]=t,e)),{})}};return t}}_deserializeGlobalSettings(e,t){let r=this._parseSettingsString(e,t);if(r){let e=getDefaultGlobalSettings(),t={...e,...r},y=Object(P.Eb)(Object(P.J)(e.workDayStart),Object(P.J)(r.workDayStart)),v=Object(P.Eb)(Object(P.J)(e.workDayEnd),Object(P.J)(r.workDayEnd)),_=Object(P.S)(y,v);if(_>=30&&_<=1440?(t.workDayStart=Object(P.Hb)(Object(P.Q)(y)),t.workDayEnd=Object(P.Hb)(v)):(t.workDayStart=e.workDayStart,t.workDayEnd=e.workDayEnd),r.firstWeekDay>=0&&r.firstWeekDay<=6?t.firstWeekDay=r.firstWeekDay:t.firstWeekDay=e.firstWeekDay,r.workWeekStart>=0&&r.workWeekStart<=6?t.workWeekStart=r.workWeekStart:t.workWeekStart=e.workWeekStart,r.workWeekEnd>=0&&r.workWeekEnd<=6?t.workWeekEnd=r.workWeekEnd:t.workWeekEnd=e.workWeekEnd,t.defaultSchedulerOrientation=e.defaultSchedulerOrientation,t.defaultSchedulerMode=e.defaultSchedulerMode,t.defaultSchedulerView=e.defaultSchedulerView,t.defaultTimelineView=e.defaultTimelineView,t.defaultTaskListsOrientation=e.defaultTaskListsOrientation,t.defaultTaskListsView=e.defaultTaskListsView,r.calendarBoard)for(let e in r.calendarBoard){var i,a,n,o,s,l,d,c,h,u,p,m,f;let y=r.calendarBoard[e],v=getDefaultGlobalBoardSettings();if(!y.schedulerOrientation&&y.calendarOrientation&&(y.schedulerOrientation=y.calendarOrientation,delete y.calendarOrientation),!y.schedulerView&&y.calendarView&&(y.schedulerView=y.calendarView,delete y.calendarView),!y.timelineView&&y.timelineResourcesType){switch(y.timelineResourcesType){case q.fb.NoResources:y.timelineView=q.ib.None;break;case q.fb.Members:y.timelineView=q.ib.Member;break;case q.fb.Calendars:y.timelineView=q.ib.Board;break;case q.fb.Lists:y.timelineView=q.ib.List;break;case q.fb.Labels:y.timelineView=q.ib.Label}delete y.timelineResourcesType}!y.cardTheme&&y.theme&&(y.cardTheme=y.theme,delete y.theme),"detailed"===y.cardView&&(y.showTrelloBoard=!0,y.showDateTime=!0,delete y.cardView),!0===y.isCompletedHidden&&(y.cardsVisibility=q.j.Incompleted,delete y.isCompletedHidden),q.N.hasValue(y.schedulerOrientation)||(y.schedulerOrientation=t.defaultSchedulerOrientation),q.M.hasValue(y.schedulerMode)&&q.O.hasValue(y.schedulerView)||(y.schedulerMode=t.defaultSchedulerMode,y.schedulerView=t.defaultSchedulerView),q.ib.hasValue(y.timelineView)||(y.timelineView=t.defaultTimelineView),q.Q.hasValue(y.taskListsOrientation)||(y.taskListsOrientation=t.defaultTaskListsOrientation),q.R.hasValue(y.taskListsView)||(y.taskListsView=t.defaultTaskListsView),q.g.hasValue(y.cardTheme)||(y.cardTheme=v.cardTheme),t.calendarBoard[e]={boardICals:y.boardICals||v.boardICals,cardTheme:y.cardTheme||v.cardTheme,connectedGoogleCalendars:y.connectedGoogleCalendars||v.connectedGoogleCalendars,customFieldsAsCards:y.customFieldsAsCards||v.customFieldsAsCards,filters:{...v.filters,...y.filters},highlightToday:null!==(i=y.highlightToday)&&void 0!==i?i:v.highlightToday,isCheckItemCardsShown:null!==(a=y.isCheckItemCardsShown)&&void 0!==a?a:v.isCheckItemCardsShown,isMilestonesShown:null!==(n=y.isMilestonesShown)&&void 0!==n?n:v.isMilestonesShown,isTimeRecordCardsShown:null!==(o=y.isTimeRecordCardsShown)&&void 0!==o?o:v.isTimeRecordCardsShown,isViewTemplateSelected:null!==(s=y.isViewTemplateSelected)&&void 0!==s?s:v.isViewTemplateSelected,multiBoard:y.multiBoard||v.multiBoard,schedulerMode:y.schedulerMode,schedulerOrientation:y.schedulerOrientation,schedulerView:y.schedulerView,showArchivedCards:null!==(l=y.showArchivedCards)&&void 0!==l?l:v.showArchivedCards,showCalendar:null!==(d=y.showCalendar)&&void 0!==d&&d,showDateTime:null!==(c=y.showDateTime)&&void 0!==c?c:v.showDateTime,showTrelloBoard:null!==(h=y.showTrelloBoard)&&void 0!==h?h:v.showTrelloBoard,showTrelloCardNumber:null!==(u=y.showTrelloCardNumber)&&void 0!==u?u:v.showTrelloCardNumber,showWeekNumbers:null!==(p=y.showWeekNumbers)&&void 0!==p?p:v.showWeekNumbers,showWorkDays:null!==(m=y.showWorkDays)&&void 0!==m?m:v.showWorkDays,showWorkHours:null!==(f=y.showWorkHours)&&void 0!==f?f:v.showWorkHours,taskListsBoardId:y.taskListsBoardId,taskListsFilters:{...v.taskListsFilters,...y.taskListsFilters},taskListsOrientation:y.taskListsOrientation,taskListsView:y.taskListsView,timelineHiddenResources:{...v.timelineHiddenResources,...y.timelineHiddenResources},timelineResourcesOrder:{...v.timelineResourcesOrder,...y.timelineResourcesOrder},timelineScale:y.timelineScale||t.defaultTimelineScale,timelineView:y.timelineView,viewTemplate:y.viewTemplate}}if(r.iCalList){let e=new G.a;for(let t of r.iCalList){q.s.hasValue(t.iCalType)||(t.iCalType=q.s.Other);let r=t.calendarUrl.replace(/^http:\/+/,"http://").replace(/^https:\/+/,"https://").replace(/^webcal:\/+/,"https://").replace(/^\/+/,"");$()(r).call(r,"http")||(r=`https://${r}`),D()(q.r).call(q.r,t.calendarColor)||(t.calendarColor="default"),e.set(t.id,{id:t.id,iCalType:t.iCalType,calendarUrl:r,calendarName:t.calendarName,calendarColor:t.calendarColor})}t.iCalList=B()(M()(e).call(e))}r.dontAskConfirmDialogs&&(t.dontAskConfirmDialogs={...e.dontAskConfirmDialogs,...r.dontAskConfirmDialogs});const g=["isProductTourClosed","isProductTourPassed","isOnboardingWelcomeSurveyPassed"];for(let e of g)void 0===r[e]&&(t[e]=!0);return t}}_parseSettingsString(e,t){if(e)try{let r=e.match(/(!)(\[Planyway Settings - DO NOT EDIT!]).*?\(.*?(\()(.*?)(\))/);if(r){let e=r[4];return t?D()(e).call(e,"{")||(e=R.a.inflate(atob(e),{to:"string"})):e=X.a.decode(e),JSON.parse(e)}throw new Error("Unable to extract settings from string")}catch(t){t.settingsString=e,this._$log.error("Planyway parse settings error:"),this._$log.error(t),this._telemetrySrv.logError("Planyway parse settings error",t,{class:this.constructor.name,method:this._parseSettingsString.name})}}}function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;m()(r=["method","field"]).call(r,(function(r){m()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;m()(r=["method","field"]).call(r,(function(r){m()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}u()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(m()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),m()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==c()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];b()(o).call(o,c()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var d=l.extras;if(d){for(var h=0;h<d.length;h++)this.addElementPlacement(d[h],t);r.push.apply(r,d)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return u()(t,l.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return y()(t=A()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:o()({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:y()(e).call(e,this.fromElementDescriptor,this)};return u()(t,l.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[_.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Q=function _decorate(e,t,r,i){var n,o=_getDecoratorsApi();if(i)for(var s=0;s<i.length;s++)o=i[s](o);var l=t((function initialize(e){o.initializeInstanceElements(e,d.elements)}),r),d=o.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===n.key&&e.placement===n.placement},r=0;r<e.length;r++){var i,n=e[r];if("method"===n.kind&&(i=a()(t).call(t,isSameElement)))if(_isDataDescriptor(n.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(n)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");i.descriptor=n.descriptor}else{if(_hasDecorators(n)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");i.decorators=n.decorators}_coalesceGetterSetter(n,i)}else t.push(n)}return t}(y()(n=l.d).call(n,_createElementDescriptor)),e);return o.initializeClassElements(l.F,d.elements),o.runClassFinishers(l.F,d.finishers)}([Object(P.Bb)(["$injector","$log","$window","$translate","backendSrv","notificationSrv","platformSrv","telemetrySrv"])],(function(e){return{F:class SettingsService{constructor(t,r,i,a,n,o,s,l){e(this),this._$injector=t,this._$log=r,this._$window=i,this._$translate=a,this._backendSrv=n,this._notificationSrv=o,this._platformSrv=s,this._telemetrySrv=l,this._currentSettings=new Settings_Settings(this._$log,this._telemetrySrv,localStorage.planywayLocalSettings),this._$window.addEventListener("storage",(e=>{"planywayLocalSettings"===e.key&&this._currentSettings.updateLocalSettings(localStorage.planywayLocalSettings)}),!1),(async()=>{let e=await this._platformSrv.getAppStorageDataAsync();this._localFlags=S()(e)})()}},d:[{kind:"get",static:!0,key:"serviceName",value:function serviceName(){return"settingsSrv"}},{kind:"get",key:"_trelloIntegrationSrv",value:function _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=this._$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}},{kind:"get",key:"currentFlags",value:function currentFlags(){return{telemetry:!1,...this._localFlags,...this._globalFlags}}},{kind:"get",key:"currentSettings",value:function currentSettings(){return this._currentSettings}},{kind:"method",key:"loadSettingsAsync",value:async function loadSettingsAsync(){if(this._trelloIntegrationSrv.isAuthorized()){if(!this._settingsLoaded){this._loadSettingsPromise||(this._loadSettingsPromise=(async()=>{let e;this._globalCreationDate=new Date,this._globalFlags=null;try{let{creationDate:t,settingsString:r,flags:i}=await this._backendSrv.getMemberSettingsAsync();this._globalCreationDate=t,e=r,this._globalFlags=i;let a=await this._platformSrv.getAppStorageDataAsync();a.flags=i,this._platformSrv.setAppStorageDataAsync(a)}catch(e){this._$log.error("Planyway load global settings error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway load global settings error",e,{class:this.constructor.name,method:this.loadSettingsAsync.name})}e||(e=localStorage.planywayGlobalSettings),this._currentSettings=new Settings_Settings(this._$log,this._telemetrySrv,localStorage.planywayLocalSettings,e),this._previousGlobalSettings=this.currentSettings.getGlobalSettingsCopy(),this._settingsLoaded=!0})());try{return await this._loadSettingsPromise}finally{this._loadSettingsPromise=null}}}else this._currentSettings=new Settings_Settings(this._$log,this._telemetrySrv,localStorage.planywayLocalSettings,localStorage.planywayGlobalSettings)}},{kind:"method",key:"saveLocal",value:function saveLocal(){try{localStorage.planywayLocalSettings=this.currentSettings.serializeLocalSettings(!0)}catch(e){this._$log.error("Planyway local settings caching error:"),this._$log.error(e)}}},{kind:"method",key:"saveGlobalAsync",value:async function saveGlobalAsync(){this._processSaveGlobalPromise?this._needProcessSaveGlobal=!0:this._processSaveGlobalPromise=this._processSaveGlobalAsync();try{return await this._processSaveGlobalPromise}finally{this._processSaveGlobalPromise=null}}},{kind:"method",key:"getGlobalCreationDate",value:function getGlobalCreationDate(){return this._globalCreationDate}},{kind:"method",key:"getBoardsSettingsAsync",value:async function getBoardsSettingsAsync(e,t=!1){let r=function getDefaultBoardSettings(){return{dueLinkType:O.e.DueStart,dueLinkTypeAllDay:O.e.DueEnd,defaultCardIsAllDay:!0,defaultCardDuration:1,defaultCardPosition:O.b.Bottom,customFilters:[],connectedPublicBoards:[]}}();if(this._boardsSettings)for(let t of e)this._boardsSettings[t]||(this._boardsSettings[t]={dueLinkType:r.dueLinkType,dueLinkTypeAllDay:r.dueLinkTypeAllDay,defaultCardIsAllDay:r.defaultCardIsAllDay,defaultCardDuration:r.defaultCardDuration,defaultCardPosition:r.defaultCardPosition,customFilters:r.customFilters,connectedPublicBoards:r.connectedPublicBoards});else{this._boardsSettings={};let t=this._deserializeBoardSettings(localStorage.planywayBoardSettings,!0);for(let i of e){let e=t&&t[i]||{};this._boardsSettings[i]={dueLinkType:e.dueLinkType||r.dueLinkType,dueLinkTypeAllDay:e.dueLinkTypeAllDay||r.dueLinkTypeAllDay,defaultCardIsAllDay:void 0!==e.defaultCardIsAllDay?e.defaultCardIsAllDay:r.defaultCardIsAllDay,defaultCardDuration:e.defaultCardDuration||r.defaultCardDuration,defaultListId:e.defaultListId,defaultCardPosition:e.defaultCardPosition||r.defaultCardPosition,customFilters:e.customFilters||r.customFilters,connectedPublicBoards:e.connectedPublicBoards||r.connectedPublicBoards}}}if(t){let t=[...e];for(;t.length>0;)try{let e=await this._backendSrv.getBoardsSettingsAsync(b()(t).call(t,0,50));if(e&&e.length>0)for(let t of e){var i;this._boardsSettings[t.id]={dueLinkType:t.dueLinkType||r.dueLinkType,dueLinkTypeAllDay:t.dueLinkTypeAllDay||r.dueLinkTypeAllDay,defaultCardIsAllDay:null!==(i=t.defaultCardIsAllDay)&&void 0!==i?i:r.defaultCardIsAllDay,defaultCardDuration:t.defaultCardDuration||r.defaultCardDuration,defaultListId:t.defaultListId,defaultCardPosition:t.defaultCardPosition||r.defaultCardPosition,customFilters:t.customFilters||r.customFilters,connectedPublicBoards:t.connectedPublicBoards||r.connectedPublicBoards}}}catch(e){this._$log.error("Planyway boards settings loading error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway load board settings error",e,{class:this.constructor.name,method:this.getBoardsSettingsAsync.name})}try{localStorage.planywayBoardSettings=this._serializeBoardSettings(this._boardsSettings,!0)}catch(e){this._$log.error("Planyway boards settings caching error:"),this._$log.error(e)}}return this._boardsSettings}},{kind:"method",key:"saveBoardSettingsAsync",value:async function saveBoardSettingsAsync(e,t){try{await this._backendSrv.setBoardSettingsAsync(e,t)}catch(e){throw this._telemetrySrv.logError("Planyway save board settings error",e,{class:this.constructor.name,method:this.saveBoardSettingsAsync.name}),e}this._boardsSettings[e]={...this._boardsSettings[e],...t};try{localStorage.planywayBoardSettings=this._serializeBoardSettings(this._boardsSettings,!0)}catch(e){this._$log.error("Planyway boards settings caching error:"),this._$log.error(e)}}},{kind:"method",key:"_processSaveGlobalAsync",value:async function _processSaveGlobalAsync(){this._needProcessSaveGlobal=!1;try{let e=this.currentSettings.serializeGlobalSettings(this._previousGlobalSettings,!0),t=this.currentSettings.getGlobalSettingsCopy();await this._backendSrv.setMemberSettingsAsync(this._globalCreationDate,e);try{localStorage.planywayGlobalSettings=e}catch(e){this._$log.error("Planyway global settings caching error:"),this._$log.error(e)}this._previousGlobalSettings=t}catch(e){switch(e.code){case O.f.UpdateSettingsConflict:try{let{settingsString:e}=await this._backendSrv.getMemberSettingsAsync();this.currentSettings.updateRemoteGlobalSettings(e),this._needProcessSaveGlobal=!0}catch(e){this._$log.error("Planyway actualize global settings error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway actualize global settings error",e,{class:this.constructor.name,method:this._processSaveGlobalAsync.name})}break;default:this._$log.error("Planyway save global settings error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway save global settings error",e,{class:this.constructor.name,method:this._processSaveGlobalAsync.name})}}if(this._needProcessSaveGlobal)return this._processSaveGlobalAsync()}},{kind:"method",key:"_deserializeBoardSettings",value:function _deserializeBoardSettings(e,t){if(e){let r=e.match(/(!)(\[Planyway Board Settings - DO NOT EDIT!]).*?\(.*?(\()(.*?)(\))/);if(r){let e=r[4];if(t&&!D()(e).call(e,"{"))try{e=R.a.inflate(atob(e),{to:"string"})}catch(e){}try{return JSON.parse(e)}catch(e){}}}}},{kind:"method",key:"_serializeBoardSettings",value:function _serializeBoardSettings(e,t){let r=C()(e);return t&&(r=btoa(R.a.deflate(r,{to:"string"}))),`![Planyway Board Settings - DO NOT EDIT!]()[](${r})`}}]}}))},223:function(e,t,r){e.exports=r.p+"../images/cb9018bc-f870-4afd-8234-e2bd41844ad0.png"},265:function(e,t,r){e.exports=r.p+"../images/0731d975-4ec7-48c6-b063-90b8c4fd8a45.svg"},28:function(e,t,r){"use strict";r.d(t,"c",(function(){return ie})),r.d(t,"b",(function(){return ae})),r.d(t,"a",(function(){return se})),r.d(t,"h",(function(){return parseTrelloCardKeywords})),r.d(t,"g",(function(){return parseTrelloCardDescription})),r.d(t,"i",(function(){return toggleLabel})),r.d(t,"f",(function(){return isMultipleMembersSupported})),r.d(t,"e",(function(){return isMemberRequired})),r.d(t,"j",(function(){return toggleMember})),r.d(t,"d",(function(){return getGoogleCardId}));var i=r(6),a=r.n(i),n=r(9),o=r.n(n),s=r(8),l=r.n(s),d=r(4),c=r.n(d),h=r(2),u=r.n(h),p=r(14),m=r.n(p),f=r(62),y=r.n(f),v=r(27),_=r.n(v),g=r(41),C=r.n(g),k=r(58),D=r.n(k),E=r(23),b=r.n(E),w=r(20),S=r.n(w),T=r(11),A=r.n(T),I=r(56),R=r.n(I),O=r(12),P=r.n(O),L=r(17),M=r.n(L),N=r(5),B=r.n(N),F=r(30),$=r.n(F),x=r(3),G=r.n(x),z=r(22),U=r.n(z),W=r(65),j=r.n(W),H=r(16),V=r.n(H),Y=r(15),K=r.n(Y),X=r(73),q=r.n(X),Q=r(82),J=r.n(Q),Z=r(10),ee=r(7),te=r(0),re=r(1);function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;u()(r=["method","field"]).call(r,(function(r){u()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;u()(r=["method","field"]).call(r,(function(r){u()(t).call(t,(function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var n="static"===a?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}c()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],a={static:[],prototype:[],own:[]};if(u()(e).call(e,(function(e){this.addElementPlacement(e,a)}),this),u()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,a);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==l()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],a=e.decorators,n=a.length-1;n>=0;n--){var o=t[e.placement];A()(o).call(o,l()(o).call(o,e.key),1);var s=this.fromElementDescriptor(e),d=this.toElementFinisherExtras((0,a[n])(s)||s);e=d.element,this.addElementPlacement(e,t),d.finisher&&i.push(d.finisher);var c=d.extras;if(c){for(var h=0;h<c.length;h++)this.addElementPlacement(c[h],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var a=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(a)||a);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return c()(t,o.a,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return G()(t=K()(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var n=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:i,descriptor:a()({},n)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(n,"get","The property descriptor of a field descriptor"),this.disallowProperty(n,"set","The property descriptor of a field descriptor"),this.disallowProperty(n,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:G()(e).call(e,this.fromElementDescriptor,this)};return c()(t,o.a,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[m.a];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const ie=/^Planyway Data$/i,ae=30,ne=J.a.RRule,oe=new Date("2999-01-01T00:00:00.000Z");let se=function _decorate(e,t,r,i){var a,n=_getDecoratorsApi();if(i)for(var o=0;o<i.length;o++)n=i[o](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},r=0;r<e.length;r++){var i,a=e[r];if("method"===a.kind&&(i=B()(t).call(t,isSameElement)))if(_isDataDescriptor(a.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(a)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(_hasDecorators(a)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}_coalesceGetterSetter(a,i)}else t.push(a)}return t}(G()(a=s.d).call(a,_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class CalendarCard{constructor(t,r){e(this),this._id=t,this._cardType=r,this._isReadOnly=!1,this._keywordIds=[],this.labelIds=new V.a,this.memberIds=new V.a,this._exceptionDates=[],this._timeZones={},this._sourceCardId=null,this._trelloCustomFieldCards=[],this._trelloCheckItemCards=[],this._trelloTimeRecordCards=[],this._lastDataVersionId=0,this._ignoreFilters=!1}}return{F:CalendarCard,d:[{kind:"get",decorators:[Object(re.Jb)()],key:"id",value:function id(){return this._id}},{kind:"get",decorators:[Object(re.Jb)()],key:"cardType",value:function cardType(){return this._cardType}},{kind:"set",key:"cardType",value:function cardType(e){this._cardType=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"calendarId",value:function calendarId(){switch(this.cardType){case te.h.TrelloCard:case te.h.TrelloCustomField:case te.h.TrelloCheckItem:case te.h.TrelloTimeRecord:return this.boardId;case te.h.GoogleEvent:return this.googleCalendarId;case te.h.ICalEvent:return this.iCalCalendarId}}},{kind:"get",decorators:[Object(re.Jb)()],key:"isReadOnly",value:function isReadOnly(){return this._isReadOnly||this.cardType===te.h.ICalEvent}},{kind:"get",decorators:[Object(re.Jb)()],key:"shortId",value:function shortId(){return this._shortId}},{kind:"get",decorators:[Object(re.Jb)()],key:"trelloCardNumber",value:function trelloCardNumber(){return this._trelloCardNumber}},{kind:"set",key:"trelloCardNumber",value:function trelloCardNumber(e){this._trelloCardNumber=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"boardId",value:function boardId(){return this._boardId}},{kind:"set",key:"boardId",value:function boardId(e){this._boardId=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"isCurrentBoardCard",value:function isCurrentBoardCard(){if(te.ob.has(this.cardType))return this.boardId===this._currentBoardId}},{kind:"get",decorators:[Object(re.Jb)()],key:"listId",value:function listId(){return this._listId}},{kind:"set",key:"listId",value:function listId(e){this._listId=e}},{kind:"get",key:"position",value:function position(){return this._position||0}},{kind:"set",key:"position",value:function position(e){this._position=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"keywords",value:function keywords(){return this._keywords}},{kind:"get",decorators:[Object(re.Jb)()],key:"due",value:function due(){if(this.hasDates)return this._due}},{kind:"get",key:"realDue",value:function realDue(){return this.hasDates?this._realDue:null}},{kind:"get",decorators:[Object(re.Jb)()],key:"googleCalendarId",value:function googleCalendarId(){return this._googleCalendarId}},{kind:"set",key:"googleCalendarId",value:function googleCalendarId(e){this._googleCalendarId=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"googleEventId",value:function googleEventId(){return this._googleEventId}},{kind:"get",decorators:[Object(re.Jb)()],key:"googleShowAsFree",value:function googleShowAsFree(){return this._googleShowAsFree}},{kind:"set",key:"googleShowAsFree",value:function googleShowAsFree(e){this._googleShowAsFree=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"iCalCalendarId",value:function iCalCalendarId(){return this._iCalCalendarId}},{kind:"get",decorators:[Object(re.Jb)()],key:"iCalType",value:function iCalType(){return this._iCalType}},{kind:"get",decorators:[Object(re.Jb)()],key:"cardUrl",value:function cardUrl(){switch(this.cardType){case te.h.TrelloCard:return`https://trello.com/c/${this.shortId||this.id}`;case te.h.TrelloCustomField:case te.h.TrelloCheckItem:case te.h.TrelloTimeRecord:return`https://trello.com/c/${this.parentShortId||this.parentId}`;case te.h.GoogleEvent:return this._googleEventUrl}}},{kind:"get",decorators:[Object(re.Jb)()],key:"shareUrl",value:function shareUrl(){switch(this.cardType){case te.h.TrelloCard:case te.h.TrelloCustomField:case te.h.TrelloCheckItem:case te.h.TrelloTimeRecord:let e=new j.a;return e.set(ee.e,this.boardId),e.set(ee.f,this.id),e.set(ee.V,te.G.ShareCard),`${ee.L}?${e}`}}},{kind:"get",decorators:[Object(re.Jb)()],key:"title",value:function title(){return this._title||""}},{kind:"set",key:"title",value:function title(e){this._title!==e&&(this._title=e,te.ob.has(this.cardType)&&(this._keywords=[...parseTrelloCardKeywords(this._title),...this._keywordIds]))}},{kind:"get",decorators:[Object(re.Jb)()],key:"description",value:function description(){return this._description||""}},{kind:"set",key:"description",value:function description(e){this._description=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"isArchived",value:function isArchived(){return this._isArchived}},{kind:"set",key:"isArchived",value:function isArchived(e){this._isArchived=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"isCompleted",value:function isCompleted(){return this._isCompleted}},{kind:"set",key:"isCompleted",value:function isCompleted(e){this._isCompleted=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"isSubscribed",value:function isSubscribed(){return this._isSubscribed}},{kind:"set",key:"isSubscribed",value:function isSubscribed(e){this._isSubscribed=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"labelIds",value:function labelIds(){return this._labelIds}},{kind:"set",key:"labelIds",value:function labelIds(e){let t=!1;if(this._labelIds&&this._labelIds.size===e.size){for(let r of this._labelIds)if(!e.has(r)){t=!0;break}}else t=!0;t&&(this._labelIds=e,0===this._labelIds.size&&this._labelIds.add(ee.k))}},{kind:"get",decorators:[Object(re.Jb)()],key:"memberIds",value:function memberIds(){return this._memberIds}},{kind:"set",key:"memberIds",value:function memberIds(e){let t=!1;if(this._memberIds&&this._memberIds.size===e.size){for(let r of this._memberIds)if(!e.has(r)){t=!0;break}}else t=!0;t&&(this._memberIds=e,0===this._memberIds.size&&this._memberIds.add(ee.k))}},{kind:"get",decorators:[Object(re.Jb)()],key:"members",value:function members(){return U()(this.memberIds)}},{kind:"get",decorators:[Object(re.Jb)()],key:"hasMembers",value:function hasMembers(){return this.memberIds.size>0&&(1!==this.memberIds.size||!this.memberIds.has(ee.k))}},{kind:"get",decorators:[Object(re.Jb)()],key:"isAllDay",value:function isAllDay(){return this._isAllDay}},{kind:"set",key:"isAllDay",value:function isAllDay(e){this._isAllDay=e,this._previousIsAllDay=this._isAllDay,this._updateRecurrenceRule()}},{kind:"get",decorators:[Object(re.Jb)()],key:"previousIsAllDay",value:function previousIsAllDay(){return this._previousIsAllDay}},{kind:"get",decorators:[Object(re.Jb)()],key:"start",value:function start(){return this._start}},{kind:"set",key:"start",value:function start(e){this._start=e&&new Date(e),this._previousStart=this._start,e?this._updateRecurrenceRule():this.recurrenceRule=void 0}},{kind:"get",decorators:[Object(re.Jb)()],key:"previousStart",value:function previousStart(){return this._previousStart}},{kind:"get",decorators:[Object(re.Jb)()],key:"end",value:function end(){return this.cardRole===Z.c.Milestone?this._start:this._end}},{kind:"set",key:"end",value:function end(e){this._end=e&&new Date(e),this._previousEnd=this._end}},{kind:"get",decorators:[Object(re.Jb)()],key:"previousEnd",value:function previousEnd(){return this.cardRole===Z.c.Milestone?this._previousStart:this._previousEnd}},{kind:"get",decorators:[Object(re.Jb)()],key:"hasDates",value:function hasDates(){return Object(re.rb)(this.start)&&Object(re.rb)(this.end)}},{kind:"get",decorators:[Object(re.Jb)()],key:"isSingleDate",value:function isSingleDate(){return this.isMilestone||this.cardType===te.h.TrelloCustomField}},{kind:"get",decorators:[Object(re.Jb)()],key:"durationMinutes",value:function durationMinutes(){return this.isAllDay?this._durationMinutes:Object(re.S)(this.start,this.end)}},{kind:"set",key:"durationMinutes",value:function durationMinutes(e){this._durationMinutes=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"dailyEstimateMinutes",value:function dailyEstimateMinutes(){return this.customData.dailyEstimateMinutes}},{kind:"set",key:"dailyEstimateMinutes",value:function dailyEstimateMinutes(e){this.customData.dailyEstimateMinutes=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"isDailyEstimateFieldShown",value:function isDailyEstimateFieldShown(){return this.customData.isDailyEstimateFieldShown}},{kind:"set",key:"isDailyEstimateFieldShown",value:function isDailyEstimateFieldShown(e){this.customData.isDailyEstimateFieldShown=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"recurrenceRule",value:function recurrenceRule(){if(this.cardRole===Z.c.Card)return this._recurrenceRule}},{kind:"set",key:"recurrenceRule",value:function recurrenceRule(e){this.cardRole===Z.c.Card&&(this._recurrenceRule=e,this.recurrenceRule&&(this.customData.defaultSortOrder=Number.POSITIVE_INFINITY,this.customData.membersSortOrder=Number.POSITIVE_INFINITY,this.customData.calendarsSortOrder=Number.POSITIVE_INFINITY,this.customData.listsSortOrder=Number.POSITIVE_INFINITY,this.customData.labelsSortOrder=Number.POSITIVE_INFINITY),this._updateRecurrenceRule())}},{kind:"get",decorators:[Object(re.Jb)()],key:"recurrenceException",value:function recurrenceException(){return this._recurrenceException}},{kind:"get",key:"exceptionDates",value:function exceptionDates(){return this._exceptionDates}},{kind:"set",key:"exceptionDates",value:function exceptionDates(e){var t;(this._exceptionDates=e||[],this._exceptionDates.length>0)?this._recurrenceException=G()(t=this._exceptionDates).call(t,re.Gb).join():this._recurrenceException=void 0}},{kind:"get",decorators:[Object(re.Jb)()],key:"recurrenceId",value:function recurrenceId(){return this._recurrenceId}},{kind:"get",key:"exceptionDate",value:function exceptionDate(){return this._exceptionDate}},{kind:"get",decorators:[Object(re.Jb)()],key:"originalStart",value:function originalStart(){return this._originalStart}},{kind:"get",decorators:[Object(re.Jb)()],key:"customExpand",value:function customExpand(){return this._customExpand}},{kind:"get",decorators:[Object(re.Jb)()],key:"priority",value:function priority(){return this._priority||0}},{kind:"set",key:"priority",value:function priority(e){this._priority=e}},{kind:"get",key:"customData",value:function customData(){return this._customData||(this._customData={}),this._customData.cardRole||(this._customData.cardRole=Z.c.Card),"number"!=typeof this._customData.defaultSortOrder&&(this._customData.defaultSortOrder=Number.POSITIVE_INFINITY),"number"!=typeof this._customData.membersSortOrder&&(this._customData.membersSortOrder=Number.POSITIVE_INFINITY),"number"!=typeof this._customData.calendarsSortOrder&&(this._customData.calendarsSortOrder=Number.POSITIVE_INFINITY),"number"!=typeof this._customData.listsSortOrder&&(this._customData.listsSortOrder=Number.POSITIVE_INFINITY),"number"!=typeof this._customData.labelsSortOrder&&(this._customData.labelsSortOrder=Number.POSITIVE_INFINITY),this._customData.customFieldCardsData||(this._customData.customFieldCardsData=[]),this._customData.checkItemCardsData||(this._customData.checkItemCardsData=[]),this._customData.timeRecordCardsData||(this._customData.timeRecordCardsData=[]),this._customData.notifications||(this._customData.notifications=[]),this._customData.links||(this._customData.links=[]),this._customData}},{kind:"get",decorators:[Object(re.Jb)()],key:"cardRole",value:function cardRole(){return this.customData.cardRole}},{kind:"set",key:"cardRole",value:function cardRole(e){this.customData.cardRole=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"isMilestone",value:function isMilestone(){return this.customData.cardRole===Z.c.Milestone}},{kind:"get",key:"sourceCardId",value:function sourceCardId(){return this._sourceCardId}},{kind:"get",key:"trelloCustomFieldCards",value:function trelloCustomFieldCards(){return this._trelloCustomFieldCards}},{kind:"set",key:"trelloCustomFieldCards",value:function trelloCustomFieldCards(e){this._trelloCustomFieldCards=e}},{kind:"get",key:"trelloCheckItemCards",value:function trelloCheckItemCards(){return this._trelloCheckItemCards}},{kind:"set",key:"trelloCheckItemCards",value:function trelloCheckItemCards(e){this._trelloCheckItemCards=e}},{kind:"get",key:"trelloTimeRecordCards",value:function trelloTimeRecordCards(){return this._trelloTimeRecordCards}},{kind:"set",key:"trelloTimeRecordCards",value:function trelloTimeRecordCards(e){this._trelloTimeRecordCards=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"parentId",value:function parentId(){return this._parentId}},{kind:"set",key:"parentId",value:function parentId(e){this._parentId=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"parentShortId",value:function parentShortId(){return this._parentShortId}},{kind:"get",decorators:[Object(re.Jb)()],key:"trelloCustomFieldId",value:function trelloCustomFieldId(){return this._trelloCustomFieldId}},{kind:"get",decorators:[Object(re.Jb)()],key:"defaultSortOrder",value:function defaultSortOrder(){return this.customData.defaultSortOrder}},{kind:"get",decorators:[Object(re.Jb)()],key:"membersSortOrder",value:function membersSortOrder(){return this.customData.membersSortOrder}},{kind:"get",decorators:[Object(re.Jb)()],key:"calendarsSortOrder",value:function calendarsSortOrder(){return this.customData.calendarsSortOrder}},{kind:"get",decorators:[Object(re.Jb)()],key:"listsSortOrder",value:function listsSortOrder(){return this.customData.listsSortOrder}},{kind:"get",decorators:[Object(re.Jb)()],key:"labelsSortOrder",value:function labelsSortOrder(){return this.customData.labelsSortOrder}},{kind:"get",key:"customFieldCardsData",value:function customFieldCardsData(){return this.customData.customFieldCardsData}},{kind:"set",key:"customFieldCardsData",value:function customFieldCardsData(e){this.customData.customFieldCardsData=e}},{kind:"get",key:"checkItemCardsData",value:function checkItemCardsData(){return this.customData.checkItemCardsData}},{kind:"set",key:"checkItemCardsData",value:function checkItemCardsData(e){this.customData.checkItemCardsData=e}},{kind:"get",key:"timeRecordCardsData",value:function timeRecordCardsData(){return this.customData.timeRecordCardsData}},{kind:"set",key:"timeRecordCardsData",value:function timeRecordCardsData(e){this.customData.timeRecordCardsData=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"notifications",value:function notifications(){return this.customData.notifications}},{kind:"set",key:"notifications",value:function notifications(e){this.customData.notifications=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"canHaveLinks",value:function canHaveLinks(){return this.cardType===te.h.TrelloCard&&this.hasDates&&!this.recurrenceRule&&!this.recurrenceId}},{kind:"get",decorators:[Object(re.Jb)()],key:"links",value:function links(){return this.customData.links}},{kind:"set",key:"links",value:function links(e){this.customData.links=e}},{kind:"get",decorators:[Object(re.Jb)()],key:"isTempCard",value:function isTempCard(){var e;return $()(e=this.id).call(e,ee.k)}},{kind:"get",key:"lastChangeId",value:function lastChangeId(){return this._lastChangeId}},{kind:"set",key:"lastChangeId",value:function lastChangeId(e){return this._lastChangeId=e}},{kind:"get",key:"lastDataVersionId",value:function lastDataVersionId(){return this._lastDataVersionId}},{kind:"get",decorators:[Object(re.Jb)()],key:"ignoreFilters",value:function ignoreFilters(){return this._ignoreFilters}},{kind:"set",key:"ignoreFilters",value:function ignoreFilters(e){this._ignoreFilters=e}},{kind:"method",static:!0,key:"fromTrelloCard",value:function fromTrelloCard(e,t,r){var i;let a=new CalendarCard(e.id,te.h.TrelloCard);a._isReadOnly=r.isReadOnly;let n,{description:o,extensionCardData:s}=CalendarCard._deserializeExtensionCardData(e.desc);if(s&&(a._needMigrateExtensionCardData=!0),r.cardDataCustomFieldId){var l;let t=null===(l=e.customFieldItems)||void 0===l?void 0:B()(l).call(l,(e=>e.idCustomField===r.cardDataCustomFieldId));var d;if(null!=t&&t.value)n=CalendarCard._deserializeCustomFieldCardData(null===(d=t.value)||void 0===d?void 0:d.text)}let c,h=s;if(n&&(!h||n.dataVersionId>h.dataVersionId)&&(h=n),h){if(a._lastDataVersionId=h.dataVersionId,a.recurrenceRule=h.recurrenceRule,a.exceptionDates=h.exceptionDates,a._recurrenceId=h.recurrenceId,a._originalStart=h.originalStart,a._exceptionDate=Object(re.H)(h.originalStart),a.priority=h.priority,a._customData=h.customData,a.customData.originalCardId){a.customData.originalCardId===e.id||(a.checkItemCardsData=[],a.timeRecordCardsData=[],a.links=[])}a._sourceCardId=h.recurrenceId,c=CalendarCard._correctCardData(e.due,r,h)}else c=CalendarCard._correctCardData(e.due,r);e.due&&(a._due=new Date(e.due)),c&&(a.isAllDay=c.isAllDay,a.start=c.start,a.end=c.end,a._dueLinkType=c.dueLinkType,a._dueLinkTypeAllDay=c.dueLinkTypeAllDay,a._realDue=c.realDue,a._offsetDue=c.offsetDue);let u=e.shortLink;if(!u){let t=e.shortUrl.match(/\/c\/(\w+)/);t&&(u=t[1])}return a._shortId=u,a._trelloCardNumber=e.idShort,a._boardId=e.idBoard,a._currentBoardId=t,a._listId=e.idList,a._position=e.pos,a._keywordIds=parseTrelloCardKeywords(e.idShort.toString()),a._keywords=[...a._keywordIds],a.title=e.name,a.description=o,a.isArchived=e.closed,a.isCompleted=e.dueComplete,a.isSubscribed=e.subscribed,a.labelIds=new V.a(G()(i=e.labels).call(i,(e=>e.id))),a.memberIds=new V.a(e.idMembers),a.lastChangeId=new Date(e.dateLastActivity).getTime(),a._lastCard=a._getLastCard(),a}},{kind:"method",static:!0,key:"fromGoogleEvent",value:function fromGoogleEvent(e,t){let r=new CalendarCard(getGoogleCardId(e.id,t.shortId),te.h.GoogleEvent);var i,a;(r._isReadOnly=t.isReadOnly,r._googleEventId=e.id,r._googleCalendarId=t.id,r._googleEventUrl=e.htmlLink,r.googleShowAsFree="transparent"===e.transparency,r.title=e.summary,r.description=e.description,e.start.dateTime?(r.isAllDay=!1,r.start=new Date(e.start.dateTime),r.end=new Date(e.end.dateTime)):(r.isAllDay=!0,r.start=Object(re.H)(e.start.date),r.end=Object(re.a)(Object(re.H)(e.end.date),-1)),r._timeZones={start:e.start.timeZone,end:e.end.timeZone},e.recurrence)?r._recurrenceRule=null===(i=B()(a=e.recurrence).call(a,(e=>$()(e).call(e,"RRULE:"))))||void 0===i?void 0:i.replace("RRULE:",""):e.recurringEventId&&(r._recurrenceId=getGoogleCardId(e.recurringEventId,t.shortId),r._googleRecurringEventId=e.recurringEventId,r._originalStart=e.originalStartTime.dateTime||e.originalStartTime.date,r._timeZones.originalStart=e.originalStartTime.timeZone,r._exceptionDate=Object(re.H)(r._originalStart));return r}},{kind:"method",static:!0,key:"fromICalEvent",value:function fromICalEvent(e,t,r){let i=new CalendarCard(e.id,te.h.ICalEvent);return i._iCalCalendarId=t,i._iCalType=r,i.title=e.title,i.description=e.description,i.isAllDay=e.isAllDay,i.start=e.start,i.end=e.end,i._recurrenceRule=e.recurrenceRule,i.exceptionDates=[...e.exceptionDates],i._recurrenceId=e.recurrenceId,i._exceptionDate=e.exceptionDate,i._customExpand=e.customExpand,i}},{kind:"method",static:!0,key:"getTempCard",value:function getTempCard(e,t,r={}){let i=new CalendarCard(ee.k,e);switch(i._currentBoardId=t,i.title=r.title||"",e){case te.h.TrelloCard:i._boardId=r.boardId,i._listId=r.listId,i._position=r.position;break;case te.h.GoogleEvent:i._googleCalendarId=r.googleCalendarId}return i}},{kind:"method",static:!0,key:"getPreviewCard",value:function getPreviewCard(e,t){let r=new CalendarCard(e,te.h.TrelloCard);return r._isReadOnly=!0,r._keywordIds=[],r.title=t.title,r.isAllDay=t.isAllDay,r.start=t.start,r.end=t.end,r.isCompleted=t.isCompleted||!1,r.labelIds=new V.a(t.label?[t.label]:[]),r.memberIds=new V.a,r.recurrenceRule=t.recurrenceRule,r.priority=t.priority||0,r}},{kind:"method",key:"incrementDataVersion",value:function incrementDataVersion(){this._lastDataVersionId+=1}},{kind:"method",key:"toTrelloCard",value:function toTrelloCard(e,t=[]){let r={id:this.id};if(M()(t).call(t,"cardData"))if(this._dueLinkType=void 0,this._dueLinkTypeAllDay=void 0,this._realDue=void 0,this._offsetDue=void 0,this.hasDates){if(this._dueLinkType=e.dueLinkType,this._dueLinkTypeAllDay=e.dueLinkTypeAllDay,this.isAllDay)switch(this._dueLinkTypeAllDay){case Z.e.DueStart:this._correctAllDayDueDateAsStartDate(e);break;case Z.e.DueEnd:this._correctAllDayDueDateAsEndDate(e);break;case Z.e.NotLinked:this._correctAllDayDueDateAsNotLinked()}else switch(this._dueLinkType){case Z.e.DueStart:this._correctDueDateAsStartDate();break;case Z.e.DueEnd:this._correctDueDateAsEndDate();break;case Z.e.NotLinked:this._correctDueDateAsNotLinked()}this._realDue&&(this._due=new Date(this._realDue),r.due=this.due.toISOString())}else r.due="";let i={name:()=>r.name=this.title,idBoard:()=>r.idBoard=this.boardId,idList:()=>r.idList=this.listId,pos:()=>r.pos=this.position||Z.b.Bottom,desc:()=>{e.cardDataCustomFieldId&&!this._needMigrateExtensionCardData?r.desc=this.description:M()(t).call(t,"cardData")||(r.desc=this._serializeExtensionCardData())},closed:()=>r.closed=this.isArchived,dueComplete:()=>r.dueComplete=this.isCompleted,subscribed:()=>r.subscribed=this.isSubscribed,idLabels:()=>{var e;return r.idLabels=P()(e=U()(this.labelIds)).call(e,(e=>e!==ee.k))},idMembers:()=>{var e;return r.idMembers=P()(e=U()(this.memberIds)).call(e,(e=>e!==ee.k))},idCardSource:()=>{if(this.isTempCard&&this.sourceCardId){r.idCardSource=this.sourceCardId;let e=["attachments","checklists","comments","stickers"];M()(t).call(t,"idMembers")||e.push("members"),M()(t).call(t,"idLabels")||e.push("labels"),r.keepFromSource=e}},cardData:()=>{e.cardDataCustomFieldId?(r.cardDataCustomFieldValue=this._serializeCustomFieldCardData(),this._needMigrateExtensionCardData&&(this._needMigrateExtensionCardData=!1,r.desc=this.description)):r.desc=this._serializeExtensionCardData()}};for(let e of t){let t=i[e];t&&t()}return this._lastCard=this._getLastCard(),r}},{kind:"method",key:"getTotalEstimationMs",value:function getTotalEstimationMs(e=this.dailyEstimateMinutes){return this.isAllDay&&!e?null:this.isAllDay?(Object(re.R)(this.start,this.end)+1)*e*60*1e3:Object(re.T)(this.start,this.end)}},{kind:"method",key:"addTrelloCustomFieldCard",value:function addTrelloCustomFieldCard(e){var t,r;if(this.deleteTrelloCustomFieldCard(e.id),!e.date)return;let i=new CalendarCard(e.id,te.h.TrelloCustomField);i._isReadOnly=this.isReadOnly,i._trelloCardNumber=this._trelloCardNumber,i._boardId=this.boardId,i._currentBoardId=this._currentBoardId,i._listId=this.listId,i._parentId=this.id,i._parentShortId=this.shortId,i._trelloCustomFieldId=e.customFieldId,i._keywordIds=[...this._keywordIds],i._keywords=[...this._keywordIds],i._due=e.date,i.title=this.title,i.description=this.description,i.isArchived=this.isArchived,i.isCompleted=null!==(t=e.isCompleted)&&void 0!==t&&t,i.labelIds=new V.a(this.labelIds),i.memberIds=new V.a(this.memberIds),i.isAllDay=null!==(r=e.isAllDay)&&void 0!==r?r:this.isAllDay,i.start=i.isAllDay?Object(re.O)(e.date):e.date,i.end=i.isAllDay?Object(re.O)(e.date):e.date,i.customData.defaultSortOrder=e.defaultSortOrder,i.customData.membersSortOrder=e.membersSortOrder,i.customData.calendarsSortOrder=e.calendarsSortOrder,i.customData.listsSortOrder=e.listsSortOrder,i.customData.labelsSortOrder=e.labelsSortOrder;let a=i._toCustomFieldCardData();return a&&this.customFieldCardsData.push(a),this.trelloCustomFieldCards.push(i),i}},{kind:"method",key:"addTrelloCustomFieldCardFromTrello",value:function addTrelloCustomFieldCardFromTrello(e){var t,r;let i=B()(t=this.customFieldCardsData).call(t,(t=>t.id===e.id||t.customFieldId===e.customFieldId))||{},a=null===(r=e.value)||void 0===r?void 0:r.date,n={...i,id:e.id,customFieldId:e.idCustomField,date:a&&new Date(a)};return this.addTrelloCustomFieldCard(n)}},{kind:"method",key:"updateTrelloCustomFieldCard",value:function updateTrelloCustomFieldCard(e,t){var r;let i=B()(r=this.trelloCustomFieldCards).call(r,(t=>t.id===e));if(!i)return{customFieldCardUpdated:!1};let a=!1;i.boardId===this.boardId&&i.listId===this.listId||(i.boardId=this.boardId,i.listId=this.listId,a=!0),i.title!==this.title&&(i.title=this.title,a=!0),i.description!==this.description&&(i.description=this.description,a=!0),i.isArchived!==this.isArchived&&(i.isArchived=this.isArchived,a=!0),Object(re.h)(U()(i.labelIds),U()(this.labelIds))||(i.labelIds=new V.a(this.labelIds),a=!0),Object(re.h)(U()(i.memberIds),U()(this.memberIds))||(i.memberIds=new V.a(this.memberIds),a=!0);let n=!1,o=!1;if(void 0!==t.isAllDay&&i.isAllDay!==t.isAllDay&&(i.isAllDay=t.isAllDay,o=!0),void 0!==t.date){let e=i.isAllDay?Object(re.O)(t.date):t.date;Object(re.w)(i.start,e)&&Object(re.w)(i.end,e)||(e?(i.start=e,i.end=e,i._due=t.date):(i.isAllDay=null,i.start=null,i.end=null,i._due=null),n=!0)}void 0!==t.isCompleted&&i.isCompleted!==t.isCompleted&&(i.isCompleted=t.isCompleted,o=!0),void 0!==t.defaultSortOrder&&i.defaultSortOrder!==t.defaultSortOrder&&(i.customData.defaultSortOrder=t.defaultSortOrder,o=!0),void 0!==t.membersSortOrder&&i.membersSortOrder!==t.membersSortOrder&&(i.customData.membersSortOrder=t.membersSortOrder,o=!0),void 0!==t.calendarsSortOrder&&i.calendarsSortOrder!==t.calendarsSortOrder&&(i.customData.calendarsSortOrder=t.calendarsSortOrder,o=!0),void 0!==t.listsSortOrder&&i.listsSortOrder!==t.listsSortOrder&&(i.customData.listsSortOrder=t.listsSortOrder,o=!0),void 0!==t.labelsSortOrder&&i.labelsSortOrder!==t.labelsSortOrder&&(i.customData.labelsSortOrder=t.labelsSortOrder,o=!0),this.deleteTrelloCustomFieldCard(i.id);let s=i._toCustomFieldCardData();return s&&this.customFieldCardsData.push(s),this.trelloCustomFieldCards.push(i),{customFieldCardUpdated:a||n||o,customFieldCard:i,customFieldUpdated:n,parentCardUpdated:o}}},{kind:"method",key:"updateTrelloCustomFieldCardFromTrello",value:function updateTrelloCustomFieldCardFromTrello(e,t){var r,i;let a=B()(r=this.customFieldCardsData).call(r,(r=>r.id===e||r.customFieldId===t.customFieldId))||{},n=(null===(i=t.value)||void 0===i?void 0:i.date)||"",o={...a,date:n&&new Date(n)};return this.updateTrelloCustomFieldCard(e,o)}},{kind:"method",key:"deleteTrelloCustomFieldCard",value:function deleteTrelloCustomFieldCard(e){var t,r;let i,a=R()(t=this.trelloCustomFieldCards).call(t,(t=>t.id===e));var n;-1!==a&&(i=this.trelloCustomFieldCards[a].trelloCustomFieldId,A()(n=this.trelloCustomFieldCards).call(n,a,1));this.customFieldCardsData=P()(r=this.customFieldCardsData).call(r,(t=>t.id!==e&&t.customFieldId!==i))}},{kind:"method",key:"addTrelloCheckItemCard",value:function addTrelloCheckItemCard(e,t,r){var i,a,n,o,s,l;this.deleteTrelloCheckItemCard(e.id);let d=new CalendarCard(e.id,te.h.TrelloCheckItem);if(d._isReadOnly=this.isReadOnly,d._trelloCardNumber=this._trelloCardNumber,d._boardId=this.boardId,d._currentBoardId=this._currentBoardId,d._listId=this.listId,d._parentId=this.id,d._parentShortId=this.shortId,d._keywordIds=[...this._keywordIds],d._keywords=[...this._keywordIds],d.title=e.name,d.description=this._description,d.isArchived=this.isArchived,d.isCompleted=e.isCompleted,d.labelIds=new V.a(this.labelIds),d.memberIds=new V.a(null===(i=e.memberIds)||void 0===i?void 0:P()(i).call(i,(e=>{var r;return S()(r=t.members).call(r,(t=>t.id===e))}))),d._dueLinkType=null!==(a=null!==(n=e.dueLinkType)&&void 0!==n?n:this._dueLinkType)&&void 0!==a?a:t.dueLinkType,d._dueLinkTypeAllDay=null!==(o=null!==(s=e.dueLinkTypeAllDay)&&void 0!==s?s:this._dueLinkTypeAllDay)&&void 0!==o?o:t.dueLinkTypeAllDay,e.start&&e.end){var c;d.isAllDay=null!==(c=e.isAllDay)&&void 0!==c?c:t.defaultCardIsAllDay;let r=d.isAllDay?d._dueLinkTypeAllDay:d._dueLinkType;d.start=e.start,r===Z.e.DueStart&&(d._due=d.isAllDay?Object(re.W)(d.start):d.start),d.end=e.end,r!==Z.e.DueEnd&&r!==Z.e.NotLinked||(d._due=d.isAllDay?Object(re.W)(d.end):d.end)}d._sync=null!==(l=e.sync)&&void 0!==l?l:r.syncWithTrello,d.customData.defaultSortOrder=e.defaultSortOrder,d.customData.membersSortOrder=e.membersSortOrder,d.customData.calendarsSortOrder=e.calendarsSortOrder,d.customData.listsSortOrder=e.listsSortOrder,d.customData.labelsSortOrder=e.labelsSortOrder;let h=d._toCheckItemCardData(t);return h&&this.checkItemCardsData.push(h),this.trelloCheckItemCards.push(d),d}},{kind:"method",key:"addTrelloCheckItemCardFromTrello",value:function addTrelloCheckItemCardFromTrello(e,t,r){var i;let a=B()(i=this.checkItemCardsData).call(i,(t=>t.id===e.id)),n=(!a||a.sync)&&r.syncWithTrello,o={...a,id:e.id,name:e.name,isCompleted:"complete"===e.state,sync:n};if(n){let r=CalendarCard._correctCheckItemCardData(e.due,t,a);o.isAllDay=null==r?void 0:r.isAllDay,o.start=null==r?void 0:r.start,o.end=null==r?void 0:r.end,o.dueLinkType=null==r?void 0:r.dueLinkType,o.dueLinkTypeAllDay=null==r?void 0:r.dueLinkTypeAllDay,o.memberIds=e.idMember?[e.idMember]:[]}return this.addTrelloCheckItemCard(o,t,{syncWithTrello:n})}},{kind:"method",key:"updateTrelloCheckItemCard",value:function updateTrelloCheckItemCard(e,t,r,i){var a,n,o;let s=B()(a=this.trelloCheckItemCards).call(a,(t=>t.id===e));if(!s)return{checkItemCardUpdated:!1};let l=!1;s.boardId===this.boardId&&s.listId===this.listId||(s.boardId=this.boardId,s.listId=this.listId,l=!0),s.description!==this.description&&(s.description=this.description,l=!0),s.isArchived!==this.isArchived&&(s.isArchived=this.isArchived,l=!0),Object(re.h)(U()(s.labelIds),U()(this.labelIds))||(s.labelIds=new V.a(this.labelIds),l=!0);let d=!1;void 0!==t.name&&s.title!==t.name&&(s.title=t.name,d=!0),void 0!==t.isCompleted&&s.isCompleted!==t.isCompleted&&(s.isCompleted=t.isCompleted,d=!0);let c=!1;void 0!==t.isAllDay&&s.isAllDay!==t.isAllDay&&(s.isAllDay=t.isAllDay,c=!0);let h=s.isAllDay?r.dueLinkTypeAllDay:r.dueLinkType;void 0===t.start||Object(re.w)(s.start,t.start)||(s.start=t.start,h===Z.e.DueStart&&(s._due=s.isAllDay?Object(re.W)(s.start):s.start),c=!0),void 0===t.end||Object(re.w)(s.end,t.end)||(s.end=t.end,h!==Z.e.DueEnd&&h!==Z.e.NotLinked||(s._due=s.isAllDay?Object(re.W)(s.end):s.end),c=!0);let u=null===(n=t.memberIds)||void 0===n?void 0:P()(n).call(n,(e=>{var t;return S()(t=r.members).call(t,(t=>t.id===e))}));void 0===u||Object(re.h)(P()(o=U()(s.memberIds)).call(o,(e=>e!==ee.k)),u)||(s.memberIds=new V.a(u),d=!0,c=!0),s._sync!==i.syncWithTrello&&(s._sync=i.syncWithTrello,c=!0),void 0!==t.defaultSortOrder&&s.defaultSortOrder!==t.defaultSortOrder&&(s.customData.defaultSortOrder=t.defaultSortOrder,c=!0),void 0!==t.membersSortOrder&&s.membersSortOrder!==t.membersSortOrder&&(s.customData.membersSortOrder=t.membersSortOrder,c=!0),void 0!==t.calendarsSortOrder&&s.calendarsSortOrder!==t.calendarsSortOrder&&(s.customData.calendarsSortOrder=t.calendarsSortOrder,c=!0),void 0!==t.listsSortOrder&&s.listsSortOrder!==t.listsSortOrder&&(s.customData.listsSortOrder=t.listsSortOrder,c=!0),void 0!==t.labelsSortOrder&&s.labelsSortOrder!==t.labelsSortOrder&&(s.customData.labelsSortOrder=t.labelsSortOrder,c=!0),this.deleteTrelloCheckItemCard(s.id);let p=s._toCheckItemCardData(r);return p&&this.checkItemCardsData.push(p),this.trelloCheckItemCards.push(s),{checkItemCardUpdated:l||d||c,checkItemCard:s,checkItemUpdated:d,parentCardUpdated:c}}},{kind:"method",key:"updateTrelloCheckItemCardFromTrello",value:function updateTrelloCheckItemCardFromTrello(e,t,r,i){var a;let n=B()(a=this.checkItemCardsData).call(a,(t=>t.id===e)),o=(!n||n.sync)&&i.syncWithTrello,s={...n,name:t.name,isCompleted:"complete"===t.state};if(o){var l;let e=CalendarCard._correctCheckItemCardData(t.due,r,n);s.isAllDay=null!==(l=null==e?void 0:e.isAllDay)&&void 0!==l?l:null,s.start=(null==e?void 0:e.start)||null,s.end=(null==e?void 0:e.end)||null,s.memberIds=t.idMember?[t.idMember]:[]}return this.updateTrelloCheckItemCard(e,s,r,{syncWithTrello:o})}},{kind:"method",key:"deleteTrelloCheckItemCard",value:function deleteTrelloCheckItemCard(e){var t,r;let i=R()(t=this.trelloCheckItemCards).call(t,(t=>t.id===e));var a;-1!==i&&A()(a=this.trelloCheckItemCards).call(a,i,1);this.checkItemCardsData=P()(r=this.checkItemCardsData).call(r,(t=>t.id!==e))}},{kind:"method",key:"addTrelloTimeRecordCard",value:function addTrelloTimeRecordCard(e,t){var r,i;if(this.deleteTrelloTimeRecordCard(e.id),!e.from||!e.to)return;let a=new CalendarCard(e.id,te.h.TrelloTimeRecord);switch(a._isReadOnly=this.isReadOnly,a._trelloCardNumber=this._trelloCardNumber,a._boardId=this.boardId,a._currentBoardId=this._currentBoardId,a._listId=this.listId,a._parentId=this.id,a._parentShortId=this.shortId,a._keywordIds=[...this._keywordIds],a._keywords=[...this._keywordIds],a.title=this.title,a.description=this._description,a.isArchived=this.isArchived,a.isCompleted=!1,a.labelIds=new V.a(this.labelIds),a.memberIds=new V.a(e.memberId&&S()(r=t.members).call(r,(t=>t.id===e.memberId))?[e.memberId]:[]),a.isAllDay=null===(i=e.isDuration)||void 0===i||i,a.start=e.from,a.end=e.to,a.isAllDay?this._dueLinkTypeAllDay:this._dueLinkType){case Z.e.DueStart:a._due=a.isAllDay?Object(re.W)(a.start):a.start;break;case Z.e.DueEnd:case Z.e.NotLinked:a._due=a.isAllDay?Object(re.W)(a.end):a.end}a.durationMinutes=e.durationMinutes,a.customData.defaultSortOrder=e.defaultSortOrder,a.customData.membersSortOrder=e.membersSortOrder,a.customData.calendarsSortOrder=e.calendarsSortOrder,a.customData.listsSortOrder=e.listsSortOrder,a.customData.labelsSortOrder=e.labelsSortOrder;let n=a._toTimeRecordCardData();return n&&this.timeRecordCardsData.push(n),this.trelloTimeRecordCards.push(a),a}},{kind:"method",key:"updateTrelloTimeRecordCard",value:function updateTrelloTimeRecordCard(e,t,r){var i;let a=B()(i=this.trelloTimeRecordCards).call(i,(t=>t.id===e));if(!a)return{timeRecordCardUpdated:!1};let n=!1;a.boardId===this.boardId&&a.listId===this.listId||(a.boardId=this.boardId,a.listId=this.listId,n=!0),a.description!==this.description&&(a.description=this.description,n=!0),a.isArchived!==this.isArchived&&(a.isArchived=this.isArchived,n=!0),Object(re.h)(U()(a.labelIds),U()(this.labelIds))||(a.labelIds=new V.a(this.labelIds),n=!0);let o=!1;switch(void 0!==t.isDuration&&a.isAllDay!==t.isDuration&&(a.isAllDay=t.isDuration,o=!0),void 0===t.from||Object(re.w)(a.start,t.from)||(a.start=t.from,o=!0),void 0===t.to||Object(re.w)(a.end,t.to)||(a.end=t.to,o=!0),a.isAllDay?this._dueLinkTypeAllDay:this._dueLinkType){case Z.e.DueStart:a._due=a.isAllDay?Object(re.W)(a.start):a.start;break;case Z.e.DueEnd:case Z.e.NotLinked:a._due=a.isAllDay?Object(re.W)(a.end):a.end}if(void 0!==t.durationMinutes&&a.durationMinutes!==t.durationMinutes&&(a.durationMinutes=t.durationMinutes,o=!0),void 0!==t.memberId){var s,l;let e=S()(s=r.members).call(s,(e=>e.id===t.memberId))?[t.memberId]:[];Object(re.h)(P()(l=U()(a.memberIds)).call(l,(e=>e!==ee.k)),e)||(a.memberIds=new V.a(e),o=!0)}void 0!==t.defaultSortOrder&&a.defaultSortOrder!==t.defaultSortOrder&&(a.customData.defaultSortOrder=t.defaultSortOrder,o=!0),void 0!==t.membersSortOrder&&a.membersSortOrder!==t.membersSortOrder&&(a.customData.membersSortOrder=t.membersSortOrder,o=!0),void 0!==t.calendarsSortOrder&&a.calendarsSortOrder!==t.calendarsSortOrder&&(a.customData.calendarsSortOrder=t.calendarsSortOrder,o=!0),void 0!==t.listsSortOrder&&a.listsSortOrder!==t.listsSortOrder&&(a.customData.listsSortOrder=t.listsSortOrder,o=!0),void 0!==t.labelsSortOrder&&a.labelsSortOrder!==t.labelsSortOrder&&(a.customData.labelsSortOrder=t.labelsSortOrder,o=!0),this.deleteTrelloTimeRecordCard(a.id);let d=a._toTimeRecordCardData();return d&&this.timeRecordCardsData.push(d),this.trelloTimeRecordCards.push(a),{timeRecordCardUpdated:n||o,timeRecordCard:a,timeRecordUpdated:false,parentCardUpdated:o}}},{kind:"method",key:"deleteTrelloTimeRecordCard",value:function deleteTrelloTimeRecordCard(e){var t,r;let i=R()(t=this.trelloTimeRecordCards).call(t,(t=>t.id===e));var a;-1!==i&&A()(a=this.trelloTimeRecordCards).call(a,i,1);this.timeRecordCardsData=P()(r=this.timeRecordCardsData).call(r,(t=>t.id!==e))}},{kind:"method",key:"updateByTrelloCardDelta",value:function updateByTrelloCardDelta(e,t){if(void 0!==e.desc){let r,{description:i,extensionCardData:a}=CalendarCard._deserializeExtensionCardData(e.desc);if(this.description=i,a){if(a.dataVersionId<this.lastDataVersionId)return!1;this._lastDataVersionId=a.dataVersionId,this.recurrenceRule=a.recurrenceRule,this.exceptionDates=a.exceptionDates,this._recurrenceId=a.recurrenceId,this._originalStart=a.originalStart,this._exceptionDate=Object(re.H)(a.originalStart),this.priority=a.priority,this._customData=a.customData,this._sourceCardId=a.recurrenceId,r=CalendarCard._correctCardData(e.due,t,a)}else r=CalendarCard._correctCardData(e.due,t);r?(this.isAllDay=r.isAllDay,this.start=r.start,this.end=r.end,this._dueLinkType=r.dueLinkType,this._dueLinkTypeAllDay=r.dueLinkTypeAllDay,this._realDue=r.realDue,this._offsetDue=r.offsetDue):void 0!==e.due&&(this.start=void 0,this.end=void 0,this._realDue=void 0)}else if(void 0!==e.due){let r;r=this.hasDates?CalendarCard._correctCardData(e.due,t,{version:"v4",isAllDay:this.isAllDay,start:this.start,end:this.end,dueLinkType:this._dueLinkType,dueLinkTypeAllDay:this._dueLinkTypeAllDay,offsetDue:this._offsetDue,recurrenceRule:this.recurrenceRule}):CalendarCard._correctCardData(e.due,t),r?(this.isAllDay=r.isAllDay,this.start=r.start,this.end=r.end,this._dueLinkType=r.dueLinkType,this._dueLinkTypeAllDay=r.dueLinkTypeAllDay,this._realDue=r.realDue,this._offsetDue=r.offsetDue):(this.start=void 0,this.end=void 0,this._realDue=void 0)}var r;(e.due&&this._realDue&&(this._due=new Date(e.due)),e.idBoard&&(this._boardId=e.idBoard),e.idList&&(this._listId=e.idList),e.pos&&(this._position=e.pos),e.dateLastActivity&&(this.lastChangeId=new Date(e.dateLastActivity).getTime()),e.name&&(this.title=e.name),void 0!==e.closed&&(this.isArchived=e.closed),void 0!==e.dueComplete&&(this.isCompleted=e.dueComplete),void 0!==e.subscribed&&(this.isSubscribed=e.subscribed),e.labels)&&(this.labelIds=new V.a(G()(r=e.labels).call(r,(e=>e.id))));e.idMembers&&(this.memberIds=new V.a(e.idMembers));let i=!this.equals(this._lastCard);return this._lastCard=this._getLastCard(),i}},{kind:"method",key:"updateByTrelloCustomFieldDelta",value:function updateByTrelloCustomFieldDelta(e,t){if(void 0!==e.value){var r;let i,a=CalendarCard._deserializeCustomFieldCardData(null===(r=e.value)||void 0===r?void 0:r.text);if(a){if(a.dataVersionId<this.lastDataVersionId)return!1;this._lastDataVersionId=a.dataVersionId,this.recurrenceRule=a.recurrenceRule,this.exceptionDates=a.exceptionDates,this._recurrenceId=a.recurrenceId,this._originalStart=a.originalStart,this._exceptionDate=Object(re.H)(a.originalStart),this.priority=a.priority,this._customData=a.customData,this._sourceCardId=a.recurrenceId,i=CalendarCard._correctCardData(this._realDue,t,a)}else i=CalendarCard._correctCardData(this._realDue,t);i?(this.isAllDay=i.isAllDay,this.start=i.start,this.end=i.end,this._dueLinkType=i.dueLinkType,this._dueLinkTypeAllDay=i.dueLinkTypeAllDay,this._realDue=i.realDue,this._offsetDue=i.offsetDue):(this.start=void 0,this.end=void 0,this._realDue=void 0)}let i=!this.equals(this._lastCard);return this._lastCard=this._getLastCard(),i}},{kind:"method",key:"toGoogleEvent",value:function toGoogleEvent(e,t=[]){let r={},i={summary:()=>r.summary=this.title,description:()=>r.description=this.description,start:()=>{this.isAllDay?r.start={date:Object(re.Fb)(this.start),dateTime:null}:r.start={date:null,dateTime:this.start.toISOString()},this._timeZones.start?r.start.timeZone=this._timeZones.start:(this.recurrenceRule||this.recurrenceId)&&(r.start.timeZone=e.timeZone)},end:()=>{this.isAllDay?r.end={date:Object(re.Fb)(Object(re.a)(this.end,1)),dateTime:null}:r.end={date:null,dateTime:this.end.toISOString()},this._timeZones.end?r.end.timeZone=this._timeZones.end:(this.recurrenceRule||this.recurrenceId)&&(r.end.timeZone=e.timeZone)},recurrence:()=>r.recurrence=this.recurrenceRule?[`RRULE:${this.recurrenceRule}`]:[],recurringEventId:()=>r.recurringEventId=this._googleRecurringEventId,originalStartTime:()=>{Object(re.kb)(this.originalStart)?r.originalStartTime={date:this.originalStart,dateTime:null}:r.originalStartTime={date:null,dateTime:this.originalStart},r.originalStartTime.timeZone=this._timeZones.originalStart}};for(let e of t){let t=i[e];t&&t()}return r}},{kind:"method",key:"updateBySchedulerData",value:function updateBySchedulerData(e){if(e.calendarId)switch(this.cardType){case te.h.TrelloCard:this._boardId=e.calendarId;break;case te.h.GoogleEvent:this._googleCalendarId=e.calendarId}void 0!==e.listId&&(this._listId=e.listId),e.title&&(this.title=e.title),e.description&&(this.description=e.description),void 0!==e.isArchived&&(this.isArchived=e.isArchived),void 0!==e.isCompleted&&(this.isCompleted=e.isCompleted),void 0!==e.isSubscribed&&(this.isSubscribed=e.isSubscribed),e.labelIds&&(this.labelIds=new V.a(e.labelIds)),e.members&&(this.memberIds=new V.a(e.members)),void 0!==e.cardRole&&(this.cardRole=e.cardRole),Object(re.rb)(e.start)&&Object(re.rb)(e.end)&&(this.isAllDay=!!e.isAllDay,this.start=e.start,this.end=e.end),e.recurrenceRule?this.recurrenceRule=e.recurrenceRule:e.recurrenceId&&(this._recurrenceId=e.recurrenceId,e.originalStart&&(this._originalStart=e.originalStart,this._exceptionDate=Object(re.H)(e.originalStart)),this._sourceCardId=e.recurrenceId),void 0!==e.priority&&(this.priority=e.priority),void 0!==e.defaultSortOrder&&(this.customData.defaultSortOrder=e.defaultSortOrder),void 0!==e.membersSortOrder&&(this.customData.membersSortOrder=e.membersSortOrder),void 0!==e.calendarsSortOrder&&(this.customData.calendarsSortOrder=e.calendarsSortOrder),void 0!==e.listsSortOrder&&(this.customData.listsSortOrder=e.listsSortOrder),void 0!==e.labelsSortOrder&&(this.customData.labelsSortOrder=e.labelsSortOrder),e.sourceCardId&&(this._sourceCardId=e.sourceCardId)}},{kind:"method",key:"addExceptionDate",value:function addExceptionDate(e){var t;S()(t=this.exceptionDates).call(t,(t=>Object(re.w)(t,e)))||(this.exceptionDates=[...this.exceptionDates,e])}},{kind:"method",key:"deleteExceptionDates",value:function deleteExceptionDates(e){let t=[];if(e){for(let r of this.exceptionDates)r<e&&t.push(r);let r=ne.fromString(this.recurrenceRule),i=Object(re.a)(e,-1);r.origOptions.until=this.isAllDay?Object(re.O)(i):Object(re.N)(i),r.origOptions.count=null,this._recurrenceRule=r.toString({onlyDate:this.isAllDay})}this.exceptionDates=t}},{kind:"method",key:"correctRecurrenceDates",value:function correctRecurrenceDates(){if((this.cardType===te.h.TrelloCard||this.cardType===te.h.GoogleEvent)&&this.recurrenceRule){let e=new ne({...ne.parseString(this.recurrenceRule),dtstart:new Date(this.start)}).after(this.start,!0);if(!Object(re.w)(e,this.start)){let t=Object(re.R)(this.start,e);this._start=Object(re.a)(this.start,t),this._end=Object(re.a)(this.end,t)}}}},{kind:"method",key:"duplicate",value:function duplicate(){let e=this.clone();return e._id=ee.k,e._shortId=void 0,this.recurrenceRule?e.exceptionDates=[]:this.recurrenceId&&(e._recurrenceId=void 0,e._originalStart=void 0,e._exceptionDate=void 0),e._trelloCheckItemCards=[],e.checkItemCardsData=[],e._trelloTimeRecordCards=[],e.timeRecordCardsData=[],e.links=[],e._sourceCardId=this.id,e._lastCard=e._getLastCard(),e}},{kind:"method",key:"clone",value:function clone(){var e,t,r;let i=new CalendarCard(this.id,this.cardType);return i._isReadOnly=this._isReadOnly,i._shortId=this.shortId,i._trelloCardNumber=this._trelloCardNumber,i._boardId=this.boardId,i._currentBoardId=this._currentBoardId,i._listId=this.listId,i._position=this.position,i._googleCalendarId=this.googleCalendarId,i._googleEventId=this.googleEventId,i._googleRecurringEventId=this._googleRecurringEventId,i._googleEventUrl=this._googleEventUrl,i._googleShowAsFree=this.googleShowAsFree,i._iCalCalendarId=this.iCalCalendarId,i._iCalType=this.iCalType,i._trelloCustomFieldCards=G()(e=this.trelloCustomFieldCards).call(e,(e=>e.clone())),i._trelloCheckItemCards=G()(t=this.trelloCheckItemCards).call(t,(e=>e.clone())),i._trelloTimeRecordCards=G()(r=this.trelloTimeRecordCards).call(r,(e=>e.clone())),i._parentId=this.parentId,i._parentShortId=this.parentShortId,i._trelloCustomFieldId=this.trelloCustomFieldId,this._keywordIds&&(i._keywordIds=[...this._keywordIds],i._keywords=[...this._keywordIds]),i._due=this.due,i.title=this.title,i.description=this.description,i.isArchived=this.isArchived,i.isCompleted=this.isCompleted,i.isSubscribed=this.isSubscribed,i.labelIds=new V.a(this.labelIds),i.memberIds=new V.a(this.memberIds),this.hasDates&&(i.isAllDay=this.isAllDay,i.start=this.start,i.end=this.end),i.durationMinutes=this.durationMinutes,i._dueLinkType=this._dueLinkType,i._dueLinkTypeAllDay=this._dueLinkTypeAllDay,i._realDue=this._realDue,i._offsetDue=this._offsetDue,i._sync=this._sync,i.recurrenceRule=this.recurrenceRule,i.exceptionDates=[...this.exceptionDates],i._recurrenceId=this.recurrenceId,i._originalStart=this._originalStart,i._exceptionDate=this.exceptionDate,i._timeZones={...this._timeZones},i.priority=this.priority,i._customData={...this.customData},i._sourceCardId=i.sourceCardId,i._needMigrateExtensionCardData=this._needMigrateExtensionCardData,i.lastChangeId=this.lastChangeId,i._lastDataVersionId=this.lastDataVersionId,i.ignoreFilters=this.ignoreFilters,i._lastCard=this._lastCard,i}},{kind:"method",key:"equals",value:function equals(e){if(!e)return!1;function toCardObject(e){var t,r;return{id:e.id,cardType:e.cardType,trelloCardNumber:e.trelloCardNumber,boardId:e.boardId,listId:e.listId,position:e.position,googleShowAsFree:e.googleShowAsFree,title:e.title,description:e.description,isArchived:e.isArchived,isCompleted:e.isCompleted,isSubscribed:e.isSubscribed,labelIds:b()(t=U()(e.labelIds)).call(t),memberIds:b()(r=U()(e.memberIds)).call(r),isAllDay:e.isAllDay,start:e.start,end:e.end,dueLinkType:e._dueLinkType,dueLinkTypeAllDay:e._dueLinkTypeAllDay,realDue:e._realDue,offsetDue:e._offsetDue,recurrenceRule:e.recurrenceRule,exceptionDates:e.exceptionDates,exceptionDate:e.exceptionDate,priority:e.priority,customData:e.customData}}let t=Object(re.Cb)(toCardObject(this),toCardObject(e));if(t)switch(this.cardType){case te.h.TrelloCard:var r;if(this.trelloCustomFieldCards.length!==e.trelloCustomFieldCards.length)t=!1;else t=D()(r=this.trelloCustomFieldCards).call(r,(t=>{var r;let i=B()(r=e.trelloCustomFieldCards).call(r,(e=>e.id===t.id));if(i)return t.equals(i)}))}return t}},{kind:"method",static:!0,key:"_deserializeCardData",value:function _deserializeCardData(e){M()(e).call(e,"{")||(e=q.a.inflate(atob(e),{to:"string"}));let t=JSON.parse(e);if(t){let e;var r,i,a;if(t.customData)e={...t.customData,customFieldCardsData:null===(r=t.customData.customFieldCardsData)||void 0===r?void 0:G()(r).call(r,(e=>({...e}))),checkItemCardsData:null===(i=t.customData.checkItemCardsData)||void 0===i?void 0:G()(i).call(i,(e=>{var t,r;return{...e,sync:null!==(t=e.sync)&&void 0!==t&&t,start:Object(re.H)(e.start,e.isAllDay),end:Object(re.H)(e.end,e.isAllDay),memberIds:null===(r=e.memberIds)||void 0===r?void 0:C()(r).call(r,0,1)}})),timeRecordCardsData:null===(a=t.customData.timeRecordCardsData)||void 0===a?void 0:G()(a).call(a,(e=>({...e,from:Object(re.H)(e.from,e.isDuration),to:Object(re.H)(e.to,e.isDuration)})))};return{version:t.version,dataVersionId:t.dataVersionId||0,isAllDay:t.isAllDay,start:Object(re.H)(t.start,t.isAllDay),end:Object(re.H)(t.end,t.isAllDay),dueLinkType:t.dueLinkType,dueLinkTypeAllDay:t.dueLinkTypeAllDay||t.dueLinkType,offsetDue:t.offsetDue?new Date(t.offsetDue):null,recurrenceRule:t.recurrenceRule,exceptionDates:fromCardDataRecurrenceException(t.recurrenceException,t.isAllDay),recurrenceId:t.recurrenceId,originalStart:t.originalStart,priority:t.priority,customData:e}}}},{kind:"method",key:"_serializeCardData",value:function _serializeCardData(){var e,t,r,i,a,n,o,s;this.customFieldCardsData=P()(e=this.customFieldCardsData).call(e,(e=>{var t;return S()(t=this.trelloCustomFieldCards).call(t,(t=>t.id===e.id||t.trelloCustomFieldId===e.customFieldId))})),this.checkItemCardsData=P()(t=this.checkItemCardsData).call(t,(e=>{var t;return S()(t=this.trelloCheckItemCards).call(t,(t=>t.id===e.id))})),this.timeRecordCardsData=P()(r=this.timeRecordCardsData).call(r,(e=>{var t;return S()(t=this.trelloTimeRecordCards).call(t,(t=>t.id===e.id))}));let l=function toCalendarRecurrenceException(e,t){if(e&&e.length>0)return G()(e).call(e,(e=>t?Object(re.Fb)(e):e.toISOString()))}(this.exceptionDates,this.isAllDay);if(!(this.hasDates||this._dueLinkType||this._dueLinkTypeAllDay||this._offsetDue||this.recurrenceRule||l||this.recurrenceId||this._originalStart||0!==this.priority||this.cardRole!==Z.c.Card||this.defaultSortOrder!==Number.POSITIVE_INFINITY||this.membersSortOrder!==Number.POSITIVE_INFINITY||this.calendarsSortOrder!==Number.POSITIVE_INFINITY||this.listsSortOrder!==Number.POSITIVE_INFINITY||this.labelsSortOrder!==Number.POSITIVE_INFINITY||0!==this.customFieldCardsData.length||0!==this.checkItemCardsData.length||0!==this.timeRecordCardsData.length||0!==this.links.length))return;let d={...this.customData,originalCardId:this.isTempCard?void 0:this.id,customFieldCardsData:G()(i=this.customData.customFieldCardsData).call(i,(e=>({...e}))),checkItemCardsData:G()(a=this.customData.checkItemCardsData).call(a,(e=>({...e,start:e.isAllDay?Object(re.Fb)(e.start):e.start,end:e.isAllDay?Object(re.Fb)(e.end):e.end}))),timeRecordCardsData:G()(n=this.customData.timeRecordCardsData).call(n,(e=>({...e,from:e.isDuration?Object(re.Fb)(e.from):e.from,to:e.isDuration?Object(re.Fb)(e.to):e.to}))),dailyEstimateMinutes:null!==(o=this.customData.dailyEstimateMinutes)&&void 0!==o?o:void 0,isDailyEstimateFieldShown:null!==(s=this.customData.isDailyEstimateFieldShown)&&void 0!==s?s:void 0},c={version:"v4",dataVersionId:this.lastDataVersionId,isAllDay:this.isAllDay,start:this.isAllDay?Object(re.Fb)(this.start):this.start,end:this.isAllDay?Object(re.Fb)(this.end):this.end,dueLinkType:this._dueLinkType,dueLinkTypeAllDay:this._dueLinkTypeAllDay,offsetDue:this._offsetDue,recurrenceRule:this.recurrenceRule,recurrenceException:l,recurrenceId:this.recurrenceId,originalStart:this._originalStart,priority:this.priority,customData:d},h=_()(c,((e,t)=>{if(null!==t&&t!==Number.POSITIVE_INFINITY)return t}));return btoa(q.a.deflate(h,{to:"string"}))}},{kind:"method",static:!0,key:"_deserializeExtensionCardData",value:function _deserializeExtensionCardData(e){let t=parseTrelloCardDescription(e);if(t.data)try{let e=CalendarCard._deserializeCardData(t.data);if(e)return{extensionCardData:e,description:t.description}}catch(e){}return{description:t.description}}},{kind:"method",key:"_serializeExtensionCardData",value:function _serializeExtensionCardData(){let e=this._serializeCardData();return e?`${this.description}\n\n[](Planyway_Data-DO_NOT_DELETE)[](${e})`:this.description}},{kind:"method",static:!0,key:"_deserializeCustomFieldCardData",value:function _deserializeCustomFieldCardData(e){let t=function parseTrelloCustomField(e){var t;if(e)return null===(t=e.match(/Do not edit \((.*?)\)/))||void 0===t?void 0:t[1]}(e);if(t)try{return CalendarCard._deserializeCardData(t)}catch(e){}}},{kind:"method",key:"_serializeCustomFieldCardData",value:function _serializeCustomFieldCardData(){let e=this._serializeCardData();return e?`Do not edit (${e})`:""}},{kind:"method",key:"_getLastCard",value:function _getLastCard(){let e=this.clone();return e._lastCard=void 0,e}},{kind:"method",static:!0,key:"_correctCardData",value:function _correctCardData(e,t,r){let i,a,n,o,s,l,d,c;switch("v4"===(null==r?void 0:r.version)&&(s=r.isAllDay,l=r.dueLinkType,d=r.dueLinkTypeAllDay,c=s?d:l),c){case Z.e.DueStart:case Z.e.DueEnd:if(!e)return;if(n=new Date(e),s)if(t.defaultCardIsAllDay){if(r.recurrenceRule)i=new Date(r.start),a=new Date(r.end);else{let t=Object(re.R)(r.start,r.end);c===Z.e.DueStart?(i=Object(re.O)(e),a=Object(re.a)(i,t)):(a=Object(re.O)(e),i=Object(re.a)(a,-t))}o=new Date(e)}else{let t=Object(re.R)(r.offsetDue,e);r.recurrenceRule?(i=new Date(r.start),a=new Date(r.end)):(i=Object(re.a)(r.start,t),a=Object(re.a)(r.end,t)),o=Object(re.a)(r.offsetDue,t)}else{let t=Object(re.S)(r.offsetDue,e);r.recurrenceRule?(i=new Date(r.start),a=new Date(r.end)):(i=Object(re.c)(r.start,t),a=Object(re.c)(r.end,t)),o=new Date(e)}a<i&&(c===Z.e.DueStart?a=new Date(i):i=new Date(a));break;case Z.e.NotLinked:if(null===e)return;i=new Date(r.start),a=new Date(r.end),a<i&&(i=new Date(a));break;default:if(!e)return;s=t.defaultCardIsAllDay,l=t.dueLinkType,d=t.dueLinkTypeAllDay,c=s?d:l,c===Z.e.DueStart?s?(i=Object(re.O)(e),a=Object(re.a)(i,t.defaultCardDuration-1)):(i=new Date(e),a=Object(re.c)(i,t.defaultCardDuration)):s?(a=Object(re.O)(e),i=Object(re.a)(a,1-t.defaultCardDuration)):(a=new Date(e),i=Object(re.c)(a,-t.defaultCardDuration)),n=new Date(e),c!==Z.e.NotLinked&&(o=new Date(e))}return{isAllDay:s,start:i,end:a,dueLinkType:l,dueLinkTypeAllDay:d,realDue:n,offsetDue:o}}},{kind:"method",key:"_correctDueDateAsStartDate",value:function _correctDueDateAsStartDate(){let e=this._getLastOccurrenceDate();this._realDue=new Date(e||this.start),this._offsetDue=new Date(this._realDue)}},{kind:"method",key:"_correctAllDayDueDateAsStartDate",value:function _correctAllDayDueDateAsStartDate(e){let t=this._getLastOccurrenceDate();if(e&&e.defaultCardIsAllDay||!this._lastCard||this._dueLinkTypeAllDay!==this._lastCard._dueLinkTypeAllDay||!this._lastCard.isAllDay||!this._lastCard._realDue||!this._lastCard._offsetDue||this._lastCard.recurrenceRule||t)this._realDue=Object(re.W)(t||this.start),this._offsetDue=new Date(this._realDue);else{let e=Object(re.R)(this._lastCard.start,this.start);this._realDue=Object(re.a)(this._lastCard._realDue,e),this._offsetDue=Object(re.a)(this._lastCard._offsetDue,e)}}},{kind:"method",key:"_correctDueDateAsEndDate",value:function _correctDueDateAsEndDate(){let e=this._getLastOccurrenceDate();this._realDue=new Date(e||this.end),this._offsetDue=new Date(this._realDue)}},{kind:"method",key:"_correctAllDayDueDateAsEndDate",value:function _correctAllDayDueDateAsEndDate(e){let t=this._getLastOccurrenceDate();if(e&&e.defaultCardIsAllDay||!this._lastCard||this._dueLinkTypeAllDay!==this._lastCard._dueLinkTypeAllDay||!this._lastCard.isAllDay||!this._lastCard._realDue||!this._lastCard._offsetDue||this._lastCard.recurrenceRule||t)this._realDue=Object(re.W)(t||this.end),this._offsetDue=new Date(this._realDue);else{let e=Object(re.R)(this._lastCard.end,this.end);this._realDue=Object(re.a)(this._lastCard._realDue,e),this._offsetDue=Object(re.a)(this._lastCard._offsetDue,e)}}},{kind:"method",key:"_correctDueDateAsNotLinked",value:function _correctDueDateAsNotLinked(){let e=this._getLastOccurrenceDate();(this.isTempCard||!this._lastCard||!this._lastCard.hasDates||this._lastCard.recurrenceRule&&!e)&&(this._realDue=new Date(e||this.end))}},{kind:"method",key:"_correctAllDayDueDateAsNotLinked",value:function _correctAllDayDueDateAsNotLinked(){let e=this._getLastOccurrenceDate();(this.isTempCard||!this._lastCard||!this._lastCard.hasDates||this._lastCard.recurrenceRule&&!e)&&(this._realDue=Object(re.W)(e||this.end))}},{kind:"method",key:"_toCustomFieldCardData",value:function _toCustomFieldCardData(){if(this.hasDates)return{id:this.id,customFieldId:this.trelloCustomFieldId,isAllDay:this.isAllDay,isCompleted:this.isCompleted,defaultSortOrder:this.defaultSortOrder,membersSortOrder:this.membersSortOrder,calendarsSortOrder:this.calendarsSortOrder,listsSortOrder:this.listsSortOrder,labelsSortOrder:this.labelsSortOrder}}},{kind:"method",static:!0,key:"_correctCheckItemCardData",value:function _correctCheckItemCardData(e,t,r){let i,a,n,o,s,l,d;switch(r&&(o=r.isAllDay,s=r.dueLinkType,l=r.dueLinkTypeAllDay,d=o?l:s),d){case Z.e.DueStart:case Z.e.DueEnd:if(!e)return;if(n=new Date(e),o){let t=Object(re.R)(r.start,r.end);d===Z.e.DueStart?(i=Object(re.O)(e),a=Object(re.a)(i,t)):(a=Object(re.O)(e),i=Object(re.a)(a,-t))}else{let t=Object(re.S)(r.start,r.end);d===Z.e.DueStart?(i=Object(re.Eb)(e,r.start),a=Object(re.c)(i,t)):(a=Object(re.Eb)(e,r.end),i=Object(re.c)(a,-t))}a<i&&(d===Z.e.DueStart?a=new Date(i):i=new Date(a));break;case Z.e.NotLinked:if(null===e)return;i=new Date(r.start),a=new Date(r.end),a<i&&(i=new Date(a));break;default:if(!e)return;o=t.defaultCardIsAllDay,s=t.dueLinkType,l=t.dueLinkTypeAllDay,d=o?l:s,d===Z.e.DueStart?o?(i=Object(re.O)(e),a=Object(re.a)(i,t.defaultCardDuration-1)):(i=Object(re.W)(e),a=Object(re.c)(i,t.defaultCardDuration)):o?(a=Object(re.O)(e),i=Object(re.a)(a,1-t.defaultCardDuration)):(a=Object(re.W)(e),i=Object(re.c)(a,-t.defaultCardDuration)),n=new Date(e)}return{isAllDay:o,start:i,end:a,dueLinkType:s,dueLinkTypeAllDay:l,realDue:n}}},{kind:"method",key:"_toCheckItemCardData",value:function _toCheckItemCardData(e){if(this._dueLinkType=void 0,this._dueLinkTypeAllDay=void 0,this._realDue=void 0,this.hasDates)if(this._dueLinkType=e.dueLinkType,this._dueLinkTypeAllDay=e.dueLinkTypeAllDay,this.isAllDay)switch(this._dueLinkTypeAllDay){case Z.e.DueStart:this._correctAllDayCheckItemDueDateAsStartDate(e);break;case Z.e.DueEnd:this._correctAllDayCheckItemDueDateAsEndDate(e);break;case Z.e.NotLinked:this._correctAllDayCheckItemDueDateAsNotLinked()}else switch(this._dueLinkType){case Z.e.DueStart:this._correctCheckItemDueDateAsStartDate();break;case Z.e.DueEnd:this._correctCheckItemDueDateAsEndDate();break;case Z.e.NotLinked:this._correctCheckItemDueDateAsNotLinked()}if(this._lastCard=this._getLastCard(),this.hasDates||this.hasMembers){var t;let e={id:this.id,sync:this._sync,memberIds:P()(t=U()(this.memberIds)).call(t,(e=>e!==ee.k)),defaultSortOrder:this.defaultSortOrder,membersSortOrder:this.membersSortOrder,calendarsSortOrder:this.calendarsSortOrder,listsSortOrder:this.listsSortOrder,labelsSortOrder:this.labelsSortOrder};return this.hasDates&&(e.isAllDay=this.isAllDay,e.start=this.start,e.end=this.end,e.dueLinkType=this._dueLinkType,e.dueLinkTypeAllDay=this._dueLinkTypeAllDay),e}}},{kind:"method",key:"_correctCheckItemDueDateAsStartDate",value:function _correctCheckItemDueDateAsStartDate(){this._realDue=Object(re.M)(this.start,18)}},{kind:"method",key:"_correctAllDayCheckItemDueDateAsStartDate",value:function _correctAllDayCheckItemDueDateAsStartDate(e){if(e&&e.defaultCardIsAllDay||!this._lastCard||this._dueLinkTypeAllDay!==this._lastCard._dueLinkTypeAllDay||!this._lastCard.isAllDay||!this._lastCard._realDue)this._realDue=Object(re.M)(this.start,18);else{let e=Object(re.R)(this._lastCard.start,this.start);this._realDue=Object(re.a)(this._lastCard._realDue,e)}}},{kind:"method",key:"_correctCheckItemDueDateAsEndDate",value:function _correctCheckItemDueDateAsEndDate(){this._realDue=Object(re.M)(this.end,18)}},{kind:"method",key:"_correctAllDayCheckItemDueDateAsEndDate",value:function _correctAllDayCheckItemDueDateAsEndDate(e){if(e&&e.defaultCardIsAllDay||!this._lastCard||this._dueLinkTypeAllDay!==this._lastCard._dueLinkTypeAllDay||!this._lastCard.isAllDay||!this._lastCard._realDue)this._realDue=Object(re.M)(this.end,18);else{let e=Object(re.R)(this._lastCard.end,this.end);this._realDue=Object(re.a)(this._lastCard._realDue,e)}}},{kind:"method",key:"_correctCheckItemDueDateAsNotLinked",value:function _correctCheckItemDueDateAsNotLinked(){(this.isTempCard||!this._lastCard||!this._lastCard.hasDates||!this._lastCard._sync&&this._sync)&&(this._realDue=Object(re.M)(this.end,18))}},{kind:"method",key:"_correctAllDayCheckItemDueDateAsNotLinked",value:function _correctAllDayCheckItemDueDateAsNotLinked(){(this.isTempCard||!this._lastCard||!this._lastCard.hasDates||!this._lastCard._sync&&this._sync)&&(this._realDue=Object(re.M)(this.end,18))}},{kind:"method",key:"_toTimeRecordCardData",value:function _toTimeRecordCardData(){var e;if(this.hasDates)return{id:this.id,isDuration:this.isAllDay,from:this.start,to:this.end,durationMinutes:this.durationMinutes,memberId:P()(e=U()(this.memberIds)).call(e,(e=>e!==ee.k))[0],defaultSortOrder:this.defaultSortOrder,membersSortOrder:this.membersSortOrder,calendarsSortOrder:this.calendarsSortOrder,listsSortOrder:this.listsSortOrder,labelsSortOrder:this.labelsSortOrder}}},{kind:"method",key:"_getLastOccurrenceDate",value:function _getLastOccurrenceDate(){if(!this.recurrenceRule)return;let e,t=new ne({...ne.parseString(this.recurrenceRule),dtstart:new Date(this.start)});if(e=t.origOptions.count||t.origOptions.until?t.before(t.origOptions.until||oe,!0)||this.start:new Date(oe),(this.isAllDay?this._dueLinkTypeAllDay:this._dueLinkType)!==Z.e.DueStart)if(this.isAllDay){let t=Object(re.R)(this.start,this.end);e=Object(re.a)(e,t)}else{let t=Object(re.S)(this.start,this.end);e=Object(re.c)(e,t)}return e}},{kind:"method",key:"_updateRecurrenceRule",value:function _updateRecurrenceRule(){if(this.hasDates&&(this.cardType===te.h.TrelloCard||this.cardType===te.h.GoogleEvent)&&this.recurrenceRule){let e=ne.fromString(this.recurrenceRule);e.origOptions.until&&(e.origOptions.until<=this.start?(e.origOptions.until=null,e.origOptions.count=1):e.origOptions.until=this.isAllDay?Object(re.O)(e.origOptions.until):Object(re.N)(e.origOptions.until),this._recurrenceRule=e.toString({onlyDate:this.isAllDay}))}}}]}}));function parseTrelloCardKeywords(e){var t;return e?P()(t=e.toLowerCase().split(/[\s\x21\x22\x24-\x26\x28-\x2C\x2F\x3A-\x3F\x5B-\x60\x7B-\x7F]+/)).call(t,(e=>e)):[]}function parseTrelloCardDescription(e){let t={description:e,data:"",match:""};function extractPlanywayData(e){let t=e.match(/\n*\[]\(Planyway_Data-DO_NOT_DELETE\)\[]\((.*?)\)/);return t||(t=e.match(/\n*!\[Planyway Data - DO NOT EDIT!].*?\(.*?\((.*?)\)/),t||(t=e.match(/\n*!\[Trellius Data - DO NOT EDIT!].*?\(.*?\((.*?)\)/))),t}if(e){let e;for(;e=extractPlanywayData(t.description);)t.data||(t.data=e[1],t.match=e[0]),t.description=t.description.replace(e[0],"")}return t}function toggleLabel(e,t){let r=new V.a(e.labelIds);return r.has(t)?r.delete(t):r.add(t),0===r.size?r.add(ee.k):r.size>1&&r.delete(ee.k),r}function isMultipleMembersSupported(e){switch(e.cardType){case te.h.TrelloCheckItem:case te.h.TrelloTimeRecord:return!1;default:return!0}}function isMemberRequired(e){switch(e.cardType){case te.h.TrelloTimeRecord:return!0;default:return!1}}function toggleMember(e,t){let r=new V.a(e.memberIds);return isMultipleMembersSupported(e)?r.has(t)?(!isMemberRequired(e)||r.size>1)&&r.delete(t):r.add(t):r.has(t)?isMemberRequired(e)||(r=new V.a):r=new V.a([t]),0===r.size?r.add(ee.k):r.size>1&&r.delete(ee.k),r}function fromCardDataRecurrenceException(e,t){return y()(e)?G()(e).call(e,(e=>Object(re.H)(e,t))):e?G()(r=e.split(",")).call(r,re.I):void 0;var r}function getGoogleCardId(e,t){return`${e}-${t}`}},416:function(e,t){},417:function(e,t){},435:function(e,t,r){var i={"./locale-en.json":436,"./locale-ru.json":437};function webpackContext(e){var t=webpackContextResolve(e);return r(t)}function webpackContextResolve(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=435},436:function(e){e.exports=JSON.parse('{"BUTTONS":{"ACCEPT":"Accept","ACCOUNT":"Account","ACCOUNT_SETTINGS":"Account settings","ADD":"Add","ADD_CARD":"Add card","ADD_CHECK_ITEM":"Add an item","ADD_DURATION":"Add duration","ADD_LIST":"Add list","ADD_REMINDER":"Add a reminder","ADD_TIME":"Add time","ADD_TIME_RECORD":"Log time","ALL_CARDS":"All cards","ATTACH":"Attach","BACK":"Back","BOARD":"Board","BOARDS":"Boards","CALENDAR":"Calendar","CALENDARS":"Calendars","CANCEL":"Cancel","CLOSE":"Close","COMPLETED_CARDS":"Completed cards","CONNECT":"Connect","CONNECT_BOARD":"Connect board","CONNECT_YOUR_CALENDAR":"Connect your calendar","CONNECTED_BOARDS":"Connected boards","CONNECT_WITH_GOOGLE":"Connect with Google","CONNECT_WITH_TRELLO":"Connect with Trello","CONTACT_US":"Contact us","CONTINUE":"Continue","COPY_URL":"Copy URL","CREATE":"Create","CREATE_BOARD":"Create board","CUSTOM":"Custom","DELETE":"Delete","DISCARD":"Don\'t save","DISCONNECT":"Disconnect","DONE":"Done","EDIT":"Edit","EDIT_CARD_OCCURRENCE":"This card","EDIT_CARD_SERIES":"All cards","EDIT_CARD_THIS_AND_FOLLOWING":"This and following cards","EDIT_EVENT_OCCURRENCE":"This event","EDIT_EVENT_SERIES":"All events","EDIT_EVENT_THIS_AND_FOLLOWING":"This and following events","ENABLE":"Enable","EXPORT_TO_CSV":"Export to CSV","FEWER_OPTIONS":"Fewer options","FINISH":"Finish","GOOGLE_CALENDARS":"Google calendars","GOT_IT":"Got It","GO_TO_TRELLO":"Go to Trello","HELP":"Help","HIDE_COMPLETED":"Hide completed","HOME":"Home","INCOMPLETE_CARDS":"Incomplete cards","INTEGRATIONS":"Integrations","INVITE":"Invite","LABEL":"Label","LABELS":"Labels","LAST_MONTH":"Last month","LAST_WEEK":"Last week","LIST":"List","LISTS":"Lists","LOG_IN_WITH_TRELLO":"Log in with Trello","LOG_OUT":"Log out","MEMBER":"Member","MEMBERS":"Members","MORE_OPTIONS":"More options","NEXT":"Next","NO":"No","NONE":"None","NO_THANKS":"No, thanks","OK":"OK","OPEN_CARD":"Open card","OPEN_EVENT":"Open event","OR_LEARN_MORE":"or learn more","OTHER_CALENDARS":"Other calendars","PLAN_ON_TIMELINE":"Plan on timeline","PLANYWAY":"Planyway","PUBLISH":"Publish","PREVIOUS":"Previous","RATE_US":"Rate us","RELOAD":"Reload","REMOVE":"Remove","REMOVE_MEMBER":"Remove member","REMOVE_TIME":"Remove time","RESYNC":"Restart sync","SAVE":"Save","SELECT":"Select","SEND":"Send","SEND_FEEDBACK":"Contact support","SET_DATE":"Set date","SHOW_COMPLETED":"Show completed","SHOW_ONLY_MY_CARDS":"Only cards assigned to me","SIGN_IN_WITH_TRELLO":"Sign in with Trello","SKIP":"Skip","START_FREE_TRIAL":"Start a 15-day free trial","START_FREE_TRIAL_SHORT":"Start free trial","START_WORKING":"Start working","STAY_FREE":"Stay free","SYNC":"Sync","SUBMIT":"Submit","SUPPORT_CHAT":"Support chat","TASKS_ADD_CARD":"Add a card","TASKS_ADD_CHECK_ITEM":"Add an item","TIMELINE":"Timeline","TIME_TRACKING":"Time tracking","TODAY":"Today","VIEW_ON_TIMELINE":"View on timeline","UNSYNC":"Stop sync","UPGRADE":"Upgrade","UPGRADE_NOW":"Upgrade now","USERS":"Users","YES":"Yes"},"DIALOGS":{"ADD_ATTACHMENT_TITLE":"Add an attachment","ADD_BOARD_BY_URL_TITLE":"Add public board by URL","ADD_BOARD_BY_URL_PLACEHOLDER":"Paste URL in https://trello.com/b/... or https://planyway.com/app?boardId=... format","ADD_BOARD_BY_URL_INVALID_URL":"Please enter a valid URL","ADD_BOARD_BY_URL_NOT_FOUND":"Board does not exist or is not public","ADD_CHECK_ITEM":"Add check item","ADD_CALENDARS":"Add calendars","ADD_CALENDAR_BY_URL":"Add calendar by URL","ADD_MEMBER":"Add member","ADD_MEMBERS":"Add members","ADD_NUMBER":"Add number","ADD_TEXT":"Add text","ADDED":"Added","AFTER":"After","APPEARANCE_SETTINGS_TITLE":"Card appearance","ATTACH":"Attach","ATTACH_LINK":"Attach a link","ATTACHMENTS":"Attachments","BOARD_ORGANIZATION_SUBTITLE":"All members of the {pw{organizationName}pw} team can see and edit this board","BOARD_ORGANIZATION_TITLE":"Team","BOARD_PRIVATE_SUBTITLE":"Only board members can see and edit this board","BOARD_PRIVATE_TITLE":"Private","BOARD_PUBLIC_SUBTITLE":"Anyone can see this board and leave comments. Only board members can edit","BOARD_PUBLIC_TITLE":"Public","CARD_ROLE_CARD":"Card","CARD_ROLE_CHECK_ITEM":"Check item","CARD_ROLE_CUSTOM_FIELD":"Custom field","CARD_ROLE_GOOGLE_EVENT":"Event","CARD_ROLE_ICAL_EVENT":"Other event","CARD_ROLE_MILESTONE":"Milestone","CARD_ROLE_TIME_RECORD":"Time entry","CARD_THEME":"Card theme","CHECKLIST":"Checklist","CHECKLISTS":"Checklists","CHOOSE_FILES":"Choose files","CHOOSE_OPTION":"Choose option","CHOOSE_MODE_CALENDAR_DESCRIPTION":"Visualize your team schedule and track<br>upcoming due dates","CHOOSE_MODE_CALENDAR_NAME":"Calendar","CHOOSE_MODE_SUBTITLE":"You can change this later","CHOOSE_MODE_TIME_TRACKING_DESCRIPTION":"Get deeper insights into how your<br>team\'s performing","CHOOSE_MODE_TIME_TRACKING_NAME":"Time tracking","CHOOSE_MODE_TIMELINE_DESCRIPTION":"See what everyone is working on and when,<br>manage availability and monitor overbooking","CHOOSE_MODE_TIMELINE_NAME":"Timeline","CHOOSE_MODE_TITLE":"Choose the best view for your board","COLORFUL_THEME":"Colorful","COMMENT_EDITED":"(edited {pw{shortLastEditDate}pw})","COMMENT_PLACEHOLDER":"Write a comment...","COMMENTS":"Comments","CONTACT_US_MESSAGE":"Message","CONTACT_US_TITLE":"Contact us","CONTACT_US_TEXT":"Contact our consulting team for hands-on guidance tailored to your team\'s specific needs","CONTACT_US_PLACEHOLDER":"Tell us more about the functionality you need and let us know how many of your team members need a license","CREATE_BOARD_PLACEHOLDER":"Enter board name...","CREATE_BOARD_TITLE":"Create board","CUSTOM_FIELDS":"Custom Fields","CUSTOM_FIELDS_SETTINGS_TITLE":"Custom fields","CUSTOM_RECURRENCE":"Custom recurrence","CUSTOM_FILTER_DIALOG_TITLE":"Add filter","CUSTOM_FILTERS_CUSTOM_FIELD_PLACEHOLDER":"Select custom field","CUSTOM_FILTERS_FILTER_NAME":"{pw{filterName}pw} is {pw{filterValue}pw}","CUSTOM_FILTERS_IS":"is","CUSTOM_FILTERS_CHECKED":"checked","CUSTOM_FILTERS_NOT_CHECKED":"not checked","CUSTOM_FILTERS_REMOVE_TITLE":"Remove filter","CUSTOM_FILTERS_REMOVE_TEXT":"Are you sure you want to remove filter \\"{pw{filterName}pw}\\"?","DAILY":"day","DEFAULT_CARD_DURATION":"Default card duration","DEFAULT_CARD_POSITION":"Default card position","DEFAULT_LIST":"Default list","DEFAULT_RULE_TEXT":"Does not repeat","DELETE_CHECK_ITEM_CONFIRM":"Are you sure you want to delete check item \\"{pw{name}pw}\\"? This action cannot be undone.","DELETE_CHECK_ITEM_TITLE":"Delete check item","DELETE_CHECKLIST_CONFIRM":"Are you sure you want to delete checklist \\"{pw{name}pw}\\"? This action cannot be undone.","DELETE_CHECKLIST_TITLE":"Delete checklist","DELETE_COMMENT_CONFIRM":"Are you sure you want to delete comment \\"{pw{comment}pw}\\"? This action cannot be undone.","DELETE_COMMENT_TITLE":"Delete comment","DELETE_GOOGLE_EVENT_CONFIRM":"Are you sure you want to delete selected event from Google? This action cannot be undone.","DELETE_GOOGLE_EVENT_CONFIRM_MULTIPLE":"Are you sure you want to delete {pw{cardsCount}pw} events from Google? This action cannot be undone.","DELETE_GOOGLE_EVENT_TITLE":"Delete Google event","DELETE_TIME_RECORD_CONFIRM":"Are you sure you want to delete selected time entry? This action cannot be undone.","DELETE_TIME_RECORD_TITLE":"Delete time entry","DELETE_TRELLO_CARD_CONFIRM":"Are you sure you want to delete selected card from Trello? This action cannot be undone.","DELETE_TRELLO_CARD_CONFIRM_MULTIPLE":"Are you sure you want to delete {pw{cardsCount}pw} cards from Trello? This action cannot be undone.","DELETE_TRELLO_CARD_TITLE":"Delete Trello card","DELETE_TRELLO_CHECK_ITEM_CARD_CONFIRM":"Are you sure you want to delete selected check item from Trello? This action cannot be undone.","DELETE_TRELLO_CHECK_ITEM_CARD_CONFIRM_MULTIPLE":"Are you sure you want to delete {pw{cardsCount}pw} check items from Trello? This action cannot be undone.","DELETE_TRELLO_CHECK_ITEM_CARD_TITLE":"Delete Trello check item","DELETE_TRELLO_LIST_CONFIRM":"Are you sure you want to delete selected list from Trello? This action cannot be undone.","DELETE_TRELLO_LIST_TITLE":"Delete Trello list","DELETE_TRELLO_TIME_RECORD_CARD_CONFIRM":"Are you sure you want to delete selected time entry from Trello? This action cannot be undone.","DELETE_TRELLO_TIME_RECORDS_CARD_CONFIRM_MULTIPLE":"Are you sure you want to delete {pw{cardsCount}pw} time entries from Trello? This action cannot be undone.","DELETE_TRELLO_TIME_RECORD_CARD_TITLE":"Delete time entry","DESCRIPTION":"Description","DESCRIPTION_PLACEHOLDER":"Type to add description...","DISABLE_GOOGLE_CONNECT_CONFIRM":"Are you sure you want to disconnect your Google Calendar from Planyway?","DISABLE_GOOGLE_CONNECT_TITLE":"Disconnect Google Calendar","DISABLE_NOTIFICATIONS_CONFIRM":"Are you sure you want to disable push notifications? This action will disable push notifications for all your devices.","DISABLE_NOTIFICATIONS_TITLE":"Disable notifications","DONT_ASK_AGAIN":"Don\'t ask me again","DROP_TO_ATTACH_FILE":"Drop to attach file","EDIT_ATTACHMENT_TITLE":"Edit attachment","EDIT_BOARD_TITLE":"Edit board","ENABLE_NOTIFICATIONS_TEXT":"Enable desktop notifications and stay up to date","ENDS":"Ends","END_DATE":"end date","END_TIME":"end time","FEEDBACK_EMAIL_PLACEHOLDER":"Your email","FEEDBACK_INVALID_EMAIL":"Please enter a valid email","FEEDBACK_MESSAGE_PLACEHOLDER":"Your message","FEEDBACK_MISSING_EMAIL":"Please enter your email","FEEDBACK_MISSING_MESSAGE":"Please enter your message","FEEDBACK_MISSING_NAME":"Please enter your name","FEEDBACK_NAME_PLACEHOLDER":"Your name","FIFTEEN_MINUTES":"15 minutes","FILE_NAME":"File name","FIRST":"first","FOURTH":"fourth","GOOGLE_CALENDAR":"Google calendar","GOOGLE_SYNC_RESTART_CONFIRM":"Sorry, something went wrong.","GOOGLE_SYNC_RESTART_TITLE":"Google sync error","GOOGLE_SYNC_START_AVAILABILITY":"Show events as","GOOGLE_SYNC_START_AVAILABILITY_BUSY":"busy","GOOGLE_SYNC_START_AVAILABILITY_FREE":"free","GOOGLE_SYNC_START_COMPLETED_CARDS":"Completed cards","GOOGLE_SYNC_START_COMPLETED_CARDS_EXCLUDE":"don\'t sync","GOOGLE_SYNC_START_COMPLETED_CARDS_MARK":"add ✓ to event name","GOOGLE_SYNC_START_OPTIONS_TITLE":"Sync options","GOOGLE_SYNC_START_SET_EVENT_COLORS":"Set event color in Google Calendar","GOOGLE_SYNC_START_SET_EVENT_COLORS_BY_LABEL":"same as Trello label","GOOGLE_SYNC_START_SET_EVENT_COLORS_DEFAULT":"by default","GOOGLE_SYNC_START_SYNC_CARDS":"Sync with Google Calendar","GOOGLE_SYNC_START_SYNC_CARDS_ALL_CARDS":"all cards","GOOGLE_SYNC_START_SYNC_CARDS_ONLY_MY_CARDS":"only cards assigned to me","GOOGLE_SYNC_STOP_CONFIRM":"Are you sure you want to stop Google sync?","GOOGLE_SYNC_STOP_TITLE":"Stop Google sync","HALF_HOUR":"30 minutes","HOW_TO_START_1":"Go to Trello","HOW_TO_START_2":"Open any Trello board","HOW_TO_START_3":"Click the Planyway button","HOW_TO_START_4":"Start using Timeline or Calendar","INTEGRATIONS_TITLE":"Integrations","INTEGRATIONS_GOOGLE_SYNC":"Display <b>Planyway cards</b> in Google<br>Calendar and sync future changes","INTEGRATIONS_GOOGLE_CONNECT":"Display <b>Google Calendar</b> events in Planyway and sync future changes","INTEGRATIONS_IMPORT_ICAL":"Add any calendar <b>to Planyway</b> by URL","INTEGRATIONS_EXPORT_ICAL":"Publish Planyway cards <b>to<br>any calendar</b> by URL","ICAL_EDIT_CHOOSE_COLOR":"Choose calendar color","ICAL_EDIT_PREVIEW_CARD_TEXT":"Your calendar card","ICAL_EDIT_PREVIEW_CARD_CALENDAR_TEXT":"Your calendar","ICAL_EXPORT_HOW_TO":"Where to paste URL:","ICAL_EXPORT_TITLE":"Paste this URL to your calendar","ICAL_EXPORT_WARNING":"Only share this address with those you trust to see all card details for this calendar","ICAL_IMPORT_INVALID_CALENDAR":"Calendar is not valid or cannot be loaded","ICAL_IMPORT_INVALID_URL":"Please enter a valid URL","ICAL_IMPORT_HOW_TO":"How to get calendar URL:","ICAL_IMPORT_TITLE":"Add calendar by URL","ICAL_IMPORT_URL_PLACEHOLDER":"Paste Calendar URL address here","INVALID_TOKEN":"Please enter a valid Trello token","LABELS":"Labels","LAST":"last","LIGHT_THEME":"Light","LINK":"Link","LINK_NAME_OPTIONAL":"Link name (optional)","LOADING":"Loading...","LOCALE":"Regional format","LOGIN_INVALID_TOKEN":"That Trello token doesn\'t look right. Try to get it again","MEMBER_INVITE_NOT_TEAM_MEMBER":"(not a team member)","MEMBER_INVITE_JOINED":"(joined)","MEMBER_INVITE_LINK_CREATE":"Create link","MEMBER_INVITE_LINK_DEACTIVATE":"Deactivate link","MEMBER_INVITE_LINK_SUBTITLE":"Anyone with link can join as board member.","MEMBER_INVITE_LINK_TITLE":"Invite with link","MEMBER_INVITE_NOT_FOUND":"No matching members found","MEMBER_INVITE_PLACEHOLDER":"Email address or name","MEMBER_INVITE_TITLE":"Invite members","MEMBER_MANAGE_ALL_MEMBERS_TITLE":"Members","MEMBER_MANAGE_PLACEHOLDER":"Search members by name...","MEMBER_MANAGE_REMOVE_MEMBER_ACTION":"Remove from board...","MEMBER_MANAGE_REMOVE_MEMBER_TITLE":"Remove member?","MEMBER_MANAGE_REMOVE_MEMBER_WARNING":"The member will be removed from all cards on this board. They will receive a notification.","MEMBER_MANAGE_SHOW_MEMBER_TITLE":"Member","MONTHLY":"month","MULTIBOARD_FILTERS_TITLE":"Board filters","NEVER":"Never","NEWS_FOOTER_TEXT":"For more updates check out our <a href=\\"{pw{blogUrl}pw}\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">blog</a> and <a href=\\"{pw{helpUrl}pw}\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">help</a>","NEWS_TITLE":"What\'s new in Planyway","NEW_LIST":"(new list)","NOT_LINKED":"do not link","NO_COLOR":"No color","NO_LABEL":"No label","OCCURRENCES":"occurrences","ONE_DAY":"1 day","ONE_HOUR":"1 hour","ON_DATE":"On","ON_DAY":"On day {pw{day}pw}","ON_WEEKDAY":"On the {pw{weekdayOrder}pw} {pw{weekday}pw}","PAID_FEATURE_BADGE_PRO":"Pro","PAID_FEATURE_BADGE_BUSINESS":"Business","PAID_FEATURE_CSV_REPORT_DESCRIPTION":"Export all data to a CSV file and make powerful reports","PAID_FEATURE_CSV_REPORT_TITLE":"Export to CSV","PAID_FEATURE_CUSTOM_FIELDS_DESCRIPTION":"Visualize your custom dates on the calendar","PAID_FEATURE_CUSTOM_FIELDS_TITLE":"Custom dates","PAID_FEATURE_DEPENDENCIES_DESCRIPTION":"Visualize dependent tasks on the timeline","PAID_FEATURE_DEPENDENCIES_TITLE":"Dependencies","PAID_FEATURE_FILTERS_DESCRIPTION":"Filter cards by members, labels, lists or custom fields","PAID_FEATURE_FILTERS_TITLE":"Filters","PAID_FEATURE_GOOGLE_CONNECT_DESCRIPTION":"Synchronize your Trello boards with Google Calendar","PAID_FEATURE_GOOGLE_CONNECT_TITLE":"Google connect","PAID_FEATURE_GOOGLE_SYNC_DESCRIPTION":"Synchronize your Trello boards with Google Calendar in two-ways","PAID_FEATURE_GOOGLE_SYNC_TITLE":"Google calendar sync","PAID_FEATURE_MILESTONES_DESCRIPTION":"Highlight key dates and deadlines","PAID_FEATURE_MILESTONES_TITLE":"Milestones","PAID_FEATURE_MULTIBOARD_DESCRIPTION":"Coordinate your tasks across boards","PAID_FEATURE_MULTIBOARD_TITLE":"Multi-board view","PAID_FEATURE_PUSH_NOTIFICATIONS_DESCRIPTION":"Set reminders not to miss out on tasks that matter","PAID_FEATURE_PUSH_NOTIFICATIONS_TITLE":"Reminders","PAID_FEATURE_RECURRING_CARDS_DESCRIPTION":"Plan repetitive tasks on the calendar","PAID_FEATURE_RECURRING_CARDS_TITLE":"Recurring cards","PAID_FEATURE_TIME_RECORDS_DESCRIPTION":"Track time spent on a given task on the timeline or calendar views","PAID_FEATURE_TIME_RECORDS_TITLE":"Time tracking","PAID_FEATURE_TIMELINE_DESCRIPTION":"Plan team and project schedule on the timeline","PAID_FEATURE_TIMELINE_GROUPS_DESCRIPTION":"Get a clear overview of your initiatives divided by team members, projects, status or types of work","PAID_FEATURE_TIMELINE_GROUPS_TITLE":"Timeline groups","PAID_FEATURE_TIMELINE_SCALES_DESCRIPTION":"Overview plans by weeks, months or quarters","PAID_FEATURE_TIMELINE_SCALES_TITLE":"Zoom levels","PAID_FEATURE_TIMELINE_TEAM_NOT_ENOUGH_DESCRIPTION":"Not enough seats on your current plan to add members on Timeline","PAID_FEATURE_TIMELINE_TEAM_NOT_ENOUGH_TITLE":"Oops!","PAID_FEATURE_TIMELINE_TITLE":"Timeline","PASTE_ANY_LINK_HERE":"Paste any link here...","PASTE_ANY_NAME_HERE":"Add any name here...","PASTE_TRELLO_TOKEN_HERE":"Paste your token here...","PRIORITY":"Priority","PRODUCT_TOUR_STEP_1_TITLE":"Drag and drop cards","PRODUCT_TOUR_STEP_1_TEXT":"Schedule dates and time for any card by dragging and dropping it onto your calendar.","PRODUCT_TOUR_STEP_2_TITLE":"See cards from other boards","PRODUCT_TOUR_STEP_2_TEXT":"Connect multiple boards and get them visualized on one screen.","PRODUCT_TOUR_STEP_3_TITLE":"Add your Google Calendar","PRODUCT_TOUR_STEP_3_TEXT":"Connect your Google Calendar so you can see everything in one place.","PRODUCT_TOUR_STEP_4_TITLE":"View cards from any angle","PRODUCT_TOUR_STEP_4_TEXT":"Choose the best view to plan anything you need.","PRODUCT_TOUR_TITLE":"Continue tour","RECURRENT_CARD_DELETE_CONFIRM_TITLE":"Delete recurring card","RECURRENT_CARD_EDIT_CONFIRM_TITLE":"Edit recurring card","RECURRENT_CARD_OPEN_CONFIRM_TITLE":"Open recurring card","RECURRENT_CARD_REMOVE_CONFIRM_TITLE":"Remove start/end dates from recurring card","RECURRENT_EVENT_DELETE_CONFIRM_TITLE":"Delete recurring event","RECURRENT_EVENT_EDIT_CONFIRM_TITLE":"Edit recurring event","RECURRENT_EVENT_OPEN_CONFIRM_TITLE":"Open recurring event","RECURRENT_IS_DANGEROUS":"This action cannot be undone.","REMIND_BEFORE":"before start","REMIND_BEFORE_1_DAY":"1 day before","REMIND_BEFORE_1_HOUR":"1 hour before","REMIND_BEFORE_5_MINUTES":"5 minutes before","REMIND_BEFORE_10_MINUTES":"10 minutes before","REMIND_BEFORE_15_MINUTES":"15 minutes before","REMIND_BEFORE_30_MINUTES":"30 minutes before","REMIND_BEFORE_AT":"before start at","REMIND_BEFORE_AT_1_WEEK_BEFORE_9_00":"1 week before at {pw{time}pw}","REMIND_BEFORE_AT_2_DAYS_BEFORE_9_00":"2 days before at {pw{time}pw}","REMIND_BEFORE_AT_DAY_BEFORE_9_00":"The day before at {pw{time}pw}","REMIND_BEFORE_AT_DAY_BEFORE_23_30":"The day before at {pw{time}pw}","REMIND_BEFORE_CUSTOM":"Custom","REMINDERS":"Reminders","REMOVE_ATTACHMENT_CONFIRM":"Are you sure you want to remove attachment \\"{pw{name}pw}\\"?","REMOVE_ATTACHMENT_TITLE":"Remove attachment from card","REMOVE_CARD_LINK_CONFIRM":"Are you sure you want to remove selected dependency?","REMOVE_CARD_LINK_TITLE":"Remove dependency","REMOVE_ICAL_CONFIRM":"Are you sure you want to remove \\"{pw{iCalName}pw}\\" calendar from all of your boards?","REMOVE_ICAL_TITLE":"Remove calendar","REMOVE_PUBLIC_BOARD_CONFIRM":"Are you sure you want to remove \\"{pw{boardName}pw}\\" from your boards?","REMOVE_PUBLIC_BOARD_TITLE":"Remove public board","REMOVE_TRELLO_BOARD_CONFIRM":"Are you sure you want to remove this board from Trello? This action cannot be undone.","REMOVE_TRELLO_BOARD_TITLE":"Remove Trello board","REMOVE_TRELLO_CARD_DATES_CONFIRM":"Are you sure you want to remove start/end dates from selected Trello card?","REMOVE_TRELLO_CARD_DATES_CONFIRM_MULTIPLE":"Are you sure you want to remove start/end dates from {pw{cardsCount}pw} Trello cards?","REMOVE_TRELLO_CARD_DATES_TITLE":"Remove from calendar","REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_CONFIRM":"Are you sure you want to remove start/end dates from selected Trello check item?","REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_CONFIRM_MULTIPLE":"Are you sure you want to remove start/end dates from {pw{cardsCount}pw} Trello check items?","REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_TITLE":"Remove from calendar","REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_CONFIRM":"Are you sure you want to remove date from selected Trello custom field?","REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_CONFIRM_MULTIPLE":"Are you sure you want to remove date from {pw{cardsCount}pw} Trello custom fields?","REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_TITLE":"Remove from calendar","REPEAT_EVERY":"Repeat every","REPEAT_ON":"Repeat on","REPORTS_EXPORT_ALL_CARDS":"Select date period","REPORTS_EXPORT_TIME_RECORDS":"Select date period","SAVE_NEW_CARD_CHANGES_CONFIRM":"Card will not be created if you don\'t save the changes","SAVE_NEW_CARD_CHANGES_TITLE":"Do you want to save the changes you made?","SECOND":"second","SEND_FEEDBACK_TITLE":"Contact support","SETTINGS_TITLE":"Settings","CARD_POSITION_SETTINGS_TOP":"At the top of the list","CARD_POSITION_SETTINGS_BOTTOM":"At the bottom of the list","SET_FIRST_WEEK_DAY":"Week starts on","SET_WORK_DAYS":"Work days","SET_WORK_HOURS":"Work hours","SHARE_BOARD_TITLE":"Share board","SHARE_BOARD_URL_TITLE":"Link to this board","SHORTCUTS_ARCHIVE_CARD_DESCRIPTION":"Archive card","SHORTCUTS_ASSIGN_YOURSELF_DESCRIPTION":"Assign yourself","SHORTCUTS_DELETE_CARD_DESCRIPTION":"Delete card","SHORTCUTS_DUPLICATE_CARD_DESCRIPTION":"Duplicate card","SHORTCUTS_MY_CARDS_DESCRIPTION":"My cards filter","SHORTCUTS_QUICK_ADD_LABEL_DESCRIPTION":"Label","SHORTCUTS_REMOVE_CARD_DESCRIPTION":"Remove card from calendar","SHORTCUTS_SUBTITLE":"Hover your mouse over a card or open a card editing dialog to use shortcuts","SHORTCUTS_TITLE":"Keyboard Shortcuts","SHORTCUTS_TOGGLE_LABEL_DESCRIPTION":"Add/remove labels","SHORTCUTS_TOGGLE_MEMBER_DESCRIPTION":"Add/remove members","SHORTCUTS_WATCH_DESCRIPTION":"Watch card","SHOW_CUSTOM_FIELDS_AS_CARDS":"Show custom fields as cards","SIGN_IN_REQUIRED_1":"Log in required","SIGN_IN_REQUIRED_2":"Planyway is installed but you need to log in to enable with Trello","START_DATE":"start date","START_TIME":"start time","STEP":"step","THIRD":"third","TIME":"Time","TIME_RECORD":"Time entry","TIME_RECORDS":"Time entries","TO":"to","TRIAL_EXPIRED_DIALOG_ANNUALLY":"Annual","TRIAL_EXPIRED_DIALOG_ANNUALLY_BENEFIT":"Save 30%","TRIAL_EXPIRED_DIALOG_ENTERPRISE_BUTTON_TEXT":"Contact us","TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURE_1":"Extra security requirements","TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURE_2":"Custom service agreement","TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURE_3":"Priority support","TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURE_4":"Payment by invoice","TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURE_5":"In-depth team training","TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURE_6":"Dedicated customer success","TRIAL_EXPIRED_DIALOG_ENTERPRISE_FEATURES_TITLE":"Business plus","TRIAL_EXPIRED_DIALOG_ENTERPRISE_TEXT":"Best for large businesses<br>and regulated industries","TRIAL_EXPIRED_DIALOG_ENTERPRISE_TITLE":"Enterprise","TRIAL_EXPIRED_DIALOG_FREE_BUTTON_TEXT":"Stay free","TRIAL_EXPIRED_DIALOG_FREE_FEATURE_1":"Calendar views","TRIAL_EXPIRED_DIALOG_FREE_FEATURE_2":"Start and end dates","TRIAL_EXPIRED_DIALOG_FREE_FEATURE_3":"Completed cards","TRIAL_EXPIRED_DIALOG_FREE_FEATURE_4":"Archived cards","TRIAL_EXPIRED_DIALOG_FREE_FEATURE_5":"Priorities","TRIAL_EXPIRED_DIALOG_FREE_FEATURE_6":"Calendar sync by URL","TRIAL_EXPIRED_DIALOG_FREE_FEATURE_7":"Checklist dates & members","TRIAL_EXPIRED_DIALOG_FREE_FEATURE_8":"Mobile apps","TRIAL_EXPIRED_DIALOG_FREE_FEATURES_TITLE":"Basic functions","TRIAL_EXPIRED_DIALOG_FREE_TEXT":"Just to get started","TRIAL_EXPIRED_DIALOG_FREE_TITLE":"Free","TRIAL_EXPIRED_DIALOG_MONTHLY":"Monthly","TRIAL_EXPIRED_DIALOG_PERIOD":"per user / month","TRIAL_EXPIRED_DIALOG_PRO_BUTTON_TEXT":"Purchase now","TRIAL_EXPIRED_DIALOG_PRO_FEATURE_1":"Multi-board view","TRIAL_EXPIRED_DIALOG_PRO_FEATURE_2":"Google Calendar 2-way sync","TRIAL_EXPIRED_DIALOG_PRO_FEATURE_3":"Timeline","TRIAL_EXPIRED_DIALOG_PRO_FEATURE_4":"Milestones","TRIAL_EXPIRED_DIALOG_PRO_FEATURE_5":"Repeating tasks","TRIAL_EXPIRED_DIALOG_PRO_FEATURE_6":"Filters","TRIAL_EXPIRED_DIALOG_PRO_FEATURE_7":"Dependencies","TRIAL_EXPIRED_DIALOG_PRO_FEATURE_8":"Reminders","TRIAL_EXPIRED_DIALOG_PRO_FEATURES_TITLE":"Free plus","TRIAL_EXPIRED_DIALOG_PRO_TITLE":"Pro","TRIAL_EXPIRED_DIALOG_RECOMMENDED":"RECOMMENDED","TRIAL_EXPIRED_DIALOG_TEAM_BUTTON_TEXT":"Purchase now","TRIAL_EXPIRED_DIALOG_TEAM_FEATURE_1":"Timeline groups","TRIAL_EXPIRED_DIALOG_TEAM_FEATURE_2":"Time tracking","TRIAL_EXPIRED_DIALOG_TEAM_FEATURE_3":"Annual view","TRIAL_EXPIRED_DIALOG_TEAM_FEATURE_4":"Custom dates","TRIAL_EXPIRED_DIALOG_TEAM_FEATURES_TITLE":"Pro plus","TRIAL_EXPIRED_DIALOG_TEAM_TITLE":"Business","TRIAL_EXPIRED_DIALOG_TEXT":"So little time, so much to do... Pick the right plan for you","TRIAL_EXPIRED_DIALOG_TITLE":"Your Planyway trial has expired","UNKNOWN_CARD":"Unknown card","USE_DUE_DATE_AS":"Link Due Date to","USE_DUE_TIME_AS":"Link Due Time to","VIEW_BOARD_NAME":"Trello board","WEEKLY":"week","WELCOME_SURVEY_GREETING":"Welcome, {pw{memberName}pw}","WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH":"How many people do you want to collaborate with?","WELCOME_SURVEY_TELL_US_A_BIT_ABOUT_YOURSELF":"Tell us a bit about yourself. It will help us to make you more productive","WELCOME_SURVEY_TRIAL_TIP_CREDIT_CARD_DESCRIPTION":"<div class=\\"pw-dialog-welcome-survey__trial-tips-item-description\\">You won\'t be charged after<br>your trial period ends</div>","WELCOME_SURVEY_TRIAL_TIP_CREDIT_CARD_NAME":"No credit card required","WELCOME_SURVEY_TRIAL_TIP_FEATURES_DESCRIPTION":"<div class=\\"pw-dialog-welcome-survey__trial-tips-item-description\\">You get all the power of Planyway:<div class=\\"pw-dialog-welcome-survey__trial-tips-item-description-item\\">Team, project and portfolio timeline</div><div class=\\"pw-dialog-welcome-survey__trial-tips-item-description-item\\">Multi-board view</div><div class=\\"pw-dialog-welcome-survey__trial-tips-item-description-item\\">Time tracking</div><div class=\\"pw-dialog-welcome-survey__trial-tips-item-description-item\\">Google Calendar sync</div><div class=\\"pw-dialog-welcome-survey__trial-tips-item-description-item\\">Recurring cards</div><div class=\\"pw-dialog-welcome-survey__trial-tips-item-description-item\\">Filters</div><div class=\\"pw-dialog-welcome-survey__trial-tips-item-description-item\\">and more...</div></div>","WELCOME_SURVEY_TRIAL_TIP_FEATURES_NAME":"All premium features included","WELCOME_SURVEY_TRIAL_TIP_WHEN_ENDED_DESCRIPTION":"<div class=\\"pw-dialog-welcome-survey__trial-tips-item-description\\">Your account will be downgraded<br>to the FREE plan</div>","WELCOME_SURVEY_TRIAL_TIP_WHEN_ENDED_NAME":"What happens after 14-day trial?","WELCOME_SURVEY_TRIAL_TIPS_TITLE":"Your account includes<br>a 14-day free trial of the<br>Business plan","WELCOME_SURVEY_WHAT_COMPANY_SIZE":"What’s your company size?","WELCOME_SURVEY_WHAT_ROLE":"What\'s your role in company?","WELCOME_SURVEY_WHAT_ROLE_PLACEHOLDER":"Choose an option","WELCOME_SURVEY_WHAT_WILL_BE_USED_FOR":"What will you use Planyway for?","YEARLY":"year"},"MENU":{"ADD_BOARD_BY_URL":"Add board by URL","ADD_BOARDS":"Add boards","ADD_CARD_LINK":"Add dependency","ADD_CHECKLIST":"Add checklist","ADD_FILTER":"Add filter","ADD_ICAL_BY_URL":"Add calendar by URL","ADD_REMINDER":"Add reminder","ADD_TIME_RECORD":"Log time","ALL":"All","APPEARANCE":"Card appearance","BOARD":"Board","BOARD_EDIT":"Edit board","BOARD_REMOVE":"Remove board","BOARDS_SEARCH_PLACEHOLDER":"Find boards by name...","CARD_ARCHIVE":"Archive","CARD_COPY_URL":"Copy URL","CARD_DELETE":"Delete","CARD_DUPLICATE":"Duplicate","CARD_LINK_BLOCKS":"Blocking","CARD_LINK_IS_BLOCKED_BY":"Waiting on","CARD_MARK_COMPLETE":"Mark as complete","CARD_MARK_INCOMPLETE":"Mark as incomplete","CARD_NUMBER":"Card number","CARD_PRIORITY":"Priority","CARD_REMOVE":"Remove from calendar","CARD_UNARCHIVE":"Unarchive","CLEAR_ALL_FILTERS":"Clear all","CUSTOM_FIELDS":"Custom fields","CUSTOM_FILTERS":"Custom filters","DATE_AND_TIME":"Date and time","ENABLE_TRELLO_FILTERS":"Enable Trello filters","EXPORT_TO_CSV":"Export to CSV","FIELDS":"Fields","GROUP_BY":"Group by","HELP":"Help","HIDE_DAILY_ESTIMATE_FIELD":"Remove estimation","HIGHLIGHT_TODAY":"Highlight today","HOME":"Home","IN_BOARD":"in board","IN_CALENDAR":"in calendar","INVITE_MEMBERS":"Invite members","LABELS":"Labels","LABELS_SEARCH_PLACEHOLDER":"Find labels by name...","LISTS":"Lists","LISTS_SEARCH_PLACEHOLDER":"Find lists by name...","LIVE_CHAT":"Chat with support","LOG_OUT":"Log out","MEMBER":"Member","MEMBERS":"Members","MEMBERS_SEARCH_PLACEHOLDER":"Find members by name...","MONTH":"Month","NOTIFICATIONS_DISABLE":"Disable notifications","NOTIFICATIONS_DISABLING":"Disabling notifications...","NOTIFICATIONS_ENABLE":"Enable notifications","NOTIFICATIONS_ENABLING":"Enabling notifications...","ONE_DAY":"Day","ORGANIZATIONS_SEARCH_PLACEHOLDER":"Find teams by name...","ORIENTATION":"Orientation","ORIENTATION_BOTTOM":"Bottom","ORIENTATION_LEFT":"Left","ORIENTATION_RIGHT":"Right","ORIENTATION_TOP":"Top","PERSONAL_BOARDS":"Personal boards","PRINT":"Print","PRIORITY_HIGH":"High","PRIORITY_LOW":"Low","PRIORITY_MEDIUM":"Medium","PRIORITY_UNSET":"No priority","PRODUCT_TOUR":"Product tour","PUBLIC_BOARDS":"Public boards (read-only)","QUICK_START":"Quick start","REMINDER_UNIT_MINUTES":"minutes","REMINDER_UNIT_HOURS":"hours","REMINDER_UNIT_DAYS":"days","REMINDER_UNIT_WEEKS":"weeks","RELOAD_CALENDAR":"Refresh","SCALE_DAY":"Day","SCALE_MONTH":"Month","SCALE_QUARTER":"Quarter","SCALE_WEEK":"Week","SCALE_YEAR":"Year","SEARCH_PLACEHOLDER":"Find items by name...","SELECT_ALL":"Select all","SELECT_NONE":"Select none","SEND_FEEDBACK":"Contact support","SETTINGS":"Settings","SHORTCUTS":"Shortcuts","SHOW_ALL_CALENDARS":"Show all","SHOW_ALL_LABELS":"Show all","SHOW_ALL_LISTS":"Show all","SHOW_ALL_MEMBERS":"Show all","SHOW_ARCHIVED_CARDS":"Archived cards","SHOW_CHECK_ITEM_CARDS":"Check items","SHOW_DAILY_ESTIMATE_FIELD":"Add estimation","SHOW_MILESTONES":"Milestones","SHOW_NON_WORKING_HOURS":"Non-working hours","SHOW_ONLY_CURRENT_CALENDAR":"Show only current board","SHOW_ONLY_CURRENT_MEMBER":"Show only me","SHOW_ONLY_DEFAULT_LIST":"Show only default list","SHOW_ONLY_WITHOUT_LABELS":"Show only cards without labels","SHOW_TIME_RECORD_CARDS":"Time entries","SHOW_WEEKENDS":"Weekends","SHOW_WEEK_NUMBERS":"Week numbers","STARRED_BOARDS":"Starred boards","TIMELINE":"Timeline","THREE_DAY":"3-day","UNSCHEDULED":"Unscheduled","UNWATCH":"Stop watching","VIEW":"View","WATCH":"Watch","WEEK":"Week","WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH_1":"Only me","WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH_2":"2-10","WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH_3":"11-50","WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH_4":"51-200","WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH_5":"201-500","WELCOME_SURVEY_HOW_MANY_PEOPLE_COLLABORATE_WITH_6":"500+","WELCOME_SURVEY_WHAT_COMPANY_SIZE_1":"Only me","WELCOME_SURVEY_WHAT_COMPANY_SIZE_2":"2-10","WELCOME_SURVEY_WHAT_COMPANY_SIZE_3":"11-50","WELCOME_SURVEY_WHAT_COMPANY_SIZE_4":"51-200","WELCOME_SURVEY_WHAT_COMPANY_SIZE_5":"201-500","WELCOME_SURVEY_WHAT_COMPANY_SIZE_6":"500+","WELCOME_SURVEY_WHAT_ROLE_1":"Project manager","WELCOME_SURVEY_WHAT_ROLE_2":"Team member","WELCOME_SURVEY_WHAT_ROLE_3":"Business owner","WELCOME_SURVEY_WHAT_ROLE_4":"Team leader","WELCOME_SURVEY_WHAT_ROLE_5":"Freelancer","WELCOME_SURVEY_WHAT_ROLE_6":"I\'m a director / C-level","WELCOME_SURVEY_WHAT_WILL_BE_USED_FOR_1":"Work","WELCOME_SURVEY_WHAT_WILL_BE_USED_FOR_2":"Personal","WHAT_IS_NEW":"What\'s new"},"MISC":{"ADD_COMMENT":"Add comment","ADD_DATE":"Add date","ADD_TITLE":"Add title","ALL_DAY_SECTION":"All day","ALTERNATIVE_SIGN_IN":"No account? <span class=\\"pw-link pw-link--blue pw-js-sign-in-link\\">Sign in</span> using Google, Microsoft or Apple!","AUTHORIZE_GOOGLE_LABEL":"<b>Planyway</b> needs to connect to your Google Calendar","AUTHORIZE_GOOGLE_CONSENT":"By clicking \\"{pw{btnText}pw}\\" you agree to the <a href=\\"{pw{termsOfUseUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Terms of Use</a> and <a href=\\"{pw{privacyPolicyUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Privacy Policy</a>","BOARD_BACKGROUND":"Background color","BOARD_NAME":"Board name","BOARD_ORGANIZATION":"Board team","BOARD_VISIBILITY":"Board visibility","CHECKLIST":"Checklist","CONNECT_TO_TRELLO_BY_TOKEN_CONSENT":"By pasting Trello token you agree to the <a href=\\"{pw{termsOfUseUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Terms&nbsp;of&nbsp;Use</a> and <a href=\\"{pw{privacyPolicyUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Privacy&nbsp;Policy</a>","CONNECT_TO_TRELLO_CONSENT":"By clicking \\"{pw{btnText}pw}\\" you agree to the <a href=\\"{pw{termsOfUseUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Terms&nbsp;of&nbsp;Use</a> and <a href=\\"{pw{privacyPolicyUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Privacy&nbsp;Policy</a>","CONNECT_TO_TRELLO_TITLE":"Hi there!","CONNECT_TO_TRELLO_WELCOME":"Planyway needs to connect with your Trello account","CUSTOM":"Custom","ENTER_CARD_TITLE":"Enter card title...","ENTER_CHECK_ITEM_TITLE":"Enter check item title...","ENTER_DAILY_ESTIMATE":"Daily estimate...","ENTER_TASK_LIST_TITLE":"Enter list title...","FEW_BOARDS_AVAILABLE":"{pw{availableBoardsCount}pw} available","GET_APPS":"Get Apps","GET_TRELLO_TOKEN_TEXT":"Get your Trello token","GET_TRELLO_TOKEN_LINK":"here","KANBAN":"Kanban","LIST":"List","LOAD_MEMBER_INFO_ERROR":"Could not connect to Trello. Planyway unavailable","MILESTONES":"Milestones","MISSING_TRELLO_TOKEN_ERROR":"Failed to get Trello token. Please close this page and try again","NO_BOARD_PLACEHOLDER":"Select a board...","NO_BOARDS":"Looks like you don\'t have any boards<br>Press \\"Create board\\" to go ahead with a new one","NO_LABEL":"No label","NO_ORGANIZATION_PLACEHOLDER":"Select an organization...","NO_TITLE":"(no title)","ONBOARDING_OPEN_BOARD":"Hooray!<br>Open any <b>Trello board</b> or create a new one and start using Planyway","ONBOARDING_SHOW_BUTTON":"Click here to open Planyway","ONBOARDING_SIGN_IN":"Hi there!<br>Firstly you need to sign in with Trello","ONBOARDING_SKIP":"Skip","OPTIONAL":"optional","PER_DAY":"per day","PLANYWAY":"Planyway","PUSH_NOTIFICATIONS_ENABLE_BANNER_TEXT":"Enable desktop notifications?","SEARCH_LINKED_CARD_PLACEHOLDER":"Search dependent card","SEARCH_PARENT_CARD_PLACEHOLDER":"Search parent card","SELECT_DATE":"Select date","SELECT_END_DATE":"Select end date","SELECT_START_DATE":"Select start date","SET_DURATION":"Set duration","TOTAL":"Total","TRELLO_BOARD":"Trello board","TRELLO_TOKEN_LABEL":"Your Trello token:","UNASSIGNED_MEMBER_FULL_NAME":"Unassigned","UNASSIGNED_MEMBER_INITIALS":"?","YOU_ARE_LOGGED_IN_AS":"You are logged in as"},"NOTIFICATIONS":{"ACCEPT_INVITE_TO_BOARD_ERROR":"Failed to accept invitation to board","ADD_CUSTOM_FILTER_ERROR":"Failed to add custom filter","ADD_MEMBER_TO_BOARD_ERROR":"Failed to add member","ATTACH_MAX_FILE_SIZE_WARNING":"Failed to attach file \\"{pw{fileName}pw}\\". File size exceeds 10MB limit.","BOARD_IS_NOT_FOUND_ERROR":"Failed to find requested board","CARD_IS_NOT_FOUND_ERROR":"Failed to find requested card","CONTACT_US_ERROR":"Failed to send message. Please try again","COPY_CARD_URL_ERROR":"Failed to copy calendar card URL","COPY_TRELLO_TOKEN_ERROR":"Failed to copy Trello token","CREATE_BOARD_ERROR":"Failed to create new board","CREATE_GOOGLE_EVENT_ERROR":"Failed to create Google event","CREATE_INVITE_LINK_ERROR":"Failed to create invite link","CREATE_TRELLO_CARD_ERROR":"Failed to create Trello card","CREATE_TRELLO_CHECK_ITEM_CARD_ERROR":"Failed to create Trello check item","CREATE_TRELLO_LABEL_ERROR":"Failed to create Trello label","CREATE_TRELLO_TIME_RECORD_CARD_ERROR":"Failed to create Trello time entry","DELETE_GOOGLE_EVENT_ERROR":"Failed to delete Google event","DELETE_INVITE_LINK_ERROR":"Failed to delete invite link","DELETE_TRELLO_CARD_ERROR":"Failed to delete Trello card","DELETE_TRELLO_CHECK_ITEM_CARD_ERROR":"Failed to delete Trello check item","DELETE_TRELLO_TIME_RECORD_CARD_ERROR":"Failed to delete Trello time entry","DUPLICATE_CARD_ERROR":"Failed to duplicate calendar card","ERROR_TITLE":"Planyway error:","FEEDBACK_FILE_LIMIT_REACHED":"Maximum number of files reached","FEEDBACK_FILE_NOT_IMAGE":"File is not an image: {pw{fileName}pw}","FEEDBACK_FILE_SIZE_LIMIT_REACHED":"Maximum file size reached","ICAL_EXPORT_DELETE_ERROR":"Failed to delete calendar URL","ICAL_EXPORT_DELETE_SUCCESS":"Calendar URL deleted successfully","ICAL_EXPORT_GET_ERROR":"Failed to get calendar URL","ICAL_EXPORT_POST_ERROR":"Failed to create new calendar URL","ICAL_EXPORT_POST_SUCCESS":"New calendar URL created successfully","INFO_TITLE":"Planyway info:","LOAD_CARDS_ERROR":"Failed to load calendar cards","LOAD_MEMBER_INFO_ERROR":"Could not connect to Trello. Planyway unavailable","LOAD_PRICING_ERROR":"Failed to load prices","LOAD_RESOURCES_ERROR":"Failed to load calendar resources","LOAD_TRELLO_COMMENTS_ERROR":"Failed to load card comments","LOAD_TRELLO_LABEL_ERROR":"Failed to load Trello label","LOCALE_CHANGED_WARNING":"Your regional format was changed. Reload the page to apply changes","LOGIN_ERROR":"Failed to log in","OPEN_CARD_ERROR":"Failed to open calendar card","PLANYWAY_ACTIVATE_TRIAL_ERROR":"Failed to activate trial license","PLANYWAY_ACTIVATE_TRIAL_ERROR_NO_REMAINING_TRIALS":"Failed to activate trial license. No remaining trial activations","PLANYWAY_ACTIVATE_TRIAL_ERROR_PAID_ALREADY_ACTIVE":"Failed to activate trial license. Paid license is already active","PLANYWAY_ACTIVATE_TRIAL_ERROR_WITH_MESSAGE":"Failed to activate trial license. {pw{message}pw}","PLANYWAY_GOOGLE_AUTH_FAILED":"Failed to authorize Google account","PLANYWAY_GOOGLE_AUTH_INITIALIZATION_FAILED":"Failed to authorize Google account. Please enable third-party cookies in your browser settings, refresh the page and try again. If this issue continues, please contact support","PLANYWAY_GOOGLE_AUTH_POPUP_BLOCKED":"Failed to authorize Google account. Please allow pop-ups for planyway.com in your browser settings","PLANYWAY_GOOGLE_CONNECT_ERROR_WITH_MESSAGE":"Failed to connect to Google Calendar. {pw{message}pw}","PLANYWAY_GOOGLE_CONNECT_FAILED":"Failed to connect to Google Calendar","PLANYWAY_GOOGLE_CONNECT_FAILED_NOT_CONNECTED":"Failed to connect to Google Calendar, Google Calendar is disconnected","PLANYWAY_GOOGLE_CONNECT_FAILED_NOT_AUTHORIZED":"Failed to connect to Google Calendar, access to your Google Calendar is not authorized","PLANYWAY_GOOGLE_CONNECT_FAILED_G_SUITE_ERROR":"Failed to connect to Google Calendar, access denied by a security policy established by the Google Apps administrator of your organization","PLANYWAY_GOOGLE_DISCONNECT_ERROR_WITH_MESSAGE":"Failed to disconnect Google Calendar. {pw{message}pw}","PLANYWAY_GOOGLE_DISCONNECT_FAILED":"Failed to disconnect Google Calendar","PLANYWAY_INITIALIZATION_ERROR":"Failed to initialize Planyway","PLANYWAY_INVITE_ERROR_TOKEN_INVALID":"Failed to process invitation. Invitation token is not valid","PLANYWAY_INVITE_ERROR_UNCONFIRMED_MEMBER":"Failed to accept invitation. Please confirm your Trello account by following the link in the verification email from Trello","PLANYWAY_INVITE_ERROR_WITH_MESSAGE":"Failed to process invitation. {pw{message}pw}","PLANYWAY_MEMBER_LICENSE_LOADING_ERROR":"Could not connect to Planyway","PLANYWAY_SYNC_GOOGLE_AUTH_ERROR":"Google sync error: Cannot access Google calendar","PLANYWAY_SYNC_GOOGLE_CALENDAR_ERROR":"Google sync error: Google calendar not found","PLANYWAY_SYNC_GOOGLE_G_SUITE_ERROR":"Google sync error: Access denied by a security policy established by the Google Apps administrator of your organization. Please contact your administrator for further assistance","PLANYWAY_SYNC_LICENSE_EXPIRED_ERROR":"Google sync error: Planyway is not licensed or your license has expired","PLANYWAY_SYNC_START_FAILED":"Failed to start Google sync","PLANYWAY_SYNC_START_FAILED_NOT_AUTHORIZED":"Failed to start Google sync, access to your Google Calendar is not authorized","PLANYWAY_SYNC_START_FAILED_NOT_LICENSED":"Failed to start Google sync, Planyway is not licensed or your license has expired","PLANYWAY_SYNC_START_FAILED_WITH_MESSAGE":"Failed to start Google sync. {pw{message}pw}","PLANYWAY_SYNC_START_GOOGLE_AUTH_ERROR":"Failed to start Google sync, cannot access Google calendar","PLANYWAY_SYNC_START_GOOGLE_CALENDAR_ERROR":"Failed to start Google sync, Google calendar not found","PLANYWAY_SYNC_START_GOOGLE_G_SUITE_ERROR":"Failed to start Google sync, access denied by a security policy established by the Google Apps administrator of your organization. Please contact your administrator for further assistance","PLANYWAY_SYNC_START_LONGER_THEN_USUAL":"It takes longer than usual to start syncing with Google. Please try again later","PLANYWAY_SYNC_START_TRELLO_AUTH_ERROR":"Failed to start Google sync, cannot access Trello board","PLANYWAY_SYNC_START_TRELLO_BOARD_ERROR":"Failed to start Google sync, Trello board not found","PLANYWAY_SYNC_STARTED":"Google sync started","PLANYWAY_SYNC_STATUS_LOADING_ERROR":"Cannot get your Google sync status at this moment...","PLANYWAY_SYNC_STATUS_LOADING_ERROR_WITH_MESSAGE":"Cannot get your Google sync status. {pw{message}pw}","PLANYWAY_SYNC_STOP_FAILED":"Failed to stop Google sync","PLANYWAY_SYNC_STOP_FAILED_WITH_MESSAGE":"Failed to stop Google sync. {pw{message}pw}","PLANYWAY_SYNC_STOP_LONGER_THEN_USUAL":"It takes longer than usual to stop syncing with Google. Please try again later","PLANYWAY_SYNC_STOPPED":"Google sync stopped","PLANYWAY_SYNC_TRELLO_AUTH_ERROR":"Google sync error: Cannot access Trello board","PLANYWAY_SYNC_TRELLO_BOARD_ERROR":"Google sync error: Trello board not found","PLANYWAY_SYNC_TRELLO_LIMIT_ERROR":"Google sync error: Trello cards limit exceeded","PLANYWAY_SYNC_UNKNOWN_ERROR":"Google sync error: unknown error, please update Planyway","PROGRESS_TITLE":"Please wait:","PUSH_NOTIFICATIONS_BLOCKED_ERROR":"Failed to enable push-notifications. Push-notifications are blocked by the browser settings","PUSH_NOTIFICATIONS_DISABLE_ERROR":"Failed to disable push-notifications. Please try again later","PUSH_NOTIFICATIONS_ENABLE_ERROR":"Failed to enable push-notifications. Please try again later. Kindly note that notifications aren\'t compatible with Trello desktop app","PUSH_NOTIFICATIONS_REGISTER_LONGER_THAN_USUAL":"Push-notifications registration is taking longer than usual. Please try again later if necessary","PUSH_NOTIFICATIONS_UNREGISTER_LONGER_THAN_USUAL":"Push-notifications cancellation is taking longer than usual. Please try again later if necessary","REMOVE_BOARD_ERROR":"Failed to remove board","REMOVE_CARD_ERROR":"Failed to remove calendar card","REMOVE_CUSTOM_FILTER_ERROR":"Failed to remove custom filter","REMOVE_MEMBER_FROM_BOARD_ERROR":"Failed to remove member","REMOVE_TRELLO_CARD_ERROR":"Failed to remove start/end dates from Trello card","REMOVE_TRELLO_CUSTOM_FIELD_CARD_ERROR":"Failed to remove date from Trello custom field","REMOVE_TRELLO_CHECK_ITEM_CARD_ERROR":"Failed to remove start/end dates from Trello check item","REPORT_ERROR":"Failed to build report","SEND_FEEDBACK_ERROR":"Failed to send support request","SEND_FEEDBACK_SUCCESS":"Your support request has been sent","SUCCESS_TITLE":"Planyway success:","TASK_LIST_CREATE_ERROR":"Failed to create list","TASK_LIST_DELETE_ERROR":"Failed to delete list","TASK_LIST_UPDATE_ERROR":"Failed to update list","TEAMPLANNER_DROP_MEMBER_NOT_EXIST_WARNING":"Only members from \\"{pw{boardName}pw}\\" can be assigned","TIME_ZONE_CHANGED":"We detected timezone change. Please reload Planyway to apply changes","TRELLO_CARD_DROP_ERROR":"Failed to drag card from Trello","TRELLO_TOKEN_COPIED_TO_CLIPBOARD":"Trello token copied to clipboard. You may close this page","UPDATE_BOARD_ERROR":"Failed to update board","UPDATE_BOARD_PERMISSION_ERROR":"Failed to update board share permission","UPDATE_CARD_ERROR":"Failed to update calendar card","UPDATE_RECURRING_CARD_ERROR":"Failed to update recurring card","URL_COPIED_TO_CLIPBOARD":"URL copied to clipboard","WARNING_TITLE":"Planyway warning:"},"TOOLTIPS":{"ADD_ATTACHMENT_OR_DROP_FILES":"Add attachments or drop files","ADD_CARD_LINK":"Add dependency","ADD_CHECK_ITEM":"Add check item","ADD_LIST":"Add list","ADD_REMINDER":"Add reminder","ADD_TIME_RECORD":"Log time","ASSIGN":"Assign this item","BOARD":"Board","BOARDS":"Boards","BOARD_ACTIONS":"Board actions","CALENDAR":"Calendar","CALENDAR_HIDE":"Hide Planyway","CALENDAR_SHOW":"Show Planyway","CALENDAR_UNAVAILABLE_LOADING":"Planyway loading...","CARD_LINK_ERROR_LINKS_DISABLED":"Dependent card cannot have dependencies","CARD_LINK_ERROR_NO_CARD":"Dependent card is not loaded","CARD_LINK_ERROR_NO_LINK":"Dependency has been removed from the dependent card","CARD_LINKS":"Dependencies","CARD_MENU":"Card menu","CHECK_ITEM":"Check item","CLEAR":"Clear","COPY_TO_CLIPBOARD":"Copy to clipboard","CUSTOM_FIELD":"Custom field","DATE":"Date","DATES":"Dates","DAY_BACKWARD":"Scroll day backward","DAY_FORWARD":"Scroll day forward","DELETE":"Delete","DELETE_ITEM":"Delete item","DESCRIPTION":"Description","DURATION":"Duration","EDIT":"Edit","EDIT_ICAL":"Edit calendar","DAILY_ESTIMATE":"Daily estimate","EXPAND_CHECK_ITEMS":"Expand check items","FILTER_CARDS":"Filter cards","FULLSCREEN":"Fullscreen","HELP":"Help","HIDE":"Hide","HIDE_CHAT_WINDOW":"Hide chat window","HIDE_DAILY_ESTIMATE_FIELD":"Remove estimation","HIDE_SIDEBAR":"Hide main menu","ICAL_EXPORT_DELETE":"Delete URL","ICAL_EXPORT_RESET":"Reset URL","IN_BOARD":"in board","IN_CALENDAR":"in calendar","IN_CARD":"in card","IN_CHECKLIST":"in checklist","IN_LIST":"in list","LABELS":"Labels","LIST":"List","MARK_COMPLETE":"Mark as complete","MARK_INCOMPLETE":"Mark as incomplete","MEMBER":"Member","MEMBERS":"Members","MILESTONES":"Milestones","MONTH_BACKWARD":"Scroll month backward","MONTH_FORWARD":"Scroll month forward","NOTIFICATIONS_ARE_DISABLED":"Desktop notifications are disabled now. Click to turn them on","QUARTER_BACKWARD":"Scroll quarter backward","QUARTER_FORWARD":"Scroll quarter forward","PARENT_CARD":"Parent card","PRIORITY":"Priority","RECURRENT_RULE":"Recurrent rule","REMOVE":"Remove","REMOVE_DATE":"Remove date","REMOVE_DATES":"Remove dates","REMOVE_FROM_CALENDAR":"Remove from calendar","REPLY":"Reply","SCALE_IN":"Scale in timeline","SCALE_OUT":"Scale out timeline","SETTINGS":"Settings","SET_DATES":"Set dates","SHARE_BOARD":"Share board","SHOW_CHAT_WINDOW":"Show chat window","SHOW_DAILY_ESTIMATE_FIELD":"Add estimation","SHOW_MULTIBOARD_FILTER_MENU":"Filter cards from this board","SHOW_SIDEBAR":"Show main menu","SYNC_ALL_CARDS":"all","SYNC_AVAILABILITY":"Show as","SYNC_AVAILABILITY_BUSY":"busy","SYNC_AVAILABILITY_FREE":"free","SYNC_COMPLETED_CARDS":"Show completed","SYNC_EXCLUDE_COMPLETED_CARDS":"no","SYNC_MARK_COMPLETED_CARDS":"yes","SYNC_ONLY_MY_CARDS":"only assigned to me","SYNC_OPTIONS_TITLE":"Current sync options:","SYNC_SET_EVENT_COLORS":"Event color","SYNC_SET_EVENT_COLORS_BY_LABEL":"same as Trello label","SYNC_SET_EVENT_COLORS_DEFAULT":"default","SYNC_WITH_GOOGLE_CALENDAR":"Cards","TASK_LIST_HIDE":"Hide card list","TASK_LIST_SHOW":"Show card list","UNWATCH":"Stop watching","WATCH":"Watch","WEEK_BACKWARD":"Scroll week backward","WEEK_FORWARD":"Scroll week forward","YEAR_BACKWARD":"Scroll year backward","YEAR_FORWARD":"Scroll year forward"}}')},437:function(e){e.exports=JSON.parse('{"BUTTONS":{"ACCEPT":"Применить","ACCOUNT":"Аккаунт","ACCOUNT_SETTINGS":"Настройки аккаунта","ADD":"Добавить","ADD_CARD":"Добавить","ADD_CHECK_ITEM":"Добавить элемент","ADD_DURATION":"Добавить длительность","ADD_LIST":"Добавить","ADD_REMINDER":"Добавить напоминание","ADD_TIME":"Добавить время","ADD_TIME_RECORD":"Записать время","ALL_CARDS":"Все карточки","ATTACH":"Прикрепить","BACK":"Назад","BOARD":"Доска","BOARDS":"Доски","CALENDAR":"Календарь","CALENDARS":"Календари","CANCEL":"Отмена","CLOSE":"Закрыть","COMPLETED_CARDS":"Завершенные карточки","CONNECT":"Подключить","CONNECT_BOARD":"Подключить доску","CONNECT_YOUR_CALENDAR":"Подключить календарь","CONNECTED_BOARDS":"Подключенные доски","CONNECT_WITH_GOOGLE":"Подключить к Google","CONNECT_WITH_TRELLO":"Подключить к Trello","CONTINUE":"Продолжить","CREATE":"Создать","CREATE_BOARD":"Создать доску","CUSTOM":"Пользовательские","DELETE":"Удалить","DISCARD":"Не сохранять","DISCONNECT":"Отключить","EDIT":"Изменить","EDIT_CARD_OCCURRENCE":"Только эта карточка","EDIT_CARD_SERIES":"Все карточки","EDIT_CARD_THIS_AND_FOLLOWING":"Эта и последующие карточки","EDIT_EVENT_OCCURRENCE":"Только это событие","EDIT_EVENT_SERIES":"Все события","EDIT_EVENT_THIS_AND_FOLLOWING":"Это и последующие события","ENABLE":"Включить","EXPORT_TO_CSV":"Экспорт в CSV","FINISH":"Закончить","FEWER_OPTIONS":"Меньше параметров","GOOGLE_CALENDARS":"Календари Google","GOT_IT":"Понятно","GO_TO_TRELLO":"Перейти в Trello","HELP":"Справка","HIDE_COMPLETED":"Скрыть завершенные","HOME":"Домашняя страница","INCOMPLETE_CARDS":"Незавершенные карточки","INVITE":"Пригласить","LABEL":"Метка","LABELS":"Метки","LAST_MONTH":"Последний месяц","LAST_WEEK":"Последняя неделя","LIST":"Список","LISTS":"Списки","LOG_IN_WITH_TRELLO":"Войти через Trello","LOG_OUT":"Выйти","MEMBER":"Участник","MEMBERS":"Участники","MORE_OPTIONS":"Больше параметров","NEXT":"Вперёд","NO":"Нет","NONE":"Не выбрана","NO_THANKS":"Нет, спасибо","OK":"ОК","OPEN_CARD":"Открыть карточку","OPEN_EVENT":"Открыть событие","OTHER_CALENDARS":"Другие календари","PLAN_ON_TIMELINE":"Планировать на календаре","PLANYWAY":"Planyway","PREVIOUS":"Назад","RATE_US":"Оценить","RELOAD":"Обновить","REMOVE":"Удалить","REMOVE_MEMBER":"Удалить участника","REMOVE_TIME":"Удалить время","RESYNC":"Перезапустить","SAVE":"Сохранить","SEND":"Отправить","SEND_FEEDBACK":"Техподдержка","SELECT":"Выбрать","SET_DATE":"Задать дату","SHOW_COMPLETED":"Показывать завершенные","SHOW_ONLY_MY_CARDS":"Только карточки, назначенные на меня","SIGN_IN_WITH_TRELLO":"Войти с помощью Trello","SKIP":"Пропустить","START_FREE_TRIAL":"Бесплатная 15-дневная пробная версия","START_FREE_TRIAL_SHORT":"Попробовать бесплатно","SUPPORT_CHAT":"Чат техподдержки","SYNC":"Синхронизировать","TASKS_ADD_CARD":"Добавить карточку","TASKS_ADD_CHECK_ITEM":"Добавить элемент","TIMELINE":"Таймлайн","TIME_TRACKING":"Учёт времени","TODAY":"Сегодня","VIEW_ON_TIMELINE":"Перейти в календарь","UNSYNC":"Остановить","UPGRADE":"Купить","UPGRADE_NOW":"Купить","USERS":"Пользователи","YES":"Да"},"DIALOGS":{"ADD_ATTACHMENT_TITLE":"Добавить вложение","ADD_BOARD_BY_URL_TITLE":"Добавить публичную доску по ссылке","ADD_BOARD_BY_URL_PLACEHOLDER":"Вставьте ссылку в формате https://trello.com/b/... или https://planyway.com/app?boardId=...","ADD_BOARD_BY_URL_INVALID_URL":"Пожалуйста, введите корректную ссылку","ADD_BOARD_BY_URL_NOT_FOUND":"Доска не существует или не является публичной","ADD_CHECK_ITEM":"Добавить элемент чек-листа","ADD_CALENDARS":"Добавить календари","ADD_CALENDAR_BY_URL":"Добавить календарь по ссылке","ADD_MEMBER":"Добавить пользователя","ADD_MEMBERS":"Добавить пользователей","ADD_NUMBER":"Добавить число","ADD_TEXT":"Добавить текст","ADDED":"Добавлено","AFTER":"После","APPEARANCE_SETTINGS_TITLE":"Внешний вид карточек","ATTACH":"Прикрепить","ATTACH_LINK":"Прикрепить ссылку","ATTACHMENTS":"Вложения","BOARD_ORGANIZATION_SUBTITLE":"Просматривать и изменять эту доску могут все участники команды \\"{pw{organizationName}pw}\\"","BOARD_ORGANIZATION_TITLE":"Командная","BOARD_PRIVATE_SUBTITLE":"Просматривать и изменять эту доску могут только добавленные на неё участники","BOARD_PRIVATE_TITLE":"Приватная","BOARD_PUBLIC_SUBTITLE":"Просматривать эту доску и оставлять комментарии могут все. Изменять её могут только добавленные на неё участники","BOARD_PUBLIC_TITLE":"Публичная","CARD_ROLE_CARD":"Карточка","CARD_ROLE_CHECK_ITEM":"Элемент чек-листа","CARD_ROLE_CUSTOM_FIELD":"Пользовательское поле","CARD_ROLE_GOOGLE_EVENT":"Событие","CARD_ROLE_ICAL_EVENT":"Другое событие","CARD_ROLE_MILESTONE":"Веха","CARD_ROLE_TIME_RECORD":"Запись времени","CARD_THEME":"Тема карточек","CHECKLIST":"Чек-лист","CHECKLISTS":"Чек-листы","CHOOSE_FILES":"Выбрать файлы","CHOOSE_OPTION":"Выбрать вариант","COLORFUL_THEME":"Цветная","COMMENT_EDITED":"(изменён {pw{shortLastEditDate}pw})","COMMENT_PLACEHOLDER":"Напишите комментарий...","COMMENTS":"Комментарии","CREATE_BOARD_PLACEHOLDER":"Введите название доски...","CREATE_BOARD_TITLE":"Создать доску","CUSTOM_RECURRENCE":"Правило повторения","CUSTOM_FIELDS":"Поля пользователя","CUSTOM_FIELDS_SETTINGS_TITLE":"Поля пользователя","CUSTOM_FILTER_DIALOG_TITLE":"Добавить фильтр","CUSTOM_FILTERS_CUSTOM_FIELD_PLACEHOLDER":"Выберите пользовательское поле","CUSTOM_FILTERS_FILTER_NAME":"{pw{filterName}pw} {pw{filterValue}pw}","CUSTOM_FILTERS_IS":"","CUSTOM_FILTERS_CHECKED":"отмечено","CUSTOM_FILTERS_NOT_CHECKED":"не отмечено","CUSTOM_FILTERS_REMOVE_TITLE":"Удалить фильтр","CUSTOM_FILTERS_REMOVE_TEXT":"Вы уверены, что хотите удалить фильтр \\"{pw{filterName}pw}\\"?","DAILY":"день","DEFAULT_CARD_DURATION":"Продолжительность по умолчанию","DEFAULT_CARD_POSITION":"Позиция карточки по умолчанию","DEFAULT_LIST":"Список по умолчанию","DEFAULT_RULE_TEXT":"Не повторять","DELETE_CHECK_ITEM_CONFIRM":"Вы уверены, что хотите удалить элемент чек-листа \\"{pw{name}pw}\\"? Это действие нельзя будет отменить.","DELETE_CHECK_ITEM_TITLE":"Удалить элемент чек-листа","DELETE_CHECKLIST_CONFIRM":"Вы уверены, что хотите удалить чек-лист \\"{pw{name}pw}\\"? Это действие нельзя будет отменить.","DELETE_CHECKLIST_TITLE":"Удалить чек-лист","DELETE_COMMENT_CONFIRM":"Вы уверены, что хотите удалить комментарий \\"{pw{comment}pw}\\"? Это действие нельзя будет отменить.","DELETE_COMMENT_TITLE":"Удалить комментарий","DELETE_GOOGLE_EVENT_CONFIRM":"Вы уверены, что хотите удалить это событие из Google? Это действие нельзя будет отменить.","DELETE_GOOGLE_EVENT_CONFIRM_MULTIPLE":"Вы уверены, что хотите удалить {pw{cardsCount}pw} событий из Google? Это действие нельзя будет отменить.","DELETE_GOOGLE_EVENT_TITLE":"Удалить событие Google","DELETE_TIME_RECORD_CONFIRM":"Вы уверены, что хотите удалить эту запись времени? Это действие нельзя будет отменить.","DELETE_TIME_RECORD_TITLE":"Удалить запись времени","DELETE_TRELLO_CARD_CONFIRM":"Вы уверены, что хотите удалить эту карточку из Trello? Это действие нельзя будет отменить.","DELETE_TRELLO_CARD_CONFIRM_MULTIPLE":"Вы уверены, что хотите удалить {pw{cardsCount}pw} карточек из Trello? Это действие нельзя будет отменить.","DELETE_TRELLO_CARD_TITLE":"Удалить карточку Trello","DELETE_TRELLO_CHECK_ITEM_CARD_CONFIRM":"Вы уверены, что хотите удалить этот элемент чек-листа из Trello? Это действие нельзя будет отменить.","DELETE_TRELLO_CHECK_ITEM_CARD_CONFIRM_MULTIPLE":"Вы уверены, что хотите удалить {pw{cardsCount}pw} элементов чек-листов из Trello? Это действие нельзя будет отменить.","DELETE_TRELLO_CHECK_ITEM_CARD_TITLE":"Удалить элемент чек-листа Trello","DELETE_TRELLO_LIST_CONFIRM":"Вы уверены, что хотите удалить этот список из Trello? Это действие нельзя отменить.","DELETE_TRELLO_LIST_TITLE":"Удалить список Trello","DELETE_TRELLO_TIME_RECORD_CARD_CONFIRM":"Вы уверены, что хотите удалить этот запись времени из Trello? Это действие нельзя будет отменить.","DELETE_TRELLO_TIME_RECORDS_CARD_CONFIRM_MULTIPLE":"ы уверены, что хотите удалить {pw{cardsCount}pw} записей времени из Trello? Это действие нельзя будет отменить.","DELETE_TRELLO_TIME_RECORD_CARD_TITLE":"Удалить запись времени Trello","DESCRIPTION":"Описание","DESCRIPTION_PLACEHOLDER":"Добавить описание...","DISABLE_GOOGLE_CONNECT_CONFIRM":"Вы уверены, что хотите отключить ваш Google Calendar от Planyway?","DISABLE_GOOGLE_CONNECT_TITLE":"Отключить Google Calendar","DISABLE_NOTIFICATIONS_CONFIRM":"Вы уверены, что хотите отключить push-уведомления? Это действие отключит push-уведомления на всех ваших устройствах.","DISABLE_NOTIFICATIONS_TITLE":"Отключить уведомления","DONT_ASK_AGAIN":"Не спрашивать снова","DROP_TO_ATTACH_FILE":"Перетяните файлы, чтобы прикрепить","EDIT_ATTACHMENT_TITLE":"Редактировать вложение","EDIT_BOARD_TITLE":"Изменить доску","ENABLE_NOTIFICATIONS_TEXT":"Включите уведомления рабочего стола и всегда будьте в курсе своих задач","ENDS":"Окончание","END_DATE":"датой окончания","END_TIME":"временем окончания","FEEDBACK_EMAIL_PLACEHOLDER":"Email","FEEDBACK_INVALID_EMAIL":"Пожалуйста, введите корректный email","FEEDBACK_MESSAGE_PLACEHOLDER":"Текст сообщения","FEEDBACK_MISSING_EMAIL":"Пожалуйста, введите свой email","FEEDBACK_MISSING_MESSAGE":"Пожалуйста, введите ваше сообщение","FEEDBACK_MISSING_NAME":"Пожалуйста, введите своё имя","FEEDBACK_NAME_PLACEHOLDER":"Имя","FIFTEEN_MINUTES":"15 минут","FILE_NAME":"Название файла","FIRST":"первый","FOURTH":"четвёртый","GOOGLE_CALENDAR":"Google календарь","GOOGLE_SYNC_RESTART_CONFIRM":"Извините, но что-то пошло не так.","GOOGLE_SYNC_RESTART_TITLE":"Ошибка синхронизации с Google","GOOGLE_SYNC_START_AVAILABILITY":"Показывать события как","GOOGLE_SYNC_START_AVAILABILITY_BUSY":"занят","GOOGLE_SYNC_START_AVAILABILITY_FREE":"свободен","GOOGLE_SYNC_START_COMPLETED_CARDS":"Завершённые карточки","GOOGLE_SYNC_START_COMPLETED_CARDS_EXCLUDE":"не синхронизировать","GOOGLE_SYNC_START_COMPLETED_CARDS_MARK":"добавить ✓ к названию события","GOOGLE_SYNC_START_OPTIONS_TITLE":"Настройки синхронизации","GOOGLE_SYNC_START_SET_EVENT_COLORS":"Цвет события в Google Calendar","GOOGLE_SYNC_START_SET_EVENT_COLORS_BY_LABEL":"такой же, как цвет метки в Trello","GOOGLE_SYNC_START_SET_EVENT_COLORS_DEFAULT":"по умолчанию","GOOGLE_SYNC_START_SYNC_CARDS":"Синхронизировать с Google Calendar","GOOGLE_SYNC_START_SYNC_CARDS_ALL_CARDS":"все карточки","GOOGLE_SYNC_START_SYNC_CARDS_ONLY_MY_CARDS":"только карточки, назначенные на меня","GOOGLE_SYNC_STOP_CONFIRM":"Вы уверены, что хотите остановить синхронизацию с Google?","GOOGLE_SYNC_STOP_TITLE":"Остановить синхронизацию с Google","HALF_HOUR":"30 минут","HOW_TO_START_1":"Перейдите в Trello","HOW_TO_START_2":"Откройте любую доску","HOW_TO_START_3":"Нажмите на кнопку Planyway","HOW_TO_START_4":"Начните планировать","ICAL_EDIT_CHOOSE_COLOR":"Выбрать цвет календаря","ICAL_EDIT_PREVIEW_CARD_TEXT":"Карточка вашего календаря","ICAL_EDIT_PREVIEW_CARD_CALENDAR_TEXT":"Название календаря","ICAL_EXPORT_HOW_TO":"Вставьте данную ссылку в Ваш календарь согласно инструкции:","ICAL_EXPORT_TITLE":"Экспортировать календарь","ICAL_EXPORT_WARNING":"Закрытый адрес позволяет посмотреть всю информацию о карточках календаря. Делитесь им только с теми, кому доверяете","ICAL_IMPORT_INVALID_CALENDAR":"Календарь указан неверно или не может быть загружен","ICAL_IMPORT_INVALID_URL":"Пожалуйста, введите корректную ссылку","ICAL_IMPORT_HOW_TO":"Узнайте как получить ссылку на Ваш календарь:","ICAL_IMPORT_TITLE":"Добавить календарь","ICAL_IMPORT_URL_PLACEHOLDER":"Вставьте ссылку на календарь здесь","INVALID_TOKEN":"Пожалуйста, введите корректный токен Trello","LABELS":"Метки","LAST":"последний","LIGHT_THEME":"Светлая","LINK":"Ссылка","LINK_NAME_OPTIONAL":"Название ссылки (необязательно)","LOADING":"Загрузка...","LOCALE":"Региональные настройки","LOGIN_INVALID_TOKEN":"Похоже, что токен Trello не подходит. Попробуйте получить его ещё раз","MEMBER_INVITE_NOT_TEAM_MEMBER":"(не член команды)","MEMBER_INVITE_JOINED":"(присоединился)","MEMBER_INVITE_LINK_CREATE":"Создать ссылку","MEMBER_INVITE_LINK_DEACTIVATE":"Отключить ссылку","MEMBER_INVITE_LINK_SUBTITLE":"Любой, у кого есть ссылка, может присоединиться как участник доски.","MEMBER_INVITE_LINK_TITLE":"Пригласить с помощью ссылки","MEMBER_INVITE_NOT_FOUND":"Подходящих участников не найдено","MEMBER_INVITE_PLACEHOLDER":"Адрес электронной почты или имя","MEMBER_INVITE_TITLE":"Пригласить участников","MEMBER_MANAGE_ALL_MEMBERS_TITLE":"Участники","MEMBER_MANAGE_PLACEHOLDER":"Поиск участников по имени...","MEMBER_MANAGE_REMOVE_MEMBER_ACTION":"Удалить с доски...","MEMBER_MANAGE_REMOVE_MEMBER_TITLE":"Удалить участника?","MEMBER_MANAGE_REMOVE_MEMBER_WARNING":"Участник будет удалён со всех карточек этой доски. Он получит уведомление об этом.","MEMBER_MANAGE_SHOW_MEMBER_TITLE":"Участник","MONTHLY":"месяц","MULTIBOARD_FILTERS_TITLE":"Фильтры доски","NEVER":"Никогда","NEW_LIST":"(новый список)","NOT_LINKED":"не связывать","NO_COLOR":"Без цвета","NO_LABEL":"Без метки","OCCURRENCES":"повторов","ONE_DAY":"1 день","ONE_HOUR":"1 час","ON_DATE":"Дата","ON_DAY":"Каждый {pw{day}pw} день","ON_WEEKDAY":"Каждый {pw{weekdayOrder}pw} {pw{weekday}pw}","PASTE_ANY_LINK_HERE":"Введите ссылку...","PASTE_ANY_NAME_HERE":"Введите название...","PASTE_TRELLO_TOKEN_HERE":"Вставьте ваш токен сюда...","PRIORITY":"Приоритет","RECURRENT_CARD_DELETE_CONFIRM_TITLE":"Удалить повторяющуюся карточку","RECURRENT_CARD_EDIT_CONFIRM_TITLE":"Изменить повторяющуюся карточку","RECURRENT_CARD_OPEN_CONFIRM_TITLE":"Открыть повторяющуюся карточку","RECURRENT_CARD_REMOVE_CONFIRM_TITLE":"Удалить даты начала/окончания у повторяющейся карточки","RECURRENT_EVENT_DELETE_CONFIRM_TITLE":"Удалить повторяющееся событие","RECURRENT_EVENT_EDIT_CONFIRM_TITLE":"Изменить повторяющееся событие","RECURRENT_EVENT_OPEN_CONFIRM_TITLE":"Открыть повторяющееся событие","RECURRENT_IS_DANGEROUS":"Это действие нельзя будет отменить.","REMIND_BEFORE":"до начала","REMIND_BEFORE_1_DAY":"За 1 день до начала","REMIND_BEFORE_1_HOUR":"За 1 час до начала","REMIND_BEFORE_5_MINUTES":"За 5 минут до начала","REMIND_BEFORE_10_MINUTES":"За 10 минут до начала","REMIND_BEFORE_15_MINUTES":"За 15 минут до начала","REMIND_BEFORE_30_MINUTES":"За 30 минут до начала","REMIND_BEFORE_AT":"до начала в","REMIND_BEFORE_AT_1_WEEK_BEFORE_9_00":"За неделю в {pw{time}pw}","REMIND_BEFORE_AT_2_DAYS_BEFORE_9_00":"За 2 дня в {pw{time}pw}","REMIND_BEFORE_AT_DAY_BEFORE_9_00":"За день в {pw{time}pw}","REMIND_BEFORE_AT_DAY_BEFORE_23_30":"За день в {pw{time}pw}","REMIND_BEFORE_CUSTOM":"Другое","REMINDERS":"Напоминания","REMOVE_ATTACHMENT_CONFIRM":"Вы уверены, что хотите удалить вложение \\"{pw{name}pw}\\"?","REMOVE_ATTACHMENT_TITLE":"Удалить вложение из карточки","REMOVE_CARD_LINK_CONFIRM":"Вы уверены, что хотите удалить выбранную зависимость?","REMOVE_CARD_LINK_TITLE":"Удалить зависимость","REMOVE_ICAL_CONFIRM":"Вы уверены, что хотите удалить календарь \\"{pw{iCalName}pw}\\" из всех своих досок?","REMOVE_ICAL_TITLE":"Удалить календарь","REMOVE_PUBLIC_BOARD_CONFIRM":"Вы уверены, что хотите удалить доску \\"{pw{boardName}pw}\\" из своих досок?","REMOVE_PUBLIC_BOARD_TITLE":"Удалить общую доску","REMOVE_TRELLO_BOARD_CONFIRM":"Вы уверены, что хотите удалить эту доску из Trello? Это действие нельзя отменить.","REMOVE_TRELLO_BOARD_TITLE":"Удалить доску Trello","REMOVE_TRELLO_CARD_DATES_CONFIRM":"Вы уверены, что хотите удалить даты начала/окончания у выбранной карточки Trello?","REMOVE_TRELLO_CARD_DATES_CONFIRM_MULTIPLE":"Вы уверены, что хотите удалить даты начала/окончания у {pw{cardsCount}pw} карточек Trello?","REMOVE_TRELLO_CARD_DATES_TITLE":"Удалить из календаря","REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_CONFIRM":"Вы уверены, что хотите удалить даты начала/окончания у выбранного элемента чек-листа Trello?","REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_CONFIRM_MULTIPLE":"Вы уверены, что хотите удалить даты начала/окончания у {pw{cardsCount}pw} элементов чек-листов Trello?","REMOVE_TRELLO_CHECK_ITEM_CARD_DATES_TITLE":"Удалить из календаря","REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_CONFIRM":"Вы уверены, что хотите удалить дату у выбранного пользовательского поля Trello?","REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_CONFIRM_MULTIPLE":"Вы уверены, что хотите удалить дату у {pw{cardsCount}pw} пользовательских полей Trello?","REMOVE_TRELLO_CUSTOM_FIELD_CARD_DATES_TITLE":"Удалить из календаря","REPEAT_EVERY":"Повторять с интервалом","REPEAT_ON":"Дни повторения","REPORTS_EXPORT_ALL_CARDS":"Выберите интервал дат","REPORTS_EXPORT_TIME_RECORDS":"Выберите интервал дат","SAVE_NEW_CARD_CHANGES_CONFIRM":"Карточка не будет создана, если вы не сохраните изменения","SAVE_NEW_CARD_CHANGES_TITLE":"Сохранить изменения, внесённые в карточку?","SECOND":"второй","SEND_FEEDBACK_TITLE":"Запрос в техподдержку","SETTINGS_TITLE":"Настройки","CARD_POSITION_SETTINGS_TOP":"В начале списка задач","CARD_POSITION_SETTINGS_BOTTOM":"В конце списка задач","SET_FIRST_WEEK_DAY":"Первый день недели","SET_WORK_DAYS":"Рабочие дни","SET_WORK_HOURS":"Рабочие часы","SHARE_BOARD_TITLE":"Доступ к доске","SHARE_BOARD_URL_TITLE":"Ссылка на доску","SHORTCUTS_ARCHIVE_CARD_DESCRIPTION":"Архивировать карточку","SHORTCUTS_ASSIGN_YOURSELF_DESCRIPTION":"Назначить на себя","SHORTCUTS_DELETE_CARD_DESCRIPTION":"Удалить карточку","SHORTCUTS_DUPLICATE_CARD_DESCRIPTION":"Создать копию карточки","SHORTCUTS_MY_CARDS_DESCRIPTION":"Отфильтровать свои карточки","SHORTCUTS_QUICK_ADD_LABEL_DESCRIPTION":"Метка","SHORTCUTS_REMOVE_CARD_DESCRIPTION":"Удалить карточку из календаря","SHORTCUTS_SUBTITLE":"Наведите указатель мыши на карточку или откройте диалог редактирования карточки, чтобы использовать горячие клавиши","SHORTCUTS_TITLE":"Горячие клавиши","SHORTCUTS_TOGGLE_LABEL_DESCRIPTION":"Добавить/удалить метку","SHORTCUTS_TOGGLE_MEMBER_DESCRIPTION":"Добавить/удалить участника","SHORTCUTS_WATCH_DESCRIPTION":"Отслеживать","SHOW_CUSTOM_FIELDS_AS_CARDS":"Показывать поля пользователя как карточки","SIGN_IN_REQUIRED_1":"Необходима авторизация","SIGN_IN_REQUIRED_2":"Planyway установлен. Необходимо авторизоваться с помощью аккаунта Trello","START_DATE":"датой начала","START_TIME":"временем начала","STEP":"шаг","THIRD":"третий","TIME":"Время","TIME_RECORD":"Запись времени","TIME_RECORDS":"Записи времени","TO":"до","UNKNOWN_CARD":"Неизвестная карточка","USE_DUE_DATE_AS":"Связывать дату карточки с","USE_DUE_TIME_AS":"Связывать время карточки с","VIEW_BOARD_NAME":"Доска Trello","WEEKLY":"неделя","YEARLY":"год"},"MENU":{"ADD_BOARD_BY_URL":"Добавить доску по ссылке","ADD_BOARDS":"Добавить доски","ADD_CARD_LINK":"Добавить зависимость","ADD_CHECKLIST":"Добавить чек-лист","ADD_FILTER":"Добавить фильтр","ADD_ICAL_BY_URL":"Добавить календарь по ссылке","ADD_REMINDER":"Добавить напоминание","ADD_TIME_RECORD":"Записать время","ALL":"Все","APPEARANCE":"Внешний вид карточек","BOARD":"Доска","BOARD_EDIT":"Редактировать доску","BOARD_REMOVE":"Удалить доску","BOARDS_SEARCH_PLACEHOLDER":"Найти доску по названию...","CARD_ARCHIVE":"Архивировать","CARD_COPY_URL":"Копировать ссылку","CARD_DELETE":"Удалить","CARD_DUPLICATE":"Создать копию","CARD_LINK_BLOCKS":"Блокирует","CARD_LINK_IS_BLOCKED_BY":"Ожидает","CARD_MARK_COMPLETE":"Отметить как завершённую","CARD_MARK_INCOMPLETE":"Отметить как незавершённую","CARD_NUMBER":"Номер карточки","CARD_PRIORITY":"Приоритет","CARD_REMOVE":"Удалить из календаря","CARD_UNARCHIVE":"Разархивировать","CLEAR_ALL_FILTERS":"Очистить все","COPY_URL":"Копировать ссылку","CUSTOM_FIELDS":"Поля пользователя","CUSTOM_FILTERS":"Пользовательские фильтры","DATE_AND_TIME":"Дата и время","ENABLE_TRELLO_FILTERS":"Использовать фильтры Trello","EXPORT_TO_CSV":"Экспорт в CSV","FIELDS":"Поля","GROUP_BY":"Группировка","HELP":"Справка","HIDE_DAILY_ESTIMATE_FIELD":"Удалить оценку","HIGHLIGHT_TODAY":"Выделять текущий день","HOME":"Домашняя страница","IN_BOARD":"в доске","IN_CALENDAR":"в календаре","INVITE_MEMBERS":"Добавить участников","LABELS":"Метки","LABELS_SEARCH_PLACEHOLDER":"Найти метку по названию...","LISTS":"Списки","LISTS_SEARCH_PLACEHOLDER":"Найти список по названию...","LIVE_CHAT":"Чат с техподдержкой","LOG_OUT":"Выйти","MEMBER":"Участник","MEMBERS":"Участники","MEMBERS_SEARCH_PLACEHOLDER":"Найти участника по имени...","MONTH":"Месяц","NOTIFICATIONS_DISABLE":"Отключить уведомления","NOTIFICATIONS_DISABLING":"Уведомления отключаются...","NOTIFICATIONS_ENABLE":"Включить уведомления","NOTIFICATIONS_ENABLING":"Уведомления включаются...","ONE_DAY":"День","ORGANIZATIONS_SEARCH_PLACEHOLDER":"Найти команды по названию...","ORIENTATION":"Ориентация","ORIENTATION_BOTTOM":"Снизу","ORIENTATION_LEFT":"Слева","ORIENTATION_RIGHT":"Справа","ORIENTATION_TOP":"Вверху","PERSONAL_BOARDS":"Персональные доски","PRINT":"Печать","PRIORITY_HIGH":"Высокий","PRIORITY_LOW":"Низкий","PRIORITY_MEDIUM":"Средний","PRIORITY_UNSET":"Нет приоритета","PUBLIC_BOARDS":"Общие доски (только чтение)","QUICK_START":"Быстрый старт","RELOAD_CALENDAR":"Обновить","REMINDER_UNIT_MINUTES":"минуты","REMINDER_UNIT_HOURS":"часы","REMINDER_UNIT_DAYS":"дни","REMINDER_UNIT_WEEKS":"недели","SCALE_DAY":"День","SCALE_MONTH":"Месяц","SCALE_QUARTER":"Квартал","SCALE_WEEK":"Неделя","SCALE_YEAR":"Год","SELECT_ALL":"Выбрать все","SELECT_NONE":"Снять выделение","SEND_FEEDBACK":"Запрос в техподдержку","SHORTCUTS":"Горячие клавиши","SEARCH_PLACEHOLDER":"Найти по названию...","SETTINGS":"Настройки","SHOW_ALL_CALENDARS":"Показать все","SHOW_ALL_LABELS":"Показать все","SHOW_ALL_LISTS":"Показать все","SHOW_ALL_MEMBERS":"Показать всех","SHOW_ARCHIVED_CARDS":"Архивные карточки","SHOW_CHECK_ITEM_CARDS":"Элементы чек-листа","SHOW_DAILY_ESTIMATE_FIELD":"Добавить оценку","SHOW_MILESTONES":"Вехи","SHOW_NON_WORKING_HOURS":"Нерабочие часы","SHOW_ONLY_CURRENT_MEMBER":"Показать только меня","SHOW_ONLY_CURRENT_CALENDAR":"Показать только текущую доску","SHOW_ONLY_DEFAULT_LIST":"Показать только список по умолчанию","SHOW_ONLY_WITHOUT_LABELS":"Показать только карточки без меток","SHOW_TIME_RECORD_CARDS":"Записи времени","SHOW_WEEKENDS":"Выходные","SHOW_WEEK_NUMBERS":"Номера недель","STARRED_BOARDS":"Избранные доски","TIMELINE":"Таймлайн","THREE_DAY":"3 дня","TOUR":"Обзор продукта","UNSCHEDULED":"Незапланированные","UNWATCH":"Отписаться","VIEW":"Вид","WATCH":"Подписаться","WEEK":"Неделя"},"MISC":{"ADD_COMMENT":"Добавить комментарий","ADD_DATE":"Добавить дату","ADD_TITLE":"Добавить название","ALL_DAY_SECTION":"Весь день","ALTERNATIVE_SIGN_IN":"Нет аккаунта? <span class=\\"pw-link pw-link--blue pw-js-sign-in-link\\">Войти</span> через Google, Microsoft или Apple!","AUTHORIZE_GOOGLE_LABEL":"Необходимо разрешить <b>Planyway</b> работать с вашим Google Calendar","AUTHORIZE_GOOGLE_CONSENT":"Нажимая «{pw{btnText}pw}» вы соглашаетесь с <a href=\\"{pw{termsOfUseUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Условиями использования</a> и <a href=\\"{pw{privacyPolicyUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Политикой конфиденциальности</a>","BOARD_BACKGROUND":"Цвет фона доски","BOARD_NAME":"Название доски","BOARD_ORGANIZATION":"Команда доски","BOARD_VISIBILITY":"Видимость доски","CHECKLIST":"Чек-лист","CONNECT_TO_TRELLO_BY_TOKEN_CONSENT":"Предоставляя токен Trello вы соглашаетесь с <a href=\\"{pw{termsOfUseUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Условиями&nbsp;использования</a> и <a href=\\"{pw{privacyPolicyUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Политикой&nbsp;конфиденциальности</a>","CONNECT_TO_TRELLO_CONSENT":"Нажимая «{pw{btnText}pw}» вы соглашаетесь с <a href=\\"{pw{termsOfUseUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Условиями&nbsp;использования</a> и <a href=\\"{pw{privacyPolicyUrl}pw}\\" target=\\"_blank\\" rel=\\"noreferrer\\">Политикой&nbsp;конфиденциальности</a>","CONNECT_TO_TRELLO_TITLE":"Привет!","CONNECT_TO_TRELLO_WELCOME":"Необходимо подключить Planyway к вашему аккаунту Trello","CUSTOM":"Другое...","ENTER_CARD_TITLE":"Введите название карточки...","ENTER_CHECK_ITEM_TITLE":"Введите название элемента...","ENTER_DAILY_ESTIMATE":"Суточная оценка...","ENTER_TASK_LIST_TITLE":"Введите название списка...","FEW_BOARDS_AVAILABLE":"Доступно: {pw{availableBoardsCount}pw}","GET_APPS":"Приложения","GET_TRELLO_TOKEN_TEXT":"Возьмите ваш токен Trello","GET_TRELLO_TOKEN_LINK":"здесь","KANBAN":"В виде канбан","LIST":"В виде списка","LOAD_MEMBER_INFO_ERROR":"Не удалось подключиться к Trello. Planyway недоступен","MILESTONES":"Вехи","MISSING_TRELLO_TOKEN_ERROR":"Не удалось получить токен Trello. Пожалуйста, закройте эту страницу и попробуйте ещё раз","NO_BOARD_PLACEHOLDER":"Выберите доску...","NO_BOARDS":"Похоже, у вас ещё нет ни одной доски<br>Нажмите \\"Создать доску\\", чтобы продолжить работу с новой доской","NO_LABEL":"Без метки","NO_ORGANIZATION_PLACEHOLDER":"Выберите организацию...","NO_TITLE":"(без названия)","ONBOARDING_SHOW_BUTTON":"Нажмите здесь, чтобы открыть Planyway","ONBOARDING_SKIP":"Пропустить","ONBOARDING_OPEN_BOARD":"Привет!<br>Открой любую <b>доску Trello</b> и начни использовать Planyway","ONBOARDING_SIGN_IN":"Привет!<br>Для начала нужно авторизоваться в Trello","OPTIONAL":"необязательно","PER_DAY":"в день","PLANYWAY":"Planyway","PUSH_NOTIFICATIONS_ENABLE_BANNER_TEXT":"Включить уведомления для рабочего стола?","SEARCH_LINKED_CARD_PLACEHOLDER":"Найти зависимую карточку","SEARCH_PARENT_CARD_PLACEHOLDER":"Найти родительскую карточку","SELECT_DATE":"Выберите дату","SELECT_END_DATE":"Выберите дату окончания","SELECT_START_DATE":"Выберите дату начала","SET_DURATION":"Введите длительность","TOTAL":"Общее время","TRELLO_BOARD":"Доска Trello","TRELLO_TOKEN_LABEL":"Ваш токен Trello:","UNASSIGNED_MEMBER_FULL_NAME":"Нет участников","UNASSIGNED_MEMBER_INITIALS":"?","YOU_ARE_LOGGED_IN_AS":"Вы вошли как"},"NOTIFICATIONS":{"ACCEPT_INVITE_TO_BOARD_ERROR":"Не удалось принять приглашение на добавление в доску","ADD_CUSTOM_FILTER_ERROR":"Не удалось добавить пользовательский фильтр","ADD_MEMBER_TO_BOARD_ERROR":"Не удалось добавить участника","ATTACH_MAX_FILE_SIZE_WARNING":"Не удалось прикрепить файл \\"{pw{fileName}pw}\\". Превышен максимальный размер файла 10 МБ.","BOARD_IS_NOT_FOUND_ERROR":"Не удалось найти запрашиваемую доску","CARD_IS_NOT_FOUND_ERROR":"Не удалось найти запрашиваемую карточку","CONTACT_US_ERROR":"Не удалось отправить сообщение. Пожалуйста, попробуйте ещё раз","COPY_CARD_URL_ERROR":"Не удалось скопировать адрес карточки","COPY_TRELLO_TOKEN_ERROR":"Не удалось скопировать токен Trello","CREATE_BOARD_ERROR":"Не удалось создать новую доску","CREATE_GOOGLE_EVENT_ERROR":"Не удалось создать событие Google","CREATE_TRELLO_CARD_ERROR":"Не удалось создать карточку Trello","CREATE_INVITE_LINK_ERROR":"Не удалось создать ссылку для приглашения участников","CREATE_TRELLO_CHECK_ITEM_CARD_ERROR":"Не удалось создать элемент чек-листа Trello","CREATE_TRELLO_TIME_RECORD_CARD_ERROR":"Не удалось создать запись времени Trello","DELETE_GOOGLE_EVENT_ERROR":"Не удалось удалить событие Google","DELETE_INVITE_LINK_ERROR":"Не удалось удалить ссылку для приглашения участников","DELETE_TRELLO_CARD_ERROR":"Не удалось удалить карточку Trello","DELETE_TRELLO_CHECK_ITEM_CARD_ERROR":"Не удалось удалить элемент чек-листа Trello","CREATE_TRELLO_LABEL_ERROR":"Не удалось создать метку Trello","DELETE_TRELLO_TIME_RECORD_CARD_ERROR":"Не удалось удалить запись времени","DUPLICATE_CARD_ERROR":"Не удалось создать копию карточки","ERROR_TITLE":"Ошибка Planyway:","FEEDBACK_FILE_LIMIT_REACHED":"Добавлено максимально возможное количество файлов","FEEDBACK_FILE_NOT_IMAGE":"Файл не является изображением: {pw{fileName}pw}","FEEDBACK_FILE_SIZE_LIMIT_REACHED":"Достигнут максимальный размер файлов","ICAL_EXPORT_DELETE_ERROR":"Не удалось удалить ссылку на календарь","ICAL_EXPORT_DELETE_SUCCESS":"Ссылка на календарь успешно удалена","ICAL_EXPORT_GET_ERROR":"Не удалось получить ссылку на календарь","ICAL_EXPORT_POST_ERROR":"Не удалось создать ссылку на новый календарь","ICAL_EXPORT_POST_SUCCESS":"Новая ссылка на календарь успешно создана","INFO_TITLE":"Уведомление Planyway:","LOAD_CARDS_ERROR":"Не удалось загрузить карточки календаря","LOAD_MEMBER_INFO_ERROR":"Не удалось подключиться к Trello. Planyway недоступен","LOAD_PRICING_ERROR":"Не удалось загрузить цены","LOAD_RESOURCES_ERROR":"Не удалось загрузить ресурсы календаря","LOAD_TRELLO_COMMENTS_ERROR":"Не удалось загрузить комментарии","LOAD_TRELLO_LABEL_ERROR":"Не удалось загрузить метку Trello","LOCALE_CHANGED_WARNING":"Ваши региональные настройки были изменены. Обновите страницу, чтобы увидеть изменения","OPEN_CARD_ERROR":"Не удалось открыть карточку календаря","PLANYWAY_ACTIVATE_TRIAL_ERROR":"Не удалось активировать пробную версию","PLANYWAY_ACTIVATE_TRIAL_ERROR_NO_REMAINING_TRIALS":"Не удалось активировать пробную версию. Не осталось доступных активаций","PLANYWAY_ACTIVATE_TRIAL_ERROR_PAID_ALREADY_ACTIVE":"Не удалось активировать пробную версию. Платная лицензия уже активна","PLANYWAY_ACTIVATE_TRIAL_ERROR_WITH_MESSAGE":"Не удалось активировать пробную версию. {pw{message}pw}","PLANYWAY_GOOGLE_AUTH_FAILED":"Не удалось авторизовать аккаунт Google","PLANYWAY_GOOGLE_AUTH_INITIALIZATION_FAILED":"Не удалось авторизовать аккаунт Google. Пожалуйста, отключите блокировку сторонних файлов cookie в настройках браузера, обновите страницу и попробуйте снова. В случае повторного возникновения ошибки, пожалуйста, сообщите об этом нам","PLANYWAY_GOOGLE_AUTH_POPUP_BLOCKED":"Не удалось авторизовать аккаунт Google. Пожалуйста, разрешите показ всплывающих окон для сайта planyway.com в настройках браузера","PLANYWAY_GOOGLE_CONNECT_ERROR_WITH_MESSAGE":"Не удалось подключить аккаунт Google Calendar. {pw{message}pw}","PLANYWAY_GOOGLE_CONNECT_FAILED":"Не удалось подключить аккаунт Google Calendar","PLANYWAY_GOOGLE_CONNECT_FAILED_NOT_CONNECTED":"Не удалось подключить аккаунт Google Calendar, Google Calendar отключен","PLANYWAY_GOOGLE_CONNECT_FAILED_NOT_AUTHORIZED":"Не удалось подключить аккаунт Google Calendar, доступ к вашему Google календарю не разрешен","PLANYWAY_GOOGLE_CONNECT_FAILED_G_SUITE_ERROR":"Не удалось подключить аккаунт Google Calendar, доступ к приложениям Google ограничен политикой безопасности вашей организации. Пожалуйста, обратитесь к вашему системному администратору за помощью","PLANYWAY_GOOGLE_DISCONNECT_ERROR_WITH_MESSAGE":"Не удалось отключить аккаунт Google Calendar. {pw{message}pw}","PLANYWAY_GOOGLE_DISCONNECT_FAILED":"Не удалось отключить аккаунт Google Calendar","PLANYWAY_INITIALIZATION_ERROR":"Не удалось запустить Planyway","PLANYWAY_INVITE_ERROR_TOKEN_INVALID":"Не удалось обработать приглашение. Токен приглашения недействителен","PLANYWAY_INVITE_ERROR_UNCONFIRMED_MEMBER":"Не удалось принять приглашение. Подтвердите Ваш аккаунт Trello, перейдя по ссылке из письма, которое Вам прислал Trello при регистрации","PLANYWAY_INVITE_ERROR_WITH_MESSAGE":"Не удалось обработать приглашение. {pw{message}pw}","PLANYWAY_MEMBER_LICENSE_LOADING_ERROR":"Не удалось подключиться к Planyway","PLANYWAY_SYNC_GOOGLE_AUTH_ERROR":"Ошибка синхронизации с Google: Календарь Google недоступен","PLANYWAY_SYNC_GOOGLE_CALENDAR_ERROR":"Ошибка синхронизации с Google: Календарь Google не найден","PLANYWAY_SYNC_GOOGLE_G_SUITE_ERROR":"Ошибка синхронизации с Google: Доступ к приложениям Google ограничен политикой безопасности вашей организации. Пожалуйста, обратитесь к вашему системному администратору за помощью","PLANYWAY_SYNC_LICENSE_EXPIRED_ERROR":"Ошибка синхронизации с Google: Отсутствует или истекла лицензия Planyway","PLANYWAY_SYNC_START_FAILED":"Не удалось запустить синхронизацию с Google","PLANYWAY_SYNC_START_FAILED_NOT_AUTHORIZED":"Не удалось запустить синхронизацию с Google, доступ к вашему Google календарю не разрешен","PLANYWAY_SYNC_START_FAILED_NOT_LICENSED":"Не удалось запустить синхронизацию с Google, отсутствует или истекла лицензия Planyway","PLANYWAY_SYNC_START_FAILED_WITH_MESSAGE":"Не удалось запустить синхронизацию с Google. {pw{message}pw}","PLANYWAY_SYNC_START_GOOGLE_AUTH_ERROR":"Не удалось запустить синхронизацию с Google, календарь Google недоступен","PLANYWAY_SYNC_START_GOOGLE_CALENDAR_ERROR":"Не удалось запустить синхронизацию с Google, календарь Google не найден","PLANYWAY_SYNC_START_GOOGLE_G_SUITE_ERROR":"Не удалось запустить синхронизацию с Google, доступ к приложениям Google ограничен политикой безопасности вашей организации. Пожалуйста, обратитесь к вашему системному администратору за помощью","PLANYWAY_SYNC_START_LONGER_THEN_USUAL":"Запуск синхронизации с Google занимает больше времени, чем обычно. Пожалуйста, попробуйте позже, если это необходимо","PLANYWAY_SYNC_START_TRELLO_AUTH_ERROR":"Не удалось запустить синхронизацию с Google, нет доступа к доске Trello","PLANYWAY_SYNC_START_TRELLO_BOARD_ERROR":"Не удалось запустить синхронизацию с Google, доска Trello не найдена","PLANYWAY_SYNC_STARTED":"Синхронизация с Google запущена","PLANYWAY_SYNC_STATUS_LOADING_ERROR":"В настоящий момент не удаётся проверить статус синхронизации с Google...","PLANYWAY_SYNC_STATUS_LOADING_ERROR_WITH_MESSAGE":"Не удаётся проверить статус синхронизации с Google. {pw{message}pw}","PLANYWAY_SYNC_STOP_FAILED":"Не удалось остановить синхронизацию с Google","PLANYWAY_SYNC_STOP_FAILED_WITH_MESSAGE":"Не удалось остановить синхронизацию с Google. {pw{message}pw}","PLANYWAY_SYNC_STOP_LONGER_THEN_USUAL":"Остановка синхронизации с Google занимает больше времени, чем обычно. Пожалуйста, попробуйте позже, если это необходимо","PLANYWAY_SYNC_STOPPED":"Синхронизация с Google остановлена","PLANYWAY_SYNC_TRELLO_AUTH_ERROR":"Ошибка синхронизации с Google: Нет доступа к доске Trello","PLANYWAY_SYNC_TRELLO_BOARD_ERROR":"Ошибка синхронизации с Google: Доска Trello не найдена","PLANYWAY_SYNC_TRELLO_LIMIT_ERROR":"Ошибка синхронизации с Google: Превышено количество карточек Trello","PLANYWAY_SYNC_UNKNOWN_ERROR":"Ошибка синхронизации с Google: Неизвестная ошибка, пожалуйста обновите Planyway","PROGRESS_TITLE":"Пожалуйста подождите:","PUSH_NOTIFICATIONS_BLOCKED_ERROR":"Не удалось включить push-уведомления так как они заблокированы настройками браузера","PUSH_NOTIFICATIONS_DISABLE_ERROR":"Не удалось отключить push-уведомления. Пожалуйста, попробуйте позже","PUSH_NOTIFICATIONS_ENABLE_ERROR":"Не удалось включить push-уведомления. Пожалуйста, попробуйте позже","PUSH_NOTIFICATIONS_REGISTER_LONGER_THAN_USUAL":"Регистрация подписки на push-уведомления занимает больше времени, чем обычно. Пожалуйста, попробуйте позже, если это необходимо","PUSH_NOTIFICATIONS_UNREGISTER_LONGER_THAN_USUAL":"Отмена регистрации подписки на push-уведомления занимает больше времени, чем обычно. Пожалуйста, попробуйте позже, если это необходимо","REMOVE_BOARD_ERROR":"Не удалось удалить доску","REMOVE_CARD_ERROR":"Не удалось удалить карточку из календаря","REMOVE_CUSTOM_FILTER_ERROR":"Не удалось удалить пользовательский фильтр","REMOVE_MEMBER_FROM_BOARD_ERROR":"Не удалось удалить участника","REMOVE_TRELLO_CARD_ERROR":"Не удалось удалить даты начала/окончания у карточки Trello","REMOVE_TRELLO_CUSTOM_FIELD_CARD_ERROR":"Не удалось удалить даты начала/окончания у элемента чек-листа Trello","REMOVE_TRELLO_CHECK_ITEM_CARD_ERROR":"Не удалось удалить дату у пользовательского поля Trello","REPORT_ERROR":"Не удалось построить отчёт","SEND_FEEDBACK_ERROR":"Не удалось отправить запрос в техподдержку","SEND_FEEDBACK_SUCCESS":"Ваш запрос отправлен","SUCCESS_TITLE":"Успешно выполнено:","TASK_LIST_CREATE_ERROR":"Не удалось создать новый список","TASK_LIST_DELETE_ERROR":"Не удалось удалить список","TASK_LIST_UPDATE_ERROR":"Не удалось обновить список","TEAMPLANNER_DROP_MEMBER_NOT_EXIST_WARNING":"Только участники доски \\"{pw{boardName}pw}\\" могут быть назначены","TIME_ZONE_CHANGED":"Мы заметили, что вы изменили часовой пояс. Пожалуйста, обновите Planyway, чтобы изменения вступили в силу","TRELLO_CARD_DROP_ERROR":"Не удалось перенести карточку из Trello","TRELLO_TOKEN_COPIED_TO_CLIPBOARD":"Токен Trello скопирован в буфер обмена. Можете закрыть эту страницу","UPDATE_BOARD_ERROR":"Не удалось обновить доску","UPDATE_BOARD_PERMISSION_ERROR":"Не удалось обновить настройки доступа к доске","UPDATE_CARD_ERROR":"Не удалось обновить карточку в календаре","UPDATE_RECURRING_CARD_ERROR":"Не удалось обновить повторяющуюся карточку","URL_COPIED_TO_CLIPBOARD":"Ссылка скопирована в буфер обмена","WARNING_TITLE":"Предупреждение Planyway:"},"TOOLTIPS":{"ADD_ATTACHMENT_OR_DROP_FILES":"Добавить вложение или перетащить файлы","ADD_CARD_LINK":"Добавить зависимость","ADD_CHECK_ITEM":"Добавить элемент чек-листа","ADD_LIST":"Добавить список","ADD_REMINDER":"Добавить напоминание","ADD_TIME_RECORD":"Записать время","ASSIGN":"Добавить участника","BOARD":"Доска","BOARDS":"Доски","BOARD_ACTIONS":"Действия с доской","CALENDAR":"Календарь","CALENDAR_HIDE":"Скрыть Planyway","CALENDAR_SHOW":"Показать Planyway","CALENDAR_UNAVAILABLE_LOADING":"Planyway загружается...","CARD_LINK_ERROR_LINKS_DISABLED":"Зависимая карточка не может иметь зависимостей","CARD_LINK_ERROR_NO_CARD":"Зависимая карточка не загружена","CARD_LINK_ERROR_NO_LINK":"Зависимость была удалена из зависимой карточки","CARD_LINKS":"Зависимости","CARD_MENU":"Меню карточки","CHECK_ITEM":"Элемент чек-листа","CLEAR":"Очистить","COPY_TO_CLIPBOARD":"Скопировать в буфер обмена","CUSTOM_FIELD":"Пользовательское поле","DAY_BACKWARD":"Предыдущий день","DAY_FORWARD":"Следующий день","DATE":"Дата","DATES":"Даты","DELETE":"Удалить","DELETE_ITEM":"Удалить элемент","DESCRIPTION":"Описание","DURATION":"Длительность","EDIT":"Редактировать","EDIT_ICAL":"Редактировать календарь","DAILY_ESTIMATE":"Суточная оценка","EXPAND_CHECK_ITEMS":"Развернуть элементы чек-листов","FILTER_CARDS":"Фильтровать карточки","FULLSCREEN":"На весь экран","HELP":"Справка","HIDE":"Скрыть","HIDE_CHAT_WINDOW":"Скрыть окно чата","HIDE_DAILY_ESTIMATE_FIELD":"Удалить оценку","HIDE_SIDEBAR":"Скрыть главное меню","ICAL_EXPORT_DELETE":"Удалить ссылку","ICAL_EXPORT_RESET":"Сбросить ссылку","IN_BOARD":"в доске","IN_CALENDAR":"в календаре","IN_CARD":"в карточке","IN_CHECKLIST":"в чек-листе","IN_LIST":"в списке","LABELS":"Метки","LIST":"Список","MARK_COMPLETE":"Отметить как завершённую","MARK_INCOMPLETE":"Отметить как незавершённую","MEMBER":"Участник","MEMBERS":"Участники","MILESTONES":"Вехи","MONTH_BACKWARD":"Предыдущий месяц","MONTH_FORWARD":"Следующий месяц","NOTIFICATIONS_ARE_DISABLED":"Уведомления для рабочего стола сейчас отключены. Нажмите, чтобы включить","QUARTER_BACKWARD":"Предыдущий квартал","QUARTER_FORWARD":"Следующий квартал","PARENT_CARD":"Родительская карточка","PRIORITY":"Приоритет","RECURRENT_RULE":"Правило повторения","REMOVE":"Удалить","REMOVE_DATE":"Удалить дату","REMOVE_DATES":"Удалить даты","REMOVE_FROM_CALENDAR":"Удалить из календаря","REPLY":"Ответить","SCALE_IN":"Увеличить масштаб","SCALE_OUT":"Уменьшить масштаб","SETTINGS":"Настройки","SET_DATES":"Задать даты","SHARE_BOARD":"Доступ к доске","SHOW_DAILY_ESTIMATE_FIELD":"Добавить оценку","SHOW_CHAT_WINDOW":"Показать окно чата","SHOW_MULTIBOARD_FILTER_MENU":"Фильтровать карточки из текущей доски","SHOW_SIDEBAR":"Показать главное меню","SYNC_ALL_CARDS":"все","SYNC_AVAILABILITY":"Показать как","SYNC_AVAILABILITY_BUSY":"занято","SYNC_AVAILABILITY_FREE":"доступно","SYNC_COMPLETED_CARDS":"Показать завершённые","SYNC_EXCLUDE_COMPLETED_CARDS":"нет","SYNC_MARK_COMPLETED_CARDS":"да","SYNC_ONLY_MY_CARDS":"только назначенные на меня","SYNC_OPTIONS_TITLE":"Настройки текущей синхронизации:","SYNC_SET_EVENT_COLORS":"Цвет события","SYNC_SET_EVENT_COLORS_BY_LABEL":"как в Trello","SYNC_SET_EVENT_COLORS_DEFAULT":"по умолчанию","SYNC_WITH_GOOGLE_CALENDAR":"Карточки","TASK_LIST_HIDE":"Скрыть список карточек","TASK_LIST_SHOW":"Показать список карточек","UNWATCH":"Отписаться","WATCH":"Подписаться","WEEK_BACKWARD":"Предыдущая неделя","WEEK_FORWARD":"Следующая неделя","YEAR_BACKWARD":"Предыдущий год","YEAR_FORWARD":"Следующий год"}}')},588:function(e,t){},589:function(e,t){},599:function(e,t){},600:function(e,t){},620:function(e,t){},622:function(e,t){},623:function(e,t){},624:function(e,t){},625:function(e,t){},633:function(e,t){},639:function(e,t){},642:function(e,t){},658:function(e,t,r){e.exports=r.p+"../images/9b95e997-d5dc-4417-8a82-e9a82908d1b2.svg"},659:function(e,t,r){e.exports=r.p+"../images/6aa35196-e996-4024-952f-1e9e1eb031bd.svg"},660:function(e,t,r){e.exports=r.p+"../images/7c7fc7d0-2ad2-4008-8a68-179fc7394992.svg"},662:function(e,t,r){e.exports=r.p+"../images/a3b9afef-008c-4303-ae39-e13c55a31ddd.svg"},663:function(e,t,r){e.exports=r.p+"../images/90c2f837-07f2-4b9d-b188-e1eb2352023f.svg"},664:function(e,t,r){e.exports=r.p+"../images/ebcded1c-8578-447d-87ba-0861c6360a35.svg"},665:function(e,t,r){e.exports=r.p+"../images/18b3ddc4-4c4c-4de9-95f9-9a44ffcf89b8.svg"},666:function(e,t,r){e.exports=r.p+"../images/133e4292-f2e8-481b-beeb-1002a95ed17e.png"},667:function(e,t,r){e.exports=r.p+"../images/2b891587-051d-48e8-b68d-fd3a8e3542e0.png"},668:function(e,t,r){e.exports=r.p+"../images/42083b4c-261a-421e-81dc-40c5a838c9fd.png"},669:function(e,t,r){e.exports=r.p+"../images/4a4c1bd5-c711-4086-b1f2-c4fa28467c64.png"},670:function(e,t,r){e.exports=r.p+"../images/3fdfb1f6-6ba6-4320-bc41-c30ed9d44eda.svg"},671:function(e,t,r){e.exports=r.p+"../images/c9d72657-bf0f-41f3-9697-16082164026c.svg"},672:function(e,t,r){e.exports=r.p+"../images/6c8fe8e6-f5bc-4875-a292-ecfbbb14e8f3.svg"},673:function(e,t,r){e.exports=r.p+"../images/417e64dc-65e5-42e8-ae90-9b178e3a4da4.png"},674:function(e,t,r){e.exports=r.p+"../images/698ebb30-0d8d-4f53-afd1-63c8a3ba445f.png"},675:function(e,t,r){e.exports=r.p+"../images/1d4e8d4c-0d92-41fa-a496-3c8ec8696dbd.png"},676:function(e,t,r){e.exports=r.p+"../images/fdf07d16-1bf6-4a1a-8c9f-523eb625282a.gif"},677:function(e,t,r){e.exports=r.p+"../images/819ed28b-be42-42f8-9179-616ea49dffc9.gif"},678:function(e,t,r){e.exports=r.p+"../images/22cf5eca-bea1-4c8a-b5df-edb69771f9d6.gif"},679:function(e,t,r){e.exports=r.p+"../images/c3667a71-5a59-4562-adb8-e894acd054d1.gif"},681:function(e,t,r){e.exports=r.p+"../images/12e0e1d9-b618-4389-a54b-5ba0c04baecb.svg"},7:function(e,t,r){"use strict";r.d(t,"S",(function(){return i})),r.d(t,"B",(function(){return a})),r.d(t,"R",(function(){return n})),r.d(t,"T",(function(){return o})),r.d(t,"p",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"l",(function(){return c})),r.d(t,"G",(function(){return h})),r.d(t,"N",(function(){return u})),r.d(t,"c",(function(){return p})),r.d(t,"x",(function(){return m})),r.d(t,"Q",(function(){return f})),r.d(t,"o",(function(){return y})),r.d(t,"q",(function(){return v})),r.d(t,"I",(function(){return _})),r.d(t,"y",(function(){return g})),r.d(t,"W",(function(){return C})),r.d(t,"J",(function(){return k})),r.d(t,"L",(function(){return D})),r.d(t,"E",(function(){return E})),r.d(t,"F",(function(){return b})),r.d(t,"C",(function(){return w})),r.d(t,"d",(function(){return S})),r.d(t,"P",(function(){return T})),r.d(t,"D",(function(){return A})),r.d(t,"g",(function(){return I})),r.d(t,"s",(function(){return R})),r.d(t,"r",(function(){return O})),r.d(t,"e",(function(){return P})),r.d(t,"f",(function(){return L})),r.d(t,"K",(function(){return M})),r.d(t,"V",(function(){return N})),r.d(t,"O",(function(){return B})),r.d(t,"u",(function(){return F})),r.d(t,"t",(function(){return $})),r.d(t,"i",(function(){return x})),r.d(t,"k",(function(){return G})),r.d(t,"A",(function(){return z})),r.d(t,"H",(function(){return U})),r.d(t,"M",(function(){return W})),r.d(t,"v",(function(){return j})),r.d(t,"j",(function(){return H})),r.d(t,"h",(function(){return V})),r.d(t,"U",(function(){return Y})),r.d(t,"z",(function(){return K})),r.d(t,"w",(function(){return X})),r.d(t,"n",(function(){return q})),r.d(t,"m",(function(){return Q}));const i="Planyway Calendar",a="Planyway",n="c05e9168828198b995a2175af18e5686",o="https://trello-logos.s3.amazonaws.com",s="442776835437-hdtlsqk5d7vudej196jqomact0p2onj8.apps.googleusercontent.com",l="7b125b529ffb0de07329e198d3b3cbde",d="25649807-3376-4c5d-ae98-0d2bf8dd4a5a",c="https://export.planyway.com",h="https://planyway.com/api/p",u="https://planyway.com/api/s",p="https://planyway.com/api/b",m="https://planyway.com/api/n",f="https://planyway.com/api/t",y="https://www.googleapis.com/calendar/v3",v="https://www.googleapis.com/oauth2/v3",_="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzHr6/s9kR3hn1ei03DC6\nA4BkWxD7ZeOUUD9FioRbPyYcaE5k6RopsaDGPw+Z8aDR3P6GCPe51QhtilyqWULv\nET4+Xqji4cJ2EjsDEZHOB1mfqs/dmTMVoDGNlsmEXBHOjPxNl6Krg7LK1edveN95\nYeV520wmDOIvPH5QYVKZzqZ7t26gi7zBTJpUzQ0gWM6MYoozgz8HIGad+wbHmHez\n4EIzVN00gbRnfsh+rshbbogEZ7RlNWadbgl0LJtcQRFmOgZrDIDhxd9wghG5FC4h\nY54M3JE1YXOXasJlwtUEMlFFsQGCMgtMzSpvNFWhHgwa/7Ntoa1HCjh4D1103jvY\nBQIDAQAB\n-----END PUBLIC KEY-----",g="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAn9KMm0FMa+yf5J5b/bIW\n5ktSpmJTduVDYOxxU39HUGFUDBFbSApBjL/dStEjtm3I8emeVvrC7G5go5ca2xd0\nbFUyOUygRCHvZU/g3vPby4r+paPouul0P37T+IWkNAoa91Zk0XswRtge/+3cSU+i\n+vH6JCKkdKK0IqqivYQ979ObDomc4re6kzWJd9Ee4rU0J0naME1+Ffj1RbJO43Kg\n4PkZZTAVhmbgAzkcTmHs/GMDBrXtHACCkYLctY1N8QtfExI5Lr1RFQN9cuDFZaV6\nT/hgkp08WpnkGjqstR8sgazHs5zZvlHF5Qe6MeuR3dHirGCSbnkZmdjvCF8T+xeq\n1QIDAQAB\n-----END PUBLIC KEY-----",C="BMtojXzd4NIHuVPeQRNc5KxFfi1ald8vaPAeX14AUpu6-b0JpZCVyA-TxquggLgPR1afbrJSSn6y8G3LdaHzino",k="https://planyway.com",D="https://planyway.com/app",E=`${k}/profile?tab=billing`,b=`${k}/profile?tab=users`,w=`${k}/pricing`,S=`${k}/blog`,T=`${k}/legal/terms-of-use`,A=`${k}/legal/privacy-policy`,I=`${k}/app-changelog/app-changelog.json`,R=`${k}/help`,O=`${R}/getting-started`,P="boardId",L="cardId",M="source",N="type",B="teams",F="inviteToken",$="pw_ignored_rejection",x="pwDraggableCard",G="000000000000000000000000",z="pwPersonalBoards",U="pwPublicBoards",W="pwStarredBoards",j="pwMilestones",H="pwDummyResource",V="customField_",Y=16384,K="?planyway=onboarding",X="aae61b93-6bb0-4886-85b4-ce4a4353f4cb",q="https://wchat.freshchat.com",Q="29ef6cd6-8424-4d56-975c-fc43d60bdcda"},720:function(e,t,r){e.exports=r.p+"../images/45d41ebb-3aaf-4a06-9c5a-1dfd989335fe.svg"},750:function(e,t,r){e.exports=r.p+"../images/06d9d65b-777b-479f-a5ba-3808bdbc6da0.svg"},751:function(e,t,r){e.exports=r.p+"../images/36c96270-3b4f-4bfa-9a5e-f907bc413a96.svg"},752:function(e,t,r){e.exports=r.p+"../images/68b7278f-1aaa-4c2d-8789-297ad5ff688b.svg"},753:function(e,t,r){e.exports=r.p+"../images/425ad698-1293-47e5-94e5-bb71ebae8384.svg"},754:function(e,t,r){e.exports=r.p+"../images/81085b50-862c-450e-ad93-77ac54bf85e2.svg"},755:function(e,t,r){e.exports=r.p+"../images/1158f3fc-61b9-4b77-a520-40be1bd184f1.svg"},88:function(e,t,r){"use strict";r.d(t,"a",(function(){return ObservableMap}));var i=r(29),a=r.n(i),n=r(33),o=r.n(n),s=r(22),l=r.n(s),d=r(20),c=r.n(d),h=r(5),u=r.n(h),p=r(2),m=r.n(p),f=r(27),y=r.n(f),v=r(16),_=r.n(v),g=r(19),C=r.n(g);class ObservableMap{constructor(e){this._keyName=e,this._innerMap=new C.a,this._cardsListeners={added:new _.a,updated:new _.a,deleted:new _.a,cleared:new _.a}}addEventListener(e,t){let r=this._cardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.add(t)}removeEventListener(e,t){let r=this._cardsListeners[e];if(!r)throw new Error(`Unsupported event type: ${e}`);r.delete(t)}add(e,t={}){var r;let i=e[this._keyName];if(!i)throw new Error(`Cannot find key "${this._keyName}" on object:\n${y()(e,null,4)}`);this._innerMap.set(i,e),m()(r=this._cardsListeners.added).call(r,(r=>r(e,t)))}update(e,t={}){var r;let i=e[this._keyName];if(!i)throw new Error(`Cannot find key "${this._keyName}" on object:\n${y()(e,null,4)}`);let a=this._innerMap.get(i);a&&a.clone&&(a=a.clone()),this._innerMap.set(i,e),m()(r=this._cardsListeners.updated).call(r,(r=>r(e,{...t,oldValue:a})))}delete(e,t={}){var r;let i=e[this._keyName];i||(i=e);let a=this._innerMap.get(i);this._innerMap.delete(i)&&m()(r=this._cardsListeners.deleted).call(r,(e=>e(a,t)))}clear(){var e;this._innerMap.clear(),m()(e=this._cardsListeners.cleared).call(e,(e=>e()))}get(e){return this._innerMap.get(e)}has(e){return this._innerMap.has(e)}find(e){var t;return u()(t=this._innerMap).call(t,(t=>e(t)))}some(e){var t;return c()(t=this._innerMap).call(t,(t=>e(t)))}keys(){var e;return l()(o()(e=this._innerMap).call(e))}values(){var e;return l()(a()(e=this._innerMap).call(e))}}},947:function(e,t,r){"use strict";r.r(t);r(271),r(281),r(282),r(284),r(192),r(287),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(303),r(304),r(307),r(310),r(311),r(312),r(313),r(314),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(338),r(339),r(340),r(341),r(342),r(343),r(344),r(345),r(346),r(347),r(348),r(349),r(350),r(351),r(352),r(353),r(354),r(355),r(356),r(357),r(358),r(359),r(360),r(361),r(362),r(363),r(364),r(365),r(366),r(367),r(368),r(369),r(370),r(371),r(372),r(373),r(374),r(375),r(376),r(377),r(378),r(379),r(380),r(381),r(382),r(383),r(384),r(385),r(386),r(387),r(388),r(389),r(390),r(391),r(392),r(393),r(394),r(395),r(396),r(397),r(398),r(236);var i=r(30),a=r.n(i),n=r(45),o=r.n(n),s=r(7);function onLoaded(){var e,t;a()(e=window.location.href).call(e,"https://trello.com/")?r(1490):a()(t=window.location.href).call(t,`${s.J}/common/exchange.html`)&&r(1492)}window.planywayLoadStartTime=o()(),document.addEventListener("DOMContentLoaded",onLoaded),window.addEventListener("beforeunload",(()=>{document.removeEventListener("DOMContentLoaded",onLoaded)}));try{localStorage.snowplowOutQueue_sp_cf_get&&localStorage.snowplowOutQueue_sp_cf_get.length>1048576&&localStorage.removeItem("snowplowOutQueue_sp_cf_get")}catch(e){}}});